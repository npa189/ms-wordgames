// Copyright (C) Microsoft Corporation. All rights reserved.

(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{HIxo:function(t,e,i){"use strict";i.r(e);var n=i("CcnG"),o=function(){return function(){}}(),s=i("pMnS"),r=i("ueff"),a=i("lOTE"),l=i("lZf+"),h=i("az17"),u=i("T8a3"),d=i("A+oz"),c=i("+fAV"),p=i("bNzf"),g=i("NSTC"),f=i("uu60"),m=i("v9N2"),y=i("xewl"),b=i("wnWa"),w=i("Y7qL"),v=i("ztp1"),S=i("dHXd"),T=i("OI7E"),x=i("8ZQX"),_=i("jeIa"),P=i("e/6H"),z=i("GbEK"),C=i("A5jq"),k=i("hs/0"),M=i("gAQH"),I=i("altv"),B=i("Eo4b"),O=i("YYwF"),A=i("ZYjt"),F=i("gIju"),D=i("v+6v"),L=i("Ip0R"),W=i("NsJB"),E=i("ZYCi"),N=i("EoHo"),G=i("H02e"),R=i("8smc"),j=i("S4q0"),H=i("FO5i"),V=i("m2h9"),U=i("jpRM"),X=i("JscW"),K=i("WYXw"),q=i("9tLy"),J=i("edtR"),Y=i("//Qp"),Z=i("ZCrw"),Q=i("yZn+"),$=i("c9ZP"),tt=i("fA5T"),et=i("qOct"),it=i("T7j5"),nt=i("WQtd"),ot=i("Lepu"),st=i("Pqep"),rt=i("oFL9"),at=i("o5E4"),lt=i("mrSG"),ht=i("mXg+"),ut=function(t){return t[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE",t}({}),dt=function(){return function(){}}(),ct=function(){function t(){}return t.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},t.calculateScreenMetrics=function(t,e,i,n,o){var s;void 0===i&&(i=ut.LANDSCAPE),this.screenMetrics=new dt,this.screenMetrics.windowWidth=window.innerWidth,this.screenMetrics.windowHeight=window.innerHeight;var r=ht.a.wordament;this.screenMetrics.defaultGameWidth=r.defaultGameWidth,this.screenMetrics.defaultGameHeight=r.defaultGameHeight,i=this.screenMetrics.windowWidth<this.screenMetrics.windowHeight?ut.PORTRAIT:ut.LANDSCAPE,(this.screenMetrics.windowWidth<this.screenMetrics.windowHeight&&i===ut.LANDSCAPE||this.screenMetrics.windowHeight<this.screenMetrics.windowWidth&&i===ut.PORTRAIT)&&(this.screenMetrics.windowWidth=(s=[this.screenMetrics.windowHeight,this.screenMetrics.windowWidth])[0],this.screenMetrics.windowHeight=s[1]),n&&o?(this.screenMetrics.maxGameWidth=n,this.screenMetrics.maxGameHeight=o):i===ut.LANDSCAPE?(this.screenMetrics.maxGameWidth=Math.round(this.screenMetrics.defaultGameWidth*(r.maxGameWidth/r.defaultGameWidth)),this.screenMetrics.maxGameHeight=Math.round(this.screenMetrics.defaultGameHeight*(r.maxGameHeight/r.defaultGameHeight))):(this.screenMetrics.maxGameWidth=Math.round(this.screenMetrics.defaultGameWidth*(r.maxGameHeight/r.defaultGameHeight)),this.screenMetrics.maxGameHeight=Math.round(this.screenMetrics.defaultGameHeight*(r.maxGameWidth/r.defaultGameWidth)));var a=this.screenMetrics.windowWidth/this.screenMetrics.windowHeight;return a>(i===ut.LANDSCAPE?r.defaultGameWidth/r.defaultGameHeight:r.defaultGameHeight/r.defaultGameWidth)?(this.screenMetrics.gameHeight=this.screenMetrics.defaultGameHeight,this.screenMetrics.gameWidth=2*Math.ceil(this.screenMetrics.gameHeight*a*.5),this.screenMetrics.gameWidth=Math.min(this.screenMetrics.gameWidth,this.screenMetrics.maxGameWidth),this.screenMetrics.offsetX=.5*(this.screenMetrics.gameWidth-this.screenMetrics.defaultGameWidth),this.screenMetrics.offsetY=0):(this.screenMetrics.gameWidth=this.screenMetrics.defaultGameWidth,this.screenMetrics.gameHeight=2*Math.ceil(this.screenMetrics.gameWidth/a*.5),this.screenMetrics.gameHeight=Math.min(this.screenMetrics.gameHeight,this.screenMetrics.maxGameHeight),this.screenMetrics.offsetX=0,this.screenMetrics.offsetY=.5*(this.screenMetrics.gameHeight-this.screenMetrics.defaultGameHeight)),this.screenMetrics.scaleX=this.screenMetrics.windowWidth/this.screenMetrics.gameWidth,this.screenMetrics.scaleY=this.screenMetrics.windowHeight/this.screenMetrics.gameHeight,this.screenMetrics.orientation=i,this.screenMetrics},t}(),pt=function(t){return t.Exit="exit",t.Show="show",t.Started="started",t.Complete="complete",t.QuickTip="quickTip",t.Paused="paused",t}({});function gt(t,e){var i=this.game.input;if(!i.pollLocked){void 0===e&&(e=!1),void 0!==t.button&&(this.button=t.button),this.isMouse&&this.updateButtons(t),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.screenY===this.pageY&&this.pageY===this.clientY&&(this.pageY-=ft(),this.clientY-=ft(),this.pageX-=mt(),this.clientX-=mt()),this.isMouse&&i.mouse.locked&&!e&&(this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);for(var n=i.moveCallbacks.length;n--;)i.moveCallbacks[n].callback.call(i.moveCallbacks[n].context,this,this.x,this.y,e);return null===this.targetObject||this.game.paused&&!this.targetObject.noPause||!0!==this.targetObject.isDragged?i.interactiveItems.total>0&&this.processInteractiveObjects(e):!1===this.targetObject.update(this)&&(this.targetObject=null),this}}function ft(){for(var t=window,e=0;t.parent!==t;)e+=yt(t.frameElement),t=t.parent;return e}function mt(){for(var t=window,e=0;t.parent!==t;)e+=bt(t.frameElement),t=t.parent;return e}function yt(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function bt(t){for(var e=0;t;)e+=t.offsetLeft,t=t.offsetParent;return e}var wt,vt,St,Tt,xt,_t,Pt,zt,Ct,kt,Mt,It,Bt,Ot,At,Ft=i("ny24"),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lt.__extends)(e,t),e.prototype.init=function(t){this.messageService=t},e.prototype.preload=function(){this.enablePlugins()},e.prototype.create=function(){var t=this,e=ht.a.wordament;if(this.game.scale.scaleMode=Phaser.ScaleManager[e.scaleMode],this.game.stage.disableVisibilityChange=!0,"USER_SCALE"===e.scaleMode){var i=ct.screenMetrics;this.game.scale.setUserScale(i.scaleX,i.scaleY)}this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!1,this.game.device.desktop||this.game.scale.forceOrientation(!0,!1),console.log("DEBUG....................... "+e.debug+"\n           \nSCALE_MODE.................. "+e.scaleMode+"\n           \nDEFAULT_GAME_WIDTH.......... "+e.defaultGameWidth+"\n           \nDEFAULT_GAME_HEIGHT......... "+e.defaultGameHeight+"\n           \nMAX_GAME_WIDTH.............. "+e.maxGameWidth+"\n           \nMAX_GAME_HEIGHT............. "+e.maxGameHeight+"\n           \ngame.width.................. "+this.game.width+"\n           \ngame.height................. "+this.game.height+"\n           \nSOUND_EXTENSIONS_PREFERENCE. "+e.soundExtensionsPreference),this.messageService.wrapperMessage$.pipe(Object(Ft.a)(this.messageService.destroy$)).subscribe({next:function(e){return t.handleOnMessage(e)},error:function(e){return t.onMessageError(e)}}),this.messageService.sendMessageToWrapper({connected:!0}),this.game.input.activePointer.move=gt},e.prototype.handleOnMessage=function(t){"start"===t.state?this.game.state.start("load",!0,!1,t,this.messageService):t.state===pt.Paused&&this.handleOnPause(t.pause)},e.prototype.onMessageError=function(t){console.error(t)},e.prototype.handleOnPause=function(t){this.game.paused=t},e.prototype.enablePlugins=function(){},e}(Phaser.State);!function(t){var e=function(){function t(){}return t.getName=function(){return"ftue-hand"},t.getPNG=function(){return"assets/games/wordament/images/ftue-hand.png"},t}();t.ImagesFtueHand=e}(wt||(wt={})),vt||(vt={}),function(t){var e=function(){function t(){}return t.getName=function(){return"main"},t.getJSONArray=function(){return"assets/games/wordament/atlasses/main.json"},t.getPNG=function(){return"assets/games/wordament/atlasses/main.png"},t}();t.AtlassesMain=e,function(t){!function(t){t.Arrow="arrow",t.BigGem="big-gem",t.BlockTransparent="block-transparent",t.BoardBackgroundShadow="board-background-shadow",t.BoardBackground="board-background",t.ButtonsBtnGreyBigDisabled="buttons/btn-grey-big-disabled",t.ButtonsBtnGreyBigDown="buttons/btn-grey-big-down",t.ButtonsBtnGreyBigOver="buttons/btn-grey-big-over",t.ButtonsBtnGreyBigUp="buttons/btn-grey-big-up",t.ButtonsIconsHint="buttons/icons/hint",t.ButtonsIconsOptions="buttons/icons/options",t.ButtonsIconsRetry="buttons/icons/retry",t.ButtonsIconsShuffle="buttons/icons/shuffle",t.ButtonsIconsZoom="buttons/icons/zoom",t.ButtonsListArrowButtonsListArrowLeft="buttons/list-arrow-buttons/list-arrow-left",t.ButtonsListArrowButtonsListArrowRight="buttons/list-arrow-buttons/list-arrow-right",t.DailyChallengeBoardBackground="daily-challenge-board-background",t.GemIcon="gem-icon",t.PanelDevider="panel-devider",t.PuzzleInfoBkgEngravedStarpanelCenter="puzzle-info/bkg/engraved-starpanel-center",t.PuzzleInfoBkgEngravedStarpanelLeft="puzzle-info/bkg/engraved-starpanel-left",t.PuzzleInfoBkgEngravedStarpanelRight="puzzle-info/bkg/engraved-starpanel-right",t.PuzzleInfoBkgPuzzleInfoBkg="puzzle-info/bkg/puzzle-info-bkg",t.PuzzleInfoBkgPuzzleInfoLowMovesBkg="puzzle-info/bkg/puzzle-info-low-moves-bkg",t.PuzzleInfoNewPuzzle="puzzle-info/new-puzzle",t.PuzzleInfoNextBtnOnHover="puzzle-info/next-btn-onHover",t.PuzzleInfoNextButton="puzzle-info/next-button",t.PuzzleInfoPuzzleInfoHeader="puzzle-info/puzzle-info-header",t.PuzzleInfoPuzzleInfoLowMovesHeader="puzzle-info/puzzle-info-low-moves-header",t.PuzzleInfoStarBkgReset="puzzle-info/star-bkg-reset",t.PuzzleInfoStarBkg="puzzle-info/star-bkg",t.PuzzleInfoStarCircle="puzzle-info/star-circle",t.PuzzleInfoStarFg="puzzle-info/star-fg",t.TilesBonusTile="tiles/bonus-tile",t.TilesHighlightTile="tiles/highlight-tile",t.TilesHintTile="tiles/hint-tile",t.TilesMiniTile="tiles/mini-tile",t.TilesTileCorrect="tiles/tile-correct",t.TilesTileRepeated="tiles/tile-repeated",t.TilesTileSelected="tiles/tile-selected",t.TilesTileWrong="tiles/tile-wrong",t.TilesTile="tiles/tile",t.TooltipBg="tooltip-bg"}(t.Frames||(t.Frames={}))}(e=t.AtlassesMain||(t.AtlassesMain={}))}(St||(St={})),function(t){var e=function(){function t(){}return t.getName=function(){return"background-music"},t.getMP3=function(){return"assets/games/wordament/audio/background-music.mp3"},t}();t.AudioBackgroundMusic=e;var i=function(){function t(){}return t.getName=function(){return"background-music"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/background-music.mp3"},t}();t.AudioDailyChallengeBackgroundMusic=i;var n=function(){function t(){}return t.getName=function(){return"big-gem-appear"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/big-gem-appear.mp3"},t}();t.AudioDailyChallengeBigGemAppear=n;var o=function(){function t(){}return t.getName=function(){return"fireworks1"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/fireworks1.mp3"},t}();t.AudioDailyChallengeFireworks1=o;var s=function(){function t(){}return t.getName=function(){return"fireworks2"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/fireworks2.mp3"},t}();t.AudioDailyChallengeFireworks2=s;var r=function(){function t(){}return t.getName=function(){return"fireworks3"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/fireworks3.mp3"},t}();t.AudioDailyChallengeFireworks3=r;var a=function(){function t(){}return t.getName=function(){return"fireworks4"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/fireworks4.mp3"},t}();t.AudioDailyChallengeFireworks4=a;var l=function(){function t(){}return t.getName=function(){return"gem-found-1"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/gem-found/gem-found-1.mp3"},t}();t.AudioDailyChallengeGemFoundGemFound1=l;var h=function(){function t(){}return t.getName=function(){return"gem-found-2"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/gem-found/gem-found-2.mp3"},t}();t.AudioDailyChallengeGemFoundGemFound2=h;var u=function(){function t(){}return t.getName=function(){return"gem-found-3"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/gem-found/gem-found-3.mp3"},t}();t.AudioDailyChallengeGemFoundGemFound3=u;var d=function(){function t(){}return t.getName=function(){return"exceptional"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/long-words-congrats/exceptional.mp3"},t}();t.AudioDailyChallengeLongWordsCongratsExceptional=d;var c=function(){function t(){}return t.getName=function(){return"masterful"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/long-words-congrats/masterful.mp3"},t}();t.AudioDailyChallengeLongWordsCongratsMasterful=c;var p=function(){function t(){}return t.getName=function(){return"nice"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/long-words-congrats/nice.mp3"},t}();t.AudioDailyChallengeLongWordsCongratsNice=p;var g=function(){function t(){}return t.getName=function(){return"superb"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/long-words-congrats/superb.mp3"},t}();t.AudioDailyChallengeLongWordsCongratsSuperb=g;var f=function(){function t(){}return t.getName=function(){return"lost"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/lost.mp3"},t}();t.AudioDailyChallengeLost=f;var m=function(){function t(){}return t.getName=function(){return"red-pulse"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/red-pulse.mp3"},t}();t.AudioDailyChallengeRedPulse=m;var y=function(){function t(){}return t.getName=function(){return"won"},t.getMP3=function(){return"assets/games/wordament/audio/daily-challenge/won.mp3"},t}();t.AudioDailyChallengeWon=y;var b=function(){function t(){}return t.getName=function(){return"end-game-1"},t.getMP3=function(){return"assets/games/wordament/audio/end-game/end-game-1.mp3"},t}();t.AudioEndGameEndGame1=b;var w=function(){function t(){}return t.getName=function(){return"end-game-2"},t.getMP3=function(){return"assets/games/wordament/audio/end-game/end-game-2.mp3"},t}();t.AudioEndGameEndGame2=w;var v=function(){function t(){}return t.getName=function(){return"tiles-appear-1"},t.getMP3=function(){return"assets/games/wordament/audio/game-start/tiles-appear-1.mp3"},t}();t.AudioGameStartTilesAppear1=v;var S=function(){function t(){}return t.getName=function(){return"tiles-appear-2"},t.getMP3=function(){return"assets/games/wordament/audio/game-start/tiles-appear-2.mp3"},t}();t.AudioGameStartTilesAppear2=S;var T=function(){function t(){}return t.getName=function(){return"hint"},t.getMP3=function(){return"assets/games/wordament/audio/hint.mp3"},t}();t.AudioHint=T;var x=function(){function t(){}return t.getName=function(){return"next-puzzle-blocked"},t.getMP3=function(){return"assets/games/wordament/audio/next-puzzle/next-puzzle-blocked.mp3"},t}();t.AudioNextPuzzleNextPuzzleBlocked=x;var _=function(){function t(){}return t.getName=function(){return"next-puzzle-open"},t.getMP3=function(){return"assets/games/wordament/audio/next-puzzle/next-puzzle-open.mp3"},t}();t.AudioNextPuzzleNextPuzzleOpen=_;var P=function(){function t(){}return t.getName=function(){return"popup"},t.getMP3=function(){return"assets/games/wordament/audio/popup.mp3"},t}();t.AudioPopup=P;var z=function(){function t(){}return t.getName=function(){return"rotate-2"},t.getMP3=function(){return"assets/games/wordament/audio/rotate/rotate-2.mp3"},t}();t.AudioRotateRotate2=z;var C=function(){function t(){}return t.getName=function(){return"rotate-3"},t.getMP3=function(){return"assets/games/wordament/audio/rotate/rotate-3.mp3"},t}();t.AudioRotateRotate3=C;var k=function(){function t(){}return t.getName=function(){return"rotate-4"},t.getMP3=function(){return"assets/games/wordament/audio/rotate/rotate-4.mp3"},t}();t.AudioRotateRotate4=k;var M=function(){function t(){}return t.getName=function(){return"rotate"},t.getMP3=function(){return"assets/games/wordament/audio/rotate/rotate.mp3"},t}();t.AudioRotateRotate=M;var I=function(){function t(){}return t.getName=function(){return"star-earned"},t.getMP3=function(){return"assets/games/wordament/audio/star-earned.mp3"},t}();t.AudioStarEarned=I;var B=function(){function t(){}return t.getName=function(){return"tile-move-1"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-1.mp3"},t}();t.AudioTileMoveTileMove1=B;var O=function(){function t(){}return t.getName=function(){return"tile-move-10"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-10.mp3"},t}();t.AudioTileMoveTileMove10=O;var A=function(){function t(){}return t.getName=function(){return"tile-move-2"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-2.mp3"},t}();t.AudioTileMoveTileMove2=A;var F=function(){function t(){}return t.getName=function(){return"tile-move-3"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-3.mp3"},t}();t.AudioTileMoveTileMove3=F;var D=function(){function t(){}return t.getName=function(){return"tile-move-4"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-4.mp3"},t}();t.AudioTileMoveTileMove4=D;var L=function(){function t(){}return t.getName=function(){return"tile-move-5"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-5.mp3"},t}();t.AudioTileMoveTileMove5=L;var W=function(){function t(){}return t.getName=function(){return"tile-move-6"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-6.mp3"},t}();t.AudioTileMoveTileMove6=W;var E=function(){function t(){}return t.getName=function(){return"tile-move-7"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-7.mp3"},t}();t.AudioTileMoveTileMove7=E;var N=function(){function t(){}return t.getName=function(){return"tile-move-8"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-8.mp3"},t}();t.AudioTileMoveTileMove8=N;var G=function(){function t(){}return t.getName=function(){return"tile-move-9"},t.getMP3=function(){return"assets/games/wordament/audio/tile-move/tile-move-9.mp3"},t}();t.AudioTileMoveTileMove9=G;var R=function(){function t(){}return t.getName=function(){return"word-correct"},t.getMP3=function(){return"assets/games/wordament/audio/word-validation/word-correct.mp3"},t}();t.AudioWordValidationWordCorrect=R;var j=function(){function t(){}return t.getName=function(){return"word-repeated"},t.getMP3=function(){return"assets/games/wordament/audio/word-validation/word-repeated.mp3"},t}();t.AudioWordValidationWordRepeated=j;var H=function(){function t(){}return t.getName=function(){return"word-wrong"},t.getMP3=function(){return"assets/games/wordament/audio/word-validation/word-wrong.mp3"},t}();t.AudioWordValidationWordWrong=H;var V=function(){function t(){}return t.getName=function(){return"zoom1"},t.getMP3=function(){return"assets/games/wordament/audio/zoom/zoom1.mp3"},t}();t.AudioZoomZoom1=V;var U=function(){function t(){}return t.getName=function(){return"zoom2"},t.getMP3=function(){return"assets/games/wordament/audio/zoom/zoom2.mp3"},t}();t.AudioZoomZoom2=U;var X=function(){function t(){}return t.getName=function(){return"zoom3"},t.getMP3=function(){return"assets/games/wordament/audio/zoom/zoom3.mp3"},t}();t.AudioZoomZoom3=X}(Tt||(Tt={})),xt||(xt={}),_t||(_t={}),Pt||(Pt={}),zt||(zt={}),function(t){var e=function(){function t(){}return t.getName=function(){return"gem-disappear"},t.getJSON=function(){return"assets/games/wordament/json/gem-disappear.json"},t}();t.JsonGemDisappear=e;var i=function(){function t(){}return t.getName=function(){return"particle-anim"},t.getJSON=function(){return"assets/games/wordament/json/particle-anim.json"},t}();t.JsonParticleAnim=i;var n=function(){function t(){}return t.getName=function(){return"particle-lite"},t.getJSON=function(){return"assets/games/wordament/json/particle-lite.json"},t}();t.JsonParticleLite=n}(Ct||(Ct={})),kt||(kt={}),Mt||(Mt={}),It||(It={}),Bt||(Bt={}),Ot||(Ot={}),function(t){var e=function(){function t(){}return t.getKey=function(){return"big-gem-appear"},t.getJSONUrl=function(){return"assets/games/wordament/spine/big-gem-appear.json"},t}();t.SpineBigGemAppear=e;var i=function(){function t(){}return t.getKey=function(){return"big-gem-break"},t.getJSONUrl=function(){return"assets/games/wordament/spine/big-gem-break.json"},t}();t.SpineBigGemBreak=i;var n=function(){function t(){}return t.getKey=function(){return"lock"},t.getJSONUrl=function(){return"assets/games/wordament/spine/lock.json"},t}();t.SpineLock=n}(At||(At={}));var Lt,Wt=function(){function t(){}return t.loadAllAssets=function(t,e,i){this.game=t,e&&this.game.load.onLoadComplete.addOnce(e,i),this.loadImages(),this.loadSpritesheets(),this.loadAtlases(),this.loadAudio(),this.loadAudiosprites(),this.loadBitmapFonts(),this.loadJSON(),this.loadXML(),this.loadText(),this.loadScripts(),this.loadShaders(),this.loadMisc(),this.loadSpine(),0===this.game.load._fileList.length&&this.game.load.onLoadComplete.dispatch()},t.waitForSoundDecoding=function(t,e){this.soundKeys.length>0?this.game.sound.setDecodedCallback(this.soundKeys,t,e):t.call(e)},t.loadImages=function(){for(var t in wt)if(!this.game.cache.checkImageKey(wt[t].getName()))for(var e=0,i=Object.getOwnPropertyNames(wt[t]);e<i.length;e++){var n=i[e];"getName"!==n&&-1!==n.indexOf("get")&&this.game.load.image(wt[t].getName(),wt[t][n]())}},t.loadSpritesheets=function(){for(var t in vt)if(!this.game.cache.checkImageKey(vt[t].getName())){for(var e=null,i=0,n=Object.getOwnPropertyNames(vt[t]);i<n.length;i++){var o=n[i];"getName"!==o&&"getFrameWidth"!==o&&"getFrameHeight"!==o&&"getFrameMax"!==o&&"getMargin"!==o&&"getSpacing"!==o&&-1!==o.indexOf("get")&&(e=o)}this.game.load.spritesheet(vt[t].getName(),vt[t][e](),vt[t].getFrameWidth(),vt[t].getFrameHeight(),vt[t].getFrameMax(),vt[t].getMargin(),vt[t].getSpacing())}},t.loadAtlases=function(){for(var t in St)if(!this.game.cache.checkImageKey(St[t].getName())){for(var e=null,i=null,n=0,o=Object.getOwnPropertyNames(St[t]);n<o.length;n++){var s=o[n];"getXML"!==s&&"getJSONArray"!==s&&"getJSONHash"!==s||-1===s.indexOf("get")?"getName"!==s&&"Frames"!==s&&-1!==s.indexOf("get")&&(e=s):i=s}"getXML"===i?this.game.load.atlasXML(St[t].getName(),St[t][e](),St[t].getXML()):"getJSONArray"===i?this.game.load.atlasJSONArray(St[t].getName(),St[t][e](),St[t].getJSONArray()):"getJSONHash"===i&&this.game.load.atlasJSONHash(St[t].getName(),St[t][e](),St[t].getJSONHash())}},t.orderAudioSourceArrayBasedOnSoundExtensionPreference=function(t){var e=this,i=[],n=function(n){var o=t.filter(function(t){return t.substring(t.lastIndexOf(".")+1,t.length)===e.soundExtensionsPreference[n]});i=i.concat(o)};for(var o in this.soundExtensionsPreference)n(o);return i},t.loadAudio=function(){for(var t in Tt){var e=Tt[t].getName();if(this.soundKeys.push(e),!this.game.cache.checkSoundKey(e)){for(var i=[],n=0,o=Object.getOwnPropertyNames(Tt[t]);n<o.length;n++){var s=o[n];"getName"!==s&&-1!==s.indexOf("get")&&i.push(Tt[t][s]())}i=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(i),this.game.load.audio(e,i,!0)}}},t.loadAudiosprites=function(){for(var t in xt){var e=xt[t].getName();if(this.soundKeys.push(e),!this.game.cache.checkSoundKey(e)){for(var i=[],n=0,o=Object.getOwnPropertyNames(xt[t]);n<o.length;n++){var s=o[n];"getName"!==s&&"getJSON"!==s&&"Sprites"!==s&&-1!==s.indexOf("get")&&i.push(xt[t][s]())}i=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(i),this.game.load.audiosprite(e,i,xt[t].getJSON(),null,!0)}}},t.loadBitmapFonts=function(){for(var t in zt)if(!this.game.cache.checkBitmapFontKey(zt[t].getName())){for(var e=null,i=null,n=0,o=Object.getOwnPropertyNames(zt[t]);n<o.length;n++){var s=o[n];"getXML"!==s&&"getFNT"!==s||-1===s.indexOf("get")?"getName"!==s&&-1!==s.indexOf("get")&&(e=s):i=s}this.game.load.bitmapFont(zt[t].getName(),zt[t][e](),zt[t][i]())}},t.loadJSON=function(){for(var t in Ct)this.game.cache.checkJSONKey(Ct[t].getName())||this.game.load.json(Ct[t].getName(),Ct[t].getJSON(),!0)},t.loadXML=function(){for(var t in kt)this.game.cache.checkXMLKey(kt[t].getName())||this.game.load.xml(kt[t].getName(),kt[t].getXML(),!0)},t.loadText=function(){for(var t in Mt)this.game.cache.checkTextKey(Mt[t].getName())||this.game.load.text(Mt[t].getName(),Mt[t].getTXT(),!0)},t.loadScripts=function(){for(var t in It)this.game.load.script(It[t].getName(),It[t].getJS())},t.loadShaders=function(){for(var t in Bt)this.game.cache.checkShaderKey(Bt[t].getName())||this.game.load.shader(Bt[t].getName(),Bt[t].getFRAG(),!0)},t.loadMisc=function(){for(var t in Ot)this.game.cache.checkBinaryKey(Ot[t].getName())||this.game.load.binary(Ot[t].getName(),Ot[t].getFile())},t.loadSpine=function(){for(var t in At)this.game.load.spine(At[t].getKey(),At[t].getJSONUrl(),void 0)},t.game=null,t.soundKeys=[],t.soundExtensionsPreference=ht.a.wordament.soundExtensionsPreference,t}(),Et=function(){function t(){}return t.initialize=function(e){t.game=e},t.sprite=function(e,i,n,o,s,r){var a=t.game.add.sprite(e,i,St.AtlassesMain.getName(),n);return s&&(a.anchor=s),r&&(a.scale=r),o.addChild(a),a},t.nineSliceSprite=function(e,i,n,o,s,r,a,l){var h=new PhaserNineSlice.NineSlice(t.game,e,i,St.AtlassesMain.getName(),r,n,o,s);h.parent=a;var u=t.game.add.existing(h);return l&&(u.anchor=l),a.addChild(u),u},t.text=function(e,i,n,o,s,r,a){var l=t.game.add.text(e,i,n,o);return r&&(l.anchor=r),a&&(l.scale=a),s.addChild(l),l},t.mask=function(e,i,n,o,s){var r=t.game.add.graphics(e,i);return r.beginFill(16777215,.4),r.drawRect(0,0,n,o),s.addChild(r),r},t}(),Nt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reset",{get:function(){return this._reset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resetDone",{get:function(){return this._resetDone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"puzzle",{get:function(){return this._puzzle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"puzzleId",{get:function(){return this._puzzleId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this._puzzle._cells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"words",{get:function(){return this._puzzle._words},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._puzzle._title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalScore",{get:function(){return this._puzzle._totalScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"puzzleType",{get:function(){return this._puzzle._puzzleType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectiveDefinitions",{get:function(){var t=[];return this._puzzle._objectiveDefinitions.forEach(function(e){t.push(new Gt(e._type,JSON.parse(e._json)))}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"themedCommonWordsCount",{get:function(){var t=0;return this._puzzle._words.forEach(function(e){-1!==e.attributeFlags.indexOf("Theme")&&-1===e.attributeFlags.indexOf("Expert")&&t++}),t.toString()},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e,i,n,o,s){this._puzzleId=e,this._reset=n,this._resetDone=o,this._language=s,this.initBoardData(t,i)},t.prototype.destroy=function(){delete this._puzzle,delete t._i},t.prototype.initBoardData=function(t,e){var i="dailyChallenge"===e?"puzzle":"puzzle2";this._puzzle=t?"string"==typeof t?JSON.parse(t):t:Et.game.cache.getJSON(i)},t}(),Gt=function(){function t(t,e){this._type=t,this._properties=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this._properties},enumerable:!0,configurable:!0}),t}(),Rt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onUpdate",{get:function(){return this._onUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onMusicSettingChange",{get:function(){return this._onMusicSettingChange},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._data={},this._data.settings=t,this.initSignals()},t.prototype.destroy=function(){this.disposeSignals(),delete this._data,delete t._instance},t.prototype.updateSettings=function(t){this._data=t,this._onUpdate.dispatch(t)},t.prototype.updateMusicSetting=function(t){this._data.music=t,this._onMusicSettingChange.dispatch()},t.prototype.initSignals=function(){this._onUpdate=new Phaser.Signal,this._onMusicSettingChange=new Phaser.Signal},t.prototype.disposeSignals=function(){this._onUpdate.dispose(),this._onMusicSettingChange.dispose()},t}(),jt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.playStarEarned=function(){this.playSFX(Tt.AudioStarEarned.getName())},t.prototype.initialize=function(t){var e=this;this._sfxVolume=.8,this._audioVolume=.3,this.game=t,Rt.i.onUpdate.add(function(t){return e.handleSettingsUpdated(t.settings)}),Rt.i.onMusicSettingChange.add(this.handleMusicChange,this)},t.prototype.destroy=function(){this.currentSfx&&this.currentSfx.destroy(!0),this.currentAudio&&this.currentAudio.destroy(!0),delete this.game,delete this.currentSfx,delete this.currentAudio,delete t._i},t.prototype.playAudioPopup=function(){this.playSFX(Tt.AudioPopup.getName())},t.prototype.playTilesAppear=function(){switch(this.game.rnd.integerInRange(1,2)){case 1:this.playSFX(Tt.AudioGameStartTilesAppear1.getName());break;case 2:this.playSFX(Tt.AudioGameStartTilesAppear2.getName())}},t.prototype.playGemFound=function(){switch(this.game.rnd.integerInRange(1,4)){case 1:this.playSFX(Tt.AudioDailyChallengeGemFoundGemFound1.getName()),this.playSFX(Tt.AudioDailyChallengeFireworks1.getName());break;case 2:this.playSFX(Tt.AudioDailyChallengeGemFoundGemFound2.getName()),this.playSFX(Tt.AudioDailyChallengeFireworks2.getName());break;case 3:this.playSFX(Tt.AudioDailyChallengeGemFoundGemFound3.getName()),this.playSFX(Tt.AudioDailyChallengeFireworks3.getName());break;case 4:this.playSFX(Tt.AudioDailyChallengeGemFoundGemFound1.getName()),this.playSFX(Tt.AudioDailyChallengeFireworks4.getName());break;default:this.playSFX(Tt.AudioDailyChallengeGemFoundGemFound1.getName()),this.playSFX(Tt.AudioDailyChallengeFireworks1.getName())}},t.prototype.playExceptional=function(){this.playSFX(Tt.AudioDailyChallengeLongWordsCongratsExceptional.getName())},t.prototype.playSuperb=function(){this.playSFX(Tt.AudioDailyChallengeLongWordsCongratsSuperb.getName())},t.prototype.playNice=function(){this.playSFX(Tt.AudioDailyChallengeLongWordsCongratsNice.getName())},t.prototype.playMasterful=function(){this.playSFX(Tt.AudioDailyChallengeLongWordsCongratsMasterful.getName())},t.prototype.playDCLost=function(){this.playSFX(Tt.AudioDailyChallengeLost.getName())},t.prototype.playDCWon=function(){this.playSFX(Tt.AudioDailyChallengeWon.getName())},t.prototype.playRedPulse=function(){this.playSFX(Tt.AudioDailyChallengeRedPulse.getName())},t.prototype.playDailyChallengeBackgroundMusic=function(){this.playAudio(Tt.AudioDailyChallengeBackgroundMusic.getName())},t.prototype.playBackgroundMusic=function(){this.playAudio(Tt.AudioBackgroundMusic.getName())},t.prototype.stopBackgroundMusic=function(){this.stopAudio()},t.prototype.playBigGemAppear=function(){this.playSFX(Tt.AudioDailyChallengeBigGemAppear.getName())},t.prototype.playZoom=function(){switch(this.game.rnd.integerInRange(1,3)){case 1:this.playSFX(Tt.AudioZoomZoom1.getName());break;case 2:this.playSFX(Tt.AudioZoomZoom2.getName());break;case 3:this.playSFX(Tt.AudioZoomZoom3.getName());break;default:this.playSFX(Tt.AudioZoomZoom1.getName())}},t.prototype.playEndGame=function(){switch(this.game.rnd.integerInRange(1,2)){case 1:this.playSFX(Tt.AudioEndGameEndGame1.getName());break;case 2:this.playSFX(Tt.AudioEndGameEndGame2.getName());break;default:this.playSFX(Tt.AudioEndGameEndGame1.getName())}},t.prototype.playMoveTile=function(){switch(this.game.rnd.integerInRange(1,10)){case 1:this.playSFX(Tt.AudioTileMoveTileMove1.getName());break;case 2:this.playSFX(Tt.AudioTileMoveTileMove2.getName());break;case 3:this.playSFX(Tt.AudioTileMoveTileMove3.getName());break;case 4:this.playSFX(Tt.AudioTileMoveTileMove4.getName());break;case 5:this.playSFX(Tt.AudioTileMoveTileMove5.getName());break;case 6:this.playSFX(Tt.AudioTileMoveTileMove6.getName());break;case 7:this.playSFX(Tt.AudioTileMoveTileMove7.getName());break;case 8:this.playSFX(Tt.AudioTileMoveTileMove8.getName());break;case 9:this.playSFX(Tt.AudioTileMoveTileMove9.getName());break;case 10:this.playSFX(Tt.AudioTileMoveTileMove10.getName());break;default:this.playSFX(Tt.AudioTileMoveTileMove1.getName())}},t.prototype.playRotate=function(){switch(this.game.rnd.integerInRange(0,4)){case 0:this.playSFX(Tt.AudioRotateRotate.getName());break;case 1:this.playSFX(Tt.AudioRotateRotate2.getName());break;case 2:this.playSFX(Tt.AudioRotateRotate3.getName());break;case 3:this.playSFX(Tt.AudioRotateRotate4.getName());break;default:this.playSFX(Tt.AudioRotateRotate.getName())}},t.prototype.playNextPuzzleBlocked=function(){this.playSFX(Tt.AudioNextPuzzleNextPuzzleBlocked.getName())},t.prototype.playNextPuzzleButtonOpen=function(){this.playSFX(Tt.AudioNextPuzzleNextPuzzleOpen.getName())},t.prototype.playHint=function(){this.playSFX(Tt.AudioHint.getName())},t.prototype.playWordRepeated=function(){this.playSFX(Tt.AudioWordValidationWordRepeated.getName())},t.prototype.playNegativeCombo=function(){this.playSFX(Tt.AudioWordValidationWordWrong.getName())},t.prototype.playPositiveCombo=function(){this.playSFX(Tt.AudioWordValidationWordCorrect.getName())},t.prototype.playSFX=function(t){this.currentSfx=this.game.add.audio(t),Rt.i.data.settings.soundEffects&&this.currentSfx.play(null,0,this._sfxVolume,!1)},t.prototype.playAudio=function(t){this.currentAudio=this.game.add.audio(t),Rt.i.data.settings.music&&this.currentAudio.play(null,0,this._audioVolume,!0)},t.prototype.stopAudio=function(){this.currentAudio&&this.currentAudio.stop()},t.prototype.handleSettingsUpdated=function(t){this.currentSfx&&(t.soundEffects||this.currentSfx.stop())},t.prototype.handleMusicChange=function(){this.currentAudio&&(Rt.i.data.music&&!this.currentAudio.isPlaying?this.currentAudio.play(null,0,this._audioVolume,!0):Rt.i.data.music||this.currentAudio.stop())},t}(),Ht=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e){this._gameData=t,this._mainData=e},t.prototype.destroy=function(){delete this._gameData,delete t._instance},t.prototype.getString=function(t,e){return this._gameData[t]||e},t.prototype.getStringFromMain=function(t,e){return this._mainData[t]||e},t}(),Vt=function(t){return t.Normal="#ffffff",t.Repeated="#fef65b",t.SpecialWord="#60DFFF",t.LongWord="#FFDC58",t.Fresh="#51FF4D",t.onHover="#C8C8C8",t}({}),Ut=function(t){return t[t.Normal=0]="Normal",t[t.Repeated=1]="Repeated",t[t.SpecialWord=2]="SpecialWord",t[t.LongWord=3]="LongWord",t}({}),Xt=St.AtlassesMain.Frames,Kt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{set:function(t){this._game=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonUnlocked",{get:function(){return this._buttonUnlocked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onValidateWordSparkleComplete",{get:function(){return this._onValidateWordSparkleComplete},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.initSignals()},t.prototype.destroy=function(){this.disposeSignals(),this.starText&&this.starText.exists&&this.starText.destroy(),delete this._game,delete this.starText,delete t._i},t.prototype.startTileAppear=function(t,e,i){return this._game.add.tween(t.scale).to({x:i,y:i},400,Phaser.Easing.Back.Out,!0,1e3+120*(e+1)).onComplete},t.prototype.startHideAllAnimation=function(t,e){this._game.input.enabled=!1,this._game.add.tween(t).to({alpha:0},e,null,!0)},t.prototype.hideTile=function(t,e){return this._game.add.tween(t).to({angle:180},550,null,!0,900+50*e),this._game.add.tween(t.scale).to({x:0,y:0},400,null,!0,1050+50*e)},t.prototype.startTilesAnimation=function(t,e){t.showHighlight(),t.highlightTile.alpha=0;var i=this._game.add.tween(t.highlightTile);return i.to({alpha:1},100+100*(e+1),null,!0,100*e,0,!0),i.onComplete.add(function(){t.hideHighlight()},this),i},t.prototype.startShowWellDoneAnimation=function(t){if(this._game.input.enabled=!1,3===t){var e=Et.text(900-ht.a.wordament.resizeGap,this._game.world.centerY,Ht.i.getString("wellDone","Well Done!"),{font:"bold SegoeUI",fontSize:170,fontStyle:"italic",fill:"#F3FFFE"},this._game.world,new Phaser.Point(.5,.5));e.scale.set(.3,.3),this._game.add.tween(e.scale).to({x:1,y:1},600,Phaser.Easing.Back.Out,!0),this._game.add.tween(e.position).to({x:e.x+80},2500,null,!0,500);var i=this._game.add.tween(e).to({alpha:0},350,null,!0,3e3);return i.onComplete.add(function(){return e.destroy()},this),i}},t.prototype.startWordAddedAnimation=function(t,e){e.fill=Vt.Fresh;var i=this._game.add.tween(e.scale);i.to({x:1.5,y:1.5},250,null,!0,null,0,!0),i.onComplete.add(function(){e.fill=t.state===Ut.SpecialWord?Vt.SpecialWord:t.state===Ut.LongWord?Vt.LongWord:Vt.Normal},this)},t.prototype.startWordRepeatAnimation=function(t,e){if(!e.isRepeated()&&!e.isFresh()){e.fill=Vt.Repeated;var i=e.formationText.x,n=this._game.add.tween(e.formationText);return n.to({x:e.formationText.x+10},250,Phaser.Easing.Back.Out,!0,null,0,!0),n.onComplete.add(function(){e.fill=t.state===Ut.SpecialWord?Vt.SpecialWord:t.state===Ut.LongWord?Vt.LongWord:Vt.Normal,e.formationText.x=i},this),n}},t.prototype.startObjectAppear=function(t){this._game.add.tween(t).to({alpha:1},1300,null,!0,800)},t.prototype.animateScore=function(t,e,i,n,o){var s=this,r=Et.text(t+ht.a.wordament.resizeGap-10,e,"+"+i.toString(),{font:"bold SegoeUI",fontSize:90*o,fill:"#79EF97",stroke:"#022A48",strokeThickness:5},n,new Phaser.Point(.5,.5));Et.game.add.tween(r.position).to({y:r.position.y-160*o},450,null,!0,250).onComplete.add(function(){setTimeout(function(){return r.destroy()},350),s._onValidateWordSparkleComplete.dispatch()},this)},t.prototype.animateScoreText=function(t,e,i,n){var o=this.getLabel(i,n);this.showFormationCongratulateAnimation(t,e,o)},t.prototype.animateDCScoreText=function(t,e,i){var n=this.getDCLabel(i);this.showFormationCongratulateAnimation(t,e,n)},t.prototype.startStarProgressAnimation=function(t,e,i){var n=this._game.add.tween({x:0});n.to({x:1},500,null,!0),n.onUpdateCallback(function(n,o){t.progress=e+i*o},this),n.onComplete.add(function(t,n,o){o.progress=e+i},this,null,t)},t.prototype.startStarEarnAnimation=function(t,e,i,n,o,s,r){var a=this,l=Et.sprite(t.x,t.y,Xt.PuzzleInfoStarFg,this._game.world,new Phaser.Point(.5,.5));if(l.scale.set(2.5,2.5),this.starText&&this._game.world.bringToTop(this.starText),i&&n.visible){var h=Et.sprite(t.x,t.y,Xt.PuzzleInfoStarFg,this._game.world,new Phaser.Point(.5,.5));h.scale.set(0,0);var u=this._game.add.tween(h.scale);u.to({x:2.2,y:2.2},100,null,!0,0),u.onComplete.addOnce(function(t,i,o){a.startStarToButtonTween(t,i,o,e,n,r),a.startBigStarPulseAnimation(l)},this,null,h)}else this.startBigStarPulseAnimation(l)},t.prototype.showWarningForLowMoves=function(t){this.blinkTween=this._game.add.tween(t),this.blinkTween.to({alpha:1},600,Phaser.Easing.Cubic.In,!0,0,0,!0).loop(!0)},t.prototype.stopWarningForLowMoves=function(){this.blinkTween&&this.blinkTween.loop(!1)},t.prototype.removeGem=function(t,e){var i=this;this.rotateGem(t,20,180).onComplete.add(function(){i.rotateGem(t,0,50).onComplete.add(function(){i.rotateGem(t,-20,150)},i),i.scaleGem(t,e+.2,170,50).onComplete.add(function(){i.scaleGem(t,0,100,0)},i)},this)},t.prototype.removeBigGem=function(t,e){var i=this._game.add.spine(t.x+4,t.y+10,At.SpineBigGemBreak.getKey());i.pivot.set(.5,.5),i.scale.set(e-.06,e-.06),i.setAnimationByName(0,"animation",!1),i.onComplete.add(function(){return i.kill()},this)},t.prototype.playBigGemAppear=function(t,e){var i=this._game.add.spine(t.x+4,t.y+10,At.SpineBigGemAppear.getKey(),void 0);return i.pivot.set(.5,.5),i.scale.set(e-.06,e-.06),i.angle=270,i.setAnimationByName(0,"animation",!1),i.onComplete.add(function(){return i.kill()},this),i.onComplete},t.prototype.startStarTextAnimation=function(t,e,i){var n=this;if(!i){var o=e?Ht.i.getString("puzzleCompleted","Puzzle Completed!"):Ht.i.getString("starEarned","Star Earned!"),s=e?{font:"bold SegoeUI",fontStyle:"italic",fontSize:65,strokeThickness:3,stroke:"#866A44",fill:"#FFF6C1"}:{font:"bold SegoeUI",fontStyle:"italic",fontSize:78,fill:"#FFDF5E"};t.x-=ht.a.wordament.resizeGap,this.starText=Et.text(t.x,t.y,o,s,this._game.world,new Phaser.Point(.5,.5)),this._game.add.tween(this.starText.scale).from({x:1.2,y:1.2},200,null,!0),this._game.add.tween(this.starText.position).to({x:t.x-40},2e3,null,!0,300).onComplete.add(function(){n._game.add.tween(n.starText).to({alpha:0},350,null,!0)},this),this._game.world.bringToTop(this.starText)}},t.prototype.showFormationCongratulateAnimation=function(t,e,i){var n=this,o=Et.text(t,e,i,{font:"bold SegoeUI",fontSize:70,fill:"#ffffff",stroke:"#022A48",strokeThickness:7},this._game.world,new Phaser.Point(.5,.5));o.scale.set(0,0),this._game.add.tween(o.scale).to({x:1,y:1},350,Phaser.Easing.Back.Out,!0).onComplete.add(function(){return setTimeout(function(){return n._game.add.tween(o).to({x:o.x+15},1e3,null,!0).onComplete.add(function(){return n._game.add.tween(o).to({alpha:0},350,null,!0).onComplete.add(function(){return o.destroy()},n)},n)},250)},this)},t.prototype.rotateGem=function(t,e,i){return this._game.add.tween(t).to({angle:e},i,null,!0)},t.prototype.scaleGem=function(t,e,i,n){return this._game.add.tween(t.scale).to({x:e,y:e},i,null,!0,n)},t.prototype.initSignals=function(){this._buttonUnlocked=new Phaser.Signal,this._onValidateWordSparkleComplete=new Phaser.Signal},t.prototype.disposeSignals=function(){this._buttonUnlocked.dispose(),this._onValidateWordSparkleComplete.dispose()},t.prototype.startStarToButtonTween=function(t,e,i,n,o,s){var r=this._game.make.particleEffect(i.worldPosition.x,i.worldPosition.y,this._game.cache.getJSON(Ct.JsonParticleLite.getName()));this._game.world.addChild(r);var a=this._game.add.tween(i);a.to({x:[i.x-i.width,n.x-ht.a.wordament.resizeGap],y:[i.y+400,n.y],angle:360},1100,Phaser.Easing.Quintic.In,!0),a.onUpdateCallback(function(){r.children.forEach(function(t,e){t.emitX=i.worldPosition.x-r.worldPosition.x,t.emitY=i.worldPosition.y-r.worldPosition.y})}),this._game.add.tween(i.scale).to({x:1,y:1},1100,null,!0),a.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),a.onComplete.addOnce(this.startButtonAnimation,this,null,o,i,s,r)},t.prototype.startBigStarPulseAnimation=function(t){var e=this._game.add.tween(t.scale);e.to({x:1,y:1,alpha:0},950,Phaser.Easing.Bounce.Out,!0),e.onComplete.add(function(){t.visible=!1})},t.prototype.startButtonAnimation=function(t,e,i,n,o,s){jt.i.playNextPuzzleButtonOpen();var r=this._game.add.tween(i.scale);r.to({x:1.2,y:1.2},150,null,!0,0,0,!0),r.onStart.add(function(){n.visible=!1},this),s&&s.removeAllEmitters(),o||r.onComplete.add(this.startBreakAnimation,this,null,i)},t.prototype.startBreakAnimation=function(t,e,i){var n=this._game.add.spine(i.worldPosition.x,i.worldPosition.y+30,At.SpineLock.getKey());n.pivot.set(.5,.5),n.scale.set(.35,.35),n.setAnimationByName(0,"animation",!1),this._game.time.events.add(2e3,this.unlockButton,this)},t.prototype.unlockButton=function(){this._buttonUnlocked.dispatch()},t.prototype.getLabel=function(t,e){var i;return t>=32?i=Ht.i.getString("incredible","Incredible"):t>=25?i=Ht.i.getString("Excellent","Excellent"):t>=15?i=Ht.i.getString("Nice","Nice"):6===e?i=Ht.i.getString("Long_Word","Long Word"):7===e?i=Ht.i.getString("Very_Long_Word","Very Long Word"):e>=8&&(i=Ht.i.getString("Super_Long_Word","Super Long Word")),i},t.prototype.getDCLabel=function(t){var e="";return t>=8?(jt.i.playMasterful(),e=Ht.i.getString("DC_Super_Long_Word","Masterful!")):7===t?(jt.i.playExceptional(),e=Ht.i.getString("DC_Very_Long_Word","Exceptional!")):6===t?(jt.i.playSuperb(),e=Ht.i.getString("DC_Long_Word","Superb!")):5===t&&(jt.i.playNice(),e=Ht.i.getString("DC_Nice_Word","Nice!")),e},t}(),qt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this.storageKey=t},t.prototype.setItem=function(t,e){localStorage.setItem(this.storageKey+t,e)},t.prototype.getItem=function(t){return localStorage.getItem(this.storageKey+t)},t.prototype.savePuzzle=function(t,e){this.setItem("puzzle."+t,e)},t.prototype.getPuzzle=function(t){return this.getItem("puzzle."+t)},t}(),Jt=function(t){function e(){return t.call(this)||this}return Object(lt.__extends)(e,t),e.prototype.init=function(t,e){this.messageService=e,this.difficulty=t.difficulty,this.gameMode=t.type,this.puzzle=t.puzzle,this.puzzleId=t.puzzleId,this.localization=t.localization,this.mainLocalization=t.mainLocalization,this.objectives=t.objectives,this.puzzleName=t.puzzleName,this.settings=t.settings,this.reset=t.reset,this.resetDone=t.resetDone,this.language=t.language,this.storageKey=t.storageKey,this.difficultySettings=t.difficultySettings},e.prototype.preload=function(){this.loadingText=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Loading...",{fill:"#ffffff"},this.game.stage),this.loadingText.anchor.set(.5,.5),this.game.add.plugin(PhaserSpine.SpinePlugin),this.game.add.plugin(PhaserNineSlice.Plugin),this.game.plugins.add(ParticleEditorPlugin),Wt.loadAllAssets(this.game,this.waitForSoundDecoding,this)},e.prototype.waitForSoundDecoding=function(){this.messageService.sendMessageToWrapper({loaded:!0}),this.startGame()},e.prototype.startGame=function(){qt.i.initialize(this.storageKey+"."),this.reset&&this.resetCurrentPuzzle(),Rt.i.initialize(this.settings),Ht.i.initialize(this.localization,this.mainLocalization),Nt.i.initialize(this.puzzle,this.puzzleId,this.gameMode,this.reset,this.resetDone,this.language),jt.i.initialize(this.game),Kt.i.game=this.game,this.loadTitle()},e.prototype.resetCurrentPuzzle=function(){var t=qt.i.getPuzzle(this.puzzleId);t&&(t=JSON.stringify({reset:!0}),qt.i.savePuzzle(this.puzzleId,t))},e.prototype.loadTitle=function(){this.loadingText.destroy(),"dailyChallenge"===this.gameMode?this.game.state.start("dailyChallenge",!0,!1,this.difficulty,this.puzzleName,this.difficultySettings,this.messageService):this.game.state.start("quickPlay"===this.gameMode?"quickPlay":"game",!0,!1,this.difficulty,this.objectives,this.puzzleName,this.messageService)},e}(Phaser.State),Yt=function(t){return t[t.Regular=0]="Regular",t[t.Slash=1]="Slash",t[t.Double=2]="Double",t}({}),Zt=function(){function t(t,e,i){this._weight=0,this._column=e,this._row=i;var n=Yt.Regular;t._letter.indexOf("/")>-1&&(n=Yt.Slash),t._letter.length>1&&(n=Yt.Double),this.tileData={type:n,index:4*i+e,letter:t._letter,score:parseInt(t._value,10)},this.init()}return t.prototype.replaceSpecialLetters=function(){this._letter=this._letter.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},Object.defineProperty(t.prototype,"weight",{get:function(){return this._weight},set:function(t){this._weight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"letter",{get:function(){return this._letter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.initData()},t.prototype.initData=function(){this._type=this.tileData.type,this._index=this.tileData.index,this._letter=this.tileData.letter,this._score=this.tileData.score},t}(),Qt=function(){function t(t){this._tiles=t,this.init()}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"word",{get:function(){return this._tiles.map(function(t){return t.letter}).join("")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayWord",{get:function(){return this._displayWord},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tiles",{get:function(){return this._tiles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordData",{get:function(){var t=this;return Nt.i.words.filter(function(e){return e.word.toLowerCase()===t.word.toLowerCase()})[0]},enumerable:!0,configurable:!0}),t.prototype.checkIfValid=function(t){var e;return e=this._tiles.map(function(t){return t.letter}).join("").toLowerCase(),!!t.some(function(t){return t===e})&&(this._word=e,!0)},t.prototype.init=function(){var t=this;this._score=0,this._tiles.forEach(function(e){t._score+=e.score});var e=Nt.i.words.filter(function(e){return e.word.toLowerCase()===t.word.toLowerCase()})[0];this._displayWord=e?e.displayWord:""},t}(),$t=function(){function t(){this.initBoardData(),this._selectedIndices=[],this.init()}return Object.defineProperty(t.prototype,"tiles",{get:function(){return this._tiles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndices",{get:function(){return this._selectedIndices},set:function(t){this._selectedIndices=t},enumerable:!0,configurable:!0}),t.prototype.addTile=function(t){this._selectedIndices.push(t)},t.prototype.removeLastTile=function(){this._selectedIndices.pop()},t.prototype.clearSelection=function(){this._selectedIndices=[]},t.prototype.getFormation=function(){var t,e,i=this;return e=[],this._selectedIndices.forEach(function(t){i.tiles.forEach(function(i){t===i.index&&e.push(i)})}),t=new Qt(e),this.correctScore(t),t},t.prototype.getTileWithIndex=function(t){for(var e=0;e<this._tiles.length;e++)if(this._tiles[e].index===t)return this._tiles[e]},t.prototype.correctScore=function(t){var e,i=t.displayWord.replace("'","");if(t.wordData&&(e=t.tiles.some(function(t){return t.letter.length>1})||-1!==t.wordData.attributeFlags.indexOf("Theme")),e)switch(Nt.i.puzzleType){case"Digram":t.score+=Math.floor(5+t.score/20);break;case"EitherOr":case"Theme":t.score+=Math.floor(10+t.score/20);break;default:t.score+=Math.floor(5+t.score/20)}5===i.length&&(t.score=Math.floor(1.5*t.score)),i.length>=6&&i.length<=7&&(t.score=Math.floor(2*t.score)),i.length>=8&&(t.score=Math.floor(2.5*t.score))},t.prototype.init=function(){this.initTiles()},t.prototype.initTiles=function(){var e,i;this._tiles=[],e=0;for(var n=0;n<this.boardData.tiles.length;++n)i=Nt.i.cells[Math.floor(n/4)][n%4],this._tiles.push(new Zt(i,n%4,Math.floor(n/4))),++e===t.BoardWidthInTiles&&(e=0)},t.prototype.initBoardData=function(){for(var t,e=[],i=0;i<16;i++)t=Nt.i.cells[Math.floor(i/4)][i%4],e.push(new Zt(t,i%4,Math.floor(i/4)));this.boardData={score:Nt.i.totalScore,words:Nt.i.words,title:Nt.i.title,tiles:e}},t.BoardWidthInTiles=4,t}(),te=function(){function t(){this.init()}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),t.prototype.increaseScore=function(t){this._score+=t},t.prototype.incrementProgress=function(){this._progress+=1},t.prototype.init=function(){this._score=0,this._progress=0},t}(),ee=function(){function t(){this._letterWords=0,this._points=0,this._themedWords=0}return Object.defineProperty(t.prototype,"letterWords",{get:function(){return this._letterWords},set:function(t){this._letterWords=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},set:function(t){this._points=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"themedWords",{get:function(){return this._themedWords},set:function(t){this._themedWords=t},enumerable:!0,configurable:!0}),t}(),ie=i("MCLT"),ne=function(){function t(t,e,i){this.gc=i,this.difficulty=t,this.initialize(e)}return Object.defineProperty(t.prototype,"gemsPerWave",{get:function(){return this._gemsPerWave},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gems",{get:function(){return this._gems},set:function(t){this._gems=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalGems",{get:function(){return this._totalGems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalMoves",{get:function(){return this._totalMoves},enumerable:!0,configurable:!0}),t.prototype.updateGems=function(){this._gems=[];for(var t=0;t<this._gemsPerWave;){var e=Math.floor(15*Math.random());-1===this._gems.indexOf(e)&&-1===this.gc.bigGemIndexes.indexOf(e)&&(this._gems.push(e),t++)}},t.prototype.initialize=function(t){this.minGemsToFind=t.minGemsToFind,this.maxGemsToFind=t.maxGemsToFind,this.minTotalMoves=t.minTotalMoves,this.maxTotalMoves=t.maxTotalMoves,this._gemsPerWave=t.gemsPerWave,this.initScoreData(),this.updateGems()},t.prototype.initScoreData=function(){this._totalGems=Et.game.rnd.integerInRange(this.minGemsToFind,this.maxGemsToFind),this._totalMoves=Et.game.rnd.integerInRange(this.minTotalMoves,this.maxTotalMoves)},t}(),oe=function(){function t(){this._wordsFoundCount=0,this.moves=0,this.hintsUsed=0,this.timeSpent=0,this.timeSpentMS=0}return t.prototype.wordFound=function(){this._wordsFoundCount++,this.wordsFound=this._wordsFoundCount+"/"+this.wordsCount},t.prototype.moveMade=function(){this.moves++},t.prototype.hintUsed=function(){this.hintsUsed++},t.prototype.endTimer=function(t){this.timeSpentMS+=Date.now()-t},t.prototype.setWordsCount=function(t){this.wordsCount=t},t.prototype.setTimeSpent=function(t){this.timeSpent=t},t}(),se=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.saveCurrentPuzzle=function(t,e){var i=this.getCurrentPuzzleData();qt.i.savePuzzle(Nt.i.puzzleId,JSON.stringify({reset:!!i&&i.reset,progress:{moves:t.moves,hintsUsed:t.hintsUsed,timeSpentMS:t.timeSpentMS},words:e}))},t.prototype.getCurrentPuzzleData=function(){var t=Nt.i.puzzleId;return t?JSON.parse(qt.i.getPuzzle(t)||"{}"):null},t}(),re=function(t){return t.Regular="regular",t.DailyChallenge="dailyChallenge",t.QuickPlay="quickPlay",t}({}),ae=Phaser.KeyCode,le=function(){function t(t,e,i,n){this.messageService=e,this.previousLetters="",this.tiles=[],this.path=[],this.isResolved=!1,this.canUseKeyboard=!0,this.earnedStars=[!1,!1,!1],this.EITHER_OR_CHAR="/",this._keyboardSelection="",this._keyboardBuffer="",this.MIN_INT_VALUE=-200,this._selectedCells=[],this.digrams=[],this._isMobile=!1,this._isPortrait=!1,this._gemIndexes=[],this._bigGemIndexes=[],this._gameMode=t,this._difficulty=i,"dailyChallenge"===t&&(this._objectives=new ne(i,n,this),this._gemIndexes=this._objectives.gems),this.messageService.sendMessageToWrapper({state:pt.Started,max:this._objectives?this._objectives.totalGems:0,moves:this._objectives?this._objectives.totalMoves:0}),this.init()}return Object.defineProperty(t.prototype,"onOptionsIsVisible",{get:function(){return this._onOptionsIsVisible},set:function(t){this._onOptionsIsVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onOptions",{get:function(){return this._onOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onNextPuzzle",{get:function(){return this._onNextPuzzle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onZoom",{get:function(){return this._onZoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHint",{get:function(){return this._onHint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"solutionCount",{get:function(){return this._solutionCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"letterCountObjective",{get:function(){return this._letterCountObjective},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"board",{get:function(){return this._board},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latestAddedTile",{get:function(){return this._latestAddedTile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latestFormation",{get:function(){return this._latestFormation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameEndData",{get:function(){return this._gameEndData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gemIndexes",{get:function(){return this._gemIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigGemIndexes",{get:function(){return this._bigGemIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addedTileSignal",{get:function(){return this._addedTileSignal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removedTileSignal",{get:function(){return this._removedTileSignal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearedSelectionSignal",{get:function(){return this._clearedSelectionSignal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialFirstStep",{get:function(){return this._onTutorialFirstStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialThirdStep",{get:function(){return this._onTutorialThirdStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordAccepted",{get:function(){return this._onWordAccepted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordDeclined",{get:function(){return this._onWordDeclined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordRepeated",{get:function(){return this._onWordRepeated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTilesSelected",{get:function(){return this._onTilesSelected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onFormationClicked",{get:function(){return this._onFormationClicked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onGemCollected",{get:function(){return this._onGemCollected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onGemsUpdated",{get:function(){return this._onGemsUpdated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialSecondStep",{get:function(){return this._onTutorialSecondStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialFinish",{get:function(){return this._onTutorialFinish},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBigGemFound",{get:function(){return this._onBigGemFound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRotateBoard",{get:function(){return this._onRotateBoard},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeTutorialFirstStep",{get:function(){return this._onDailyChallengeTutorialFirstStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeTutorialSecondStep",{get:function(){return this._onDailyChallengeTutorialSecondStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialForthStep",{get:function(){return this._onTutorialForthStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLockButtonTutorial",{get:function(){return this._showLockButtonTutorial},set:function(t){this._showLockButtonTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameMode",{get:function(){return this._gameMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectives",{get:function(){return this._objectives},enumerable:!0,configurable:!0}),t.prototype.handleTutorialForthStep=function(){this.disableKeyboardInput(),this._onTutorialForthStep.dispatch()},t.prototype.disableKeyboardInput=function(){this.canUseKeyboard=!1},t.prototype.enableKeyboardInput=function(){this.canUseKeyboard=!0},t.prototype.setQuickTipsInfo=function(t){this.quickTipsInfo=t},t.prototype.handleNextPuzzleClick=function(t){if(this.messageService.sendMessageToWrapper({state:pt.Complete,objectives:t,progress:this.gameEndData}),"dailyChallenge"!==this._gameMode){var e=this.getWordsForSave();se.instance.saveCurrentPuzzle(this.gameEndData,e)}},t.prototype.handleDailyChallengeEnd=function(t,e,i){this._gameEndData.endTimer(this.startTime),this.isResolved||(this.messageService.sendMessageToWrapper({state:pt.Complete,gems:t,moves:e,result:i,timeSpentMS:this._gameEndData.timeSpentMS}),this.isResolved=!0)},t.prototype.getGemsValue=function(){return 2*this._bigGemIndexes.length+this._gemIndexes.length},t.prototype.handleStarEarned=function(t){this.earnedStars[t]=!0,this.messageService.nextPuzzleUnlocked=!0},t.prototype.handleTutorialFirstStep=function(){this.disableKeyboardInput(),this._onTutorialFirstStep.dispatch()},t.prototype.handleTutorialSecondStep=function(){this.enableKeyboardInput(),this._onTutorialSecondStep.dispatch()},t.prototype.handleTutorialThirdStep=function(){this._onTutorialThirdStep.dispatch(),this.disableKeyboardInput()},t.prototype.handleTutorialFinish=function(){this._onTutorialFinish.dispatch()},t.prototype.handleDailyChallengeTutorialFirstStep=function(){this._onDailyChallengeTutorialFirstStep.dispatch()},t.prototype.setTiles=function(t){var e=this;this.tiles=t,this.tiles.forEach(function(t){t.letter.length>1&&(e.specialTile=t),t.replaceSpecialLetters()}),this.findDigrams(),this.applyWeightToGems()},t.prototype.getHint=function(){return this.getNewFormation()},t.prototype.getTutorialHint=function(){return this.getTutorialNewFormation()},t.prototype.getScore=function(){return this._game.score},t.prototype.getProgress=function(){return this._formations.length},t.prototype.destroy=function(){this._onGemsUpdated.dispose(),this._onGemCollected.dispose(),this._onTilesSelected.dispose(),this._addedTileSignal.dispose(),this._removedTileSignal.dispose(),this._clearedSelectionSignal.dispose(),this._onWordAccepted.dispose(),this._onWordDeclined.dispose(),this._onWordRepeated.dispose(),this._onKeyPressed.dispose(),this._onOptions.dispose(),this._onNextPuzzle.dispose(),this._onZoom.dispose(),this._onHint.dispose(),this._onFormationClicked.dispose(),this._onTutorialFirstStep.dispose(),this._onTutorialSecondStep.dispose(),this._onTutorialThirdStep.dispose(),this._onTutorialForthStep.dispose(),this._onTutorialFinish.dispose(),this._onDailyChallengeTutorialFirstStep.dispose(),this._onDailyChallengeTutorialSecondStep.dispose(),this._onBigGemFound.dispose(),this._onMultiPlayerEndGame.dispose(),this._onRotateBoard.dispose(),delete this.tiles,delete this.keyboard,delete this.specialTile,delete this.earnedStars,delete this._onKeyPressed,delete this._formations,delete this._allFormations,delete this._onMultiPlayerEndGame,delete this._selectedCells,delete this.digrams,delete this._board},t.prototype.addTile=function(t,e){this.checkIfTileAdditionValid(t)&&(this._board.addTile(t),this._latestAddedTile=this._board.getTileWithIndex(t),this._addedTileSignal.dispatch(e))},t.prototype.removeLastTile=function(){this.checkIfAnyTilesSelected()&&(this._removedTileSignal.dispatch(this._board.tiles[this._board.selectedIndices[this._board.selectedIndices.length-1]]),this._board.removeLastTile())},t.prototype.cancelSelection=function(){this._board.clearSelection(),this._clearedSelectionSignal.dispatch()},t.prototype.clearSelected=function(){this._keyboardSelection="",this._keyboardBuffer="",this._selectedCells=[],this._onTilesSelected.dispatch(this.path)},t.prototype.checkWord=function(t){var e=this;if(this.checkIfAnyTilesSelected()){var i,n,o=0;if(this.previousLetters="",(i=this._board.getFormation()).tiles.forEach(function(t){-1===t.letter.indexOf("/")?o+=t.letter.replace("-","").length:o++}),!(o<3))if(this._latestFormation=i,i.index=this._formations.length,this.gameEndData.moveMade(),i.checkIfValid(Nt.i.words.map(function(t){return t.word.toLowerCase()})))if(this._formations.forEach(function(t){t.word===i.word&&(i.index=t.index,n=!0)}),n)this._onWordRepeated.dispatch(t);else{if(this.gameEndData.wordFound(),this.isSpecialWord(i.word)&&this._solutionCount.themedWords++,this._solutionCount.points+=i.score,i.displayWord.replace("'","").length===this._letterCountObjective&&this._solutionCount.letterWords++,this._formations.push(i),this._game.increaseScore(i.score),this._objectives){var s=[];i.tiles.forEach(function(t){e._gemIndexes.some(function(e){return e===t.index})&&(e._gemIndexes.splice(e._gemIndexes.indexOf(t.index),1),e._objectives.gems=e._gemIndexes,s.push(t)),e._bigGemIndexes.some(function(e){return e===t.index})&&(jt.i.playGemFound(),s.push(t),e._onBigGemFound.dispatch(t.index),e._bigGemIndexes.splice(e._bigGemIndexes.indexOf(t.index),1))}),this._onGemCollected.dispatch(s),0===this._gemIndexes.length&&(this._objectives.updateGems(),this._gemIndexes=this._objectives.gems,this._onGemsUpdated.dispatch(),this.applyWeightToGems())}this._onWordAccepted.dispatch(t)}else this._onWordDeclined.dispatch()}},t.prototype.initializeSavedData=function(){var t=this,e=se.instance.getCurrentPuzzleData();Object(ie.isNullOrUndefined)(e)||(this.gameEndData.setWordsCount(Nt.i.words.length),e.progress&&(this.gameEndData.hintsUsed=e.progress.hintsUsed,this.gameEndData.moves=e.progress.moves,e.words.map(function(t){return t.tiles}).forEach(function(e){e.forEach(function(e){var i=e.row,n=e.column,o=new Zt(Nt.i.cells[i][n],n,i);t.addTile(o.index,!0)}),t.checkWord(!0)})))},t.prototype.isSpecialWord=function(t){return-1!==Nt.i.words.filter(function(e){return e.word.toLowerCase()===t.toLowerCase()})[0].attributeFlags.indexOf("Theme")},t.prototype.getWordsForSave=function(){return this._formations.map(function(t){return{word:t.word,tiles:t.tiles.map(function(t){return{row:t.row,column:t.column}})}})},t.prototype.sendDataOnExit=function(t){var e;if(this._gameEndData.endTimer(this.startTime),"dailyChallenge"===this._gameMode)e={state:pt.Exit,timeSpentMS:this._gameEndData.timeSpentMS};else{e={state:pt.Exit,objectives:t,progress:this.gameEndData,timeSpentMS:Date.now()-this.startTime};var i=this.getWordsForSave();se.instance.saveCurrentPuzzle(this.gameEndData,i)}this.messageService.sendMessageToWrapper(e)},t.prototype.selectTile=function(t){if(this._keyboardSelection.length>=18)return!1;var e;this.updateKeyboardBuffer(t);for(var i=[],n=[],o=0;o<4;o++)for(var s=0;s<4;s++){var r=this.isTileValidForKeyboardInput(e=this.tiles[4*o+s],0);-1!==r&&this.depthFirstSearch(e,r,n,i)}var a=this.MIN_INT_VALUE,l=null;return i.forEach(function(t){var e=t.reduce(function(t,e){return t+e.weight},0);e>a&&(a=e,l=t)}),null!=l&&(this.updateSelectedCells(l),this._keyboardSelection+=this._keyboardBuffer,this._keyboardBuffer="",!0)},t.prototype.init=function(){this._gameEndData=new oe,this.gameMode!==re.DailyChallenge?se.instance.getCurrentPuzzleData()&&(this._gameEndData.timeSpentMS=se.instance.getCurrentPuzzleData().progress?se.instance.getCurrentPuzzleData().progress.timeSpentMS:0):this._gameEndData.timeSpentMS=0,this._solutionCount=new ee,this._formations=[],this._letterCountObjective=Nt.i.objectiveDefinitions.filter(function(t){return!Object(ie.isNullOrUndefined)(t.properties._wordLength)})[0].properties._wordLength,this.initFormations(),this.initGame(),this.initBoard(),this.initKeyboard(),this.initSignals(),this.attachListeners()},t.prototype.attachListeners=function(){var t=this;this.messageService.wrapperMessage$.subscribe(function(e){"pause"===e.state?t.canUseKeyboard=!1:"unPause"===e.state&&(t.canUseKeyboard=!0)})},t.prototype.initGame=function(){this._game=new te},t.prototype.initFormations=function(){this._allFormations=[];for(var t=function(t){var i,n,o,s=Nt.i.words[t].path.split(""),r=[];s.forEach(function(t){i=parseInt(t,16),n=Nt.i.cells[Math.floor(i/4)][i%4],o=new Zt(n,i%4,Math.floor(i/4)),r.push(o)}),e._allFormations.push(new Qt(r))},e=this,i=0;i<Nt.i.words.length;++i)t(i)},t.prototype.initBoard=function(){this._board=new $t},t.prototype.initKeyboard=function(){var t=this;this.keyboard=Et.game.input.keyboard,this.keyboard.addCallbacks(this,this.handleKeyPressed),window.addEventListener("keyup",function(e){e.keyCode===Phaser.KeyCode.ALT&&t.keyboard.reset()})},t.prototype.handleOptionPopupShow=function(){if(!this.onOptionsIsVisible)return this.onOptionsIsVisible=!0,this._onOptions.dispatch()},t.prototype.keyboardKeyPressed=function(t){if(this.keyboard.isDown(ae.ALT)&&t===ae.R)this._onRotateBoard.dispatch();else if(this.keyboard.isDown(ae.ALT)&&t===ae.Z)this._onZoom.dispatch();else if(this.keyboard.isDown(ae.ALT)&&t===ae.O)this.handleOptionPopupShow();else if(this.keyboard.isDown(ae.ALT)&&t===ae.H){if("regular"!==this._gameMode)return;this._onHint.dispatch()}else this.keyboard.isDown(ae.ALT)&&t===ae.N&&this._onNextPuzzle.dispatch(),this.selectTile(String.fromCharCode(t))},t.prototype.applyWeightToGems=function(){var t=this;this.gemIndexes&&"dailyChallenge"===this.gameMode&&this.gemIndexes.forEach(function(e){t.tiles[e].weight=100})},t.prototype.updateSelectedCells=function(t){for(var e=0;e<this._selectedCells.length;e++)this._selectedCells[e]!==t[e]&&(this.unselectTile(this._selectedCells[e]),e--);for(e=this._selectedCells.length;e<t.length;e++)this.selectTileByTile(t[e])},t.prototype.selectTileByTile=function(t){return-1===this._selectedCells.indexOf(t)&&(this._selectedCells.push(t),this._onTilesSelected.dispatch(this._selectedCells),!0)},t.prototype.unselectTile=function(t){var e=this._selectedCells.indexOf(t);return-1!==e&&(this._selectedCells.splice(e,1),this._onTilesSelected.dispatch(this._selectedCells),!0)},t.prototype.updateKeyboardBuffer=function(t){if(this._keyboardBuffer.length>0&&this.digrams.length>0)for(var e=this._keyboardBuffer+t,i=0,n=this.digrams;i<n.length;i++)if(-1!==n[i].indexOf(e))return void(this._keyboardBuffer=e);this._keyboardBuffer=t},t.prototype.findDigrams=function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var i=this.tiles[4*t+e];i.letter.length>1&&-1===i.letter.indexOf(this.EITHER_OR_CHAR)&&this.digrams.push(i.letter)}},t.prototype.depthFirstSearch=function(t,e,i,n){if(i.push(t),e>=this._keyboardSelection.length+this._keyboardBuffer.length)n.push(i.slice());else for(var o=this.getAdjacentCells(t.row,t.column),s=o.next();!s.done;){if(-1===i.indexOf(s.value)){var r=this.isTileValidForKeyboardInput(s.value,e);-1!==r&&this.depthFirstSearch(s.value,e+r,i,n)}s=o.next()}i.splice(i.indexOf(t),1)},t.prototype.getAdjacentCells=function(t,e){var i,n;return function(t,e){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,function(o){switch(o.label){case 0:i=-1,o.label=1;case 1:if(!(i<=1))return[3,6];n=-1,o.label=2;case 2:return n<=1?0===i&&0===n||t+i<0||t+i>=4||e+n<0||e+n>=4?[3,4]:[4,this.tiles[4*(t+i)+n+e]]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return i++,[3,1];case 6:return[2]}})},t.prototype.isTileValidForKeyboardInput=function(t,e){var i=this._keyboardSelection+this._keyboardBuffer,n=t.letter.replace("-","");if(n.length>1&&-1===n.indexOf(this.EITHER_OR_CHAR)){if(i.length<e+n.length)return-1;if(i.substring(e,e+n.length)===n)return n.length}else if(n[0]===i[e]||-1!==n.indexOf(this.EITHER_OR_CHAR)&&-1!==n.indexOf(i[e]))return 1;return-1},t.prototype.initSignals=function(){this._onGemsUpdated=new Phaser.Signal,this._onGemCollected=new Phaser.Signal,this._onTilesSelected=new Phaser.Signal,this._addedTileSignal=new Phaser.Signal,this._removedTileSignal=new Phaser.Signal,this._clearedSelectionSignal=new Phaser.Signal,this._onWordAccepted=new Phaser.Signal,this._onWordDeclined=new Phaser.Signal,this._onWordRepeated=new Phaser.Signal,this._onKeyPressed=new Phaser.Signal,this._onOptions=new Phaser.Signal,this._onNextPuzzle=new Phaser.Signal,this._onZoom=new Phaser.Signal,this._onHint=new Phaser.Signal,this._onFormationClicked=new Phaser.Signal,this._onTutorialFirstStep=new Phaser.Signal,this._onTutorialSecondStep=new Phaser.Signal,this._onTutorialThirdStep=new Phaser.Signal,this._onTutorialForthStep=new Phaser.Signal,this._onTutorialFinish=new Phaser.Signal,this._onDailyChallengeTutorialFirstStep=new Phaser.Signal,this._onDailyChallengeTutorialSecondStep=new Phaser.Signal,this._onBigGemFound=new Phaser.Signal,this._onMultiPlayerEndGame=new Phaser.Signal,this._onRotateBoard=new Phaser.Signal},t.prototype.checkIfTileAdditionValid=function(t){var e;e=this._board.selectedIndices;for(var i=0;i<e.length;i++)if(t===e[i])return!1;return!0},t.prototype.checkIfAnyTilesSelected=function(){return this._board.selectedIndices.length>0},t.prototype.getNewFormation=function(){var t=this,e=this._allFormations.filter(function(e){return!t._formations.some(function(t){return t.word.toLowerCase()===e.word.toLowerCase()})&&e.displayWord.replace("'","").length>=3}).sort(function(t,e){return t.word.length-e.word.length});return this.earnedStars[0]?this.earnedStars[2]?e[Math.round(Math.random()*e.length)]:e.filter(function(t){return"Theme"===t.wordData.attributeFlags})[0]:e.filter(function(e){return e.displayWord.replace("'","").length===t._letterCountObjective&&-1===e.wordData.attributeFlags.indexOf("Theme")})[0]},t.prototype.getTutorialNewFormation=function(){var t=this,e=this._allFormations.filter(function(e){return!t._formations.some(function(t){return t.word.toLowerCase()===e.word.toLowerCase()})&&3===e.displayWord.replace("'","").length});return e[Math.floor(Math.random()*e.length)]},t.prototype.handleDeleteLastInPath=function(){if(this._keyboardSelection.length>0&&this._selectedCells.length>0){var t=this._selectedCells.pop(),e=t.letter.replace("-","");this._keyboardSelection=this._keyboardSelection.substring(0,this._keyboardSelection.length-(-1!==e.indexOf(this.EITHER_OR_CHAR)?1:e.length)),this._keyboardBuffer="",this.unselectTile(t)}this._onTilesSelected.dispatch(this._selectedCells)},t.prototype.handleEnterPressed=function(){this.checkWord(),this.clearSelected()},t.prototype.handleKeyPressed=function(t){this.canUseKeyboard&&(this.quickTipsInfo.reset(),t.keyCode===Phaser.KeyCode.TAB||this.onOptionsIsVisible||(t.preventDefault(),t.stopPropagation(),t.keyCode>=Phaser.KeyCode.A&&t.keyCode<=Phaser.KeyCode.Z?this.keyboardKeyPressed(t.keyCode):t.keyCode===Phaser.KeyCode.BACKSPACE||t.keyCode===Phaser.KeyCode.DELETE?this.handleDeleteLastInPath():t.keyCode===Phaser.KeyCode.ENTER&&this.handleEnterPressed()))},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setIsMobile",{set:function(t){this._isMobile=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPortrait",{get:function(){return this._isPortrait},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setIsPortrait",{set:function(t){this._isPortrait=t},enumerable:!0,configurable:!0}),t}(),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lt.__extends)(e,t),e.prototype.handleOnMessage=function(t){"settings"===t.state?(window.focus(),Rt.i.updateSettings(t)):"music"===t.state&&Rt.i.updateMusicSetting(t.enabled)},e.prototype.onMessageError=function(t){console.error(t)},e}(Phaser.State),ue=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._game&&this._game.input.activePointer.isDown&&this.hideTooltip()},t.prototype.init=function(t){this._game=t,this.initContainer()},t.prototype.destroy=function(){delete this._game,delete this.container,delete this.containerText,delete this._hideAnimation,delete t._i},t.prototype.addElement=function(t){t.inputEnabled=!0,this.initClickMethod(t)},t.prototype.initContainer=function(){this.container=Et.nineSliceSprite(0,0,400,400,{top:21,bottom:26,left:16,right:27},St.AtlassesMain.Frames.TooltipBg,this._game.stage,new Phaser.Point(.5,.5)),this.containerText=Et.text(-5,-3,"",{font:"bold SegoeUI",fontSize:22,fill:"#F3FFFE"},this.container,new Phaser.Point(.5,.5)),this.containerText.wordWrap=!0,this.containerText.wordWrapWidth=350,this.container.visible=!1},t.prototype.initClickMethod=function(t){t.events.onInputUp.add(this.showToolTip,this,t)},t.prototype.showToolTip=function(e){var i,n,o=Ht.i.getString("unlockTooltip","tooltip"),s=e.worldPosition.x,r=e.worldPosition.y+100;this._hideAnimation&&this._hideAnimation.stop(),this.container.scale.set(1,1),this.containerText.text=o,this.container.position.set(s,r),this.container.x>=this._game.world.width-this.container.width/2&&(this.container.x=e.worldPosition.x-e.width/2),i=Math.min(Math.max(this.containerText.width+40,t.containerMinWidth),t.containerMaxWidth),n=Math.min(Math.max(this.containerText.height+30,t.containerMinHeight),t.containerMaxHeight),this.container.resize(i,n),this.container.visible=!0,this.startHideAnimation()},t.prototype.startHideAnimation=function(){this._hideAnimation=this._game.add.tween(this.container.scale),this._hideAnimation.to({x:0,y:0},50,null,!0,2500),this._hideAnimation.onComplete.add(this.hideTooltip,this)},t.prototype.hideTooltip=function(){this.container.visible=!1},t.containerMinWidth=250,t.containerMinHeight=85,t.containerMaxWidth=400,t.containerMaxHeight=400,t}(),de=St.AtlassesMain.Frames,ce=function(t){function e(e,i,n,o){var s=t.call(this,e)||this;return s.letterFontSize=90,s.numberFontSize=30,s.zoomIndex=0,s._boardColumn=n,s._boardRow=o,s._model=i,s._scale=new Phaser.Point(1,1),s.init(),s}return Object(lt.__extends)(e,t),Object.defineProperty(e.prototype,"highlightTile",{get:function(){return this._highlightTile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boardRow",{get:function(){return this._boardRow},set:function(t){this._boardRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boardColumn",{get:function(){return this._boardColumn},set:function(t){this._boardColumn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t},enumerable:!0,configurable:!0}),e.getWidth=function(){return 150},e.getHeight=function(){return 150},e.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=4},e.prototype.getInputContainerBounds=function(){return this.inputContainer.getBounds()},e.prototype.getTileIndex=function(){return this._model.index},e.prototype.showSelect=function(){var t=this;this.selected=!0,this.game.add.tween(this.backgroundSprite.scale).to({x:this._scale.x+.06,y:this._scale.y+.06},50,null,!0,0,0,!0).onComplete.add(function(){t.backgroundSprite.scale.set(t._scale.x,t._scale.y)}),this.selectTween=this.game.add.tween(this.selectTile).to({alpha:1},150,null,!0)},e.prototype.hideSelect=function(){this.selectTween&&this.selectTween.stop(),this.selectTile.alpha=0,this.backgroundSprite.scale.set(this._scale.x,this._scale.y),this.selected=!1},e.prototype.showRepeat=function(){var t=this;this.game.add.tween(this.repeatedTile).to({alpha:1},250,null,!0,0,0,!0).onComplete.add(function(){return t.repeatedTile.alpha=0},this)},e.prototype.showHighlight=function(){this._highlightTile.visible=!0,this._highlightTile.alpha=1},e.prototype.hideHighlight=function(){this._highlightTile.visible=!1},e.prototype.showHint=function(){this.selected||(this.hintTile.visible=!0)},e.prototype.hideHint=function(){this.hintTile.visible=!1},e.prototype.showCorrect=function(){var t=this;this.game.add.tween(this.correctTile).to({alpha:1},250,null,!0,0,0,!0).onComplete.add(function(){return t.correctTile.alpha=0},this)},e.prototype.showIncorrect=function(){var t=this;this.game.add.tween(this.wrongTile).to({alpha:1},250,null,!0,0,0,!0).onComplete.add(function(){return t.wrongTile.alpha=0},this),this.shudderBackgroundSprite()},e.prototype.zoom=function(t){this._scale.set(e.scales[t],e.scales[t]),this.zoomIndex=t;var i=this._scale;this.letterLabel.fontSize=this.letterFontSize*i.y,this.backgroundSprite.scale.set(i.x,i.y),this._highlightTile.scale.set(i.x,i.y),this.hintTile.scale.set(i.x,i.y),this.inputContainer.width=e.InputWidth*i.x,this.inputContainer.height=e.InputWidth*i.x,this.updateLabels()},e.prototype.adjustInputContainer=function(t,e){this.inputContainer.width*=t,this.inputContainer.height*=e},e.prototype.resetInputContainer=function(){this.inputContainer.width=e.InputWidth*e.scales[this.zoomIndex],this.inputContainer.height=e.InputWidth*e.scales[this.zoomIndex]},e.prototype.init=function(){this.initBackgroundSprite(),this.initHintTile(),this.initHighlightTile(),this.initSelectTile(),this.initRepeatedTile(),this.initCorrectTile(),this.initWrongTile(),this.initLetterLabel(),this.initScoreLabel(),this.initInputContainer(),this.zoom(0)},e.prototype.initBackgroundSprite=function(){this.bkg=this.game.add.group(this),this.backgroundSprite=Et.sprite(0,0,de.TilesTile,this.bkg),this.backgroundSprite.anchor.set(.5)},e.prototype.initWrongTile=function(){this.wrongTile=Et.sprite(0,0,de.TilesTileWrong,this.backgroundSprite,new Phaser.Point(.5,.5)),this.wrongTile.alpha=0},e.prototype.initRepeatedTile=function(){this.repeatedTile=Et.sprite(0,0,de.TilesTileRepeated,this.backgroundSprite,new Phaser.Point(.5,.5)),this.repeatedTile.alpha=0},e.prototype.initSelectTile=function(){this.selectTile=Et.sprite(0,0,de.TilesTileSelected,this.backgroundSprite,new Phaser.Point(.5,.5)),this.selectTile.alpha=0},e.prototype.initCorrectTile=function(){this.correctTile=Et.sprite(0,0,de.TilesTileCorrect,this.backgroundSprite,new Phaser.Point(.5,.5)),this.correctTile.alpha=0},e.prototype.initLetterLabel=function(){this.letterLabel=this.game.add.text(0,0,"",{font:"SegoeUI",fill:"#33323a",fontSize:this.letterFontSize}),this.letterLabel.anchor.set(.5,.5),this.backgroundSprite.addChild(this.letterLabel)},e.prototype.initScoreLabel=function(){this.scoreLabel=this.game.add.text(-58,-52,"",{font:"bold SegoeUI",fill:"#33323a",fontSize:this.numberFontSize}),this.scoreLabel.anchor.set(.5,.5),this.backgroundSprite.addChild(this.scoreLabel)},e.prototype.initInputContainer=function(){this.inputContainer=Et.sprite(0,0,de.BlockTransparent,this),this.inputContainer.width=e.InputWidth,this.inputContainer.height=e.InputWidth,this.inputContainer.anchor.set(.5,.5)},e.prototype.initHighlightTile=function(){this._highlightTile=Et.sprite(-1,-1,de.TilesHighlightTile,this),this._highlightTile.visible=!1,this._highlightTile.anchor.set(.5,.5)},e.prototype.initHintTile=function(){this.hintTile=Et.sprite(-1,-1,de.TilesHintTile,this),this.hintTile.visible=!1,this.hintTile.anchor.set(.5,.5)},e.prototype.updateLabels=function(){this.letterLabel.setText(this._model.letter),this.letterLabel.width>this.width&&e.shrinkFontIfOverlap(this.letterLabel,this.letterLabel.width,this.width-20),this.scoreLabel.setText(this._model.score.toString())},e.prototype.shudderBackgroundSprite=function(){this.game.tweens.create(this.backgroundSprite).to({angle:this.game.rnd.between(-2,2)},150,Phaser.Easing.Cubic.InOut,!0,this.game.rnd.between(0,40),0,!0)},e.scales=[.9,.8,.6,.55],e.InputWidth=166,e}(Phaser.Group),pe=function(){function t(){this.handAnimationTimeouts=[],this.currentStep=qt.i.getItem("tutorialSeen")?2:1,this.stepsCount=2,this.popupWidth=750,this.textFontSize=24,this.handImageWidth=20,this.handImageHeight=20,this.handleResize=this.handleGameResized.bind(this)}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepDoneSignal",{get:function(){return this._stepDoneSignal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSecondStep",{set:function(t){this._isSecondStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLockBtnTutorial",{set:function(t){this._showLockBtnTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tutorialSeen",{get:function(){return!!qt.i.getItem("tutorialSeen")},set:function(t){qt.i.setItem("tutorialSeen",t?"1":"0")},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e){this.currentStep=qt.i.getItem("tutorialSeen")?2:1,this.completed=!1,this._tutorialFinished=!1,this.gc=t,this.game=e,this.initHandImage(),this.initButtons(),this.initCanvasSizes(),this._stepDoneSignal=new Phaser.Signal,window.addEventListener("resize",this.handleResize)},t.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize)},t.prototype.initBlocker=function(t,e,i,n,o){this.lastBlockerMeasurements={x:t,y:e,width:i,height:n},this.word=this.word||o;var s=document.getElementById("gameContainer").childNodes[0],r=parseInt(s.style.width,10)/1451,a=parseInt(s.style.height,10)/1026,l=this.getWorldPosition(t,e);this.blocker=document.getElementById("ftueBlocker"),this.blocker.style.display="block",this.blocker.style.width=i*r+"px",this.blocker.style.height=n*a+"px",this.blocker.style.left="calc(-100vw - 10px + "+l.x+"px)",this.blocker.style.top="calc(-100vh - 10px + "+l.y+"px)"},t.prototype.showPopup=function(t,e,i){this.lastPopupMeasurements={x:t,y:e,floatSize:i};var n=this.getStepText();this.getWorldPosition(t,e),document.getElementById("popupText").innerHTML=n,document.getElementById("popupBtn").style.display=2!==this.currentStep?"block":"none",this.popupDiv=document.getElementById("popupContainer"),this.popupDiv.style.display="flex",2===this.currentStep?(this.popupDiv.parentElement.style.marginTop="auto",this.popupDiv.parentElement.style.marginBottom="0"):this.popupDiv.parentElement.style.marginBottom="auto",this.skipBtn=document.getElementById("skip-container"),2===this.currentStep?this.skipBtn.style.margin="0":(this.skipBtn.style.margin="auto",this.skipBtn.style.marginRight="1rem",this.skipBtn.style.marginBottom="1rem")},t.prototype.startHandAnimation=function(e){var i=this;if(!this.completed&&(this.targetTiles=e,this.handImage.style.display="block",this.handAnimationTimeouts.forEach(function(t){return clearTimeout(t)}),e&&e.length)){var n=this.getHandPosition(e[0].worldPosition.x,e[0].worldPosition.y);this.transitionHand(n),e.forEach(function(o,s){i.handAnimationTimeouts.push(setTimeout(function(){o.showHint(),n=i.getHandPosition(o.worldPosition.x,o.worldPosition.y),i.transitionHandWithAnimation(n),s===e.length-1&&i.handAnimationTimeouts.push(setTimeout(function(){i.transitionHand(n),e.forEach(function(t){return t.hideHint()}),i.handAnimationTimeouts.push(setTimeout(function(){i.handAnimationTimeouts.push(setTimeout(function(){i.startHandAnimation(e)},300))},t.HandAnimationRestartTime))},t.HighlightDeactivateTime))},s*t.NextTileHighlightTime))})}},t.prototype.handleWordAccepted=function(){this.currentStep++,this.hideHand(),this.skipBtn.style.display="none",3===this.currentStep&&this.gc.handleTutorialThirdStep()},t.prototype.initHandImage=function(){var t=wt.ImagesFtueHand.getPNG();this.handImage=new Image,this.handImage.id="tutorialHand",this.handImage.src=t,this.handImage.style.width=this.game.scale.scaleFactorInversed.x*this.handImageWidth+"vw",this.handImage.style.height=this.game.scale.scaleFactorInversed.y*this.handImageHeight+"vw",this.handImage.style.minWidth="2rem",this.handImage.style.minHeight="2rem",this.handImage.style.display="none",document.getElementById("gameContainer").parentElement.appendChild(this.handImage)},t.prototype.initButtons=function(){var t=this;this.popupButton=document.getElementById("popupBtn"),this.popupButton.onclick=function(){jt.i.playAudioPopup(),t._stepDoneSignal.dispatch(),t.hide(),t.gc.enableKeyboardInput(),t.currentStep>2&&(t._tutorialFinished=!0,t._showLockBtnTutorial=!1,t.gc.messageService.sendMessageToWrapper({action:"tutorialDone"}))},this.popupButton.innerText=Ht.i.getString("okBtn","Ok"),this.skipBtn=document.getElementById("skipBtn"),this.skipBtn.onclick=function(){jt.i.playAudioPopup(),t.hide(!0),t._tutorialFinished=!0,t.gc.enableKeyboardInput()},this.skipBtn.innerText=Ht.i.getString("skipBtn","Skip"),this.skipBtn.classList.add(Nt.i.language)},t.prototype.transitionHandWithAnimation=function(t){var e=this;this.handTween=this.game.add.tween({x:0}).to({x:1},350,null,!0);var i=this.handPreviousPosition.x,n=this.handPreviousPosition.y;this.handTween.onUpdateCallback(function(o,s){e.handImage.setAttribute("style","\n            pointer-events: none; transform: translate("+(i+(t.x-i)*s)+"px,"+(n+(t.y-n)*s)+"px);\n\t\t\twidth: "+e.game.scale.scaleFactorInversed.x*e.handImageWidth+"vw;\n\t\t\theight: "+e.game.scale.scaleFactorInversed.y*e.handImageHeight+"vw;\n\t\t\tmin-width: 3rem;\n            min-height: 3rem;\n\t\t\tposition: absolute;\n            top: 0;\n            ")}),this.handPreviousPosition=t},t.prototype.transitionHand=function(t){this.handImage.setAttribute("style","\n            pointer-events: none; transform: translate("+t.x+"px,"+t.y+"px);\n\t\t\twidth: "+this.game.scale.scaleFactorInversed.x*this.handImageWidth+"vw;\n            height: "+this.game.scale.scaleFactorInversed.y*this.handImageHeight+"vw;\n\t\t\tmin-width: 3rem;\n            min-height: 3rem;\n\t\t\tposition: absolute;\n            top: 0;\n            "),this.handPreviousPosition=t},t.prototype.hideHand=function(){this.handImage&&this.handImage.parentNode&&(this.handAnimationTimeouts.forEach(function(t){return clearTimeout(t)}),this.handImage.parentNode.removeChild(this.handImage))},t.prototype.hide=function(e){if(e)return this.completed=!0,this.hideHand(),this.gc.onWordAccepted.remove(t.i.handleWordAccepted,t.i),this.gc.handleTutorialFinish(),this.skipBtn.style.display="none",this.blocker.style.display="none",this.popupDiv.style.display="none",this.popupButton.style.display="none",this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"}),void(this.currentStep=4);(qt.i.getItem("tutorialSeen")&&1!==this.currentStep||3===this.currentStep)&&(this.completed=!0,this.hideHand(),this.gc.onWordAccepted.remove(t.i.handleWordAccepted,t.i),this.gc.handleTutorialFinish()),this.skipBtn.style.display=1===this.currentStep?"block":"none",this.blocker.style.display="none",this.popupDiv.style.display="none",this.popupButton.style.display="none",this.currentStep++},t.prototype.getWorldPosition=function(t,e){var i=document.getElementById("gameContainer").childNodes[0],n=i.getBoundingClientRect(),o=parseInt(i.style.width,10)/1451,s=parseInt(i.style.height,10)/1026;return new PIXI.Point(n.left+t*o,n.top+e*s)},t.prototype.getStepText=function(){switch(this.currentStep){case 1:return Ht.i.getString("ftueSeq1Info","Each puzzle has 3 stars you can earn by completing the objectives. Get at least one star to unlock the next puzzle. Let's go!");case 2:return Ht.i.getString("ftueSeq2Info",'The goal of Wordament is to find words by connecting tiles on the board. Click and drag to connect the letters that spell <span style="color:#FFDE01">{{formation}}</color>.').replace("{{formation}}",this.word);case 3:return Ht.i.getString("ftueSeq3Info",'Find words with at least 3 letters to add them to the list. You can also use your <span style="color:#FFDE01">keyboard</span> to type words you find.');case 4:return Ht.i.getString("ftueSeq4Info","You've unlocked the next puzzle! You can return to the map or keep playing to earn more stars. If you choose to move on you can always retun later to earn the remaining stars.")}},t.prototype.handleGameResized=function(){clearTimeout(this.blockerTimeout),clearTimeout(this.popupTimeout),clearTimeout(this.handTimeout),this._tutorialFinished&&!this._showLockBtnTutorial||(this.blockerTimeout=setTimeout(this.reInitBlocker.bind(this),130)),this._tutorialFinished&&!this._showLockBtnTutorial||(this.popupTimeout=setTimeout(this.reInitPopup.bind(this),130)),this.currentStep<3&&(this.handTimeout=setTimeout(this.reInitHandAnimation.bind(this),130))},t.prototype.reInitPopup=function(){this.showPopup(this.lastPopupMeasurements.x,this.lastPopupMeasurements.y,this.lastPopupMeasurements.floatSize)},t.prototype.reInitBlocker=function(){this.initBlocker(this.lastBlockerMeasurements.x,this.lastBlockerMeasurements.y,this.lastBlockerMeasurements.width,this.lastBlockerMeasurements.height)},t.prototype.reInitHandAnimation=function(){this.handAnimationTimeouts.forEach(function(t){return clearTimeout(t)}),this.hideHand(),this.initHandImage(),this.game.tweens.remove(this.handTween),this.startHandAnimation(this.targetTiles)},t.prototype.getHandPosition=function(t,e){var i=document.getElementById("gameContainer").childNodes[0],n=i.getBoundingClientRect(),o=1,s=1;return this.game.device.desktop?(o=parseInt(i.style.width,10)/1451,s=parseInt(i.style.height,10)/1026):(o=parseInt(i.style.width,10)/2300,s=parseInt(i.style.height,10)/1080),new PIXI.Point(n.left+t*o,e*s)},t.prototype.initCanvasSizes=function(){this.canvas=document.getElementById("gameContainer").childNodes[0],this.canvasWidth=parseInt(this.canvas.style.width,10),this.canvasHeight=parseInt(this.canvas.style.height,10)},t.NextTileHighlightTime=350,t.HighlightDeactivateTime=600,t.HandAnimationRestartTime=1e3,t}(),ge=function(){function t(t){this.messageService=t,this._oneLetterWordCount=0,this._twoLettersWordCount=0}return t.prototype.handleUserCheck=function(t){1===t?this.incrementOneLetterWordCount():2===t&&this.incrementTwoLetterWordCount(),(this._twoLettersWordCount>=3||this._oneLetterWordCount>=5)&&this.sendQuickTipShowRequest()},t.prototype.reset=function(){this._oneLetterWordCount=0,this._twoLettersWordCount=0},t.prototype.incrementOneLetterWordCount=function(){this._oneLetterWordCount++,this._twoLettersWordCount=0},t.prototype.incrementTwoLetterWordCount=function(){this._twoLettersWordCount++,this._oneLetterWordCount=0},t.prototype.sendQuickTipShowRequest=function(){this.messageService.sendMessageToWrapper({state:pt.QuickTip}),this.reset()},t}(),fe=function(){return function(){this.timers=[]}}(),me=function(){return function(){this.shuffleIndex=0,this.zoomIndex=0}}(),ye=St.AtlassesMain.Frames,be=function(t){function e(e,i){var n=t.call(this,e)||this;return n.arrows=[],n._scales=[.9,.8,.6],n.canShowGuide=!0,n.hintTimeouts=[],n.listHighlightTimeouts=[],n._hintTimeoutWhenIdle=[],n.gc=i,n.gc.objectives&&(n.objectives=n.gc.objectives),n.init(),n}return Object(lt.__extends)(e,t),Object.defineProperty(e.prototype,"lastTile",{get:function(){return this._lastTile},enumerable:!0,configurable:!0}),e.prototype.startTilesAnimation=function(){var t=this;this.tilesAnimationData.timers.push(this.game.time.events.loop(2e4,function(){t.selectedTileIndices.length>0||t.showTileAnimation()},this)),this._showHintWhenIdleTimer=this.game.time.events.loop(3e4,function(){t.selectedTileIndices.length>0||t.showHintWhenIdle()},this)},e.prototype.showHint=function(){var t;(t=this.gc.getHint())&&(this.hideHint(),this.guideHint(t),this.stopTilesAnimation())},e.prototype.shuffleTiles=function(t,i){var n=this,o=0!==this.hintTimeouts.length;this.boardViewData.shuffleIndex++,this.boardViewData.shuffleIndex>3&&(this.boardViewData.shuffleIndex=0),this.clearTimeouts(),this.hideHint(),this.clearEntireSelection(),this.gc.clearSelected(),this.arrows.forEach(function(t){return t.kill()});var s=this._scales[this.boardViewData.zoomIndex],r=e.DistanceBetweenTiles*s,a=null;this.tiles.forEach(function(t){var e=t.boardColumn,i=3-t.boardRow;a=n.game.add.tween(t.position).to({x:10+i*(ce.getWidth()*s+r)+(ce.getWidth()*s+r)/2,y:10+e*(ce.getHeight()*s+r)+(ce.getHeight()*s+r)/2},200,null,!0),t.boardColumn=i,t.boardRow=e}),o&&this.showHint(),this.stopTilesAnimation(),this.startTilesAnimation(),a.onComplete.add(t,i)},e.prototype.zoom=function(){var t=this;this.boardViewData.zoomIndex--,this.boardViewData.zoomIndex<0&&(this.boardViewData.zoomIndex=2),this.arrows.forEach(function(t){return t.kill()});var i=this._scales[this.boardViewData.zoomIndex],n=e.DistanceBetweenTiles*i;this.tiles.forEach(function(e){e.position.set(10+e.boardColumn*(ce.getWidth()*i+n)+(ce.getWidth()*i+n)/2,10+e.boardRow*(ce.getHeight()*i+n)+(ce.getHeight()*i+n)/2),e.zoom(t.boardViewData.zoomIndex)}),this.tilesGroup.x=this.width/2-this.tilesGroup.width/2-75,this.tilesGroup.y=this.height/2-this.tilesGroup.height/2-65,this.stopTilesAnimation(),this.startTilesAnimation()},e.prototype.hideTilesWithAnimation=function(){this.stopTilesAnimation(),this.hideHint(),this.game.time.events.add(900,jt.i.playEndGame,jt.i);for(var t,e=0,i=3,n=0,o=3,s=0;e<=i&&n<=o;){for(var r=n;r<=o;++r)t=Kt.i.hideTile(this.tileMatrix[e][r],s++);for(var a=e+1;a<=i;++a)Kt.i.hideTile(this.tileMatrix[a][o],s++);if(e<i&&n<o){for(r=o-1;r>n;r--)Kt.i.hideTile(this.tileMatrix[i][r],s++);for(a=i;a>e;a--)Kt.i.hideTile(this.tileMatrix[a][n],s++)}e++,i--,n++,o--}return t},e.prototype.destroy=function(){this.detachListeners(),t.prototype.destroy.call(this)},e.prototype.update=function(){this.isInputDown&&(this.updateInputOnInputContainer(),this.stopTilesAnimation(),this.startTilesAnimation()),t.prototype.update.call(this)},e.prototype.animateTileAppear=function(t,e){var i,n=this._scales[this.boardViewData.zoomIndex];this.game.time.events.add(1e3,jt.i.playTilesAppear,jt.i);for(var o=0;o<7;++o)for(var s=0;s<=3;++s)for(var r=0;r<=3;++r)s+r===o&&(i=Kt.i.startTileAppear(this.tileMatrix[s][r],o,n));i.addOnce(t,e)},e.prototype.init=function(){this.boardViewData=new me,this.tilesAnimationData=new fe,this.selectedTileIndices=[],this.quickTipsInfo=new ge(this.gc.messageService),this.gc.setQuickTipsInfo(this.quickTipsInfo),this.initModel(),this.initTiles(),this.initInputContainer(),this.attachListeners()},e.prototype.initModel=function(){this.model=this.gc.board},e.prototype.initTiles=function(){var t,i,n,o;this.tiles=[],this.tilesGroup=this.game.add.group(this),this.tileMatrix=[];for(var s=0;s<4;++s)this.tileMatrix[s]=[];for(i=0,n=0,s=0;s<e.TileCount;s++){o=Nt.i.cells[Math.floor(s/4)][s%4];var r=new Zt(o,s%4,Math.floor(s/4)),a=this._scales[this.boardViewData.zoomIndex],l=e.DistanceBetweenTiles*a;(t=new ce(this.game,r,i,n)).position.set(10+i*(ce.getWidth()*a+l)+(ce.getWidth()+l)/2,10+n*(ce.getHeight()*a+l)+(ce.getHeight()+l)/2),this.tileMatrix[n].push(t),(i+=1)===e.BoardWidthInTiles&&(i=0,n+=1),t.scale.set(0,0),this.tilesGroup.addChild(t),this.tiles.push(t)}this.tilesGroup.x=this.width/2-this.tilesGroup.width/2-15,this.tilesGroup.y=this.height/2-this.tilesGroup.height/2-15;var h=this.tiles.map(function(t){return t.model}).sort(function(t,e){return t.index-e.index});this.gc.setTiles(h)},e.prototype.initInputContainer=function(){this.inputContainer=Et.sprite(-13,-10,ye.BlockTransparent,this),this.inputContainer.width=e.BoardWidth,this.inputContainer.height=e.BoardWidth,this.inputContainer.inputEnabled=!0,this.inputContainer.events.onInputDown.add(this.handleInputDownOnInputContainer,this),this.inputContainer.events.onInputUp.add(this.handleInputUpOnInputContainer,this)},e.prototype.attachListeners=function(){this.gc.onWordAccepted.add(this.handleWordAccepted,this),this.gc.onWordDeclined.add(this.handleWordDeclinedSignal,this),this.gc.onWordRepeated.add(this.handleWordRepeatedSignal,this),this.gc.onTilesSelected.add(this.handleSelectCells,this),this.gc.onFormationClicked.add(this.handleFormationClicked,this),this.gc.onTutorialSecondStep.add(this.handleTutorialSecondStep,this),this.gc.onTutorialFinish.add(this.handleTutorialFinish,this)},e.prototype.hideHint=function(){var t=this;this.hintTimeouts.forEach(function(e){return t.game.time.events.remove(e)}),this.tiles.forEach(function(t){return t.hideHint()})},e.prototype.handleSelectCells=function(t){var e=this;this.hideHint(),this.stopTilesAnimation(),this.startTilesAnimation(),this.clearEntireSelection(),this.selectedTileIndices=[],t.forEach(function(t){e.selectTile(e.tiles.filter(function(e){return e.getTileIndex()===t.index})[0],t.index)})},e.prototype.handleFormationClicked=function(t){this.showWord(t),this.stopTilesAnimation()},e.prototype.handleTutorialSecondStep=function(){var t=this;pe.i.isSecondStep=!0;var e=this.gc.getTutorialHint(),i=e.tiles.map(function(e){return t.getTileWithIndex(e.index)});setTimeout(function(){t.disableTiles(i);var n=t.getBounds();pe.i.initBlocker(n.x-10,n.y-100,n.width-50,n.height+30,e.word),pe.i.showPopup(n.x,n.y,Rt.i.data.settings.rightHanded?0:-34)},15),setTimeout(function(){pe.i.startHandAnimation(i)},1e3),this.gc.onWordAccepted.add(pe.i.handleWordAccepted,pe.i)},e.prototype.detachListeners=function(){this.gc.onWordAccepted.remove(this.handleWordAccepted,this),this.gc.onWordDeclined.remove(this.handleWordDeclinedSignal,this),this.gc.onWordRepeated.remove(this.handleWordRepeatedSignal,this),this.gc.onTilesSelected.remove(this.handleSelectCells,this),this.gc.onFormationClicked.remove(this.handleFormationClicked,this)},e.prototype.handleWordAccepted=function(t){this.showSelectionAsCorrect(t),this.clearEntireSelection(t,!0),Rt.i.data.showQuickTips&&this.quickTipsInfo.reset()},e.prototype.handleWordDeclinedSignal=function(){this.showSelectionAsIncorrect(),this.clearEntireSelection(!1,!0),Rt.i.data.showQuickTips&&this.quickTipsInfo.reset()},e.prototype.handleWordRepeatedSignal=function(){this.showSelectionAsRepeated(),this.clearEntireSelection(!1,!0),Rt.i.data.showQuickTips&&this.quickTipsInfo.reset()},e.prototype.handleInputDownOnInputContainer=function(t,e){this.canShowGuide=!1,this.clearEntireSelection(),this.gc.clearSelected(),this.isInputDown=!0,this.currentTileIndex=null,this.selectedTileIndices=[],this.tiles.forEach(function(t){t.adjustInputContainer(.75,.7),t.hideSelect()})},e.prototype.handleInputUpOnInputContainer=function(t,e){var i=this;if(this.canShowGuide=!0,this.isInputDown=!1,this.tiles.forEach(function(t){return t.resetInputContainer()}),this.selectedTileIndices.length){var n=0;this.selectedTileIndices.forEach(function(t){i.tiles[t].model.letter.indexOf("/")>-1?n++:n+=-1===i.tiles[t].model.letter.indexOf("-")?i.tiles[t].model.letter.length:i.tiles[t].model.letter.length-1}),n<3?this.clearEntireSelection():this.gc.checkWord()}},e.prototype.updateInputOnInputContainer=function(){var t,e;if((t=this.getTileUnderPointer())&&!t.disabled&&!((e=t.getTileIndex())>=0&&e===this.currentTileIndex))if(this.checkIfHasSelectedTiles()){if(!this.checkIfTilesAdjacent(e,this.currentTileIndex))return;if(this.checkIfReturned(e))return void this.removeLastTile();if(this.checkIfTileAlreadyExists(e))return;this.selectTile(t,e)}else this.selectTile(t,e)},e.prototype.initArrow=function(t,e){var i;i=t.boardColumn===e.boardColumn?90*(e.boardRow-t.boardRow):t.boardRow===e.boardRow?t.boardColumn-e.boardColumn>-1?180:0:t.boardColumn-e.boardColumn==-1?t.boardRow-e.boardRow==-1?45:-45:t.boardRow-e.boardRow==-1?135:-135;var n=Et.sprite((t.x+e.x)/2,(t.y+e.y)/2,ye.Arrow,this.tilesGroup);n.angle=i,n.anchor.set(.5,.5),n.scale.set(this._scales[this.boardViewData.zoomIndex],this._scales[this.boardViewData.zoomIndex]),this.arrows.push(n)},e.prototype.selectTile=function(t,e){this.currentTileIndex=e,this.gc.addTile(e,!1),(this.selectedTileIndices[this.selectedTileIndices.length-1]||0===this.selectedTileIndices[this.selectedTileIndices.length-1])&&this.initArrow(this.getTileWithIndex(this.selectedTileIndices[this.selectedTileIndices.length-1]),t),this.selectedTileIndices.push(e),t.showSelect()},e.prototype.disableTiles=function(t){this.tiles.forEach(function(e){-1===t.indexOf(e)&&(e.disabled=!0)})},e.prototype.removeLastTile=function(){var t;t=this.getTileWithIndex(this.selectedTileIndices[this.selectedTileIndices.length-1]),this.gc.removeLastTile(),this.selectedTileIndices.pop(),this.currentTileIndex=this.selectedTileIndices[this.selectedTileIndices.length-1],t.hideSelect(),this.arrows[this.arrows.length-1].kill(),this.arrows.splice(this.arrows.length-1,1)},e.prototype.showSelectionAsRepeated=function(){var t=this;jt.i.playWordRepeated(),this.selectedTileIndices.forEach(function(e){t.getTileWithIndex(e).showRepeat()})},e.prototype.showSelectionAsCorrect=function(t){var e=this;t||jt.i.playPositiveCombo(),this.selectedTileIndices.forEach(function(t){var i=e.getTileWithIndex(t);i.hideSelect(),i.showCorrect()}),this._lastTile=this.getTileWithIndex(this.selectedTileIndices[this.selectedTileIndices.length-1])},e.prototype.showSelectionAsIncorrect=function(){var t=this;jt.i.playNegativeCombo(),this.selectedTileIndices.forEach(function(e){t.getTileWithIndex(e).showIncorrect()})},e.prototype.clearEntireSelection=function(t,e){var i=this;this.tiles.forEach(function(t){t.hideHint(),t.hideSelect(),t.hideHighlight()}),this.clearTimeouts(),this.arrows.forEach(function(t){return t.kill()}),this.arrows=[],this.gc.cancelSelection(),this.selectedTileIndices.forEach(function(t){i.getTileWithIndex(t).hideSelect()}),this.gc.gameMode!==re.Regular||t||e||this.quickTipsInfo.handleUserCheck(this.selectedTileIndices.length),this.selectedTileIndices=[]},e.prototype.clearTimeouts=function(){var t=this;this.hintTimeouts.forEach(function(e){return t.game.time.events.remove(e)}),this.listHighlightTimeouts.forEach(function(t){return clearTimeout(t)}),this.hintTimeouts=[],this.listHighlightTimeouts=[]},e.prototype.getTileUnderPointer=function(){var t;t=this.game.input.activePointer;for(var e=0;e<this.tiles.length;e++)if(this.tiles[e].getInputContainerBounds().contains(t.x,t.y))return this.tiles[e]},e.prototype.getTileWithIndex=function(t){for(var e=0;e<this.tiles.length;e++)if(this.tiles[e].getTileIndex()===t)return this.tiles[e]},e.prototype.checkIfTilesAdjacent=function(t,e){var i,n,o,s;return i=this.getTileWithIndex(t),n=this.getTileWithIndex(e),s=Math.abs(n.boardColumn-i.boardColumn),1===(o=Math.abs(n.boardRow-i.boardRow))&&1===s||1===o&&0===s||0===o&&1===s},e.prototype.checkIfTileAlreadyExists=function(t){return-1!==this.selectedTileIndices.indexOf(t)},e.prototype.checkIfReturned=function(t){return this.selectedTileIndices[this.selectedTileIndices.length-2]===t},e.prototype.checkIfHasSelectedTiles=function(){return this.selectedTileIndices.length>0},e.prototype.guideHint=function(t,e){var i=this;this.clearEntireSelection();var n,o=0;t.tiles.forEach(function(t,s){o+=200*s;var r=i.game.time.events.add(200*s,function(){var o;o=i.getTileWithIndex(t.index),e?o.showHighlight():o.showHint(),n&&i.initArrow(n,o),n=o},i);i.hintTimeouts.push(r)});var s=this.game.time.events.add(o+200,function(){i.game.input.enabled=!0,t.tiles.forEach(function(t){i.getTileWithIndex(t.index).hideHint()}),i.clearEntireSelection(),i.hintTimeouts.push(i.game.time.events.add(300,function(){i.guideHint(t)},i))},this);this.hintTimeouts.push(s)},e.prototype.showWord=function(t){var e=this;this.clearEntireSelection();var i,n,o=0;this.listHighlightTimeouts.forEach(function(t){return clearTimeout(t)}),t.tiles.forEach(function(t,s){o+=200*s,e.listHighlightTimeouts.push(setTimeout(function(){(i=e.getTileWithIndex(t.index)).showHighlight(),n&&e.initArrow(n,i),n=i},200*s))}),this.listHighlightTimeouts.push(setTimeout(function(){t.tiles.forEach(function(t){(i=e.getTileWithIndex(t.index)).hideHighlight(),e.clearEntireSelection()})},o+300))},e.prototype.handleTutorialFinish=function(){this.tiles.forEach(function(t){t.hideSelect(),t.hideHint(),t.disabled=!1})},e.prototype.showHintWhenIdle=function(){var t;(t=this.gc.getHint())&&(this.hideHintWhenIdle(),this.startHintAnimation(t))},e.prototype.startHintAnimation=function(t){var e=this;this.clearEntireSelection();var i,n=0;t.tiles.forEach(function(t,o){n+=200*o,e._hintTimeoutWhenIdle.push(setTimeout(function(){var n;(n=e.getTileWithIndex(t.index)).showHighlight(),i&&e.initArrow(i,n),i=n},200*o))}),this._hintTimeoutWhenIdle.push(setTimeout(function(){e.game.input.enabled=!0,t.tiles.forEach(function(t){e.getTileWithIndex(t.index).hideHighlight()}),e.clearEntireSelection()},n+300))},e.prototype.hideHintWhenIdle=function(){this.game.time.events.remove(this._showHintWhenIdleTimer),this._hintTimeoutWhenIdle.forEach(function(t){return clearTimeout(t)}),this.tiles.forEach(function(t){return t.hideHighlight()})},e.prototype.showTileAnimation=function(){for(var t,e=0;e<7;++e)for(var i=0;i<=3;++i)for(var n=0;n<=3;++n)if(i+n===e){switch(this.boardViewData.shuffleIndex){case 0:t=this.tileMatrix[i][n];break;case 1:t=this.tileMatrix[3-i][n];break;case 2:t=this.tileMatrix[3-i][3-n];break;case 3:t=this.tileMatrix[i][3-n]}this.tilesAnimationData.tween=Kt.i.startTilesAnimation(t,e)}},e.prototype.stopTilesAnimation=function(){var t=this;this.tilesAnimationData.timers.forEach(function(e){return t.game.time.events.remove(e)}),this.tilesAnimationData.tween&&this.tilesAnimationData.tween.stop(),this.game.time.events.remove(this._showHintWhenIdleTimer),this.hideHintWhenIdle(),this.tileMatrix.forEach(function(t){return t.forEach(function(t){return t.hideHighlight()})})},e.BoardWidth=675,e.BoardWidthInTiles=4,e.TileCount=16,e.DistanceBetweenTiles=2,e}(Phaser.Group),we=function(t){function e(e,i,n){var o=t.call(this,Et.game,n)||this;return o.x=e,o.y=i,o.init(),o}return Object(lt.__extends)(e,t),Object.defineProperty(e.prototype,"formation",{get:function(){return this._formation},set:function(t){this._formation=t,this._formationText.text=t.displayWord.toLowerCase(),this._scoreText.text=t.score.toString(),this._formationText.x=0,this._formationText.x=this._formationText.width/2-this._scoreText.x+this._scoreText.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formationText",{get:function(){return this._formationText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreText",{get:function(){return this._scoreText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{set:function(t){this._formationText.fontSize=t,this._scoreText.fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{set:function(t){this._formationText.fill=t,this._scoreText.fill=t},enumerable:!0,configurable:!0}),e.prototype.isRepeated=function(){return this._formationText.fill===Vt.Repeated},e.prototype.isFresh=function(){return this._formationText.fill===Vt.Fresh},e.prototype.init=function(){this.initFormationText(),this.initScoreText()},e.prototype.initFormationText=function(){this._formationText=Et.text(0,0,"",{font:"SegoeUI",fontSize:20,fill:"#ffffff"},this)},e.prototype.initScoreText=function(){this._scoreText=Et.text(-10,0,"",{font:"SegoeUI",fontSize:20,fill:"#ffffff"},this)},e}(Phaser.Group),ve=St.AtlassesMain.Frames,Se=function(t){function e(e,i){var n=t.call(this,e)||this;return n.gc=i,n.labels=[],n.handleResize=n.handleMobileLayout.bind(n),n.init(),n}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){this.detachListeners(),t.prototype.destroy.call(this)},e.changeFormationLabelColor=function(t,e,i,n){n.fill=i},e.prototype.updateFormations=function(t){this.formations.length&&(this.clearLabels(),this.clearFormations()),this.formations=t,this.updateLabels()},e.prototype.formationLabelsInputEnable=function(t){this.labels.forEach(function(e){e.formationText.inputEnabled=t,e.scoreText.inputEnabled=t})},e.prototype.showFormationAsRepeated=function(t){var e;(e=this.getExistingIndexInFormations(t))<0||(this.repeatedFormationTween&&this.repeatedFormationTween.stop(!0),this.repeatedFormationTween=Kt.i.startWordRepeatAnimation(t,this.labels[e]))},e.prototype.showFormationAsFresh=function(t){var e;(e=this.getExistingIndexInFormations(t))<0||Kt.i.startWordAddedAnimation(t,this.labels[e])},e.prototype.checkIfHasFormation=function(t){var e;return e=!1,this.formations.forEach(function(i){t.index===i.index&&(e=!0)}),e},e.prototype.init=function(){this.formations=[],this._formationClicked=new Phaser.Signal,this.initLineSpritesTemp1(),this.initLabels(),this.attachListeners(),this.gc.isMobile&&this.handleMobileLayout()},e.prototype.attachListeners=function(){window.addEventListener("resize",this.handleResize)},e.prototype.detachListeners=function(){window.removeEventListener("resize",this.handleResize)},e.prototype.initLabels=function(){var t,i,n,o;this.labels=[],n=0,o=0,t=this.formations.length;for(var s=0;s<t;s++)this.gc.isMobile?this.gc.isPortrait?(i=new we(85+250*n,20+35*o,this)).fontSize=20:(i=new we(70+290*n,20+40*o,this)).fontSize=30:i=new we(70+180*n,180+40*o,this),i.fill=this.getFormationColor(this.formations[s]),i.formationText.anchor.x=.5,i.scoreText.anchor.x=.5,i.formationText.inputEnabled=!0,i.scoreText.inputEnabled=!0,i.formation=this.formations[s],this.add(i),(o+=1)===e.LabelsVerticalCount&&(n+=1,o=0),this.labels.push(i),this.labels[s].formationText.input.useHandCursor=!0,this.labels[s].scoreText.input.useHandCursor=!0,this.labels[s].formationText.events.onInputDown.add(this.handleInputDownOnFormationLabel.bind(this,this.labels[s].formation),this),this.labels[s].formationText.events.onInputOver.add(e.changeFormationLabelColor,this,null,Vt.onHover,this.labels[s]),this.labels[s].formationText.events.onInputOut.add(e.changeFormationLabelColor,this,null,this.getFormationColor(i.formation),this.labels[s])},e.prototype.getFormationColor=function(t){switch(t.state){case Ut.SpecialWord:return Vt.SpecialWord;case Ut.LongWord:return Vt.LongWord;default:return Vt.Normal}},e.prototype.initLineSpritesTemp1=function(){this.leftLineSprite=Et.sprite(207,140,ve.PanelDevider,this,new Phaser.Point(.5,0)),this.leftLineSprite.height=470,this.rightLineSprite=Et.sprite(363,140,ve.PanelDevider,this,new Phaser.Point(.5,0)),this.rightLineSprite.height=470},e.prototype.updateLabels=function(){var t=this;this.labels.forEach(function(t){return t.destroy()}),this.labels=[],this.initLabels(),this.formations.forEach(function(e,i){t.labels[i].formation=e})},e.prototype.clearLabels=function(){this.labels.forEach(function(t){t.formationText.setText(""),t.scoreText.setText("")})},e.prototype.getExistingIndexInFormations=function(t){var e;return e=-1,this.formations.forEach(function(i,n){i.word===t.word&&(e=n)}),e},e.prototype.handleInputDownOnFormationLabel=function(t){this.gc.onFormationClicked.dispatch(t)},e.prototype.clearFormations=function(){this.formations=[]},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){var t=window.innerWidth,i=window.innerHeight;this.gc.setIsPortrait=i>t,this.rightLineSprite.visible=!1,this.gc.isPortrait?(e.LabelsVerticalCount=8,this.leftLineSprite.visible=!1):(e.LabelsVerticalCount=14,this.leftLineSprite.x=280,this.leftLineSprite.y=25,this.leftLineSprite.height=580)}},e.LabelsVerticalCount=11,e}(Phaser.Group),Te=function(){function t(){}return t.degToRad=function(t){return t*(Math.PI/180)},t.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=4},t}(),xe=function(){function t(){}return t.format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})},t}();!function(t){t.Tween=function(){function t(){}return t.all=function(t,e,i){var n=0,o=t.map(function(t){return t.onComplete});o.forEach(function(t){t.addOnce(function(){++n===o.length&&e.call(i)})})},t}()}(Lt||(Lt={}));var _e=St.AtlassesMain.Frames,Pe=function(t){function e(e,i){var n=t.call(this,e)||this;return n.handleResize=n.handleMobileLayout.bind(n),n.gc=i,n.init(),n}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){this.detachListeners(),t.prototype.destroy.call(this)},e.prototype.init=function(){this.pages=[],this.formations=[],this.initBackgroundSprite(),this.initPageGroup(),this.initFirstPage(),this.initLeftArrow(),this.initRightArrow(),this.attachListeners(),this.updateArrowButtonsVisibility(),this.gc.isMobile?this.handleMobileLayout():(this.initProgressArea(),this.initScoreArea(),this.initTitleArea()),this.updateLabels()},e.prototype.attachListeners=function(){this.gc.onTutorialThirdStep.add(this.handleTutorialThirdStep,this),this.gc.onWordAccepted.add(this.handleWordAcceptedSignal,this),this.gc.onWordRepeated.add(this.handleWordRepeatedSignal,this),window.addEventListener("resize",this.handleResize)},e.prototype.detachListeners=function(){this.gc.onTutorialThirdStep.remove(this.handleTutorialThirdStep,this),this.gc.onWordAccepted.remove(this.handleWordAcceptedSignal,this),this.gc.onWordRepeated.remove(this.handleWordRepeatedSignal,this),window.removeEventListener("resize",this.handleResize)},e.prototype.initBackgroundSprite=function(){this.gc.isMobile?this.backgroundSprite=Et.nineSliceSprite(0,0,.36*this.game.width,290,{top:35,bottom:35,left:20,right:40},_e.BoardBackgroundShadow,this):(this.backgroundSprite=this.game.add.sprite(0,0,St.AtlassesMain.getName(),_e.BoardBackground,this),this.backgroundSprite.width=578,this.backgroundSprite.height=620,this.initBackgroundShadow())},e.prototype.initBackgroundShadow=function(){this.bkgShadow=Et.nineSliceSprite(this.backgroundSprite.x-10,this.backgroundSprite.y-10,this.backgroundSprite.width+20,this.backgroundSprite.height+20,{top:40,bottom:40,left:40,right:40},_e.BoardBackgroundShadow,this),this.setChildIndex(this.bkgShadow,0)},e.prototype.initPageGroup=function(){var t;this.pageGroup=this.game.add.group(this),(t=this.game.add.graphics(0,0)).beginFill(16773120),this.gc.isMobile?t.drawRect(0,0,this.width,this.height):t.drawRect(15,155,550,550),this.addChild(t),this.pageGroup.mask=t},e.prototype.newMask=function(t){var i,n=this;t.clear(),this.removeChild(t),(t=this.game.add.graphics(0,0)).beginFill(16773120),t.drawRect(0,0,this.backgroundSprite.width,this.backgroundSprite.height),this.addChild(t),this.pageGroup.mask=t,this.pages.forEach(function(t,o){t.updateFormations(n.formations.slice(i=o*e.PageWordCount,i+e.PageWordCount))})},e.prototype.initRightArrow=function(){jt.i.playAudioPopup(),this.arrowRightButton=Et.sprite(-5,408,_e.ButtonsListArrowButtonsListArrowLeft,this),this.arrowRightButton.inputEnabled=!0,this.arrowRightButton.events.onInputUp.add(this.handleArrowLeftClick,this)},e.prototype.initLeftArrow=function(){jt.i.playAudioPopup(),this.arrowLeftButton=Et.sprite(540,408,_e.ButtonsListArrowButtonsListArrowRight,this),this.arrowLeftButton.inputEnabled=!0,this.arrowLeftButton.events.onInputUp.add(this.handleArrowRightClick,this)},e.prototype.initScoreArea=function(){this.scoreLabel=this.game.add.text(144,48,"Score : 0 / 0",{font:"SegoeUI",fill:"#E5D5C3",fontSize:26,fontWeight:100},this),this.scoreLabel.wordWrap=!0,this.scoreLabel.wordWrapWidth=this.backgroundSprite.width/2,this.scoreLabel.anchor.set(.5)},e.prototype.initProgressArea=function(){this.progressLabel=this.game.add.text(433,48,"Words : 0 / 0",{font:"SegoeUI",fill:"#E5D5C3",fontSize:26,fontWeight:100},this),this.progressLabel.anchor.set(.5)},e.prototype.initTitleArea=function(){var t;switch(Nt.i.puzzleType){case"Suffix":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_SUFFIX",""),Ht.i.getString("WORDAMENT_DESCRIPTION_ENDS",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""));break;case"Prefix":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_PREFIX",""),Ht.i.getString("WORDAMENT_DESCRIPTION_STARTS",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""));break;case"Digram":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_DIGRAM",""),Ht.i.getString("WORDAMENT_DESCRIPTION_USING",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""));break;case"EitherOr":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_EITHEROR",""),Ht.i.getString("WORDAMENT_DESCRIPTION_USING",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""));break;case"Theme":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_THEME",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""));break;case"LongWord":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_LONGWORD",""),Ht.i.getString("WORDAMENT_HIDDEN_LONG",""));break;case"CornerCharacter":t=xe.format(Nt.i.puzzle._theme,Ht.i.getString("WORDAMENT_CORNERS",""),Ht.i.getString("WORDAMENT_DESCRIPTION_Corners",""),Ht.i.getString("WORDAMENT_HIDDEN_COMMON",""))}this.titleLabel=this.game.add.text(this.backgroundSprite.width/2,110,t,{fill:"#60DFFF",fontWeight:100,fontSize:26,align:"center"},this),this.titleLabel.wordWrap=!0,this.titleLabel.wordWrapWidth=this.backgroundSprite.width-50,this.titleLabel.anchor.set(.5,.5)},e.prototype.initFirstPage=function(){this.pageIndex=0,this.addPage()},e.prototype.updateArrowButtonsVisibility=function(){this.arrowRightButton.visible=this.pageIndex>0,this.arrowLeftButton.visible=this.pageIndex<this.pages.length-1},e.prototype.handleArrowRightClick=function(){this.pageIndex!==this.pages.length-1&&(this.scrollToPage(++this.pageIndex),this.updateArrowButtonsVisibility())},e.prototype.handleArrowLeftClick=function(){0!==this.pageIndex&&(this.scrollToPage(--this.pageIndex),this.updateArrowButtonsVisibility())},e.prototype.handleTutorialThirdStep=function(){this.bkgShadow||this.initBackgroundShadow();var t=this.bkgShadow.getBounds();pe.i.initBlocker(t.x,t.y,t.width+20,t.height+20),pe.i.showPopup(t.x,t.y,Rt.i.data.settings.rightHanded?-30:0)},e.prototype.handleWordAcceptedSignal=function(t){var e;(e=this.gc.latestFormation).state=this.gc.isSpecialWord(e.word)?Ut.SpecialWord:e.displayWord.length>5?Ut.LongWord:Ut.Normal,this.addFormation(e,t),this.updateLabels(),this.updateArrowButtonsVisibility(),"dailyChallenge"!==this.gc.gameMode&&se.instance.saveCurrentPuzzle(this.gc.gameEndData,this.gc.getWordsForSave()),-1!==e.wordData.attributeFlags.indexOf("Theme")&&this.handleThemedWordFound()},e.prototype.handleThemedWordFound=function(){this.gc.isMobile||(this.game.add.tween(this.titleLabel.scale).to({x:1.2,y:1.2},200,null,!0),this.game.add.tween(this.titleLabel.scale).to({x:1,y:1},200,null,!0,200))},e.prototype.handleWordRepeatedSignal=function(){var t;(t=this.gc.latestFormation).state=Ut.Repeated,this.showRepeatedFormation(t),this.updateArrowButtonsVisibility()},e.prototype.addPage=function(){var t;t=new Se(this.game,this.gc),this.pageGroup.addChild(t),this.pages.unshift(t),this.pages.forEach(function(t,i){t.x=i*e.PageDistance})},e.prototype.addFormation=function(t,i){var n,o,s=this;this.formations.unshift(t),n=this.pages.length,Math.ceil(this.formations.length/e.PageWordCount)>n&&this.addPage(),this.pages.forEach(function(t,i){t.updateFormations(s.formations.slice(o=i*e.PageWordCount,o+e.PageWordCount))}),this.scrollToPage(0),i||this.pages[0].showFormationAsFresh(t)},e.prototype.showRepeatedFormation=function(t){var e,i;e=this.getPageIndexForFormation(t),i=this.pages[e],this.pageIndex=e,this.scrollToPage(e),i.showFormationAsRepeated(t),this.updateArrowButtonsVisibility()},e.prototype.scrollToPage=function(t){var i,n=this;(i=this.game.tweens.create(this.pageGroup)).onComplete.add(function(){n.arrowLeftButton.inputEnabled=!0,n.arrowRightButton.inputEnabled=!0}),this.arrowLeftButton.inputEnabled=!1,this.arrowRightButton.inputEnabled=!1,i.to({x:t*e.PageDistance*-1},e.PageScrollDuration,Phaser.Easing.Linear.None,!0),this.pageIndex=t,this.pages[t].formationLabelsInputEnable(!0),this.pages.filter(function(e,i){return i!==t}).forEach(function(t){return t.formationLabelsInputEnable(!1)}),this.updateArrowButtonsVisibility()},e.prototype.getPageIndexForFormation=function(t){var e;return e=-1,this.pages.forEach(function(i,n){i.checkIfHasFormation(t)&&(e=n)}),e},e.prototype.updateLabels=function(){this.gc.isMobile||(this.scoreLabel.setText(Ht.i.getString("scoreLabel","Score")+": "+this.gc.getScore()+" / "+Nt.i.totalScore),this.progressLabel.setText(Ht.i.getString("wordLabel","Words")+": "+this.gc.getProgress()+" / "+Nt.i.words.length))},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){this.updateArrowButtonsVisibility();var t=window.innerWidth,i=window.innerHeight;this.gc.setIsPortrait=i>t,this.gc.isPortrait?(e.PageWordCount=5,this.backgroundSprite.width=295,this.backgroundSprite.height=205,this.arrowRightButton.x=-5,this.arrowRightButton.y=60,this.arrowLeftButton.x=245,this.arrowLeftButton.y=60):(e.PageWordCount=28,this.backgroundSprite.width=578,this.backgroundSprite.height=620,this.arrowRightButton.x=-5,this.arrowRightButton.y=250,this.arrowLeftButton.x=525,this.arrowLeftButton.y=250),this.newMask(this.pageGroup.mask),this.pages.forEach(function(t){t.updateLabels()})}},e.PageWordCount=33,e.PageDistance=600,e.PageScrollDuration=300,e}(Phaser.Group),ze=St.AtlassesMain.Frames,Ce=function(t){function e(e,i){var n=t.call(this,e)||this;return n.letter=i,n.init(),n}return Object(lt.__extends)(e,t),e.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=4},e.prototype.init=function(){this.initBackgroundSprite(),this.initLetterLabel()},e.prototype.initBackgroundSprite=function(){this.backgroundSprite=Et.sprite(0,0,ze.TilesMiniTile,this),this.backgroundSprite.anchor.set(.5,.5)},e.prototype.initLetterLabel=function(){this.letterLabel=this.game.add.text(0,3,this.letter,{fill:"#ffffff",fontSize:38,font:"SegoeUI",fontWeight:100}),this.letterLabel.anchor.set(.5),this.backgroundSprite.addChild(this.letterLabel),e.shrinkFontIfOverlap(this.letterLabel,this.letterLabel.width,this.backgroundSprite.width-15)},e}(Phaser.Group),ke=St.AtlassesMain.Frames,Me=function(t){function e(e,i){var n=t.call(this,e)||this;return n.WidthLimit=540,n.handleResize=n.handleMobileLayout.bind(n),n.gc=i,n.init(),n}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){this.detachListeners(),t.prototype.destroy.call(this)},e.prototype.init=function(){this.tiles=[],this.initBackgroundSprite(),this.initTileGroup(),this.attachListeners(),this.gc.isMobile&&(this.initProgressArea(),this.initScoreArea(),this.updateLabels(),this.handleMobileLayout())},e.prototype.initBackgroundSprite=function(){this.backgroundSprite=Et.nineSliceSprite(0,0,570,80,{top:35,bottom:35,left:20,right:40},ke.BoardBackgroundShadow,this)},e.prototype.initTileGroup=function(){this.tileGroup=this.game.add.group(this),this.tileGroup.position.set(40,38)},e.prototype.attachListeners=function(){this.gc.addedTileSignal.add(this.handleAddedTileSignal,this),this.gc.removedTileSignal.add(this.handleRemovedTileSignal,this),this.gc.clearedSelectionSignal.add(this.handleClearedSelectionSignal,this),this.gc.onWordAccepted.add(this.handleWordAccepted,this),window.addEventListener("resize",this.handleResize)},e.prototype.detachListeners=function(){this.gc.addedTileSignal.remove(this.handleAddedTileSignal,this),this.gc.removedTileSignal.remove(this.handleRemovedTileSignal,this),this.gc.clearedSelectionSignal.remove(this.handleClearedSelectionSignal,this),this.gc.onWordAccepted.remove(this.handleWordAccepted,this),window.removeEventListener("resize",this.handleResize)},e.prototype.handleAddedTileSignal=function(t){t||jt.i.playMoveTile();var e=this.gc.latestAddedTile.letter;if(e.indexOf("/")>-1)this.addMiniTile(e);else{for(;e.length>0;)"-"!==e[0]&&"/"!==e[0]?(this.addMiniTile(e.slice(0,1)),e=e.slice(1)):e=e.slice(1);this.adjustTileGroupScale(),this.updateLabels()}},e.prototype.addMiniTile=function(t){var i;(i=new Ce(this.game,t)).position.set(this.tiles.length*e.TileSpacing,0),this.tileGroup.addChild(i),this.tiles.push(i)},e.prototype.handleRemovedTileSignal=function(t){jt.i.playMoveTile();for(var e=t.letter.replace("-","");e.length>0&&-1===e.indexOf("/");)this.removeTile(),e=e.slice(1);-1!==e.indexOf("/")&&this.removeTile()},e.prototype.removeTile=function(){this.tiles[this.tiles.length-1].destroy(),this.tiles.pop(),this.adjustTileGroupScale()},e.prototype.handleClearedSelectionSignal=function(){this.tiles.forEach(function(t){t.destroy()}),this.tiles=[],this.adjustTileGroupScale(),this.updateLabels()},e.prototype.adjustTileGroupScale=function(){this.tileGroup.scale.set(1,1),this.tileGroup.updateTransform(),this.tileGroup.width>=this.WidthLimit&&(this.tileGroup.width=this.WidthLimit,this.tileGroup.scale.y=this.tileGroup.scale.x)},e.prototype.handleWordAccepted=function(t){if(!t){var e=this.gc.latestFormation.wordData,i=e.points;"dailyChallenge"===this.gc.gameMode?Kt.i.animateDCScoreText(this.worldPosition.x+this.backgroundSprite.width/2,this.worldPosition.y+this.backgroundSprite.height/2,e.displayWord.length):Kt.i.animateScoreText(this.worldPosition.x+this.backgroundSprite.width/2,this.worldPosition.y+this.backgroundSprite.height/2,i,e.displayWord.length)}},e.prototype.initScoreArea=function(){this.scoreLabel=this.game.add.text(200,40,"Score : 0 / 0",{font:"SegoeUI",fill:"#E5D5C3",fontSize:40,fontWeight:100},this),this.scoreLabel.anchor.set(.5)},e.prototype.initProgressArea=function(){this.progressLabel=this.game.add.text(this.backgroundSprite.width-200,40,"Words : 0 / 0",{font:"SegoeUI",fill:"#E5D5C3",fontSize:40,fontWeight:100},this),this.progressLabel.anchor.set(.5)},e.prototype.updateLabels=function(){this.gc.isMobile&&(this.tiles&&this.tiles.length?(this.scoreLabel.setText(""),this.progressLabel.setText("")):(this.scoreLabel.setText(Ht.i.getString("scoreLabel","Score")+": "+this.gc.getScore()+" / "+Nt.i.totalScore),this.progressLabel.setText(Ht.i.getString("wordLabel","Words")+": "+this.gc.getProgress()+" / "+Nt.i.words.length)))},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){var t=window.innerWidth,e=window.innerHeight;this.gc.setIsPortrait=e>t,this.gc.isPortrait?(this.WidthLimit=850,this.backgroundSprite.width=.65*this.game.width,this.backgroundSprite.x=15,this.backgroundSprite.y=-70,this.scoreLabel.x=200,this.scoreLabel.y=-30,this.progressLabel.x=780,this.progressLabel.y=-30,this.tileGroup.position.set(70,-30)):(this.WidthLimit=950,this.backgroundSprite.width=1e3,this.backgroundSprite.x=0,this.backgroundSprite.y=0,this.scoreLabel.x=200,this.scoreLabel.y=40,this.progressLabel.x=820,this.progressLabel.y=40,this.tileGroup.position.set(40,38))}},e.TileSpacing=65,e}(Phaser.Group),Ie=St.AtlassesMain.Frames,Be=function(t){function e(e,i,n){var o=t.call(this,Et.game,e,i,St.AtlassesMain.getName(),Nt.i.resetDone?Ie.PuzzleInfoStarBkgReset:Ie.PuzzleInfoStarBkg)||this;return o.maskStartAngle=Te.degToRad(5),o.hasShownAnimation=!1,o._isInitalizing=!1,n.addChild(o),o.anchor.set(.5,.5),o.initialize(),o.progress=.7,o}return Object(lt.__extends)(e,t),Object.defineProperty(e.prototype,"isInitalizing",{set:function(t){this._isInitalizing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{set:function(t){this.updateMask(t),this.circle.visible=!!t,1===t&&(!this.hasShownAnimation&&this._isInitalizing&&(this.foreground.scale.set(1.7,1.7),this.game.add.tween(this.foreground.scale).to({x:1,y:1},350,null,!0)),this.hasShownAnimation=!0,this.foreground.visible=!0,this.circle.mask=null)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.initCircle(),this.initForeground()},e.prototype.initCircle=function(){this.circle=Et.sprite(0,0,Ie.PuzzleInfoStarCircle,this,new Phaser.Point(.5,.5)),this.circleMask=this.game.add.graphics(0,0),this.circleMask.angle-=90,this.circle.mask=this.circleMask,this.circle.addChild(this.circleMask)},e.prototype.updateMask=function(t){this.circleMask.clear(),this.circleMask.beginFill(0,0),this.circleMask.arc(0,0,2+this.circle.width/2,Te.degToRad(360*t)+this.maskStartAngle,this.maskStartAngle,!0),this.circleMask.endFill()},e.prototype.initForeground=function(){this.foreground=Et.sprite(0,0,Ie.PuzzleInfoStarFg,this,new Phaser.Point(.5,.5)),this.foreground.visible=!1},e}(Phaser.Sprite),Oe=function(t){function e(e,i,n,o,s,r){var a=t.call(this,Et.game,r)||this;return a.threshold=o,a.title=s,a.solvedInfoValue=0,a.handleResize=a.handleMobileLayout.bind(a),a._filled=!1,a._isSpecial=!1,a.gc=e,a.position.set(i,n),a.initialize(),a}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){this.detachListeners(),t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"filled",{get:function(){return this._filled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpecial",{get:function(){return this._isSpecial},set:function(t){this._isSpecial=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"letterCount",{get:function(){return this._letterCount},set:function(t){this._letterCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFill",{get:function(){return this._onFill},enumerable:!0,configurable:!0}),e.prototype.animateScore=function(){var t=this,e=this.game.add.tween(this.solvedInfo.scale);e.to({x:1.2,y:1.2},200,null,!0,0,0,!0),e.onComplete.add(function(){return t.solvedInfo.scale.set(1,1)},this)},e.prototype.getObjectiveData=function(){return{title:this.title,max:this.threshold,done:this.solvedInfoValue}},e.prototype.updateSolvedCount=function(t,e){var i=Math.min(t,this.threshold);Kt.i.startStarProgressAnimation(this.star,this.solvedInfoValue/this.threshold,(i-this.solvedInfoValue)/this.threshold),this.solvedInfoValue=i,this.star.isInitalizing=e,this.updateSolvedText(i,e)},e.prototype.initialize=function(){this.initSignals(),this.initStar(),this.initSolvedInfo(),this.attachListeners(),this.gc.isMobile&&this.handleMobileLayout()},e.prototype.initSignals=function(){this._onFill=new Phaser.Signal},e.prototype.initStar=function(){this.star=new Be(0,0,this),this.star.progress=0},e.prototype.initSolvedInfo=function(){this.titleInfo=Et.text(50,-30,this.title,{font:"SegoeUI",fontSize:20,fill:"#E6D1B7"},this),this.titleInfo.wordWrap=!0,this.titleInfo.wordWrapWidth=150,this.titleInfo.lineSpacing=-8,this.solvedInfo=Et.text(50,this.titleInfo.y+this.titleInfo.height-8,"",{font:"SegoeUI",fontSize:28,fill:"#fffc00"},this),this.updateSolvedText(0,!1)},e.prototype.updateSolvedText=function(t,e){t===this.threshold&&(this._onFill.dispatch(e,this),this._filled=!0),this.solvedInfo.text=t.toString()+" / "+this.threshold,this.solvedInfo.clearColors(),this.solvedInfo.addColor("#fffc00",0),this.solvedInfo.addColor("#E6D1B7",t.toString().length)},e.prototype.attachListeners=function(){window.addEventListener("resize",this.handleResize)},e.prototype.detachListeners=function(){window.removeEventListener("resize",this.handleResize)},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){var t=window.innerWidth,e=window.innerHeight;this.gc.setIsPortrait=e>t,this.gc.isPortrait?(this.titleInfo.x=50,this.titleInfo.y=-30,this.star.x=0,this.star.y=0,this.solvedInfo.x=50,this.solvedInfo.y=-9):(this.titleInfo.x=0,this.titleInfo.y=0,this.star.x=30,this.star.y=70,this.solvedInfo.x=80,this.solvedInfo.y=60)}},e}(Phaser.Group),Ae=St.AtlassesMain.Frames,Fe=function(t){function e(e,i,n,o,s,r){var a=t.call(this,Et.game,o)||this;a.gc=e,a.puzzleTitle=r,a.thresholds=[],a.lastStarsFound=[],a.isPortraitFirst=!1,a.isLandscapeFirst=!1,a.handleResize=a.handleMobileLayout.bind(a),a._starCount=0,a.position.set(i,n),a.objectives=s;for(var l=0;l<3;++l)a.lastStarsFound.push(!1);return a.initialize(),a.gc.messageService.nextPuzzleUnlocked=!1,a}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize),t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"nextUnlocked",{get:function(){return this._nextUnlocked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starCount",{get:function(){return this._starCount},set:function(t){this._starCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onNextPuzzleClick",{get:function(){return this._onNextPuzzleClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onThreeStarsCollected",{get:function(){return this._onThreeStarsCollected},enumerable:!0,configurable:!0}),e.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=8},e.prototype.checkForUnlockButton=function(){this.thresholds.some(function(t){return t.getObjectiveData().done===t.getObjectiveData().max})&&this.unlockNextPuzzleButton()},e.prototype.unlockNextPuzzleButton=function(){var t=this;this.gc.messageService.nextPuzzleUnlocked=!0,this._nextUnlocked=!0,this.lockedButton.visible=!1,this.nextPuzzleButton.visible=!0,this.nextPuzzleButtonText.visible=!0,this.nextPuzzleButton.inputEnabled=!0,this.nextPuzzleButton.input.useHandCursor=!0,this.nextPuzzleButton.events.onInputUp.add(function(){t.nextPuzzleButton.input.checkPointerOver(t.game.input.activePointer)&&t.handleNextPuzzleButtonClick()},this),this.nextPuzzleButton.events.onInputOver.add(function(){return t.inputOverNextButton.visible=!0},this),this.nextPuzzleButton.events.onInputOut.add(function(){return t.inputOverNextButton.visible=!1},this),this.nextPuzzleButton.scale.set(.9,.9),this.handleMobileLayout()},e.prototype.getObjectivesResults=function(){return this.thresholds.map(function(t){return t.getObjectiveData()})},e.prototype.initialize=function(){this.initSignals(),this.initBackground(),this.initLockedButton(),this.initInputOverNextButton(),this.initNewPuzzleButton(),this.initThresholds(),this.attachListeners(),this.gc.isMobile?this.handleMobileLayout():this.initHeader()},e.prototype.initSignals=function(){this._onNextPuzzleClick=new Phaser.Signal,this._onThreeStarsCollected=new Phaser.Signal},e.prototype.initBackground=function(){var t,e;this.gc.isMobile?(this.portraitBackground=Et.nineSliceSprite(0,-10,1430,100,{top:10,bottom:10,left:58,right:58},Ae.PuzzleInfoBkgPuzzleInfoBkg,this),this.landscapeBackground=Et.nineSliceSprite(-250,-10,760,200,{top:50,bottom:50,left:50,right:50},Ae.PuzzleInfoBkgPuzzleInfoBkg,this),this.gc.isPortrait?this.isPortraitFirst=!0:this.isLandscapeFirst=!0):(t=Et.nineSliceSprite(0,30,245,125,{top:9,bottom:7,left:54,right:10},Ae.PuzzleInfoBkgEngravedStarpanelLeft,this),e=Et.nineSliceSprite(t.x+t.width,t.y-34,340,158,{top:40,bottom:14,left:45,right:45},Ae.PuzzleInfoBkgEngravedStarpanelCenter,this),Et.nineSliceSprite(e.x+e.width,t.y,425,125,{top:40,bottom:14,left:45,right:45},Ae.PuzzleInfoBkgEngravedStarpanelRight,this),Et.nineSliceSprite(t.x+3,t.y,836,124,{top:10,bottom:10,left:58,right:58},Ae.PuzzleInfoBkgPuzzleInfoBkg,this))},e.prototype.initHeader=function(){this.headerBkg=Et.nineSliceSprite(417,22,332,40,{top:4,left:28,right:31,bottom:6},Ae.PuzzleInfoPuzzleInfoHeader,this,new Phaser.Point(.5,.5)),this.headerBkg.tint=10747928,this.puzzleName=Et.text(0,6,this.puzzleTitle,{font:"SegoeUI",fontSize:27,fill:"#e6d1b7"},this.headerBkg,new Phaser.Point(.5,.5)),e.shrinkFontIfOverlap(this.puzzleName,this.puzzleName.width,this.headerBkg.width-10)},e.prototype.initLockedButton=function(){var t=this;this.lockedButton=Et.sprite(915,100,Ae.PuzzleInfoNewPuzzle,this,new Phaser.Point(.5,.5)),this.lockedButton.inputEnabled=!0,this.lockedButton.events.onInputDown.add(function(){t.handleLockedBtnInputDown(),jt.i.playNextPuzzleBlocked()},this)},e.prototype.initNewPuzzleButton=function(){this.nextPuzzleButton=Et.sprite(830,50,Ae.PuzzleInfoNextButton,this),this.nextPuzzleButton.visible=!1;var t=Ht.i.getStringFromMain("nextPuzzle","Next\n Puzzle");this.nextPuzzleButtonText=Et.text(this.nextPuzzleButton.width/2-10,this.nextPuzzleButton.height/2,t,{align:"center",fontSize:24,fill:"#BFE2FF"},this.nextPuzzleButton,new Phaser.Point(.5,.5)),this.nextPuzzleButtonText.visible=!1},e.prototype.initInputOverNextButton=function(){this.inputOverNextButton=Et.sprite(835,50,Ae.PuzzleInfoNextBtnOnHover,this),this.inputOverNextButton.scale.set(.72,.72),this.inputOverNextButton.visible=!1},e.prototype.initThresholds=function(){for(var t,e=0;e<3;e++)(t=new Oe(this.gc,75+260*e,93,this.objectives[e].max,this.objectives[e].title,this)).onFill.addOnce(this.handleThresholdCompleted.bind(this,e),this),this.thresholds.push(t);this.thresholds[0].letterCount=Nt.i.objectiveDefinitions[0].properties._wordLength,this.thresholds[2].isSpecial=!0,this.thresholds[2].letterCount=Nt.i.objectiveDefinitions[2].properties._wordLength},e.prototype.handleThresholdCompleted=function(t,e,i){this.gc.showLockButtonTutorial&&this.gc.handleTutorialForthStep(),this.gc.handleStarEarned(t);var n=0===this._starCount;this._starCount++;var o=3===this._starCount;o&&!e&&this._onThreeStarsCollected.dispatch(this.getObjectivesResults()),this.showStarAnimation(e,i,o,n)},e.prototype.handleWordFound=function(t){this.lastStarsFound=[!1,!1,!1],this.thresholds[0].letterCount===this.gc.letterCountObjective&&(this.thresholds[0].updateSolvedCount(this.gc.solutionCount.letterWords,t),this.gc.latestFormation.displayWord.replace("'","").length===this.gc.letterCountObjective&&(this.lastStarsFound[0]=!this.thresholds[0].filled)),this.lastStarsFound[1]=!this.thresholds[1].filled,this.thresholds[1].updateSolvedCount(this.gc.solutionCount.points,t),this.lastStarsFound[2]="Theme"===this.gc.latestFormation.wordData.attributeFlags&&!this.thresholds[2].filled,this.thresholds[2].updateSolvedCount(this.gc.solutionCount.themedWords,t)},e.prototype.handleNextPuzzleButtonClick=function(){jt.i.playAudioPopup(),this._onNextPuzzleClick.dispatch(this.getObjectivesResults())},e.prototype.attachListeners=function(){this.gc.onWordAccepted.add(this.handleWordFound,this),this.gc.onTutorialForthStep.add(this.handleTutorialForthStep,this),Kt.i.buttonUnlocked.add(this.unlockNextPuzzleButton,this),Kt.i.onValidateWordSparkleComplete.add(this.handleSparkleAnimationComplete,this),window.addEventListener("resize",this.handleResize)},e.prototype.showStarAnimation=function(t,e,i,n,o){if(!t){jt.i.playStarEarned();var s=this.position.x+this.width/2-70,r=this.position.y+this.height/2+10;Kt.i.startStarEarnAnimation(e.worldPosition,new PIXI.Point(this.x+this.lockedButton.x,this.y+this.lockedButton.y),n,this.lockedButton,new Phaser.Point(s,r),i,o),Kt.i.startStarTextAnimation(new Phaser.Point(s,r),i,t)}},e.prototype.handleTutorialForthStep=function(){this.gc.showLockButtonTutorial=!1,pe.i.showLockBtnTutorial=!0,this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}),this.game.device.desktop&&pe.i.initBlocker(this.lockedButton.x+this.lockedButton.width+280-ht.a.wordament.resizeGap,this.lockedButton.y-40,this.lockedButton.width+10,this.lockedButton.height+10),pe.i.showPopup(1e3,500)},e.prototype.handleSparkleAnimationComplete=function(){for(var t=0;t<3;++t)this.lastStarsFound[t]&&this.thresholds[t].animateScore()},e.prototype.handleLockedBtnInputDown=function(){ue.i.addElement(this.lockedButton)},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){this.nextPuzzleButton.visible=!1,this.lockedButton.visible=!1;var t=window.innerWidth,e=window.innerHeight;this.gc.setIsPortrait=e>t;var i=null;if(this.gc.isPortrait){this.landscapeBackground.visible=!1,this.portraitBackground.visible=!0;for(var n=this.portraitBackground.width,o=0;o<3;o++)(i=this.thresholds[o]).scale.set(1.75,1),i.x=130+o*(.35*n),i.y=40}else for(this.landscapeBackground.visible=!0,this.portraitBackground.visible=!1,n=-220,this.isLandscapeFirst||(this.landscapeBackground.width=750,this.landscapeBackground.x=-250,n=-220),o=0;o<3;o++)(i=this.thresholds[o]).scale.set(1.3,1.3),i.x=n+o*(.35*this.landscapeBackground.width),i.y=20}},e}(Phaser.Group),De=function(t){function e(e){var i=t.call(this,Et.game,e.x,e.y,St.AtlassesMain.getName(),null)||this;return i.buttonData=e,i.initialize(),i.state=Le.Up,i.updateFrame(),i}return Object(lt.__extends)(e,t),e.prototype.setLabelHeight=function(t){this.label.y=t},e.prototype.hideLabel=function(){this.label.visible=!1},Object.defineProperty(e.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{set:function(t){this.clickArea.inputEnabled=t,t?(this.clickArea.input.useHandCursor=!0,this.state=Le.Up):this.state=Le.Disabled,this.updateFrame()},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.initSignals(),this.initClickArea(),this.initIcon(),this.initLabel()},e.prototype.handleInputDown=function(){this.state=Le.Down,this.updateFrame()},e.prototype.handleInputUp=function(){this.state=Le.Up,this.updateFrame(),this._onClick.dispatch()},e.prototype.handleInputOut=function(){this.state!==Le.Down&&(this.state=Le.Out,this.updateFrame())},e.prototype.handleInputOver=function(){this.state!==Le.Down&&(this.state=Le.Over,this.updateFrame())},e.prototype.initSignals=function(){this._onClick=new Phaser.Signal},e.prototype.initClickArea=function(){var t=this.buttonData.clickArea;this.clickArea=this.game.add.graphics(0,0),this.clickArea.beginFill(0,0),this.clickArea.drawCircle(t.x,t.y,t.diameter),this.clickArea.endFill(),this.clickArea.inputEnabled=!0,this.clickArea.input.useHandCursor=!0,this.clickArea.events.onInputDown.add(this.handleInputDown,this),this.clickArea.events.onInputUp.add(this.handleInputUp,this),this.clickArea.events.onInputOut.add(this.handleInputOut,this),this.clickArea.events.onInputOver.add(this.handleInputOver,this),this.addChild(this.clickArea)},e.prototype.initIcon=function(){this.icon=Et.sprite(this.buttonData.clickArea.x,this.buttonData.clickArea.y,this.buttonData.icon,this,new Phaser.Point(.5,.5))},e.prototype.initLabel=function(){this.label=Et.text(this.buttonData.clickArea.x+this.buttonData.label.x,this.buttonData.clickArea.y+this.buttonData.label.y,Ht.i.getString(this.buttonData.label.text,""),{font:"SegoeUI",fontSize:26,fill:"#2d2825"},this,new Phaser.Point(.5,.5)),Te.shrinkFontIfOverlap(this.label,26,140)},e.prototype.updateFrame=function(){var t;switch(this.state){case Le.Down:t=this.buttonData.downFrame||this.buttonData.upFrame;break;case Le.Over:t=this.buttonData.overFrame||this.buttonData.upFrame;break;case Le.Out:case Le.Up:t=this.buttonData.upFrame;break;case Le.Disabled:t=this.buttonData.disabledFrame||this.buttonData.upFrame}this.frameName=t},e}(Phaser.Image),Le=function(t){return t[t.Down=0]="Down",t[t.Up=1]="Up",t[t.Over=2]="Over",t[t.Out=3]="Out",t[t.Disabled=4]="Disabled",t}({}),We=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonData=e,i.isActive=!0,i}return Object(lt.__extends)(e,t),e.prototype.initialize=function(){t.prototype.initialize.call(this),this.initOverlay()},e.prototype.handleInputUp=function(){this.isActive&&(this._onClick.dispatch(),this.startTimeout(),this.enabled=!1)},e.prototype.initOverlay=function(){this.angleGap=Te.degToRad(5),this.circle=this.game.add.graphics(0,0),this.circle.angle-=90,this.icon.addChild(this.circle)},e.prototype.updateOverlay=function(t){this.circle.clear(),this.circle.beginFill(0,.6),this.circle.arc(0,0,this.buttonData.clickArea.radius,Te.degToRad(360*t)+this.angleGap,0,!0),this.circle.endFill()},e.prototype.startTimeout=function(){var t=this;this.circle.visible=!0,this.isActive=!1;var e=this.game.add.tween({p:0}).to({p:1},this.buttonData.time,null,!0);e.onUpdateCallback(function(e,i){t.updateOverlay(i)},this),e.onComplete.add(function(){t.isActive=!0,t.circle.visible=!1,t.enabled=!0})},e}(De),Ee=Phaser.Circle,Ne=St.AtlassesMain.Frames,Ge=function(){function t(){}return t.HintButton={x:882,y:340,icon:Ne.ButtonsIconsHint,label:{x:0,y:64,text:"hint"},upFrame:Ne.ButtonsBtnGreyBigUp,downFrame:Ne.ButtonsBtnGreyBigDown,overFrame:Ne.ButtonsBtnGreyBigOver,disabledFrame:Ne.ButtonsBtnGreyBigDisabled,time:5e3,clickArea:new Ee(45,40,78)},t.ZoomButton={x:882,y:530,icon:Ne.ButtonsIconsZoom,label:{x:0,y:64,text:"zoom"},upFrame:Ne.ButtonsBtnGreyBigUp,downFrame:Ne.ButtonsBtnGreyBigDown,overFrame:Ne.ButtonsBtnGreyBigOver,clickArea:new Ee(45,40,78)},t.RotateButton={x:882,y:730,icon:Ne.ButtonsIconsShuffle,label:{x:0,y:64,text:"rotate"},upFrame:Ne.ButtonsBtnGreyBigUp,downFrame:Ne.ButtonsBtnGreyBigDown,overFrame:Ne.ButtonsBtnGreyBigOver,clickArea:new Ee(45,40,78)},t.OptionsButton={x:320,y:50,icon:Ne.ButtonsIconsOptions,label:{x:0,y:60,text:"options"},upFrame:Ne.ButtonsBtnGreyBigUp,downFrame:Ne.ButtonsBtnGreyBigDown,overFrame:Ne.ButtonsBtnGreyBigOver,clickArea:new Ee(45,40,78)},t.RestartButton={x:1400,y:60,icon:Ne.ButtonsIconsRetry,label:{x:0,y:60,text:"restart"},upFrame:Ne.ButtonsBtnGreyBigUp,downFrame:Ne.ButtonsBtnGreyBigDown,overFrame:Ne.ButtonsBtnGreyBigOver,clickArea:new Ee(45,40,78)},t}(),Re=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleResize=e.handleGameResized.bind(e),e}return Object(lt.__extends)(e,t),Object.defineProperty(e,"id",{get:function(){return null==e._id&&(e._id=new e),e._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tutorialSeen",{get:function(){return!!qt.i.getItem("dcTutorialSeen")},set:function(t){qt.i.setItem("dcTutorialSeen",t?"1":"0")},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e){this.gc=t,this.game=e,this.initButtons(),this._tutorialFinished=!1,this.completed=!1,this.currentStep=1,window.addEventListener("resize",this.handleResize)},e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize)},e.prototype.initBlocker=function(t,e,i,n,o){this.lastDCBlockerMeasurements={x:t,y:e,width:i,height:n},this.word=this.word||o;var s=document.getElementById("gameContainer").childNodes[0],r=parseInt(s.style.width,10)/1451,a=parseInt(s.style.height,10)/1026,l=this.getWorldPosition(t,e);this.blocker=document.getElementById("ftueBlocker"),this.blocker.style.display="block",this.blocker.style.width=i*r+"px",this.blocker.style.height=n*a+"px",this.blocker.style.left="calc(-100vw - 10px + "+l.x+"px)",this.blocker.style.top="calc(-100vh - 10px + "+l.y+"px)"},e.prototype.showPopup=function(t,e,i){var n=this;if(this.lastDCPopupMeasurements={x:t,y:e,floatSize:i},this.currentStep>this.stepsCount)return this.hide(),void this.gc.onTutorialFinish.dispatch();var o=this.getStepText();this.getWorldPosition(t,e),document.getElementById("popupText").innerHTML=o;var s=document.getElementById("popupBtn");s.onclick=function(){jt.i.playAudioPopup(),1===n.currentStep?n.handleSecondStep():2===n.currentStep&&(n.hide(!0),n._tutorialFinished=!0)},s.style.display="block",this.popupDiv=document.getElementById("popupContainer"),this.popupDiv.style.display="flex"},e.prototype.getStepText=function(){switch(this.currentStep){case 1:return Ht.i.getString("dcFtueSeq1Info","In this mode, there are gems on some of the letter tiles. The goal is to collect enough gems before you run out of moves.");case 2:return Ht.i.getString("dcFtueSeq2Info","If you collect three or more gems in a single word, a rainbow Double Gem will appear on the last letter of the word. Double Gems are worth double")}},e.prototype.handleGameResized=function(){clearTimeout(this.blockerTimeout),clearTimeout(this.popupTimeout),this._tutorialFinished||(this.blockerTimeout=setTimeout(this.reInitBlocker.bind(this),130)),this._tutorialFinished||(this.popupTimeout=setTimeout(this.reInitPopup.bind(this),130))},e.prototype.reInitBlocker=function(){this.initBlocker(this.lastDCBlockerMeasurements.x,this.lastDCBlockerMeasurements.y,this.lastDCBlockerMeasurements.width,this.lastDCBlockerMeasurements.height)},e.prototype.reInitPopup=function(){this.showPopup(this.lastDCPopupMeasurements.x,this.lastDCPopupMeasurements.y,this.lastDCPopupMeasurements.floatSize)},e.prototype.handleSecondStep=function(){this.currentStep++,this.gc.onDailyChallengeTutorialSecondStep.dispatch()},e}(pe),je=function(t){function e(e,i,n,o){var s=t.call(this,e)||this;return s.puzzleName=o,s.zoomIndex=0,s.handleResize=s.handleMobileLayout.bind(s),s.puzzleClickEventSubscription=null,s.gc=i,s.objectives=n,s.x-=ht.a.wordament.resizeGap,s.gc.messageService.wrapperMessage$.pipe(Object(Ft.a)(s.gc.messageService.destroy$)).subscribe({next:function(t){return s.handleOnMessage(t)},error:function(t){return s.onMessageError(t)}}),s.game.device.desktop||(s.gc.setIsMobile=!0,s.calculateScreenMetrics()),s.init(),s.gc.isMobile&&(s.scaleButton.visible=!1,s.optionsButton.visible=!1,s.rotateButton.setLabelHeight(105),s.hintButton&&s.hintButton.setLabelHeight(105),s.handleMobileLayout()),s}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){this.game.time.events.removeAll(),this.detachListeners(),this.gc.destroy(),pe.i.destroy(),Kt.i.destroy(),window.removeEventListener("resize",this.handleResize),t.prototype.destroy.call(this)},e.prototype.handlePuzzleExit=function(){jt.i.stopBackgroundMusic(),this.gc.sendDataOnExit(this.puzzleInfo.getObjectivesResults())},e.prototype.handleGameAction=function(t){this.gc.messageService.sendMessageToWrapper({action:"buttonClick",type:t})},e.prototype.handleOptionsClick=function(){jt.i.playAudioPopup(),this.handleGameAction("options")},e.prototype.handleOnMessage=function(t){t.state===pt.Show?(this.show(),window.focus()):t.state===pt.Exit&&this.handlePuzzleExit()},e.prototype.onMessageError=function(t){console.error(t)},e.prototype.init=function(){this.showTutorial=Rt.i.data.settings.wordament.showWordamentTutorial,ue.i.init(this.game),this.initBoardView(),this.initFormationView(),this.initButtons(),this.initListView(),Kt.i.initialize(),this.initPuzzleInfo(),this.initOptionsData(),this.attachListeners()},e.prototype.show=function(){var t=this;this.alreadyShown||(this.game.input.enabled=!1,this.alreadyShown=!0,this.gc.initializeSavedData(),this.startAppearAnimation(),this.isTutorialNeeded()&&this.sendTutorialStartedMessage(),this.boardView.animateTileAppear(function(){t.initTutorial(),t.game.input.enabled=!0,t.gc.startTime=Date.now()},this),this.gc.gameMode!==re.DailyChallenge&&(this.startTilesAnimation(),this.gc.gameMode!==re.QuickPlay&&this.puzzleInfo.checkForUnlockButton(),this.checkForReset()))},e.prototype.attachListeners=function(){var t=this;Rt.i.onUpdate.add(function(e){return t.handleSettingsUpdated(e.settings)}),this.gc.onTutorialFirstStep.add(this.handleTutorialFirstStep,this),this.gc.onTutorialSecondStep.add(this.handleTutorialSecondStep,this),this.gc.onTutorialFinish.add(this.handleTutorialFinish,this),this.gc.onHint.add(this.handleHotKeyHint,this),this.gc.onZoom.add(this.handleScaleClick,this),this.gc.onOptions.add(this.handleOptionsClick,this),this.gc.onNextPuzzle.add(this.handleNextPuzzle,this),this.gc.onRotateBoard.add(this.handleShuffleClick,this),this.gc.onWordAccepted.add(this.handleWordAccepted,this),this.puzzleClickEventSubscription=this.gc.messageService.nextPuzzleClickEvent.subscribe(function(){console.log("next puzzle attempt"),t.puzzleInfo&&(t.puzzleInfo.checkForUnlockButton(),t.puzzleInfo.handleNextPuzzleButtonClick())}),window.addEventListener("resize",this.handleResize)},e.prototype.startAppearAnimation=function(){Kt.i.startObjectAppear(this.scaleButton),this.optionsButton&&Kt.i.startObjectAppear(this.optionsButton),Kt.i.startObjectAppear(this.rotateButton),Kt.i.startObjectAppear(this.formationView),Kt.i.startObjectAppear(this.puzzleInfo),Kt.i.startObjectAppear(this.listView),this.hintButton&&Kt.i.startObjectAppear(this.hintButton)},e.prototype.handleHotKeyHint=function(){this.hintButton.isActive&&(this.hintButton.onClick.dispatch(),this.hintButton.startTimeout())},e.prototype.startTilesAnimation=function(){this.boardView.startTilesAnimation()},e.prototype.detachListeners=function(){this.puzzleClickEventSubscription.unsubscribe()},e.prototype.initOptionsData=function(){this.handleSettingsUpdated(Rt.i.data.settings)},e.prototype.initBoardView=function(){this.boardView=new be(this.game,this.gc),this.boardView.position.set(1021,275),this.addChild(this.boardView)},e.prototype.initListView=function(){this.listView=new Pe(this.game,this.gc),this.listView.position.set(270,202),this.listView.alpha=0,this.addChild(this.listView)},e.prototype.initFormationView=function(){this.formationView=new Me(this.game,this.gc),this.formationView.position.set(999,210),this.formationView.alpha=0,this.addChild(this.formationView)},e.prototype.initButtons=function(){this.hintButton=new We(Ge.HintButton),this.hintButton.scale.set(1.15,1.15),this.hintButton.onClick.add(this.handleHintClick,this),this.addChild(this.hintButton),this.hintButton.alpha=0,this.scaleButton=new De(Ge.ZoomButton),this.scaleButton.scale.set(1.15,1.15),this.scaleButton.onClick.add(this.handleScaleClick,this),this.addChild(this.scaleButton),this.scaleButton.alpha=0,this.rotateButton=new De(Ge.RotateButton),this.rotateButton.scale.set(1.15,1.15),this.rotateButton.onClick.add(this.handleShuffleClick,this),this.addChild(this.rotateButton),this.rotateButton.alpha=0,this.optionsButton=new De(Ge.OptionsButton),this.optionsButton.onClick.add(this.handleOptionsClick,this),this.addChild(this.optionsButton),this.optionsButton.alpha=.2},e.prototype.handleNextPuzzle=function(){this.puzzleInfo&&(this.puzzleInfo.checkForUnlockButton(),this.puzzleInfo.nextUnlocked&&this.handleNextPuzzleClick(this.objectives))},e.prototype.initPuzzleInfo=function(){this.puzzleInfo=new Fe(this.gc,537,12,this,this.objectives,this.puzzleName),this.puzzleInfo.onNextPuzzleClick.add(this.handleNextPuzzleClick,this),this.puzzleInfo.onThreeStarsCollected.add(this.handleNextPuzzleClick,this),this.puzzleInfo.alpha=.15},e.prototype.initTutorial=function(){this.isTutorialNeeded()&&(this.sendTutorialStartedMessage(),this.startTutorial())},e.prototype.isTutorialNeeded=function(){return!(this.gc.gameMode!==re.Regular&&this.gc.gameMode!==re.QuickPlay||!Rt.i.data.settings.wordament.showWordamentTutorial)},e.prototype.startTutorial=function(){var t=this;if(pe.i.initialize(this.gc,this.game),pe.i.tutorialSeen){if(!this.showTutorial)return;this.gc.handleTutorialSecondStep(),pe.i.tutorialSeen=!0,this.showTutorial=!1}else pe.i.tutorialSeen=!0,this.gc.showLockButtonTutorial=!0,this.gc.handleTutorialFirstStep(),pe.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialSecondStep()},this)},e.prototype.handleHintClick=function(){this.hintButton.isActive&&(jt.i.playHint(),this.gc.gameEndData.hintUsed(),this.boardView.showHint())},e.prototype.handleScaleClick=function(){var t=this;this.gc.disableKeyboardInput(),jt.i.playZoom(),this.boardView.zoom(),this.zoomIndex--,this.zoomIndex<0&&(this.zoomIndex=2),this.game.time.events.add(100,function(){return t.gc.enableKeyboardInput()},this)},e.prototype.handleShuffleClick=function(){var t=this;jt.i.playRotate(),this.game.input.enabled=!1,this.boardView.shuffleTiles(function(){return t.game.input.enabled=!0},this)},e.prototype.handleTutorialSecondStep=function(){this.hintButton.enabled=!1,this.scaleButton.enabled=!1,this.rotateButton.enabled=!1},e.prototype.handleTutorialFinish=function(){this.hintButton.enabled=!0,this.scaleButton.enabled=!0,this.rotateButton.enabled=!0},e.prototype.handleNextPuzzleClick=function(t,e){var i=this;e||(this.gc.gameEndData.endTimer(this.gc.startTime),this.hideAllWithAnimations().onComplete.addOnce(function(){i.gc.handleNextPuzzleClick(t),jt.i.stopBackgroundMusic()},this))},e.prototype.handleWordAccepted=function(t){if(!t&&Rt.i.data.settings.wordament.scoringAnimations){var i=this.boardView.lastTile;Kt.i.animateScore(i.worldPosition.x,i.worldPosition.y,this.gc.latestFormation.wordData.points,this,e._scales[this.zoomIndex]),this.showTutorial&&this.gc.handleTutorialForthStep()}},e.prototype.hideAllWithAnimations=function(){this.game.input.enabled=!1,this.gc.disableKeyboardInput(),this.startHideAnimation();var t=Kt.i.startShowWellDoneAnimation(this.puzzleInfo.starCount);return t?this.boardView.hideTilesWithAnimation():t=this.boardView.hideTilesWithAnimation(),t},e.prototype.startHideAnimation=function(){Kt.i.startHideAllAnimation(this.formationView,900),Kt.i.startHideAllAnimation(this.hintButton,900),Kt.i.startHideAllAnimation(this.rotateButton,900),Kt.i.startHideAllAnimation(this.scaleButton,900),Kt.i.startHideAllAnimation(this.listView,900),Kt.i.startHideAllAnimation(this.optionsButton,900)},e.prototype.handleSettingsUpdated=function(t){this.gc.isMobile||(t.rightHanded?this.handleRightHanded():this.handleLeftHanded(),this.showTutorial=t.wordament.showWordamentTutorial,this.gc.onOptionsIsVisible=!1)},e.prototype.handleLeftHanded=function(){this.boardView.position.set(330,275),this.formationView.position.set(320,190),this.listView.position.set(1060,185),this.scaleButton.position.set(932,530),this.rotateButton.position.set(932,730),this.hintButton.position.set(932,340)},e.prototype.handleRightHanded=function(){this.boardView.position.set(1013,275),this.formationView.position.set(999,190),this.listView.position.set(270,202),this.hintButton.position.set(882,340),this.scaleButton.position.set(882,530),this.rotateButton.position.set(882,730)},e.prototype.sendTutorialStartedMessage=function(){this.gc.gameMode!==re.DailyChallenge&&this.showTutorial?this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}):this.gc.gameMode!==re.DailyChallenge||Re.id.tutorialSeen||this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"})},e.prototype.checkForReset=function(){se.instance.getCurrentPuzzleData().reset&&this.puzzleInfo.unlockNextPuzzleButton()},e.prototype.handleTutorialFirstStep=function(){this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}),pe.i.initBlocker(this.puzzleInfo.x-ht.a.wordament.resizeGap,this.puzzleInfo.y-2,this.puzzleInfo.width+20,this.puzzleInfo.height+10),pe.i.showPopup(800,400,25)},e.prototype.handleMobileLayout=function(){this.game&&this.gc.isMobile&&(this.calculateScreenMetrics(),this.gc.isPortrait?(this.game.scale.setGameSize(1451,1026),this.boardView.position.set(195,155),this.boardView.scale.set(2.6,1),this.formationView&&(this.formationView.position.set(180,148),this.formationView.scale.set(1.51,1)),this.listView&&(this.listView.position.set(205,710),this.listView.scale.set(2.5,1.1)),this.puzzleInfo&&this.puzzleInfo.position.set(200,0),this.rotateButton.scale.set(2,1.5),this.rotateButton.position.set(1045,735),this.hintButton&&(this.hintButton.scale.set(2,1.5),this.hintButton.x=1335,this.hintButton.y=this.rotateButton.y),this.restartButton&&(this.restartButton.scale.set(2,1.5),this.restartButton.x=1335,this.restartButton.y=this.rotateButton.y,this.restartButton.setLabelHeight(105))):(this.game.scale.setGameSize(2300,1126),this.boardView.position.set(1350,120),this.boardView.scale.set(1.8,1.8),this.formationView&&(this.formationView.position.set(1350,5),this.formationView.scale.set(1,1.4)),this.listView&&(this.listView.position.set(550,202),this.listView.scale.set(1.3,1.2)),this.puzzleInfo&&this.puzzleInfo.position.set(800,20),this.rotateButton.scale.set(2,2),this.rotateButton.position.set(320,600),this.hintButton&&(this.hintButton.scale.set(2,2),this.hintButton.x=this.rotateButton.x,this.hintButton.y=this.rotateButton.y-300),this.restartButton&&(this.restartButton.scale.set(2,2),this.restartButton.x=this.rotateButton.x,this.restartButton.y=this.rotateButton.y-300,this.restartButton.setLabelHeight(105))))},e.prototype.calculateScreenMetrics=function(){var t=window.innerWidth,e=window.innerHeight;this.gc.setIsPortrait=e>t},e._scales=[1,.8,.6],e}(Phaser.Group),He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lt.__extends)(e,t),e.prototype.init=function(t,e,i,n){var o=this;this.messageService=n,this.difficulty=t,this.objectives=e,this.messageService.wrapperMessage$.pipe(Object(Ft.a)(this.messageService.destroy$)).subscribe({next:function(t){return o.handleOnMessage(t)},error:function(t){return o.onMessageError(t)}}),this.puzzleName=i},e.prototype.create=function(){window.focus(),this.game.world.addChild(new je(this.game,new le(re.Regular,this.messageService,this.difficulty),this.objectives,this.puzzleName)),jt.i.playBackgroundMusic()},e.prototype.update=function(){ue.i.update()},e}(he),Ve=St.AtlassesMain.Frames,Ue=function(t){function e(e,i,n,o,s,r){var a=t.call(this,Et.game,o)||this;return a.gc=e,a.objectives=s,a.puzzleTitle=r,a.gemsCount=0,a.isBlinking=!1,a.BigGemValue=2,a.handleResize=a.handleMobileLayout.bind(a),a.position.set(i,n),a.initialize(),a}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize),t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"onDailyChallengeEnd",{get:function(){return this._onDailyChallengeEnd},enumerable:!0,configurable:!0}),e.prototype.sendResults=function(){var t={value:Math.min(this.gemsCount,this.objectives.totalGems),max:this.objectives.totalGems};this.gc.handleDailyChallengeEnd(this.gemsCount,this.objectives.totalMoves,t)},e.prototype.animateScore=function(){this.gemsCount++,this.game.add.tween(this.gemsLabel.scale).to({x:1.2,y:1.2},200,null,!0,0,0,!0),this.gemsLabel.setText(Math.min(this.gemsCount,this.objectives.totalGems)+" / "+this.objectives.totalGems),this.gameEndDone||this.gemsCount>=this.objectives.totalGems&&(this.gameEndDone=!0,this._onDailyChallengeEnd.dispatch(!0))},e.prototype.initialize=function(){this.moveCount=this.objectives.totalMoves,this.initBackground(),this.initGemScore(),this.initGem(),this.initMoveCount(),this.initSignals(),this.attachListeners(),this.gc.isMobile?this.handleMobileLayout():(this.initHeader(),this.initPuzzleName())},e.prototype.initBackground=function(){var t;this.gc.isMobile?(this.portraitBackground=Et.nineSliceSprite(-605,-37,1025,100,{top:10,bottom:10,left:58,right:58},Ve.PuzzleInfoBkgPuzzleInfoBkg,this),this.landscapeBackground=Et.nineSliceSprite(-420,-10,600,200,{top:10,bottom:10,left:58,right:58},Ve.PuzzleInfoBkgPuzzleInfoBkg,this)):(this.leftShadow=Et.nineSliceSprite(0,25,126,125,{top:9,bottom:7,left:54,right:10},Ve.PuzzleInfoBkgEngravedStarpanelLeft,this),t=Et.nineSliceSprite(this.leftShadow.x+this.leftShadow.width,this.leftShadow.y-41,225,165,{top:50,bottom:10,left:80,right:90},Ve.PuzzleInfoBkgEngravedStarpanelCenter,this),Et.nineSliceSprite(t.x+t.width,this.leftShadow.y,135,125,{top:13,bottom:13,left:10,right:65},Ve.PuzzleInfoBkgEngravedStarpanelRight,this),this.bkg=Et.nineSliceSprite(this.leftShadow.x+4,this.leftShadow.y+3,477,120,{top:13,bottom:13,left:56,right:62},Ve.PuzzleInfoBkgPuzzleInfoBkg,this))},e.prototype.initHeader=function(){var t=Et.nineSliceSprite(240,15,219,50,{top:4,left:28,right:31,bottom:6},Ve.PuzzleInfoPuzzleInfoHeader,this,new Phaser.Point(.5,.5));t.tint=10747928,this.headerBkg=t},e.prototype.initPuzzleName=function(){this.puzzleName=Et.text(this.headerBkg.x,this.headerBkg.y+6,this.puzzleTitle,{font:"SegoeUI",fontSize:27,fill:"#e6d1b7"},this,new Phaser.Point(.5,.5)),this.shrinkFontIfOverlap(this.puzzleName,this.puzzleName.width,this.headerBkg.width-10)},e.prototype.initGemScore=function(){this.gemsLabel=Et.text(60,65,this.gemsCount+" / "+this.objectives.totalGems,{font:"SegoeUI",fill:"#F8FA35",fontSize:40},this)},e.prototype.initGem=function(){this.gemSprite=Et.sprite(200,59,Ve.GemIcon,this,null)},e.prototype.initMoveCount=function(){var t=Et.text(290,65,this.moveCount.toString(),{font:"SegoeUI",fill:"#F8FA35",fontSize:40},this),e=Et.text(341,114,Ht.i.getStringFromMain("moves","Moves"),{font:"SegoeUI",fill:"#E6D1B7",fontSize:28},this);e.anchor.set(0,1),this.shrinkFontIfOverlap(e,e.width,100),this.movesLabel=t,this.movesText=e},e.prototype.startBlinking=function(){if(!this.isBlinking)if(this.game.device.desktop){var t=this.game.add.group(this),e=Et.nineSliceSprite(240,15,219,50,{top:4,left:28,right:31,bottom:6},Ve.PuzzleInfoPuzzleInfoLowMovesHeader,this,new Phaser.Point(.5,.5)),i=Et.nineSliceSprite(this.bkg.x+8,this.bkg.y+8,this.bkg.width-14,this.bkg.height-14,{top:13,bottom:13,left:56,right:62},Ve.PuzzleInfoBkgPuzzleInfoLowMovesBkg,this);t.addMultiple([e,i]),t.alpha=0,Kt.i.showWarningForLowMoves(t),this.isBlinking=!0}else{var n;n=this.landscapeBackground.visible?this.landscapeBackground:this.portraitBackground,t=this.game.add.group(this),i=Et.nineSliceSprite(n.x+8,n.y+8,n.width-14,n.height-14,{top:13,bottom:13,left:56,right:62},Ve.PuzzleInfoBkgPuzzleInfoLowMovesBkg,this),t.addMultiple([i]),t.alpha=0,Kt.i.showWarningForLowMoves(t),this.isBlinking=!0}},e.prototype.initSignals=function(){this._onDailyChallengeEnd=new Phaser.Signal},e.prototype.attachListeners=function(){this.gc.onWordAccepted.add(this.handleMoveDeclined,this),this.gc.onWordDeclined.add(this.handleMoveDeclined,this),this.gc.onBigGemFound.add(this.handleBigGemFound,this),window.addEventListener("resize",this.handleResize)},e.prototype.handleBigGemFound=function(){this.gemsLabel.setText(Math.min(this.gemsCount,this.objectives.totalGems)+" / "+this.objectives.totalGems),this.gemsCount>=this.objectives.totalGems&&this._onDailyChallengeEnd.dispatch(!0)},e.prototype.handleMoveDeclined=function(){this.moveCount--;var t=Math.max(0,this.moveCount);this.movesLabel.text=t.toString(),this.moveCount<=3&&(jt.i.playRedPulse(),this.startBlinking()),this.moveCount>=1?(this.gc.objectives.gemsPerWave+this.BigGemValue)*(this.moveCount-1)+this.gc.getGemsValue()<this.gc.objectives.totalGems-this.gemsCount&&this._onDailyChallengeEnd.dispatch(!1,!0):0===this.moveCount&&this.gemsCount<this.objectives.totalGems&&this._onDailyChallengeEnd.dispatch(!1)},e.prototype.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=8},e.prototype.handleMobileLayout=function(){if(this.game&&this.gc.isMobile){var t=window.innerWidth,e=window.innerHeight;this.gc.setIsPortrait=e>t,this.gemsLabel.fontSize=50,this.movesLabel.fontSize=50,this.movesText.fontSize=35,this.gc.isPortrait?(this.landscapeBackground.visible=!1,this.portraitBackground.visible=!0,this.gemsLabel.x=-450,this.gemsLabel.y=-15,this.gemSprite.x=-280,this.gemSprite.y=-18,this.movesLabel.x=80,this.movesLabel.y=-15,this.movesText.x=160,this.movesText.y=40):(this.landscapeBackground.visible=!0,this.portraitBackground.visible=!1,this.gemsLabel.x=-280,this.gemsLabel.y=60,this.gemSprite.x=-140,this.gemSprite.y=60,this.movesLabel.x=-60,this.movesLabel.y=60,this.movesText.x=5,this.movesText.y=115)}this.isBlinking&&(Kt.i.stopWarningForLowMoves(),this.isBlinking=!1,this.startBlinking())},e}(Phaser.Group),Xe=St.AtlassesMain.Frames,Ke=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.hasGem=!1,s._hasBigGem=!1,s}return Object(lt.__extends)(e,t),e.prototype.addGem=function(t){this.hasGem=!0,this.backgroundSprite.frameName=Xe.TilesBonusTile,this._model.weight=100,t&&(this.scale.set(0,0),this.game.add.tween(this.scale).to({x:ce.scales[this.zoomIndex],y:ce.scales[this.zoomIndex]},300,null,!0))},e.prototype.removeGem=function(){this.hasGem=!1;var t=this.initBackgroundSpriteClone();this._hasBigGem?Kt.i.removeBigGem(this.worldPosition,ce.scales[this.zoomIndex]):Kt.i.removeGem(t,ce.scales[this.zoomIndex]),this._hasBigGem=!1,this.backgroundSprite.frameName=Xe.TilesTile,this._model.weight=0,setTimeout(function(){t.destroy()},1e3)},e.prototype.initBigGem=function(){var t=this;this.hasGem=!0,this._hasBigGem=!0,jt.i.playBigGemAppear(),Kt.i.playBigGemAppear(this.worldPosition,ce.scales[this.zoomIndex]).add(function(){t.game.add.tween(t.letterLabel).from({alpha:0},350,null,!0)}),this.backgroundSprite.frameName=Xe.BigGem,this._model.weight=200},e.prototype.showSelect=function(){var e=this;this.hasGem?(this.selected=!0,this.game.add.tween(this.backgroundSprite.scale).to({x:this._scale.x+.06,y:this._scale.y+.06},50,null,!0,0,0,!0).onComplete.add(function(){e.backgroundSprite.scale.set(e._scale.x,e._scale.y)})):t.prototype.showSelect.call(this)},e.prototype.showHint=function(){},e.prototype.hideHint=function(){},e.prototype.initScoreLabel=function(){},e.prototype.updateLabels=function(){this.letterLabel.setText(this._model.letter),this.letterLabel.width>this.width&&ce.shrinkFontIfOverlap(this.letterLabel,this.letterLabel.width,this.width-4)},e.prototype.initBackgroundSpriteClone=function(){var t=Et.sprite(0,0,this._hasBigGem?Xe.BigGem:Xe.TilesBonusTile,this.bkg);return t.anchor.set(.5,.5),t.scale.set(ce.scales[this.zoomIndex],ce.scales[this.zoomIndex]),t},e}(ce),qe=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initGems(),n.attachDailyChallengeListeners(),n}return Object(lt.__extends)(e,t),Object.defineProperty(e.prototype,"lastTiles",{get:function(){return this._lastTiles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigGems",{get:function(){return this._bigGems},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.detachDailyChallengeListeners(),t.prototype.destroy.call(this)},e.prototype.initGems=function(){var t=this;this.gc.gemIndexes.forEach(function(e){t.getTileWithIndex(e).addGem()})},e.prototype.getTileWithIndex=function(t){for(var e=0;e<this.tiles.length;e++)if(this.tiles[e].getTileIndex()===t)return this.tiles[e]},e.prototype.initTiles=function(){var t,e,i,n;this.tiles=[],this.tilesGroup=this.game.add.group(this),this.tileMatrix=[];for(var o=0;o<4;++o)this.tileMatrix[o]=[];for(e=0,i=0,o=0;o<be.TileCount;o++){n=Nt.i.cells[Math.floor(o/4)][o%4];var s=new Zt(n,o%4,Math.floor(o/4)),r=this._scales[this.boardViewData.zoomIndex],a=be.DistanceBetweenTiles*r;(t=new Ke(this.game,s,e,i)).position.set(10+e*(ce.getWidth()*r+a)+(ce.getWidth()+a)/2,20+i*(ce.getHeight()*r+a)+(ce.getHeight()+a)/2),this.tileMatrix[i].push(t),(e+=1)===be.BoardWidthInTiles&&(e=0,i+=1),this.tilesGroup.addChild(t),this.tiles.push(t),t.scale.set(0,0)}this.tilesGroup.x=this.width/2-this.tilesGroup.width/2-15,this.tilesGroup.y=this.height/2-this.tilesGroup.height/2-15;var l=this.tiles.map(function(t){return t.model}).sort(function(t,e){return t.index-e.index});this.gc.setTiles(l)},e.prototype.handleGemCollected=function(t){var e,i=this;this._lastTiles=[],t.forEach(function(t){e=i.getTileWithIndex(t.index),i._lastTiles.push(e),e.removeGem()}),t.length>2&&(this._bigGems=[],(e=this.getTileWithIndex(this.selectedTileIndices[this.selectedTileIndices.length-1])).initBigGem(),this._bigGems.push(e),this.gc.bigGemIndexes.push(e.getTileIndex()))},e.prototype.handleGemsUpdated=function(){var t=this;this.gc.gemIndexes.forEach(function(e){t.getTileWithIndex(e).addGem(!0)})},e.prototype.handleBigGemFound=function(t){this.tiles[t].removeGem()},e.prototype.handleDailyChallengeTutorialFirstStep=function(){this.game.input.enabled=!1,Re.id.initBlocker(this.x-ht.a.wordament.resizeGap-15,this.y-100,this.width-50,this.height+10),Re.id.showPopup(this.x-ht.a.wordament.resizeGap,this.y,Rt.i.data.settings.rightHanded?0:-34)},e.prototype.handleDailyChallengeTutorialSecondStep=function(){Re.id.initBlocker(this.x-ht.a.wordament.resizeGap-15,this.y-100,this.width-50,this.height+10),Re.id.showPopup(this.x-ht.a.wordament.resizeGap,this.y,Rt.i.data.settings.rightHanded?0:-34)},e.prototype.attachDailyChallengeListeners=function(){this.gc.onGemCollected.add(this.handleGemCollected,this),this.gc.onGemsUpdated.add(this.handleGemsUpdated,this),this.gc.onBigGemFound.add(this.handleBigGemFound,this),this.gc.onDailyChallengeTutorialFirstStep.add(this.handleDailyChallengeTutorialFirstStep,this),this.gc.onDailyChallengeTutorialSecondStep.add(this.handleDailyChallengeTutorialSecondStep,this)},e.prototype.detachDailyChallengeListeners=function(){this.gc.onGemsUpdated.remove(this.handleGemsUpdated,this),this.gc.onGemCollected.remove(this.handleGemCollected,this),this.gc.onBigGemFound.remove(this.handleBigGemFound,this),this.gc.onDailyChallengeTutorialFirstStep.remove(this.handleDailyChallengeTutorialFirstStep,this),this.gc.onDailyChallengeTutorialSecondStep.remove(this.handleDailyChallengeTutorialSecondStep,this)},e}(be),Je=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(lt.__extends)(e,t),e.prototype.initLabels=function(){var t,e,i,n,o=this;this.labels=[],i=0,n=0,t=this.formations.length;for(var s=function(t){r.gc.isMobile?r.gc.isPortrait?(e=new we(70+250*i,40+35*n,r)).fontSize=20:(e=new we(70+290*i,20+40*n,r)).fontSize=30:e=new we(90+180*i,90+40*n,r),e.fill=r.getFormationColor(r.formations[t]),e.formationText.anchor.x=.5,e.scoreText.anchor.x=.5,e.formationText.inputEnabled=!0,e.scoreText.inputEnabled=!0,e.formation=r.formations[t],r.addChild(e),(n+=1)===Se.LabelsVerticalCount&&(i+=1,n=0),r.labels.push(e),r.labels[t].scoreText.input.useHandCursor=!0,r.labels[t].formationText.input.useHandCursor=!0,r.labels[t].formationText.events.onInputDown.add(r.handleInputDownOnFormationLabel.bind(r,r.labels[t].formation),r),r.labels[t].formationText.events.onInputOver.add(function(){return o.labels[t].fill=Vt.onHover},r),r.labels[t].formationText.events.onInputOut.add(function(){return o.labels[t].fill=Vt.Normal},r)},r=this,a=0;a<t;a++)s(a)},e.prototype.initLineSpritesTemp1=function(){t.prototype.initLineSpritesTemp1.call(this),this.leftLineSprite.position.set(207,0),this.leftLineSprite.height=630,this.rightLineSprite.position.set(363,0),this.rightLineSprite.height=630},e}(Se),Ye=St.AtlassesMain.Frames,Ze=function(t){function e(e,i){return t.call(this,e,i)||this}return Object(lt.__extends)(e,t),e.prototype.initBackgroundSprite=function(){this.gc.isMobile?this.backgroundSprite=Et.nineSliceSprite(0,10,.36*this.game.width,290,{top:35,bottom:35,left:20,right:40},Ye.BoardBackgroundShadow,this):(this.backgroundSprite=Et.nineSliceSprite(0,0,578,650,{top:26,bottom:37,left:25,right:37},Ye.DailyChallengeBoardBackground,this),this.initBackgroundShadow())},e.prototype.initBackgroundShadow=function(){this.bkgShadow=Et.nineSliceSprite(this.backgroundSprite.x-5,this.backgroundSprite.y-5,this.backgroundSprite.width-2,this.backgroundSprite.height-2,{top:40,bottom:40,left:40,right:40},Ye.BoardBackgroundShadow,this),this.setChildIndex(this.bkgShadow,0)},e.prototype.addPage=function(){var t;t=new Je(this.game,this.gc),this.pageGroup.addChild(t),this.pages.unshift(t),this.pages.forEach(function(t,e){t.x=e*Pe.PageDistance})},e.prototype.initPageGroup=function(){var t;this.pageGroup=this.game.add.group(this),(t=this.game.add.graphics(0,0)).beginFill(16773120),t.drawRect(10,10,560,730),this.addChild(t),this.pageGroup.mask=t},e.prototype.initScoreArea=function(){},e.prototype.initTitleArea=function(){},e.prototype.initProgressArea=function(){},e.prototype.updateLabels=function(){},e.prototype.handleThemedWordFound=function(){},e}(Pe),Qe=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onAnimationDone",{get:function(){return this._onAnimationDone},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e){this.initSignals(),this._game=e,this.puzzleInfoPosition=t},t.prototype.destroy=function(){this.disposeSignals(),delete this._game,delete this.puzzleInfoPosition,delete t._i},t.prototype.showGameCompleteAnimation=function(t,e){var i=t?Ht.i.getString("dailyChallengeWon","Well Done!"):e?Ht.i.getString("dailyChallengeNotEnoughMoves","Not Enough Moves\nRemaining!"):Ht.i.getString("dailyChallengeLoose","Better Luck Next Time!");return t?this.showGameWinTextAnimation(i):this.showGameLooseTextAnimation(i)},t.prototype.animateScore=function(t,e,i){var n=this,o=[];t.forEach(function(t,s){o.push(n.createLabelAnimation(t.x,t.y,s,e)),i&&o.push(n.createLabelAnimation(t.x,t.y,s+1,e,i))}),setTimeout(function(){o.forEach(function(t){t&&t.destroy()})},900*(o.length+1))},t.prototype.showGameWinTextAnimation=function(t){var e=Et.text(900-ht.a.wordament.resizeGap,this._game.world.centerY,t,{font:"bold SegoeUI",fontSize:170,fontStyle:"italic",fill:"#F3FFFE"},this._game.world,new Phaser.Point(.5,.5));e.scale.set(.3,.3),this._game.add.tween(e.scale).to({x:1,y:1},600,Phaser.Easing.Back.Out,!0),this._game.add.tween(e.position).to({x:e.x+80},2500,null,!0,500);var i=this._game.add.tween(t).to({alpha:0},350,null,!0,3e3);return i.onComplete.add(function(){return e.destroy()},this),i},t.prototype.showGameLooseTextAnimation=function(t){var e=Et.text(950-ht.a.wordament.resizeGap,this._game.world.centerY,t,{font:"bold SegoeUI",fontSize:100,fontStyle:"italic",fill:"#F3FFFE",align:"center"},this._game.world,new Phaser.Point(.5,.5));e.scale.set(.3,.3),e.stroke="#4D5866",e.strokeThickness=4,this._game.add.tween(e.scale).to({x:1,y:1},600,Phaser.Easing.Back.Out,!0),this._game.add.tween(e.position).to({x:e.x+80},2500,null,!0,500);var i=this._game.add.tween(t).to({alpha:0},350,null,!0,3e3);return i.onComplete.add(function(){return e.destroy()},this),i},t.prototype.createLabelAnimation=function(e,i,n,o,s){var r=this;if(Rt.i.data.settings.wordament.scoringAnimations){var a=Et.text(e-10,i,"+1",{font:"bold SegoeUI",fontSize:125*t._scales[t.zoomIndex],fill:"#79EF97",stroke:"#022A48",strokeThickness:5},o,new Phaser.Point(.5,0));return a.scale.set(0,0),Et.game.add.tween(a.position).to({y:s?a.position.y-220*t._scales[t.zoomIndex]:a.position.y-180*t._scales[t.zoomIndex]},450,null,!0),Et.game.add.tween(a.scale).to({x:1,y:1},450,null,!0,s?150:0).onComplete.add(function(){Et.game.add.tween(a).to({fontSize:40},200,null,!0,s?450*(n+2):450*(n+1));var t=Et.game.add.tween(a);t.to({x:[a.x,a.x+320,r.puzzleInfoPosition.x+65+ht.a.wordament.resizeGap+10*n,r.puzzleInfoPosition.x+ht.a.wordament.resizeGap+65+10*n],y:[a.y,a.y+300,r.puzzleInfoPosition.y+65-35*n,r.puzzleInfoPosition.y+65-35*n]},780,Phaser.Easing.Quartic.In,!0,s?450*(n+1):450*n),t.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),t.onComplete.add(function(){r._onAnimationDone.dispatch()},r)},this),a}this._onAnimationDone.dispatch()},t.prototype.initSignals=function(){this._onAnimationDone=new Phaser.Signal},t.prototype.disposeSignals=function(){this._onAnimationDone.dispose()},t._scales=[1,.8,.6],t.zoomIndex=0,t}(),$e=function(t){function e(e,i,n){var o=t.call(this,e,i,i.objectives,n)||this;return o.initialize(),o}return Object(lt.__extends)(e,t),e.prototype.destroy=function(){Re.i.destroy(),Qe.i.destroy(),t.prototype.destroy.call(this)},e.prototype.handlePuzzleExit=function(){jt.i.stopBackgroundMusic(),this.gc.sendDataOnExit(null)},e.prototype.initButtons=function(){this.scaleButton=new De(Ge.ZoomButton),this.scaleButton.scale.set(1.15,1.15),this.scaleButton.onClick.add(this.handleScaleClick,this),this.addChild(this.scaleButton),this.scaleButton.alpha=0,this.rotateButton=new De(Ge.RotateButton),this.rotateButton.scale.set(1.15,1.15),this.rotateButton.onClick.add(this.handleShuffleClick,this),this.addChild(this.rotateButton),this.rotateButton.alpha=0,this.optionsButton=new De(Ge.OptionsButton),this.optionsButton.onClick.add(this.handleOptionsClick,this),this.addChild(this.optionsButton),this.optionsButton.alpha=.15,this.handleMobileLayout()},e.prototype.initTutorial=function(){this.isTutorialNeeded()&&(this.sendTutorialStartedMessage(),Re.id.initialize(this.gc,this.game),Re.id.tutorialSeen=!0,this.gc.handleDailyChallengeTutorialFirstStep())},e.prototype.isTutorialNeeded=function(){return!Re.id.tutorialSeen},e.prototype.handleTutorialFinish=function(){this.game.input.enabled=!0},e.prototype.initBoardView=function(){this.boardView=new qe(this.game,this.gc),this.boardView.position.set(1021,275),this.addChild(this.boardView)},e.prototype.initListView=function(){this.listView=new Ze(this.game,this.gc),this.listView.position.set(270,202),this.addChild(this.listView),this.listView.alpha=.15},e.prototype.initPuzzleInfo=function(){},e.prototype.startHideAnimation=function(){Kt.i.startHideAllAnimation(this.formationView,300),Kt.i.startHideAllAnimation(this.rotateButton,300),Kt.i.startHideAllAnimation(this.scaleButton,300),Kt.i.startHideAllAnimation(this.listView,300),Kt.i.startHideAllAnimation(this.optionsButton,300)},e.prototype.handleWordAccepted=function(t){if(!t){var e=this.boardView.lastTiles.map(function(t){return t.worldPosition});Qe.i.animateScore(e,this)}},e.prototype.handleLeftHanded=function(){this.boardView.position.set(330,275),this.formationView.position.set(320,190),this.listView.position.set(1060,185),this.scaleButton.position.set(932,375),this.rotateButton.position.set(932,600)},e.prototype.handleRightHanded=function(){this.boardView.position.set(1013,275),this.formationView.position.set(999,190),this.listView.position.set(270,202),this.scaleButton.position.set(882,375),this.rotateButton.position.set(882,600)},e.prototype.startAppearAnimation=function(){Kt.i.startObjectAppear(this.scaleButton),this.optionsButton&&Kt.i.startObjectAppear(this.optionsButton),Kt.i.startObjectAppear(this.rotateButton),Kt.i.startObjectAppear(this.formationView),Kt.i.startObjectAppear(this.dailyPuzzleInfo),Kt.i.startObjectAppear(this.listView),Kt.i.startObjectAppear(this.restartButton)},e.prototype.handleRestartClick=function(){jt.i.playAudioPopup(),this.handleGameAction("restart")},e.prototype.hideAllAnimations=function(t,e){return this.startHideAnimation(),this.boardView.hideTilesWithAnimation(),t?jt.i.playDCWon():jt.i.playDCLost(),Qe.i.showGameCompleteAnimation(t,e)},e.prototype.handleBigGemFound=function(){var t=this.boardView.bigGems.map(function(t){return t.worldPosition});Qe.i.animateScore(t,this,!0)},e.prototype.initialize=function(){this.initDailyPuzzleInfo(),this.initRestartButton(),Qe.i.initialize(this.dailyPuzzleInfo.worldPosition,this.game),this.attachDailyChallengeListeners(),this.handleMobileLayout()},e.prototype.initDailyPuzzleInfo=function(){this.dailyPuzzleInfo=new Ue(this.gc,726,27,this,this.gc.objectives,this.puzzleName),this.dailyPuzzleInfo.alpha=.15},e.prototype.initRestartButton=function(){this.restartButton=new De(Ge.RestartButton),this.restartButton.onClick.add(this.handleRestartClick,this),this.addChild(this.restartButton),this.restartButton.alpha=.15},e.prototype.attachDailyChallengeListeners=function(){this.dailyPuzzleInfo.onDailyChallengeEnd.add(this.handleDailyChallengeEnd,this),this.gc.onBigGemFound.add(this.handleBigGemFound,this),Qe.i.onAnimationDone.add(this.dailyPuzzleInfo.animateScore,this.dailyPuzzleInfo)},e.prototype.handleDailyChallengeEnd=function(t,e){var i=this;this.game.input.enabled=!1,this.gc.disableKeyboardInput(),this.hideAllAnimations(t,e).onComplete.addOnce(function(){i.dailyPuzzleInfo.sendResults(),jt.i.stopBackgroundMusic()},this.dailyPuzzleInfo)},e.prototype.handleMobileLayout=function(){t.prototype.handleMobileLayout.call(this),this.game&&this.gc.isMobile&&(this.gc.isPortrait?(this.boardView.position.set(205,145),this.dailyPuzzleInfo&&(this.dailyPuzzleInfo.position.set(1050,25),this.dailyPuzzleInfo.scale.set(1.4,1)),this.listView&&(this.listView.position.set(205,700),this.listView.scale.set(2.5,1.1))):(this.boardView.position.set(1350,100),this.dailyPuzzleInfo&&(this.dailyPuzzleInfo.position.set(1050,5),this.dailyPuzzleInfo.scale.set(1,1)),this.listView&&this.listView.position.set(550,180)))},e}(je),ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lt.__extends)(e,t),e.prototype.init=function(t,e,i,n){var o=this;this.difficulty=t,this.puzzleName=e,this.difficultySettings=i,this.messageService=n,this.messageService.wrapperMessage$.pipe(Object(Ft.a)(this.messageService.destroy$)).subscribe({next:function(t){return o.handleOnMessage(t)},error:function(t){return o.onMessageError(t)}})},e.prototype.create=function(){window.focus(),jt.i.playDailyChallengeBackgroundMusic(),this.game.world.addChild(new $e(this.game,new le(re.DailyChallenge,this.messageService,this.difficulty,this.difficultySettings),this.puzzleName))},e}(he),ei=St.AtlassesMain.Frames,ii=function(t){function e(e,i,n,o,s,r){return t.call(this,e,i,n,o,s,r)||this}return Object(lt.__extends)(e,t),e.prototype.initNewPuzzleButton=function(){var t=this;this.lockedButton.visible=!1,this.nextPuzzleButton=Et.sprite(830,50,ei.PuzzleInfoNextButton,this),this.gc.isMobile&&(this.nextPuzzleButton.visible=!1);var e=Ht.i.getString("endPuzzle","End\nPuzzle");this.nextPuzzleButtonText=Et.text(this.nextPuzzleButton.width/2-10,this.nextPuzzleButton.height/2,e,{align:"center",fontSize:24,fill:"#BFE2FF"},this.nextPuzzleButton,new Phaser.Point(.5,.5)),this.nextPuzzleButton.inputEnabled=!0,this.nextPuzzleButton.input.useHandCursor=!0,this.nextPuzzleButton.events.onInputUp.add(function(){t.nextPuzzleButton.input.checkPointerOver(t.game.input.activePointer)&&t.handleNextPuzzleButtonClick()},this),this.nextPuzzleButton.events.onInputOver.add(function(){return t.inputOverNextButton.visible=!0},this),this.nextPuzzleButton.events.onInputOut.add(function(){return t.inputOverNextButton.visible=!1},this),this.nextPuzzleButton.scale.set(.9,.9)},e.prototype.initHeader=function(){this.headerBkg=Et.nineSliceSprite(417,22,332,40,{top:4,left:28,right:31,bottom:6},ei.PuzzleInfoPuzzleInfoHeader,this,new Phaser.Point(.5,.5)),this.headerBkg.tint=10747928,this.puzzleName=Et.text(0,6,this.puzzleTitle,{font:"SegoeUI",fontSize:27,fill:"#e6d1b7"},this.headerBkg,new Phaser.Point(.5,.5)),Fe.shrinkFontIfOverlap(this.puzzleName,this.puzzleName.width,this.headerBkg.width-10),this.gc.isMobile&&(this.puzzleName.visible=!1)},e.prototype.handleThresholdCompleted=function(t,e,i){this.gc.handleStarEarned(t);var n=0===this.starCount;this.starCount++;var o=3===this.starCount;o&&!e&&this._onThreeStarsCollected.dispatch(this.getObjectivesResults()),this.showStarAnimation(e,i,o,n,!0)},e}(Fe),ni=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.puzzleName=o,s}return Object(lt.__extends)(e,t),e.prototype.initPuzzleInfo=function(){this.gc.isMobile&&this.gc.isPortrait?(this.puzzleInfo=new ii(this.gc,190,0,this,this.objectives,this.puzzleName),this.puzzleInfo.width=this.game.width-20):this.puzzleInfo=new ii(this.gc,537,22,this,this.objectives,this.puzzleName),this.puzzleInfo.onNextPuzzleClick.add(this.handleNextPuzzleClick,this),this.puzzleInfo.onThreeStarsCollected.add(this.handleNextPuzzleClick,this),this.puzzleInfo.alpha=.15},e.prototype.hideAllWithAnimations=function(){var t;return this.startHideAnimation(),(t=Kt.i.startShowWellDoneAnimation(this.puzzleInfo.starCount))?this.boardView.hideTilesWithAnimation():t=this.boardView.hideTilesWithAnimation(),t},e.prototype.startHideAnimation=function(){Kt.i.startHideAllAnimation(this.formationView,700),Kt.i.startHideAllAnimation(this.hintButton,700),Kt.i.startHideAllAnimation(this.rotateButton,700),Kt.i.startHideAllAnimation(this.scaleButton,700),Kt.i.startHideAllAnimation(this.listView,700),Kt.i.startHideAllAnimation(this.optionsButton,700)},e}(je),oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lt.__extends)(e,t),e.prototype.init=function(t,e,i,n){this.difficulty=t,this.objectives=e,this.puzzleName=i,this.messageService=n,this.messageService.onGameMessage.pipe(Object(Ft.a)(this.messageService.destroy$)).subscribe(this.handleOnMessage.bind(this))},e.prototype.create=function(){window.focus(),this.game.world.addChild(new ni(this.game,new le(re.QuickPlay,this.messageService,this.difficulty),this.objectives,this.puzzleName)),jt.i.playBackgroundMusic()},e}(he),si=ht.a.wordament,ri=si.defaultGameWidth,ai=si.defaultGameHeight;if("USER_SCALE"===si.scaleMode){var li=ct.calculateScreenMetrics(ri,ai);ri=li.gameWidth,ai=li.gameHeight}var hi={width:ri,height:ai,renderer:Phaser.CANVAS,transparent:!0,parent:"gameContainer",resolution:1},ui=function(t){function e(e){var i=t.call(this,hi)||this;return Et.initialize(i),window.game=i,i.state.add("boot",Dt),i.state.add("load",Jt),i.state.add("game",He),i.state.add("dailyChallenge",ti),i.state.add("quickPlay",oi),i.state.start("boot",!1,!1,e),i}return Object(lt.__extends)(e,t),e}(Phaser.Game),di=(i("LOV/"),function(){function t(t,e,i){this.gameManager=t,this.messageService=e,this.changeDetectorRef=i,this.frameId="game",this.handleKeyPress()}return t.prototype.ngOnInit=function(t){this.gameManager.init(at.a.Wordament,this.frameId,this,t),this.isDC=this.gameManager.isDC,this.messageService.setUnsubscribeSubject(this.gameManager.ngUnsubscribe),this.attachListeners(),this.gameBackground=this.gameManager.initGameBackground(),this.destroyGame(),this.gameRef=new ui(this.messageService),this.firstFocusableElement=document.getElementById("btnClose")},t.prototype.ngOnDestroy=function(){this.gameManager.onDestroy(),this.destroyGame(),this.gameRef=null,this.gameSrc=null,this.goalText=null,this.showGoalBar=!1,this.isDC=!1},t.prototype.handleQuickTipCloseClick=function(){this.gameManager.handleQuickTipCloseClick()},t.prototype.destroyGame=function(){if(this.gameRef){Rt.i.destroy(),jt.i.destroy(),Ht.i.destroy(),Nt.i.destroy(),ue.i.destroy();var t=document.getElementsByTagName("canvas")[0];this.gameRef.destroy(),Phaser.CanvasPool.removeByCanvas(t),this.gameRef=null,delete window.game}},t.prototype.attachListeners=function(){var t=this;this.gameManager.onGoalTextInit.subscribe(function(e){t.goalText=e,t.changeDetectorRef.markForCheck()}),this.gameManager.onBackgroundInit.subscribe(function(e){t.gameBackground=e}),this.gameManager.onShowGoalBar.subscribe(function(){t.showGoalBar=!0,t.changeDetectorRef.markForCheck()}),this.gameManager.onGameReload.subscribe(function(e){t.showGoalBar=!1,t.goalText="",t.ngOnInit(e)}),this.gameManager.onQuickTipShowClick.subscribe(function(e){return t.quickTipActive=e})},t.prototype.handleKeyPress=function(){var t=this;window.addEventListener("keydown",function(e){t.gameManager.isQuickTipActive&&("Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(e.preventDefault(),t.handleQuickTipCloseClick()),9===e.keyCode&&t.firstFocusableElement&&document.getElementById(t.firstFocusableElement.id).focus())},!0)},t}()),ci=n["\u0275crt"]({encapsulation:0,styles:[['[_nghost-%COMP%]{overflow:hidden;width:100%;height:100%}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]{position:absolute;bottom:0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;color:#fff;width:100vw}@-webkit-keyframes css{0%,40%{opacity:1}100%{opacity:0;display:none}}@keyframes css{0%,40%{opacity:1}100%{opacity:0;display:none}}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:auto 1rem auto 4rem;font-size:1.75rem;text-align:right;white-space:nowrap}@media only screen and (max-width:850px),(max-height:600px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]{-webkit-animation:5s forwards css;animation:5s forwards css}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:3rem;font-size:1.5rem;margin-right:.5rem;line-height:2.5rem}}@media only screen and (max-width:600px),(max-height:400px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:1rem;font-size:1.15rem;line-height:2rem}}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:auto 1rem auto 0;padding:0;width:1.5rem;min-width:1.5rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{margin:auto auto auto 0;padding:.25rem 0 .25rem 1rem;font-size:1.75rem;line-height:1.75rem;border-left:3px solid #fff}@media only screen and (max-width:850px),(max-height:600px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.25rem;min-width:1.25rem}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.5rem;line-height:1.5rem;border-left:2px solid #fff}}@media only screen and (max-width:600px),(max-height:400px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1rem;min-width:1rem}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{font-size:1.15rem;line-height:1.15rem}}[_nghost-%COMP%]   .goal-text.wordament[_ngcontent-%COMP%]{background:#790014;background:-webkit-gradient(linear,left top,left bottom,from(#790014),to(#870016));background:linear-gradient(to bottom,#790014 0,#870016 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#790014", endColorstr="#870016", GradientType=0)}[_nghost-%COMP%]   .game-container[_ngcontent-%COMP%]{height:100%;width:100%;background-position-x:center!important;background-position-y:center!important;background-size:cover!important;background-repeat-x:no-repeat!important;background-repeat-y:no-repeat!important;background-attachment:fixed!important}[_nghost-%COMP%]   #ftueBlocker[_ngcontent-%COMP%]{box-sizing:content-box;position:fixed;border-left:100vw solid #000;border-right:100vw solid #000;border-top:100vh solid #000;border-bottom:100vh solid #000;opacity:.8;display:none;pointer-events:none}[_nghost-%COMP%]   #innerRadius[_ngcontent-%COMP%]{position:relative;width:calc(100% + 30px);height:calc(100% + 30px);border:20px solid #000;border-radius:30px;left:-10px;top:-10px}[_nghost-%COMP%]   #popupContainer[_ngcontent-%COMP%]{display:none;background:-webkit-gradient(linear,left top,left bottom,from(#007fb4),to(#006189));background:linear-gradient(#007fb4,#006189);border-radius:10px;box-shadow:20px 20px 10px rgba(0,0,0,.3)}[_nghost-%COMP%]   .arrow-image[_ngcontent-%COMP%]{position:fixed;width:5vw;pointer-events:none}[_nghost-%COMP%]   #popupText[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .strokedWord[_ngcontent-%COMP%]{position:relative;font-weight:900;color:#ffe100}[_nghost-%COMP%]   #popupBtn[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   #skipBtn[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   #ftueHand[_ngcontent-%COMP%]{height:512px;width:512px;display:-webkit-box;display:flex;-webkit-animation-timing-function:linear;animation-timing-function:linear;pointer-events:none;visibility:hidden}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;border:none;font-size:2.2em;color:#fff;background-repeat:no-repeat}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:0}[_nghost-%COMP%]   .next[_ngcontent-%COMP%]{width:190px;height:90px;background-image:url(btn-blue.5257bad257ccfb1ffd80.png);padding-bottom:15px}[_nghost-%COMP%]   .next[_ngcontent-%COMP%]:active{width:190px;height:90px;background-image:url(btn-blue-down.8f49152a10fa19733409.png);padding-bottom:10px}[_nghost-%COMP%]   .skip[_ngcontent-%COMP%]{width:229px;height:90px;background-image:url(btn-red.1a58d35878217d60c22e.png);padding-bottom:15px;padding-right:35px}[_nghost-%COMP%]   .skip[_ngcontent-%COMP%]:active{width:229px;height:90px;background-image:url(btn-red-down.cd8e4d179ba724abf03e.png);padding-bottom:10px;padding-right:35px}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]{cursor:pointer;background:#4c74b4;background:-webkit-gradient(linear,left top,left bottom,from(#4c74b4),to(#5d94c1));background:linear-gradient(to bottom,#4c74b4 0,#5d94c1 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#4c74b4", endColorstr="#5d94c1", GradientType=0);border:0;color:#fff;position:relative;border-radius:50vw;border:none;height:3.2vw;width:7.5vw;outline:inherit;font-size:1.45vw}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]:active{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]:active::before{box-shadow:inset .2vw .4vw 2vw 0 rgba(0,0,0,.75)}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]::before{background:#7ec5d4;background:-webkit-gradient(linear,left top,left bottom,from(#7ec5d4),to(#44679d));background:linear-gradient(to bottom,#7ec5d4 0,#44679d 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#7ec5d4", endColorstr="#44679d", GradientType=0);display:block;content:"";z-index:-1;position:absolute;left:-4%;top:-9%;height:119%;width:108%;border-radius:40vw}[_nghost-%COMP%]   .ui-button.red[_ngcontent-%COMP%]::before{background:#c76849;background:-webkit-gradient(linear,left top,left bottom,from(#c76849),to(#6e2819));background:linear-gradient(to bottom,#c76849 0,#6e2819 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#c76849", endColorstr="#6e2819", GradientType=0)}[_nghost-%COMP%]   .ui-button.red[_ngcontent-%COMP%]{background:#87311d;background:-webkit-gradient(linear,left top,left bottom,from(#87311d),to(#bc482e));background:linear-gradient(to bottom,#87311d 0,#bc482e 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#87311d", endColorstr="#bc482e", GradientType=0)}[_nghost-%COMP%]   .next-button[_ngcontent-%COMP%]{float:right;margin-right:3vw;margin-bottom:1vw}@-webkit-keyframes yoyo{from{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translate(0,-1.5vw);transform:translate(0,-1.5vw)}}@keyframes yoyo{from{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translate(0,-1.5vw);transform:translate(0,-1.5vw)}}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:absolute;top:0;bottom:0;right:0;left:0}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:20rem;max-width:100%;margin:auto;overflow:hidden;border-radius:1rem;box-shadow:4px 4px 5px 0 rgba(0,0,0,.63);background:#007fb4;background:-webkit-gradient(linear,left top,left bottom,from(#007fb4),to(#00506f));background:linear-gradient(to bottom,#007fb4 0,#00506f 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#007fb4", endColorstr="#00506f", GradientType=0)}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;background:#164b61;background:-webkit-gradient(linear,left top,left bottom,from(#164b61),to(#003247));background:linear-gradient(to bottom,#164b61 0,#003247 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#164b61", endColorstr="#003247", GradientType=0)}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1rem;margin:auto 0 auto 1rem}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span.title[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;margin:auto 0 auto 1rem}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;margin-left:auto;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;margin-top:.4vw;padding:1rem}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tip-img[_ngcontent-%COMP%]{width:8rem;display:inline-block}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tip-text[_ngcontent-%COMP%]{color:#fff;font-size:1rem}[_nghost-%COMP%]   .quick-tip[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .tip-text.de-DE[_ngcontent-%COMP%]{font-size:1rem}.gameContainer[_ngcontent-%COMP%]{position:relative;top:0;bottom:0;left:0;right:0}#gameContainer[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.ftue-popup[_ngcontent-%COMP%]{color:#fff;font-size:1.5vw;z-index:1;border-radius:.7vw;background:#007daa;background:-webkit-gradient(linear,left top,left bottom,from(#007daa),to(#005f86));background:linear-gradient(to bottom,#007daa 0,#005f86 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="#007daa", endColorstr="#005f86", GradientType=0 );box-shadow:4px 4px 5px 0 rgba(50,50,50,.75)}.ftue-page[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.blocker[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;background:#000;opacity:.7;z-index:900}.ftue-container[_ngcontent-%COMP%]{max-width:100%;margin:auto;padding:1rem;z-index:902}.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:45rem;max-width:100%;padding:1rem}.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1.5rem;padding:0 .25rem}@media only screen and (max-width:600px),(max-height:600px){.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1.25rem}}.flex-margin[_ngcontent-%COMP%]{margin:auto}.skip-button-container[_ngcontent-%COMP%]{margin:auto 1rem 1rem auto;z-index:902}.ftue-reveal[_ngcontent-%COMP%]{z-index:901!important}.block-clicks[_ngcontent-%COMP%]{pointer-events:none}.ftue-button-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;z-index:0}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:2.25rem;min-width:8rem;width:8rem;font-size:1.25rem;line-height:1.25rem;margin:1rem .6rem .3rem auto;white-space:normal}@media only screen and (max-width:600px),(max-height:600px){.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:2rem;min-width:6rem;width:7rem;font-size:1rem;line-height:1rem}}@media only screen and (max-width:400px),(max-height:500px){.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1rem}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:1.75rem;min-width:6rem;width:6rem;font-size:1rem;line-height:1rem}}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]::before{height:calc(100% + .7rem);width:calc(100% + .7rem);left:-.35rem;top:-.35rem}@media only screen and (max-width:600px),(max-height:600px){.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]::before{height:calc(100% + .6rem);width:calc(100% + .6rem);left:-.3rem;top:-.3rem}}']],data:{animation:[{type:7,name:"quickTipShow",definitions:[{type:0,name:"inactive",styles:{type:6,styles:{transform:"translate(-200%, 100%) scale(0)",opacity:"0"},offset:null},options:void 0},{type:0,name:"active",styles:{type:6,styles:{transform:"translate(0, 0) scale(1)",opacity:"1"},offset:null},options:void 0},{type:1,expr:"inactive <=> active",animation:[{type:4,styles:null,timings:"400ms ease-in"}],options:null}],options:{}},{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translate(0, 100%)"},offset:null},{type:4,styles:null,timings:"300ms 500ms"}],options:null}],options:{}}]}});function pi(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,6,"div",[["class","goal-text wordament"],["id","hide-after-4-sec"]],[[24,"@show",0]],null,null,null,null)),(t()(),n["\u0275eld"](1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(t()(),n["\u0275ted"](2,null,["",""])),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](4,0,null,null,0,"div",[["class","icon games-icons-wordament-big"]],null,null,null,null,null)),(t()(),n["\u0275eld"](5,0,null,null,1,"div",[["class","goal"]],null,null,null,null,null)),(t()(),n["\u0275eld"](6,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){var i=e.component;t(e,0,0,void 0),t(e,2,0,n["\u0275unv"](e,2,0,n["\u0275nov"](e,3).transform("goal"))),t(e,6,0,i.goalText)})}function gi(t){return n["\u0275vid"](0,[n["\u0275pid"](0,O.a,[A.b]),(t()(),n["\u0275eld"](1,0,null,null,17,"div",[["class","ftue-0 ftue-page"]],null,null,null,null,null)),(t()(),n["\u0275eld"](2,0,null,null,0,"div",[["class","flex-margin"]],null,null,null,null,null)),(t()(),n["\u0275eld"](3,0,null,null,0,"div",[["class","flex-margin"]],null,null,null,null,null)),(t()(),n["\u0275eld"](4,0,null,null,8,"div",[["class","ftue-container"]],null,null,null,null,null)),(t()(),n["\u0275eld"](5,0,null,null,7,"div",[["class","ftue-popup"],["id","popupContainer"]],null,null,null,null,null)),(t()(),n["\u0275eld"](6,0,null,null,2,"div",[["class","ftue-text"],["id","popupText"]],[[8,"innerHTML",1]],null,null,null,null)),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef]),n["\u0275ppd"](8,2),(t()(),n["\u0275eld"](9,0,null,null,3,"div",[["class","ftue-button-wrapper"]],null,null,null,null,null)),(t()(),n["\u0275eld"](10,0,null,null,2,"button",[["class","ftue-button ui-button blue"],["id","popupBtn"],["onkeyup","onclick()"]],null,null,null,null,null)),(t()(),n["\u0275ted"](11,null,["",""])),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](13,0,null,null,5,"div",[["class","skip-button-container"],["id","skip-container"]],null,null,null,null,null)),(t()(),n["\u0275eld"](14,0,null,null,4,"div",[["class","ftue-button-wrapper"]],null,null,null,null,null)),(t()(),n["\u0275eld"](15,0,null,null,3,"button",[["appClientLanguage",""],["class","ftue-button ui-button red"],["id","skipBtn"]],null,null,null,null,null)),n["\u0275did"](16,16384,null,0,F.a,[n.ElementRef,n.Renderer2,D.a],null,null),(t()(),n["\u0275ted"](17,null,["",""])),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](19,0,null,null,6,"div",[["class","game-container"]],[[4,"background",null]],null,null,null,null)),(t()(),n["\u0275eld"](20,0,null,null,3,"div",[["allowfullscreen",""],["id","gameContainer"],["scrolling","no"]],null,null,null,null,null)),n["\u0275prd"](512,null,L["\u0275NgClassImpl"],L["\u0275NgClassR2Impl"],[n.IterableDiffers,n.KeyValueDiffers,n.ElementRef,n.Renderer2]),n["\u0275did"](22,278528,null,0,L.NgClass,[L["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),n["\u0275pod"](23,{"daily-challenge":0}),(t()(),n["\u0275eld"](24,0,null,null,1,"div",[["id","ftueBlocker"]],null,null,null,null,null)),(t()(),n["\u0275eld"](25,0,null,null,0,"div",[["id","innerRadius"]],null,null,null,null,null)),(t()(),n["\u0275and"](16777216,null,null,1,null,pi)),n["\u0275did"](27,16384,null,0,L.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),n["\u0275eld"](28,0,null,null,12,"div",[["class","quick-tip"]],[[24,"@quickTipShow",0]],null,null,null,null)),(t()(),n["\u0275eld"](29,0,null,null,11,"div",[["class","main-container"]],null,null,null,null,null)),(t()(),n["\u0275eld"](30,0,null,null,4,"div",[["class","header"]],null,null,null,null,null)),(t()(),n["\u0275eld"](31,0,null,null,2,"span",[["class","title"]],null,null,null,null,null)),(t()(),n["\u0275ted"](32,null,["",""])),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](34,0,null,null,0,"div",[["class","popups-game-options-icons-close close-btn"],["id","btnClose"],["tabindex","0"]],null,[[null,"keyup.enter"],[null,"click"]],function(t,e,i){var n=!0,o=t.component;return"keyup.enter"===e&&(n=!1!==o.handleQuickTipCloseClick()&&n),"click"===e&&(n=!1!==o.handleQuickTipCloseClick()&&n),n},null,null)),(t()(),n["\u0275eld"](35,0,null,null,5,"div",[["class","content"]],null,null,null,null,null)),(t()(),n["\u0275eld"](36,0,null,null,0,"div",[["class","tip-img quicktips-wordament-img"]],null,null,null,null,null)),(t()(),n["\u0275eld"](37,0,null,null,3,"div",[["appClientLanguage",""],["class","tip-text"]],null,null,null,null,null)),n["\u0275did"](38,16384,null,0,F.a,[n.ElementRef,n.Renderer2,D.a],null,null),(t()(),n["\u0275ted"](39,null,[" "," "])),n["\u0275pid"](131072,B.j,[B.k,n.ChangeDetectorRef])],function(t,e){var i=e.component,n=t(e,23,0,i.isDC);t(e,22,0,n),t(e,27,0,i.goalText&&i.showGoalBar)},function(t,e){var i=e.component,o=n["\u0275unv"](e,6,0,t(e,8,0,n["\u0275nov"](e,0),n["\u0275unv"](e,6,0,n["\u0275nov"](e,7).transform("challengeFTUE0Text")),"html"));t(e,6,0,o),t(e,11,0,n["\u0275unv"](e,11,0,n["\u0275nov"](e,12).transform("next"))),t(e,17,0,n["\u0275unv"](e,17,0,n["\u0275nov"](e,18).transform("skipBtn"))),t(e,19,0,i.gameBackground),t(e,28,0,i.quickTipActive?"active":"inactive"),t(e,32,0,n["\u0275unv"](e,32,0,n["\u0275nov"](e,33).transform("quickTip"))),t(e,39,0,n["\u0275unv"](e,39,0,n["\u0275nov"](e,40).transform("wordamentQuickTipText")))})}function fi(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,2,"app-wordament-game",[],null,null,null,gi,ci)),n["\u0275prd"](512,null,W.a,W.a,[E.a,N.a,A.b,G.a,R.a,j.a,H.a,V.a,U.a,X.a,K.a,q.a,J.a,Y.a,Z.a,Q.a,$.a,tt.a,et.a,it.a,D.a,nt.a,n.ChangeDetectorRef,ot.a,st.a,rt.a]),n["\u0275did"](2,245760,null,0,di,[W.a,H.a,n.ChangeDetectorRef],null,null)],function(t,e){t(e,2,0)},null)}var mi=n["\u0275ccf"]("app-wordament-game",di,fi,{},{},[]),yi=i("ULXh"),bi=i("9lUn"),wi=i("gIcY"),vi=i("008C"),Si=i("6aHO"),Ti=i("Fq6B"),xi=i("a6OJ"),_i=i("iTUp"),Pi=i("j1ZV"),zi=i("nSrf");i.d(e,"WordGamesWordamentModuleNgFactory",function(){return Ci});var Ci=n["\u0275cmf"](o,[],function(t){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,r.a,a.a,l.a,h.a,u.a,d.a,c.a,p.a,g.a,f.a,m.a,y.a,b.a,w.a,v.a,S.a,T.a,x.a,_.a,P.a,z.a,C.a,k.a,M.a,I.a,mi]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,L.NgLocalization,L.NgLocaleLocalization,[n.LOCALE_ID,[2,L["\u0275angular_packages_common_common_a"]]]),n["\u0275mpd"](4608,yi.RoundProgressService,yi.RoundProgressService,[[2,L.DOCUMENT]]),n["\u0275mpd"](4608,bi.RoundProgressEase,bi.RoundProgressEase,[]),n["\u0275mpd"](4608,wi.l,wi.l,[]),n["\u0275mpd"](4608,vi.a,vi.a,[n.RendererFactory2,Si.a]),n["\u0275mpd"](1073742336,L.CommonModule,L.CommonModule,[]),n["\u0275mpd"](1073742336,E.o,E.o,[[2,E.t],[2,E.n]]),n["\u0275mpd"](1073742336,Ti.a,Ti.a,[]),n["\u0275mpd"](1073742336,xi.RoundProgressModule,xi.RoundProgressModule,[]),n["\u0275mpd"](1073742336,wi.k,wi.k,[]),n["\u0275mpd"](1073742336,wi.d,wi.d,[]),n["\u0275mpd"](1073742336,B.h,B.h,[]),n["\u0275mpd"](1073742336,_i.a,_i.a,[]),n["\u0275mpd"](1073742336,Pi.a,Pi.a,[]),n["\u0275mpd"](1073742336,o,o,[]),n["\u0275mpd"](256,zi.ROUND_PROGRESS_DEFAULTS,zi["\u02750"],[]),n["\u0275mpd"](1024,E.l,function(){return[[{path:":mode",component:di}]]},[])])})}}]);