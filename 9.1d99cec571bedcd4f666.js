// Copyright (C) Microsoft Corporation. All rights reserved.

(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+DRQ":function(t,e,i){"use strict";i.r(e);var n=i("CcnG"),o=function(){return function(){}}(),r=i("pMnS"),s=i("ueff"),a=i("lOTE"),l=i("lZf+"),h=i("az17"),u=i("T8a3"),c=i("A+oz"),d=i("+fAV"),p=i("bNzf"),g=i("NSTC"),f=i("uu60"),y=i("v9N2"),m=i("xewl"),b=i("wnWa"),k=i("Y7qL"),C=i("ztp1"),v=i("dHXd"),w=i("OI7E"),B=i("8ZQX"),x=i("jeIa"),S=i("e/6H"),P=i("GbEK"),_=i("A5jq"),M=i("hs/0"),z=i("gAQH"),I=i("altv"),F=i("Eo4b"),E=i("gIju"),T=i("v+6v"),O=i("Ip0R"),A=i("NsJB"),L=i("ZYCi"),D=i("EoHo"),N=i("ZYjt"),K=i("H02e"),H=i("8smc"),j=i("S4q0"),W=i("FO5i"),G=i("m2h9"),X=i("jpRM"),R=i("JscW"),U=i("WYXw"),Y=i("9tLy"),V=i("edtR"),q=i("//Qp"),Z=i("ZCrw"),J=i("yZn+"),Q=i("c9ZP"),$=i("fA5T"),tt=i("qOct"),et=i("T7j5"),it=i("WQtd"),nt=i("Lepu"),ot=i("Pqep"),rt=i("oFL9"),st=i("mrSG"),at=i("mXg+"),lt=function(t){return t[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE",t}({}),ht=function(){return function(){}}(),ut=function(){function t(){}return t.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},t.calculateScreenMetrics=function(t,e,i,n,o){var r;void 0===i&&(i=lt.LANDSCAPE),this.screenMetrics=new ht,this.screenMetrics.windowWidth=window.innerWidth,this.screenMetrics.windowHeight=window.innerHeight,this.screenMetrics.defaultGameWidth=t,this.screenMetrics.defaultGameHeight=e,(this.screenMetrics.windowWidth<this.screenMetrics.windowHeight&&i===lt.LANDSCAPE||this.screenMetrics.windowHeight<this.screenMetrics.windowWidth&&i===lt.PORTRAIT)&&(this.screenMetrics.windowWidth=(r=[this.screenMetrics.windowHeight,this.screenMetrics.windowWidth])[0],this.screenMetrics.windowHeight=r[1]);var s=at.a.crossword;n&&o?(this.screenMetrics.maxGameWidth=n,this.screenMetrics.maxGameHeight=o):i===lt.LANDSCAPE?(this.screenMetrics.maxGameWidth=Math.round(this.screenMetrics.defaultGameWidth*(s.maxGameWidth/s.defaultGameWidth)),this.screenMetrics.maxGameHeight=Math.round(this.screenMetrics.defaultGameHeight*(s.maxGameHeight/s.defaultGameHeight))):(this.screenMetrics.maxGameWidth=Math.round(this.screenMetrics.defaultGameWidth*(s.maxGameHeight/s.defaultGameHeight)),this.screenMetrics.maxGameHeight=Math.round(this.screenMetrics.defaultGameHeight*(s.maxGameWidth/s.defaultGameWidth)));var a=this.screenMetrics.windowWidth/this.screenMetrics.windowHeight;return a>(i===lt.LANDSCAPE?s.defaultGameWidth/s.defaultGameHeight:s.defaultGameHeight/s.defaultGameWidth)?(this.screenMetrics.gameHeight=this.screenMetrics.defaultGameHeight,this.screenMetrics.gameWidth=2*Math.ceil(this.screenMetrics.gameHeight*a*.5),this.screenMetrics.gameWidth=Math.min(this.screenMetrics.gameWidth,this.screenMetrics.maxGameWidth),this.screenMetrics.offsetX=.5*(this.screenMetrics.gameWidth-this.screenMetrics.defaultGameWidth),this.screenMetrics.offsetY=0):(this.screenMetrics.gameWidth=this.screenMetrics.defaultGameWidth,this.screenMetrics.gameHeight=2*Math.ceil(this.screenMetrics.gameWidth/a*.5),this.screenMetrics.gameHeight=Math.min(this.screenMetrics.gameHeight,this.screenMetrics.maxGameHeight),this.screenMetrics.offsetX=0,this.screenMetrics.offsetY=.5*(this.screenMetrics.gameHeight-this.screenMetrics.defaultGameHeight)),this.screenMetrics.scaleX=this.screenMetrics.windowWidth/this.screenMetrics.gameWidth,this.screenMetrics.scaleY=this.screenMetrics.windowHeight/this.screenMetrics.gameHeight,this.screenMetrics},t}();function ct(t,e){var i=this.game.input;if(!i.pollLocked){void 0===e&&(e=!1),void 0!==t.button&&(this.button=t.button),this.isMouse&&this.updateButtons(t),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.screenY===this.pageY&&this.pageY===this.clientY&&(this.pageY-=dt(),this.clientY-=dt(),this.pageX-=pt(),this.clientX-=pt()),this.isMouse&&i.mouse.locked&&!e&&(this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);for(var n=i.moveCallbacks.length;n--;)i.moveCallbacks[n].callback.call(i.moveCallbacks[n].context,this,this.x,this.y,e);return null===this.targetObject||this.game.paused&&!this.targetObject.noPause||!0!==this.targetObject.isDragged?i.interactiveItems.total>0&&this.processInteractiveObjects(e):!1===this.targetObject.update(this)&&(this.targetObject=null),this}}function dt(){for(var t=window,e=0;t.parent!==t;)e+=gt(t.frameElement),t=t.parent;return e}function pt(){for(var t=window,e=0;t.parent!==t;)e+=ft(t.frameElement),t=t.parent;return e}function gt(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function ft(t){for(var e=0;t;)e+=t.offsetLeft,t=t.offsetParent;return e}var yt,mt,bt,kt,Ct,vt,wt,Bt,xt,St,Pt,_t,Mt,zt,It,Ft=i("adO+"),Et=i("ny24"),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(st.__extends)(e,t),e.prototype.init=function(t){this.messageService=t},e.prototype.preload=function(){},e.prototype.create=function(){var t=this,e=at.a.crossword;if(this.game.scale.scaleMode=Phaser.ScaleManager[e.scaleMode],this.game.stage.disableVisibilityChange=!0,"USER_SCALE"===e.scaleMode){var i=ut.screenMetrics;this.game.scale.setUserScale(i.scaleX,i.scaleY)}this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!1,this.game.device.desktop||this.game.scale.forceOrientation(!0,!1),console.log("DEBUG....................... "+e.debug+"\n           \nSCALE_MODE.................. "+e.scaleMode+"\n           \nDEFAULT_GAME_WIDTH.......... "+e.defaultGameWidth+"\n           \nDEFAULT_GAME_HEIGHT......... "+e.defaultGameHeight+"\n           \nMAX_GAME_WIDTH.............. "+e.maxGameWidth+"\n           \nMAX_GAME_HEIGHT............. "+e.maxGameHeight+"\n           \ngame.width.................. "+this.game.width+"\n           \ngame.height................. "+this.game.height+"\n           \nSOUND_EXTENSIONS_PREFERENCE. "+e.soundExtensionsPreference),this.messageService.onGameMessage.pipe(Object(Et.a)(this.messageService.destroy$)).subscribe({next:function(e){return t.handleOnMessage(e)},error:function(e){return t.onMessageError(e)}}),this.messageService.sendMessageToWrapper({connected:!0}),this.game.input.activePointer.move=ct},e.prototype.handleOnMessage=function(t){"start"===t.state?this.game.state&&this.game.state.start("preloader",!0,!1,t,this.messageService):t.state===Ft.a.Paused&&this.handleOnPause(t.pause)},e.prototype.onMessageError=function(t){console.error(t)},e.prototype.handleOnPause=function(t){this.game.paused=t},e}(Phaser.State);!function(t){var e=function(){function t(){}return t.getName=function(){return"ftue-arrow"},t.getPNG=function(){return"assets/games/crossword/ftue-arrow.png"},t}();t.FtueArrow=e}(yt||(yt={})),mt||(mt={}),function(t){var e=function(){function t(){}return t.getName=function(){return"main"},t.getJSONArray=function(){return"assets/games/crossword/images/crossword-main.json"},t.getPNG=function(){return"assets/games/crossword/images/crossword-main.png"},t}();t.ImagesMain=e,function(t){!function(t){t.BkgEngravedStarpanelCenter="bkg/engraved-starpanel-center",t.BkgEngravedStarpanelLeft="bkg/engraved-starpanel-left",t.BkgEngravedStarpanelRight="bkg/engraved-starpanel-right",t.BkgPuzzleInfoBkg="bkg/puzzle-info-bkg",t.BoardBackgroundLight="board-background-light",t.BoardBackground="board-background",t.BtnGreenDown="btn-green-down",t.BtnGreenOver="btn-green-over",t.BtnGreenUp="btn-green-up",t.BtnGreyBigDisabled="btn-grey-big-disabled",t.BtnGreyBigDown="btn-grey-big-down",t.BtnGreyBigOver="btn-grey-big-over",t.BtnGreyBigUp="btn-grey-big-up",t.BtnGreyDown="btn-grey-down",t.BtnGreyOver="btn-grey-over",t.BtnGreyUp="btn-grey-up",t.ButtonsBackspace="buttons/backspace",t.ButtonsEnter="buttons/enter",t.ButtonsKeyboardBtn="buttons/keyboardBtn",t.ButtonsLetter="buttons/letter",t.ButtonsMinus="buttons/minus",t.ButtonsNumbers="buttons/numbers",t.CellKeyBorder="cell-key-border",t.CellKey="cell-key",t.CellLock="cell-lock",t.CheckPlusBg="check-plus-bg",t.ChoosedTile="choosedTile",t.CloseHover="close-hover",t.ClosePressed="close-pressed",t.CloseUp="close-up",t.ClueBackground="clue-background",t.ClueChoosed="clue-choosed",t.ClueGreyed="clue-greyed",t.ClueHeaderArrow="clue-header-arrow",t.CluePanelLock="clue-panel-lock",t.CluePanel="clue-panel",t.ClueScrollBar="clue-scroll-bar",t.ClueShade="clue-shade",t.ClueShadow="clue-shadow",t.ClueTransparent="clue-transparent",t.CrosswordsPanelDividerHeader="crosswords-panel-divider-header",t.CrosswordsPanelDivider="crosswords-panel-divider",t.ExpendClicked="expend/clicked",t.ExpendCloseClicked="expend/close-clicked",t.ExpendCloseHover="expend/close-hover",t.ExpendCloseUp="expend/close-up",t.ExpendHover="expend/hover",t.ExpendUp="expend/up",t.GreyedTile="greyedTile",t.HighlightedTile="highlightedTile",t.IconsCheckGrid="icons/check-grid",t.IconsCheckLetter="icons/check-letter",t.IconsCheckPlus="icons/check-plus",t.IconsCheckWord="icons/check-word",t.IconsHint="icons/hint",t.IconsKeyboard="icons/keyboard",t.IconsOptions="icons/options",t.IconsPencil="icons/pencil",t.IconsRetry="icons/retry",t.IconsSolve="icons/solve",t.IconsZoom="icons/zoom",t.KeyboardBackground="keyboard-background",t.KeyboardIcon="keyboard-icon",t.LockPanel="lock-panel",t.LongGreenBtnDown="long-green-btn-down",t.LongGreenBtnHover="long-green-btn-hover",t.LongGreenBtnUp="long-green-btn-up",t.LongRedBtnDown="long-red-btn-down",t.LongRedBtnHover="long-red-btn-hover",t.LongRedBtnUp="long-red-btn-up",t.MysterywordIcon="mysteryword-icon",t.NewPuzzle="new-puzzle",t.NextBtnOnHover="next-btn-onHover",t.NextButton="next-button",t.ObjectiveIcon="objective-icon",t.PuzzleInfoHeader="puzzle-info-header",t.PuzzleInfoClicked="puzzle-info/clicked",t.PuzzleInfoHover="puzzle-info/hover",t.PuzzleInfoInactive="puzzle-info/inactive",t.PuzzleInfoUp="puzzle-info/up",t.Ribbon="ribbon",t.ScrollerDark="scroller-dark",t.Scroller="scroller",t.StarBkgReset="star-bkg-reset",t.StarBkg="star-bkg",t.StarCircle="star-circle",t.StarFg="star-fg",t.StrikeBackground="strike-background",t.StrikeBad="strike_bad",t.Tile="tile",t.TooltipBg="tooltip-bg",t.WrongBadge="wrong-badge",t.WrongLine="wrong-line"}(t.Frames||(t.Frames={}))}(e=t.ImagesMain||(t.ImagesMain={}))}(bt||(bt={})),function(t){var e=function(){function t(){}return t.getName=function(){return"background-music"},t.getMP3=function(){return"assets/games/crossword/audio/background-music.mp3"},t}();t.AudioBackgroundMusic=e;var i=function(){function t(){}return t.getName=function(){return"background-music"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/background-music.mp3"},t}();t.AudioDailyChallengeBackgroundMusic=i;var n=function(){function t(){}return t.getName=function(){return"key-found-1"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/key-found/key-found-1.mp3"},t}();t.AudioDailyChallengeKeyFoundKeyFound1=n;var o=function(){function t(){}return t.getName=function(){return"key-found-2"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/key-found/key-found-2.mp3"},t}();t.AudioDailyChallengeKeyFoundKeyFound2=o;var r=function(){function t(){}return t.getName=function(){return"key-found-3"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/key-found/key-found-3.mp3"},t}();t.AudioDailyChallengeKeyFoundKeyFound3=r;var s=function(){function t(){}return t.getName=function(){return"key-found-4"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/key-found/key-found-4.mp3"},t}();t.AudioDailyChallengeKeyFoundKeyFound4=s;var a=function(){function t(){}return t.getName=function(){return"panel-locked"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/panel-locked.mp3"},t}();t.AudioDailyChallengePanelLocked=a;var l=function(){function t(){}return t.getName=function(){return"panel-unlocked"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/panel-unlocked.mp3"},t}();t.AudioDailyChallengePanelUnlocked=l;var h=function(){function t(){}return t.getName=function(){return"red-pulse"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/red-pulse.mp3"},t}();t.AudioDailyChallengeRedPulse=h;var u=function(){function t(){}return t.getName=function(){return"small-lock"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/small-lock.mp3"},t}();t.AudioDailyChallengeSmallLock=u;var c=function(){function t(){}return t.getName=function(){return"wrong-guess"},t.getMP3=function(){return"assets/games/crossword/audio/daily-challenge/wrong-guess.mp3"},t}();t.AudioDailyChallengeWrongGuess=c;var d=function(){function t(){}return t.getName=function(){return"end-game-1"},t.getMP3=function(){return"assets/games/crossword/audio/end-game/end-game-1.mp3"},t}();t.AudioEndGameEndGame1=d;var p=function(){function t(){}return t.getName=function(){return"end-game-2"},t.getMP3=function(){return"assets/games/crossword/audio/end-game/end-game-2.mp3"},t}();t.AudioEndGameEndGame2=p;var g=function(){function t(){}return t.getName=function(){return"erase-letter-1"},t.getMP3=function(){return"assets/games/crossword/audio/erase/erase-letter-1.mp3"},t}();t.AudioEraseEraseLetter1=g;var f=function(){function t(){}return t.getName=function(){return"erase-letter-2"},t.getMP3=function(){return"assets/games/crossword/audio/erase/erase-letter-2.mp3"},t}();t.AudioEraseEraseLetter2=f;var y=function(){function t(){}return t.getName=function(){return"erase-letter-3"},t.getMP3=function(){return"assets/games/crossword/audio/erase/erase-letter-3.mp3"},t}();t.AudioEraseEraseLetter3=y;var m=function(){function t(){}return t.getName=function(){return"erase-letter-4"},t.getMP3=function(){return"assets/games/crossword/audio/erase/erase-letter-4.mp3"},t}();t.AudioEraseEraseLetter4=m;var b=function(){function t(){}return t.getName=function(){return"erase-letter-5"},t.getMP3=function(){return"assets/games/crossword/audio/erase/erase-letter-5.mp3"},t}();t.AudioEraseEraseLetter5=b;var k=function(){function t(){}return t.getName=function(){return"hint"},t.getMP3=function(){return"assets/games/crossword/audio/hint.mp3"},t}();t.AudioHint=k;var C=function(){function t(){}return t.getName=function(){return"next-puzzle-blocked"},t.getMP3=function(){return"assets/games/crossword/audio/next-puzzle/next-puzzle-blocked.mp3"},t}();t.AudioNextPuzzleNextPuzzleBlocked=C;var v=function(){function t(){}return t.getName=function(){return"next-puzzle-open"},t.getMP3=function(){return"assets/games/crossword/audio/next-puzzle/next-puzzle-open.mp3"},t}();t.AudioNextPuzzleNextPuzzleOpen=v;var w=function(){function t(){}return t.getName=function(){return"popup"},t.getMP3=function(){return"assets/games/crossword/audio/popup.mp3"},t}();t.AudioPopup=w;var B=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_01"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_01.mp3"},t}();t.AudioScratchesSFXPencilScratches1=B;var x=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_02"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_02.mp3"},t}();t.AudioScratchesSFXPencilScratches2=x;var S=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_03"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_03.mp3"},t}();t.AudioScratchesSFXPencilScratches3=S;var P=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_04"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_04.mp3"},t}();t.AudioScratchesSFXPencilScratches4=P;var _=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_05"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_05.mp3"},t}();t.AudioScratchesSFXPencilScratches5=_;var M=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_06"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_06.mp3"},t}();t.AudioScratchesSFXPencilScratches6=M;var z=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_07"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_07.mp3"},t}();t.AudioScratchesSFXPencilScratches7=z;var I=function(){function t(){}return t.getName=function(){return"SFX_Pencil_Scratches_08"},t.getMP3=function(){return"assets/games/crossword/audio/scratches/SFX_Pencil_Scratches_08.mp3"},t}();t.AudioScratchesSFXPencilScratches8=I;var F=function(){function t(){}return t.getName=function(){return"start-game-1"},t.getMP3=function(){return"assets/games/crossword/audio/start-game/start-game-1.mp3"},t}();t.AudioStartGameStartGame1=F;var E=function(){function t(){}return t.getName=function(){return"start-game-2"},t.getMP3=function(){return"assets/games/crossword/audio/start-game/start-game-2.mp3"},t}();t.AudioStartGameStartGame2=E;var T=function(){function t(){}return t.getName=function(){return"validate"},t.getMP3=function(){return"assets/games/crossword/audio/validate.mp3"},t}();t.AudioValidate=T;var O=function(){function t(){}return t.getName=function(){return"write-letter-1"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-1.mp3"},t}();t.AudioWriteLetterWriteLetter1=O;var A=function(){function t(){}return t.getName=function(){return"write-letter-10"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-10.mp3"},t}();t.AudioWriteLetterWriteLetter10=A;var L=function(){function t(){}return t.getName=function(){return"write-letter-2"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-2.mp3"},t}();t.AudioWriteLetterWriteLetter2=L;var D=function(){function t(){}return t.getName=function(){return"write-letter-3"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-3.mp3"},t}();t.AudioWriteLetterWriteLetter3=D;var N=function(){function t(){}return t.getName=function(){return"write-letter-4"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-4.mp3"},t}();t.AudioWriteLetterWriteLetter4=N;var K=function(){function t(){}return t.getName=function(){return"write-letter-5"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-5.mp3"},t}();t.AudioWriteLetterWriteLetter5=K;var H=function(){function t(){}return t.getName=function(){return"write-letter-6"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-6.mp3"},t}();t.AudioWriteLetterWriteLetter6=H;var j=function(){function t(){}return t.getName=function(){return"write-letter-7"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-7.mp3"},t}();t.AudioWriteLetterWriteLetter7=j;var W=function(){function t(){}return t.getName=function(){return"write-letter-8"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-8.mp3"},t}();t.AudioWriteLetterWriteLetter8=W;var G=function(){function t(){}return t.getName=function(){return"write-letter-9"},t.getMP3=function(){return"assets/games/crossword/audio/write-letter/write-letter-9.mp3"},t}();t.AudioWriteLetterWriteLetter9=G;var X=function(){function t(){}return t.getName=function(){return"zoom1"},t.getMP3=function(){return"assets/games/crossword/audio/zoom/zoom1.mp3"},t}();t.AudioZoomZoom1=X;var R=function(){function t(){}return t.getName=function(){return"zoom2"},t.getMP3=function(){return"assets/games/crossword/audio/zoom/zoom2.mp3"},t}();t.AudioZoomZoom2=R;var U=function(){function t(){}return t.getName=function(){return"zoom3"},t.getMP3=function(){return"assets/games/crossword/audio/zoom/zoom3.mp3"},t}();t.AudioZoomZoom3=U}(kt||(kt={})),Ct||(Ct={}),vt||(vt={}),wt||(wt={}),Bt||(Bt={}),function(t){var e=function(){function t(){}return t.getName=function(){return"particle-anim"},t.getJSON=function(){return"assets/games/crossword/json/particle-anim.json"},t}();t.JsonParticleAnim=e;var i=function(){function t(){}return t.getName=function(){return"particle-lite"},t.getJSON=function(){return"assets/games/crossword/json/particle-lite.json"},t}();t.JsonParticleLite=i}(xt||(xt={})),St||(St={}),Pt||(Pt={}),_t||(_t={}),Mt||(Mt={}),zt||(zt={}),function(t){var e=function(){function t(){}return t.getKey=function(){return"lock"},t.getJSONUrl=function(){return"assets/games/crossword/spine/lock.json"},t}();t.SpineLock=e;var i=function(){function t(){}return t.getKey=function(){return"mystery-clue-lock"},t.getJSONUrl=function(){return"assets/games/crossword/spine/mystery-clue-lock.json"},t}();t.SpineMysteryClueLock=i}(It||(It={}));var Ot,At=function(){function t(){}return t.loadAllAssets=function(t,e,i){this.game=t,e&&this.game.load.onLoadComplete.addOnce(e,i),this.loadImages(),this.loadSpritesheets(),this.loadAtlases(),this.loadAudio(),this.loadAudiosprites(),this.loadBitmapFonts(),this.loadJSON(),this.loadXML(),this.loadText(),this.loadScripts(),this.loadShaders(),this.loadMisc(),this.loadSpine(),0===this.game.load._fileList.length&&this.game.load.onLoadComplete.dispatch()},t.waitForSoundDecoding=function(t,e){this.soundKeys.length>0?this.game.sound.setDecodedCallback(this.soundKeys,t,e):t.call(e)},t.loadImages=function(){for(var t in yt)if(!this.game.cache.checkImageKey(yt[t].getName()))for(var e=0,i=Object.getOwnPropertyNames(yt[t]);e<i.length;e++){var n=i[e];"getName"!==n&&-1!==n.indexOf("get")&&this.game.load.image(yt[t].getName(),yt[t][n]())}},t.loadSpritesheets=function(){for(var t in mt)if(!this.game.cache.checkImageKey(mt[t].getName())){for(var e=null,i=0,n=Object.getOwnPropertyNames(mt[t]);i<n.length;i++){var o=n[i];"getName"!==o&&"getFrameWidth"!==o&&"getFrameHeight"!==o&&"getFrameMax"!==o&&"getMargin"!==o&&"getSpacing"!==o&&-1!==o.indexOf("get")&&(e=o)}this.game.load.spritesheet(mt[t].getName(),mt[t][e](),mt[t].getFrameWidth(),mt[t].getFrameHeight(),mt[t].getFrameMax(),mt[t].getMargin(),mt[t].getSpacing())}},t.loadAtlases=function(){for(var t in bt)if(!this.game.cache.checkImageKey(bt[t].getName())){for(var e=null,i=null,n=0,o=Object.getOwnPropertyNames(bt[t]);n<o.length;n++){var r=o[n];"getXML"!==r&&"getJSONArray"!==r&&"getJSONHash"!==r||-1===r.indexOf("get")?"getName"!==r&&"Frames"!==r&&-1!==r.indexOf("get")&&(e=r):i=r}"getXML"===i?this.game.load.atlasXML(bt[t].getName(),bt[t][e](),bt[t].getXML()):"getJSONArray"===i?this.game.load.atlasJSONArray(bt[t].getName(),bt[t][e](),bt[t].getJSONArray()):"getJSONHash"===i&&this.game.load.atlasJSONHash(bt[t].getName(),bt[t][e](),bt[t].getJSONHash())}},t.orderAudioSourceArrayBasedOnSoundExtensionPreference=function(t){var e=this,i=[],n=function(n){var o=t.filter(function(t){return t.substring(t.lastIndexOf(".")+1,t.length)===e.soundExtensionsPreference[n]});i=i.concat(o)};for(var o in this.soundExtensionsPreference)n(o);return i},t.loadAudio=function(){for(var t in kt){var e=kt[t].getName();if(this.soundKeys.push(e),!this.game.cache.checkSoundKey(e)){for(var i=[],n=0,o=Object.getOwnPropertyNames(kt[t]);n<o.length;n++){var r=o[n];"getName"!==r&&-1!==r.indexOf("get")&&i.push(kt[t][r]())}i=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(i),this.game.load.audio(e,i,!0)}}},t.loadAudiosprites=function(){for(var t in Ct){var e=Ct[t].getName();if(this.soundKeys.push(e),!this.game.cache.checkSoundKey(e)){for(var i=[],n=0,o=Object.getOwnPropertyNames(Ct[t]);n<o.length;n++){var r=o[n];"getName"!==r&&"getJSON"!==r&&"Sprites"!==r&&-1!==r.indexOf("get")&&i.push(Ct[t][r]())}i=this.orderAudioSourceArrayBasedOnSoundExtensionPreference(i),this.game.load.audiosprite(e,i,Ct[t].getJSON(),null,!0)}}},t.loadBitmapFonts=function(){for(var t in Bt)if(!this.game.cache.checkBitmapFontKey(Bt[t].getName())){for(var e=null,i=null,n=0,o=Object.getOwnPropertyNames(Bt[t]);n<o.length;n++){var r=o[n];"getXML"!==r&&"getFNT"!==r||-1===r.indexOf("get")?"getName"!==r&&-1!==r.indexOf("get")&&(e=r):i=r}this.game.load.bitmapFont(Bt[t].getName(),Bt[t][e](),Bt[t][i]())}},t.loadJSON=function(){for(var t in xt)this.game.cache.checkJSONKey(xt[t].getName())||this.game.load.json(xt[t].getName(),xt[t].getJSON(),!0)},t.loadXML=function(){for(var t in St)this.game.cache.checkXMLKey(St[t].getName())||this.game.load.xml(St[t].getName(),St[t].getXML(),!0)},t.loadText=function(){for(var t in Pt)this.game.cache.checkTextKey(Pt[t].getName())||this.game.load.text(Pt[t].getName(),Pt[t].getTXT(),!0)},t.loadScripts=function(){for(var t in _t)this.game.load.script(_t[t].getName(),_t[t].getJS())},t.loadShaders=function(){for(var t in Mt)this.game.cache.checkShaderKey(Mt[t].getName())||this.game.load.shader(Mt[t].getName(),Mt[t].getFRAG(),!0)},t.loadMisc=function(){for(var t in zt)this.game.cache.checkBinaryKey(zt[t].getName())||this.game.load.binary(zt[t].getName(),zt[t].getFile())},t.loadSpine=function(){for(var t in It)this.game.load.spine(It[t].getKey(),It[t].getJSONUrl(),void 0)},t.game=null,t.soundKeys=[],t.soundExtensionsPreference=at.a.crossword.soundExtensionsPreference,t}(),Lt=function(){function t(){this._words=[]}return Object.defineProperty(t.prototype,"words",{get:function(){return this._words},enumerable:!0,configurable:!0}),t.prototype.addWord=function(t){this._words.push(t)},t.prototype.getWordsByWordId=function(t){var e=this._words.filter(function(e){return e.id===t})[0];return e.selected=!0,this._words.filter(function(t){return t.x.some(function(t){return t===e.x[0]})&&t.y.some(function(t){return t===e.y[0]})})},t.prototype.getWordsByCellCoords=function(t){return this._words.filter(function(e){return e.x.some(function(e){return e===t.x})&&e.y.some(function(e){return e===t.y})})},t}(),Dt=function(t){return t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t}({}),Nt=function(){function t(t,e,i,n){this._x=t,this._y=e,this._id=i,this._type=n}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"solved",{get:function(){return this._solved},set:function(t){this._solved=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t}(),Kt=function(){function t(){this.wordsData=[],this._words=new Lt,this.map()}return Object.defineProperty(t.prototype,"words",{get:function(){return this._words},enumerable:!0,configurable:!0}),t.prototype.map=function(){var t=this;this.wordsData=Gt.instance.words,this.wordsData.forEach(function(e){if(-1===e.x.indexOf("-")){var i,n,o=e.y.split("-").map(function(t){return Number(t)});i=t.getWordIndexes(o[0],o[1]),n=new Nt([Number(e.x)],i,Number(e.id),Dt.Vertical),t._words.addWord(n)}else{var r,s,a=e.x.split("-").map(function(t){return Number(t)});r=t.getWordIndexes(a[0],a[1]),s=new Nt(r,[Number(e.y)],Number(e.id),Dt.Horizontal),t._words.addWord(s)}})},t.prototype.getWordIndexes=function(t,e){return Array.apply([],{length:e+1-t}).slice().map(function(e,i){return i+t})},t}(),Ht=function(){function t(){this._cluesSolved=0,this._wordMapper=new Kt}return Object.defineProperty(t.prototype,"cluesSolved",{get:function(){return this._cluesSolved},set:function(t){this._cluesSolved=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordMapper",{get:function(){return this._wordMapper},set:function(t){this._wordMapper=t},enumerable:!0,configurable:!0}),t.prototype.clueSolved=function(){this._cluesSolved++},t}(),jt=i("MCLT"),Wt=function(t){return t.Regular="regular",t.Bonus="bonus",t.DailyChallenge="dailyChallenge",t.SundayPuzzle="sundayPuzzle",t}({}),Gt=function(){function t(){this._cells=[],this._words=[],this._downClues=[],this._acrossClues=[]}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resetDone",{get:function(){return this._resetDone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reset",{get:function(){return this._reset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"words",{get:function(){return this._words},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downClues",{get:function(){return this._downClues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acrossClues",{get:function(){return this._acrossClues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this._creator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acrossTitle",{get:function(){return this._acrossTitle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downTitle",{get:function(){return this._downTitle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this._game},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"puzzleId",{get:function(){return this._puzzleId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clue",{get:function(){return this._clue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cluesCount",{get:function(){return this._downClues.length+this._acrossClues.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e,i,n,o,r,s,a){var l,h;t.puzzle?(l=t.puzzle,h=t.clue):l=t,this._clue=h,this._gameMode=i,this._puzzleId=e,this._reset=n,this._resetDone=o,this._language=s,this.restructureData(l),this.initBoardData(),r.call(a)},t.prototype.destroy=function(){delete this._game,delete this._gameData,delete this._grid,delete this._cells,delete this._words,delete this._downClues,delete this._acrossClues,delete this._clue,delete t._instance},t.prototype.isSundayPuzzle=function(){return this._gameMode===Wt.SundayPuzzle},t.prototype.isDailyChallenge=function(){return this._gameMode===Wt.DailyChallenge},t.prototype.getChallengeWord=function(){return this._clue.word},t.prototype.getChallengeClue=function(){return this._clue.clue},t.prototype.restructureData=function(t){var e=this;this._gameData={metadata:{title:t._title.replace(/\r?\n|\r/g,""),creator:t._author},crossword:{grid:{width:t._gridDimension,height:t._gridDimension,cell:[]},word:[],clues:[]}};for(var i=t._cells,n=t._clues,o=[],r=0;r<n.length;r++)for(var s=n[r],a=0;a<s.length;a++){var l=s[a];o.push(this.getCellsForClue(l,i,"Across"===l._direction))}this._gameData.crossword.word=o.map(function(t,i){return{id:(i+1).toString(),x:e.getFormattedNumbers("x",t),y:e.getFormattedNumbers("y",t)}}),this._gameData.crossword.grid.cell=this.getCells(o),this._gameData.crossword.clues=this.getClues(n)},t.prototype.getCells=function(t){for(var e=[],i=[],n=0;n<t.length;n++){var o=t[n].map(function(t){if(-1===e.indexOf(t.cell)){var i={x:t.x+1,y:t.y+1,solution:t.cell._solution,number:t.cell._number||null};return e.push(t.cell),i}}).filter(function(t){return!Object(jt.isNullOrUndefined)(t)});i=i.concat(o)}return i},t.prototype.getClues=function(t){for(var e=[],i=0,n=0;n<t.length;n++){var o={title:{b:t[n][0]._direction},clue:t[n].map(function(t){return{_:t._text,word:(++i).toString(),number:t._number.toString()}})};e.push(o)}return e},t.prototype.getFormattedNumbers=function(t,e){var i=e[0],n=e[e.length-1];return i[t]===n[t]?(i[t]+1).toString():i[t]+1+"-"+(n[t]+1)},t.prototype.getCellsForClue=function(t,e,i){for(var n={col:0,row:0},o=[],r=0;r<e.length;r++)for(var s=0;s<e[r].length;s++)e[r][s]._number===t._number&&(n={col:r,row:s});if(i)for(r=n.col;r<e.length&&-1!==(a=e[r][n.row])._number;r++)o.push({cell:a,x:r,y:n.row});else for(s=n.row;s<e[n.col].length;s++){var a;if(-1===(a=e[n.col][s])._number)break;o.push({cell:a,x:n.col,y:s})}return o},t.prototype.initBoardData=function(){var t=this._gameData.crossword,e=this._gameData.metadata;this._title=e.title,this._creator=e.creator,this._words=t.word,this._grid=t.grid,this._cells=t.grid.cell,this._acrossClues=t.clues[0].clue,this._downClues=t.clues[1].clue,this._acrossTitle=t.clues[0].title.b,this._downTitle=t.clues[1].title.b,this._game=new Ht},t}(),Xt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSettingsChange",{get:function(){return this._onSettingsChange},enumerable:!0,configurable:!0}),t.prototype.getSettings=function(){return this._data},Object.defineProperty(t.prototype,"onMusicSettingChange",{get:function(){return this._onMusicSettingChange},enumerable:!0,configurable:!0}),t.prototype.updateMusicSetting=function(t){this._data.music=t,this._onMusicSettingChange.dispatch()},t.prototype.updateSettings=function(t){this._data=t,this._onSettingsChange.dispatch(t)},t.prototype.initialize=function(t){this.initSignals(),this._data=t},t.prototype.destroy=function(){this.disposeSignals(),delete this._data,delete t._instance},t.prototype.isRightHanded=function(){return this._data.rightHanded},t.prototype.initSignals=function(){this._onSettingsChange=new Phaser.Signal,this._onMusicSettingChange=new Phaser.Signal},t.prototype.disposeSignals=function(){this._onSettingsChange.dispose(),this._onMusicSettingChange.dispose()},t}(),Rt=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioVolume",{get:function(){return this._audioVolume},set:function(t){this._audioVolume=t,this.currentAudio.volume=t},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this.game=t,this.attachListeners()},t.prototype.destroy=function(){this.currentSfx&&this.currentSfx.destroy(),this.currentAudio&&this.currentAudio.destroy(),delete this.game,delete this.currentSfx,delete this.currentAudio,delete t._i},t.prototype.playMysteryCluePanelLocked=function(){this.playSFX(kt.AudioDailyChallengePanelLocked.getName())},t.prototype.playScratch=function(){switch(this.game.rnd.integerInRange(1,8)){case 1:this.playSFX(kt.AudioScratchesSFXPencilScratches1.getName());break;case 2:this.playSFX(kt.AudioScratchesSFXPencilScratches2.getName());break;case 3:this.playSFX(kt.AudioScratchesSFXPencilScratches3.getName());break;case 4:this.playSFX(kt.AudioScratchesSFXPencilScratches4.getName());break;case 5:this.playSFX(kt.AudioScratchesSFXPencilScratches5.getName());break;case 6:this.playSFX(kt.AudioScratchesSFXPencilScratches6.getName());break;case 7:this.playSFX(kt.AudioScratchesSFXPencilScratches7.getName());break;case 8:this.playSFX(kt.AudioScratchesSFXPencilScratches8.getName());break;default:this.playSFX(kt.AudioScratchesSFXPencilScratches1.getName())}},t.prototype.playRedPulse=function(){this.playSFX(kt.AudioDailyChallengeRedPulse.getName())},t.prototype.playKeyFound=function(){switch(this.game.rnd.integerInRange(1,4)){case 1:this.playSFX(kt.AudioDailyChallengeKeyFoundKeyFound1.getName());break;case 2:this.playSFX(kt.AudioDailyChallengeKeyFoundKeyFound2.getName());break;case 3:this.playSFX(kt.AudioDailyChallengeKeyFoundKeyFound3.getName());break;case 4:this.playSFX(kt.AudioDailyChallengeKeyFoundKeyFound4.getName());break;default:this.playSFX(kt.AudioDailyChallengeKeyFoundKeyFound1.getName())}},t.prototype.playSmallLock=function(){this.playSFX(kt.AudioDailyChallengeSmallLock.getName())},t.prototype.playPanelUnlocked=function(){this.playSFX(kt.AudioDailyChallengePanelUnlocked.getName())},t.prototype.playEraseLetter=function(){switch(this.game.rnd.integerInRange(1,5)){case 1:this.playSFX(kt.AudioEraseEraseLetter1.getName());break;case 2:this.playSFX(kt.AudioEraseEraseLetter2.getName());break;case 3:this.playSFX(kt.AudioEraseEraseLetter3.getName());break;case 4:this.playSFX(kt.AudioEraseEraseLetter4.getName());break;case 5:this.playSFX(kt.AudioEraseEraseLetter5.getName());break;default:this.playSFX(kt.AudioEraseEraseLetter1.getName())}},t.prototype.playWriteLetter=function(){switch(this.game.rnd.integerInRange(1,10)){case 1:this.playSFX(kt.AudioWriteLetterWriteLetter1.getName());break;case 2:this.playSFX(kt.AudioWriteLetterWriteLetter2.getName());break;case 3:this.playSFX(kt.AudioWriteLetterWriteLetter3.getName());break;case 4:this.playSFX(kt.AudioWriteLetterWriteLetter4.getName());break;case 5:this.playSFX(kt.AudioWriteLetterWriteLetter5.getName());break;case 6:this.playSFX(kt.AudioWriteLetterWriteLetter6.getName());break;case 7:this.playSFX(kt.AudioWriteLetterWriteLetter7.getName());break;case 8:this.playSFX(kt.AudioWriteLetterWriteLetter8.getName());break;case 9:this.playSFX(kt.AudioWriteLetterWriteLetter9.getName());break;case 10:this.playSFX(kt.AudioWriteLetterWriteLetter10.getName());break;default:this.playSFX(kt.AudioWriteLetterWriteLetter1.getName())}},t.prototype.playDailyChallengeBackgroundMusic=function(){this.playAudio(kt.AudioDailyChallengeBackgroundMusic.getName())},t.prototype.playBackgroundMusic=function(){this.playAudio(kt.AudioBackgroundMusic.getName())},t.prototype.stopBackgroundMusic=function(){this.stopAudio()},t.prototype.playZoom=function(){switch(this.game.rnd.integerInRange(1,3)){case 1:this.playSFX(kt.AudioZoomZoom1.getName());break;case 2:this.playSFX(kt.AudioZoomZoom2.getName());break;case 3:this.playSFX(kt.AudioZoomZoom3.getName());break;default:this.playSFX(kt.AudioZoomZoom1.getName())}},t.prototype.playEndGame=function(){switch(this.game.rnd.integerInRange(1,2)){case 1:this.playSFX(kt.AudioEndGameEndGame1.getName());break;case 2:this.playSFX(kt.AudioEndGameEndGame2.getName());break;default:this.playSFX(kt.AudioEndGameEndGame1.getName())}},t.prototype.playNextPuzzleBlocked=function(){this.playSFX(kt.AudioNextPuzzleNextPuzzleBlocked.getName())},t.prototype.playNextPuzzleButtonOpen=function(){this.playSFX(kt.AudioNextPuzzleNextPuzzleOpen.getName())},t.prototype.playHint=function(){this.playSFX(kt.AudioHint.getName())},t.prototype.playValidate=function(){this.playSFX(kt.AudioValidate.getName())},t.prototype.playPopupShow=function(){this.playSFX(kt.AudioPopup.getName())},t.prototype.playWrongGuess=function(){this.playSFX(kt.AudioDailyChallengeWrongGuess.getName())},t.prototype.playSFX=function(t){this.currentSfx=this.game.add.audio(t),Xt.i.getSettings().soundEffects&&this.currentSfx.play(null,0,this._sfxVolume,!1)},t.prototype.playAudio=function(t){this.currentAudio=this.game.add.audio(t),Xt.i.getSettings().music&&this.currentAudio.play(null,0,this._audioVolume,!0)},t.prototype.stopAudio=function(){this.currentAudio&&this.currentAudio.stop()},t.prototype.attachListeners=function(){var t=this;Xt.i.onSettingsChange.add(function(e){return t.handleSettingsChange(e)},this),Xt.i.onMusicSettingChange.add(function(){return t.handleMusicChange()},this)},t.prototype.handleSettingsChange=function(t){this.currentSfx&&(t.soundEffects||this.currentSfx.stop())},t.prototype.handleMusicChange=function(){this.currentAudio&&(Xt.i.getSettings().music&&!this.currentAudio.isPlaying?this.currentAudio.play(null,0,this._audioVolume,!0):Xt.i.getSettings().music||this.currentAudio.stop())},t}(),Ut=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e){this._gameData=t,this._mainData=e},t.prototype.destroy=function(){delete this._gameData,delete this._mainData,delete t._instance},t.prototype.getString=function(t,e){return this._gameData[t]||e},t.prototype.getStringsFromMain=function(t,e){return this._mainData[t]||e},t}(),Yt=function(){return function(t,e,i){this.element=t,this.text=e,this.method=i}}(),Vt=function(t){return t[t.Hover=0]="Hover",t[t.Click=1]="Click",t}({});!function(t){var e=Phaser.Circle,i=function(){function t(){}return t.left=13,t.right=13,t.top=53,t.bottom=14,t}();t.Margins=i;var n=function(){function t(){}return t.maxNumberOfRows=13,t.maxNumberOfColumns=13,t}();t.TileGrid=n;var o=function(){function t(){}return t.cellNumberMargins={x:3,y:2},t.bgGapX=5,t.bgGapY=1,t}();t.Grid=o;var r=function(){function t(){}return t.backgroundMargins={left:10,top:12},t}();t.Clues=r;var s=function(){function t(){}return t.Keyboard={Key:{size:19.85,font:"SegoeUI",color:"#3e362f"}},t.font="SegoeUI",t.fontSize=30,t}();t.Fonts=s;var a=function(){function t(){}return t.QY={rowData:[{leftMargin:17,keyMargin:13,topMargin:19,mobileTopMargin:19,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_1,text:"1"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_2,text:"2"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_3,text:"3"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_4,text:"4"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_5,text:"5"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_6,text:"6"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_7,text:"7"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_8,text:"8"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_9,text:"9"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_0,text:"0"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.MINUS,text:"-"},{textureKey:bt.ImagesMain.Frames.ButtonsBackspace,keyCode:Phaser.KeyCode.BACKSPACE,text:""}]},{leftMargin:17,keyMargin:11,topMargin:69,mobileTopMargin:19,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Q,text:"Q"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.W,text:"W"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.E,text:"E"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.R,text:"R"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.T,text:"T"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Y,text:"Y"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.U,text:"U"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.I,text:"I"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.O,text:"O"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.P,text:"P"}]},{leftMargin:17,keyMargin:11,topMargin:124,mobileTopMargin:69,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.A,text:"A"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.S,text:"S"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.D,text:"D"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.F,text:"F"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.G,text:"G"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.H,text:"H"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.J,text:"J"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.K,text:"K"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.L,text:"L"}]},{leftMargin:84,keyMargin:11,topMargin:179,mobileTopMargin:124,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Z,text:"Z"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.X,text:"X"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.C,text:"C"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.V,text:"V"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.B,text:"B"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.N,text:"N"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.M,text:"M"},{textureKey:bt.ImagesMain.Frames.ButtonsEnter,keyCode:Phaser.KeyCode.ENTER,text:"ENTER"}]}]},t.QZ={rowData:[{leftMargin:17,keyMargin:13,topMargin:19,mobileTopMargin:0,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_1,text:"1"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_2,text:"2"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_3,text:"3"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_4,text:"4"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_5,text:"5"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_6,text:"6"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_7,text:"7"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_8,text:"8"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_9,text:"9"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_0,text:"0"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.MINUS,text:"-"},{textureKey:bt.ImagesMain.Frames.ButtonsBackspace,keyCode:Phaser.KeyCode.BACKSPACE,text:""}]},{leftMargin:17,keyMargin:11,topMargin:69,mobileTopMargin:19,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Q,text:"Q"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.W,text:"W"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.E,text:"E"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.R,text:"R"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.T,text:"T"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Z,text:"Z"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.U,text:"U"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.I,text:"I"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.O,text:"O"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.P,text:"P"}]},{leftMargin:17,keyMargin:11,topMargin:124,mobileTopMargin:69,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.A,text:"A"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.S,text:"S"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.D,text:"D"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.F,text:"F"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.G,text:"G"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.H,text:"H"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.J,text:"J"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.K,text:"K"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.L,text:"L"}]},{leftMargin:84,keyMargin:11,topMargin:179,mobileTopMargin:124,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Y,text:"Y"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.X,text:"X"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.C,text:"C"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.V,text:"V"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.B,text:"B"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.N,text:"N"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.M,text:"M"},{textureKey:bt.ImagesMain.Frames.ButtonsEnter,keyCode:Phaser.KeyCode.ENTER,text:"ENTER"}]}]},t.AY={rowData:[{leftMargin:17,keyMargin:13,topMargin:19,mobileTopMargin:19,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_1,text:"1"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_2,text:"2"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_3,text:"3"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_4,text:"4"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_5,text:"5"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_6,text:"6"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_7,text:"7"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_8,text:"8"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_9,text:"9"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.NUMPAD_0,text:"0"},{textureKey:bt.ImagesMain.Frames.ButtonsNumbers,keyCode:Phaser.KeyCode.MINUS,text:"-"},{textureKey:bt.ImagesMain.Frames.ButtonsBackspace,keyCode:Phaser.KeyCode.BACKSPACE,text:""}]},{leftMargin:17,keyMargin:11,topMargin:69,mobileTopMargin:19,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.A,text:"A"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Z,text:"Z"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.E,text:"E"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.R,text:"R"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.T,text:"T"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Y,text:"Y"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.U,text:"U"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.I,text:"I"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.O,text:"O"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.P,text:"P"}]},{leftMargin:17,keyMargin:11,topMargin:124,mobileTopMargin:69,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.Q,text:"Q"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.S,text:"S"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.D,text:"D"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.F,text:"F"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.G,text:"G"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.H,text:"H"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.J,text:"J"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.K,text:"K"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.L,text:"L"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.M,text:"M"}]},{leftMargin:84,keyMargin:11,topMargin:179,mobileTopMargin:124,keys:[{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.W,text:"W"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.X,text:"X"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.C,text:"C"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.V,text:"V"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.B,text:"B"},{textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyCode:Phaser.KeyCode.N,text:"N"},{textureKey:bt.ImagesMain.Frames.ButtonsEnter,keyCode:Phaser.KeyCode.ENTER,text:"ENTER"}]}]},t}();t.Keyboard=a;var l=function(){function t(){}return t.PrevButton={x:100,y:60,icon:null,label:{x:0,y:60,text:"",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.ButtonsBackspace,downFrame:bt.ImagesMain.Frames.ButtonsBackspace,overFrame:bt.ImagesMain.Frames.ButtonsBackspace,clickArea:new e(43,40,78)},t.NextButton={x:100,y:60,icon:null,label:{x:0,y:60,text:"",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.ButtonsBackspace,downFrame:bt.ImagesMain.Frames.ButtonsBackspace,overFrame:bt.ImagesMain.Frames.ButtonsBackspace,clickArea:new e(28,20,45)},t.CheckButton={x:646,y:216,icon:bt.ImagesMain.Frames.IconsCheckPlus,label:{x:0,y:66,text:"checkButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(43,43,80)},t.CheckSquare={x:0,y:0,icon:bt.ImagesMain.Frames.IconsCheckLetter,label:{x:0,y:74,text:"squareButton",fontStyle:"bold"},disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(43,43,80)},t.OptionsButton={x:100,y:60,icon:bt.ImagesMain.Frames.IconsOptions,label:{x:0,y:60,text:"options",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(43,40,78)},t.RestartButton={x:1200,y:60,icon:bt.ImagesMain.Frames.IconsRetry,label:{x:0,y:60,text:"restart",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(43,40,78)},t.CheckWord={x:0,y:0,icon:bt.ImagesMain.Frames.IconsCheckWord,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,label:{x:0,y:74,text:"wordButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(43,43,80)},t.CheckPuzzle={x:0,y:0,icon:bt.ImagesMain.Frames.IconsCheckGrid,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,label:{x:0,y:74,text:"puzzleButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(44,44,80)},t.HintButton={x:646,y:380,icon:bt.ImagesMain.Frames.IconsHint,label:{x:0,y:60,text:"hintButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,time:5e3,clickArea:new e(45,40,78)},t.ZoomButton={x:646,y:544,icon:bt.ImagesMain.Frames.IconsZoom,label:{x:0,y:60,text:"zoomButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(45,40,78)},t.ZoomButtonDailyChallenge={x:646,y:470,icon:bt.ImagesMain.Frames.IconsZoom,label:{x:0,y:60,text:"zoomButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(45,40,78)},t.PencilButton={x:646,y:708,icon:bt.ImagesMain.Frames.IconsPencil,label:{x:0,y:60,text:"pencilButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(45,40,78)},t.KeyboardButton={x:1381,y:778,icon:bt.ImagesMain.Frames.IconsKeyboard,label:{x:-80,y:3,text:"keyboardButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyUp,downFrame:bt.ImagesMain.Frames.BtnGreyDown,overFrame:bt.ImagesMain.Frames.BtnGreyOver,clickArea:new e(27,24,46)},t.CloseButton={x:0,y:0,icon:null,label:null,upFrame:bt.ImagesMain.Frames.CloseUp,downFrame:bt.ImagesMain.Frames.ClosePressed,overFrame:bt.ImagesMain.Frames.CloseHover,clickArea:new e(37,36,48)},t.CheckWordDailyChallenge={x:646,y:216,icon:bt.ImagesMain.Frames.IconsCheckWord,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,label:{x:0,y:60,text:"wordButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(43,43,80)},t.KeyboardButtonDailyChallenge={x:1351,y:880,icon:bt.ImagesMain.Frames.IconsKeyboard,label:{x:-80,y:3,text:"keyboardButton",fontStyle:"bold"},upFrame:bt.ImagesMain.Frames.BtnGreyUp,downFrame:bt.ImagesMain.Frames.BtnGreyDown,overFrame:bt.ImagesMain.Frames.BtnGreyOver,clickArea:new e(27,24,46)},t.SolveButton={x:-900,y:0,icon:bt.ImagesMain.Frames.IconsSolve,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,label:{x:2,y:70,text:"dailyChallengeSolveButton",fontStyle:"normal"},upFrame:bt.ImagesMain.Frames.BtnGreyBigUp,downFrame:bt.ImagesMain.Frames.BtnGreyBigDown,overFrame:bt.ImagesMain.Frames.BtnGreyBigOver,clickArea:new e(45,40,100)},t.MysteryClueCloseButton={x:380,y:-320,icon:null,label:null,upFrame:bt.ImagesMain.Frames.CloseUp,downFrame:bt.ImagesMain.Frames.ClosePressed,overFrame:bt.ImagesMain.Frames.CloseHover,clickArea:new e(37,36,48)},t.expandButton={x:580,y:0,icon:null,label:null,upFrame:bt.ImagesMain.Frames.ExpendUp,downFrame:bt.ImagesMain.Frames.ExpendClicked,overFrame:bt.ImagesMain.Frames.ExpendHover,clickArea:new e(37,36,120)},t.expandCloseButton={x:580,y:0,icon:null,label:null,upFrame:bt.ImagesMain.Frames.ExpendCloseUp,downFrame:bt.ImagesMain.Frames.ExpendCloseClicked,overFrame:bt.ImagesMain.Frames.ExpendCloseHover,clickArea:new e(37,36,120)},t.solveViewButton={x:-900,y:70,icon:bt.ImagesMain.Frames.IconsSolve,disabledFrame:bt.ImagesMain.Frames.BtnGreyBigDisabled,label:{x:2,y:70,text:"dailyChallengeSolveButton",fontStyle:"normal"},upFrame:bt.ImagesMain.Frames.BtnGreenUp,downFrame:bt.ImagesMain.Frames.BtnGreenDown,overFrame:bt.ImagesMain.Frames.BtnGreenOver,clickArea:new e(45,45,100)},t}();t.Buttons=l;var h=function(){function t(){}return t.RightHanded={default:{boardScaleX:1,boardScaleY:1,boardX:5,boardY:197,clueBoardX:755,keyboardX:755,keyboardY:770,checkButtonX:646,checkButtonY:216,hintButtonX:646,hintButtonY:708,zoomButtonX:646,zoomButtonY:544,pencilButtonX:646,pencilButtonY:380,keyboardButtonX:1381,keyboardButtonY:778,optionsButtonX:100,optionsButtonY:60,checkViewCloseBtnX:10,checkViewCloseBtnY:-35,checkSquareBtnX:100,checkSquareBtnY:-60,checkWordBtnX:210,checkWordBtnY:-60,checkPuzzleX:320,checkPuzzleY:-60},expanded:{boardScaleX:1.15,boardScaleY:1.15,pencilButtonX:880,pencilButtonY:710,zoomButtonX:1010,zoomButtonY:710,hintButtonX:1140,hintButtonY:710,optionsButtonX:750,optionsButtonY:710,checkButtonX:750,checkButtonY:70,puzzleInfoX:850,puzzleInfoY:25,boardY:60,boardX:5,keyboardButtonY:730,checkViewCloseBtnX:10,checkViewCloseBtnY:-35,checkSquareBtnX:100,checkSquareBtnY:-60,checkWordBtnX:210,checkWordBtnY:-60,checkPuzzleX:320,checkPuzzleY:-60},dailyChallenge:{keyboardX:755,keyboardY:800,keyboardButtonX:1381,keyboardButtonY:770,wordCheckButtonX:646,wordCheckButtonY:216,zoomButtonX:646,zoomButtonY:416,pencilButtonX:646,pencilButtonY:616},dailyChallengeExpanded:{puzzleInfoX:840,wordCheckButtonX:720,restartButtonX:1300,pencilButtonX:880,pencilButtonY:730,zoomButtonX:1010,zoomButtonY:730,optionsButtonX:750,optionsButtonY:730,keyboardButtonY:740},dailyChallengeKeyboardVisible:{pencilButtonX:1050,pencilButtonY:570,zoomButtonX:1300,zoomButtonY:570,hintButtonX:580,hintButtonY:570,optionsButtonX:800,optionsButtonY:570},keyboardVisible:{pencilButtonX:980,pencilButtonY:520,zoomButtonX:1160,zoomButtonY:520,hintButtonX:1340,hintButtonY:520,optionsButtonX:800,optionsButtonY:520}},t.LeftHanded={default:{boardScaleX:1,boardScaleY:1,boardX:800,boardY:197,clueBoardX:10,keyboardX:0,keyboardY:770,checkButtonX:696,checkButtonY:216,hintButtonY:708,hintButtonX:696,zoomButtonX:696,zoomButtonY:544,pencilButtonX:696,pencilButtonY:380,keyboardButtonX:630,keyboardButtonY:778,optionsButtonX:100,optionsButtonY:60,checkViewCloseBtnX:350,checkViewCloseBtnY:-35,checkSquareBtnX:260,checkSquareBtnY:-60,checkWordBtnX:150,checkWordBtnY:-60,checkPuzzleX:40,checkPuzzleY:-60},expanded:{boardScaleX:1.15,boardScaleY:1.15,pencilButtonX:150,pencilButtonY:710,zoomButtonX:280,zoomButtonY:710,hintButtonX:410,hintButtonY:710,optionsButtonX:20,optionsButtonY:710,checkButtonX:20,checkButtonY:70,boardY:60,boardX:700,puzzleInfoX:120,puzzleInfoY:25,keyboardButtonY:730,checkViewCloseBtnX:10,checkViewCloseBtnY:-35,checkSquareBtnX:100,checkSquareBtnY:-60,checkWordBtnX:210,checkWordBtnY:-60,checkPuzzleX:320,checkPuzzleY:-60},dailyChallenge:{keyboardX:0,keyboardY:800,keyboardButtonX:630,keyboardButtonY:770,wordCheckButtonX:696,wordCheckButtonY:216,zoomButtonX:696,zoomButtonY:416,pencilButtonX:696,pencilButtonY:616},dailyChallengeExpanded:{optionsButtonX:20,optionsButtonY:730,keyboardButtonX:630,keyboardButtonY:740,zoomButtonX:320,zoomButtonY:730,pencilButtonX:170,pencilButtonY:730,puzzleInfoX:115,wordCheckButtonX:0,restartButtonX:570},dailyChallengeKeyboardVisible:{pencilButtonX:290,pencilButtonY:570,zoomButtonX:540,zoomButtonY:570,hintButtonX:580,hintButtonY:570,optionsButtonX:40,optionsButtonY:570},keyboardVisible:{pencilButtonX:220,pencilButtonY:520,zoomButtonX:400,zoomButtonY:520,hintButtonX:580,hintButtonY:520,optionsButtonX:40,optionsButtonY:520}},t}();t.Handed=h;var u=function(){function t(){}return t.boardPositions={width:32,height:35,left:-86,top:-91.095},t.puzzleInfoPositions={width:50,height:9,left:-71,top:-99.5},t.optionsButtonPositions={width:6,height:6.5,left:-81.5,top:-97.5},t.clueBoardPositions={width:35,height:30.4762,left:-49.1612,top:-91.095},t.checkViewPositions={width:50,height:9,left:-71,top:-99.5},t}();t.TutorialBlockerPositions=u;var c=function(){function t(){}return t.boardPositions={width:32,height:35,left:-86,top:-91.095},t.mysteryPanel={width:35,height:7,left:-49,top:-90.8},t}();t.DCTutorialBlockerPositions=c;var d=function(){function t(){}return t.boardPositions={width:32,height:35,left:-46.7,top:-91.095},t.puzzleInfoPositions={width:55,height:9.4762,left:-73.1612,top:-100.095},t.optionsButtonPositions={width:5.5,height:6.4762,left:-81.5,top:-97.5},t.clueBoardPositions={width:35,height:33.4762,left:-86.1612,top:-91.095},t.checkViewPositions={width:50,height:9,left:-71,top:-99.5},t}();t.TutorialLeftHandedBlockerPositions=d;var p=function(){function t(){}return t.boardPositions={width:32,height:35,left:-46.7,top:-91.095},t.mysteryPanel={width:35,height:7,left:-86,top:-90.8},t}();t.DCTutorialLeftHandedBlockerPositions=p}(Ot||(Ot={}));var qt,Zt=function(){function t(){}return t.degToRad=function(t){return t*(Math.PI/180)},t.shrinkFontIfOverlap=function(t,e,i){for(;t.width>i;)t.fontSize=e-=4},t}();!function(t){t.Tween=function(){function t(){}return t.all=function(t,e,i){var n=0,o=t.map(function(t){return t.onComplete});o.forEach(function(t){t.addOnce(function(){++n===o.length&&e.call(i)})})},t}()}(qt||(qt={}));var Jt=function(t){function e(e){var i=t.call(this,ee.game,e.x,e.y,bt.ImagesMain.getName(),null)||this;return i.buttonData=e,i.initialize(),i.state=Qt.Up,i.updateFrame(),i}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.clickArea.inputEnabled},set:function(t){this.inputEnabled=!t,this.clickArea.inputEnabled=t,t?(this.clickArea.input.useHandCursor=!0,this.state=Qt.Up):this.state=Qt.Disabled,this.updateFrame()},enumerable:!0,configurable:!0}),e.prototype.setLabelColor=function(t){this.label.addColor(t,0)},e.prototype.showLabel=function(t){this.label.visible=t},e.prototype.getClickArea=function(){return this.clickArea},e.prototype.changeFrame=function(t){this.frameName=t?this.buttonData.overFrame:this.buttonData.upFrame},e.prototype.initialize=function(){this.initSignals(),this.initClickArea(),this.initIcon(),this.initLabel()},e.prototype.updateFrame=function(){var t;switch(this.state){case Qt.Down:t=this.buttonData.downFrame||this.buttonData.upFrame;break;case Qt.Over:t=this.buttonData.overFrame||this.buttonData.upFrame;break;case Qt.Out:case Qt.Up:t=this.buttonData.upFrame;break;case Qt.Disabled:t=this.buttonData.disabledFrame||this.buttonData.upFrame}this.frameName=t},e.prototype.transitionIcon=function(t){this.icon&&(this.icon.x+=t,this.icon.y+=t)},e.prototype.handleInputDown=function(){this.transitionIcon(3),this.state=Qt.Down,this.updateFrame()},e.prototype.handleInputUp=function(){this.transitionIcon(-3),this.state=Qt.Up,this.updateFrame(),this._onClick.dispatch()},e.prototype.handleInputOut=function(){this.state!==Qt.Down&&(this.state=Qt.Out,this.updateFrame())},e.prototype.handleInputOver=function(){this.state!==Qt.Down&&(this.state=Qt.Over,this.updateFrame())},e.prototype.initSignals=function(){this._onClick=new Phaser.Signal},e.prototype.initClickArea=function(){var t=this.buttonData.clickArea;this.clickArea=this.game.add.graphics(0,0),this.clickArea.beginFill(0,0),this.clickArea.drawCircle(t.x,t.y,t.diameter),this.clickArea.endFill(),this.clickArea.inputEnabled=!0,this.clickArea.input.useHandCursor=!0,this.clickArea.events.onInputDown.add(this.handleInputDown,this),this.clickArea.events.onInputUp.add(this.handleInputUp,this),this.clickArea.events.onInputOut.add(this.handleInputOut,this),this.clickArea.events.onInputOver.add(this.handleInputOver,this),this.addChild(this.clickArea)},e.prototype.initIcon=function(){this.buttonData.icon&&(this.icon=ee.sprite(this.buttonData.clickArea.x,this.buttonData.clickArea.y,this.buttonData.icon,this,new Phaser.Point(.5,.5)))},e.prototype.initLabel=function(){this.buttonData.label&&(this.label=ee.text(this.buttonData.clickArea.x+this.buttonData.label.x,this.buttonData.clickArea.y+this.buttonData.label.y,Ut.i.getString(this.buttonData.label.text,""),{font:Ot.Fonts.font,fontSize:22,fontStyle:this.buttonData.label.fontStyle,fill:"#2d2825"},this,new Phaser.Point(.5,.5)),Zt.shrinkFontIfOverlap(this.label,22,140))},e}(Phaser.Image),Qt=function(t){return t[t.Down=0]="Down",t[t.Up=1]="Up",t[t.Over=2]="Over",t[t.Out=3]="Out",t[t.Disabled=4]="Disabled",t}({}),$t=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonData=e,i}return Object(st.__extends)(e,t),e.prototype.isStateDown=function(){return this.state===Qt.Down},Object.defineProperty(e.prototype,"clicked",{get:function(){return this._clicked},set:function(t){this._clicked=t},enumerable:!0,configurable:!0}),e.prototype.emulateClick=function(){this.enabled&&(this.handleInputDown(),this.handleInputUp())},e.prototype.handleInputDown=function(){this.transitionIcon(3),this.state=Qt.Down,this.updateFrame()},e.prototype.disable=function(){this.enabled=!1,this.cellsFilled=!0,this.updateFrame()},e.prototype.initialize=function(){t.prototype.initialize.call(this),this.initOverlay()},e.prototype.handleInputUp=function(){this.icon.x-=3,this.icon.y-=3,this.enabled=!1,this.startTimeout(),this._onClick.dispatch()},e.prototype.initOverlay=function(){this.angleGap=Zt.degToRad(5),this.circle=this.game.add.graphics(0,0),this.circle.angle-=90,this.icon.addChild(this.circle)},e.prototype.updateOverlay=function(t){this.circle.clear(),this.circle.beginFill(0,.6),this.circle.arc(0,0,this.buttonData.clickArea.radius,Zt.degToRad(360*t)+this.angleGap,0,!0),this.circle.endFill()},e.prototype.startTimeout=function(){var t=this;this.circle.visible=!0;var e=this.game.add.tween({p:0}).to({p:1},this.buttonData.time,null,!0);e.onUpdateCallback(function(e,i){t.updateOverlay(i)},this),e.onComplete.add(function(){t.circle.visible=!1,t.enabled=!t.cellsFilled,t._clicked=!1})},e}(Jt),te=function(t){function e(e){var i=t.call(this,e)||this;return i.buttonData=e,i.active=!1,i}return Object(st.__extends)(e,t),e.prototype.emulateClick=function(){this.handleInputDown()},e.prototype.handleInputDown=function(){this.active=!this.active,this.state=this.active?Qt.Down:Qt.Up,this.transitionIcon(this.active?3:-3),this.updateFrame(),this._onClick.dispatch(this.active)},e.prototype.handleInputUp=function(){},e}(Jt),ee=function(){function t(){}return t.initialize=function(e){t.game=e},t.sprite=function(e,i,n,o,r,s){var a=t.game.add.sprite(e,i,bt.ImagesMain.getName(),n);return r&&(a.anchor=r),s&&(a.scale=s),o.addChild(a),a},t.nineSliceSprite=function(e,i,n,o,r,s,a,l,h){var u=new PhaserNineSlice.NineSlice(t.game,e,i,bt.ImagesMain.getName(),n,o,r,s);u.parent=l;var c=t.game.add.existing(u);return h&&(c.anchor=h),l.addChild(c),c},t.tileSprite=function(e,i,n,o,r,s,a,l,h){var u=t.game.add.tileSprite(e,i,n,o,r,s);return l&&(u.anchor=l),h&&(u.scale=h),a.addChild(u),u},t.text=function(e,i,n,o,r,s,a,l){var h=t.game.add.text(e,i,n,o);return s&&(h.anchor=s),a&&(h.scale=a),r.addChild(h),l&&ie.i.addElement(h,l,Vt.Hover),h},t.mask=function(e,i,n,o,r){var s=t.game.add.graphics(e,i);return s.beginFill(16777215,0),s.drawRect(0,0,n,o),r.addChild(s),s},t.button=function(t,e,i,n,o){var r=new Jt(t);return n.addChild(r),r.onClick.add(e,i),o&&ie.i.addElement(r.getClickArea(),o,Vt.Hover),r},t.pinButton=function(t,e,i,n){var o=new te(t);return n.addChild(o),o.onClick.add(e,i),o},t.timedButton=function(t,e,i,n){var o=new $t(t);return n.addChild(o),o.onClick.add(e,i),o},t}(),ie=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._game=t,this.popUpData=[],this.initContainer()},t.prototype.destroy=function(){this.container&&this.container.exists&&this.container.destroy(),this.containerText&&this.containerText.exists&&this.containerText.destroy(),delete this.popUpData,delete this.container,delete this.containerText,delete this._hideAnimation,delete this._game,delete t._i},t.prototype.addElement=function(t,e,i,n){var o=new Yt(t,e,i);o.element.inputEnabled=!0,i===Vt.Hover?this.initHoverMethod(t):i===Vt.Click&&this.initClickMethod(t,n),this.popUpData.push(o)},t.prototype.update=function(){this._game.input.activePointer.isDown&&this.hideTooltip()},t.prototype.initHoverMethod=function(t){t.events.onInputOver.add(this.showToolTip,this,0),t.events.onInputOut.add(this.hideTooltip,this,0),t.events.onInputUp.add(this.hideTooltip,this,0)},t.prototype.initClickMethod=function(t,e){t.events.onInputUp.add(this.showToolTip,this,0,Vt.Click,e)},t.prototype.initContainer=function(){this.container=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.TooltipBg,400,400,{top:21,bottom:26,left:16,right:27},null,this._game.stage,new Phaser.Point(.5,.5)),this.containerText=ee.text(-5,-3,"",{font:"bold SegoeUI",fontSize:22,fill:"#F3FFFE"},this.container,new Phaser.Point(.5,.5)),this.containerText.wordWrap=!0,this.containerText.wordWrapWidth=350,this.container.visible=!1},t.prototype.showToolTip=function(e,i,n,o,r){var s,a;void 0===o&&(o=Vt.Hover);var l=r?e.worldPosition.x+e.width/2+r.x:e.worldPosition.x+e.width/2,h=r?e.worldPosition.y+e.height+10+r.y:e.worldPosition.y+e.height+10;this._hideAnimation&&this._hideAnimation.stop(),this.container.scale.set(1,1);var u=this.popUpData.filter(function(t){return t.element===e})[0];this.containerText.text=u.text,this.container.position.set(l,h),this.container.x>=this._game.world.width-this.container.width/2&&(this.container.x=e.worldPosition.x-e.width/2),s=Math.min(Math.max(this.containerText.width+40,t.containerMinWidth),t.containerMaxWidth),a=Math.min(Math.max(this.containerText.height+30,t.containerMinHeight),t.containerMaxHeight),this.container.resize(s,a),this.container.visible=!0,o===Vt.Click&&this.startHideAnimation()},t.prototype.startHideAnimation=function(){this._hideAnimation=this._game.add.tween(this.container.scale),this._hideAnimation.to({x:0,y:0},50,null,!0,2500),this._hideAnimation.onComplete.add(this.hideTooltip,this)},t.prototype.hideTooltip=function(){this.container.visible=!1},t.containerMinWidth=250,t.containerMinHeight=85,t.containerMaxWidth=400,t.containerMaxHeight=400,t}(),ne=function(){function t(){this.tweens=[],this.graphics=[]}return t.prototype.reset=function(){this.destroyGraphics(),this.stopTweens()},t.prototype.destroyGraphics=function(){this.graphics.forEach(function(t){return t.destroy()}),this.graphics=[]},t.prototype.stopTweens=function(){this.tweens.filter(function(t){return t.isRunning}).forEach(function(t){return t.stop()}),this.tweens=[]},t}(),oe=bt.ImagesMain.Frames,re=function(){function t(){this.checkButtonPulseAnimData=new ne,this._starTextAnimCompleted=!0}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"starTextAnimCompleted",{get:function(){return this._starTextAnimCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sparkleAnimationComplete",{get:function(){return this._sparkleAnimationComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeHideAll",{get:function(){return this._onDailyChallengeHideAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHintAnimationComplete",{get:function(){return this._onHintAnimationComplete},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){this.initSignals()},Object.defineProperty(t.prototype,"onShowWellDone",{get:function(){return this._onShowWellDone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeComplete",{get:function(){return this._onDailyChallengeComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allThresholdsFilled",{get:function(){return this._allThresholdsFilled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game",{set:function(t){this._game=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showNotSolvedClues",{get:function(){return this._showNotSolvedClues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonUnlocked",{get:function(){return this._buttonUnlocked},enumerable:!0,configurable:!0}),t.prototype.showBackgroundDisappearAnimation=function(t){this._game.add.tween(t).to({alpha:0},500,null,!0)},t.prototype.showBackgroundAppearAnimation=function(t){var e=this._game.add.tween(t);return e.to({alpha:1},500,null,!0),e},t.prototype.startStarEarnAnimation=function(t,e,i,n,o,r,s,a,l){var h=this,u=ee.sprite(t.x,t.y,bt.ImagesMain.Frames.StarFg,this._game.world,new Phaser.Point(.5,.5));if(u.scale.set(2.5,2.5),this.starEarnText&&this._game.world.bringToTop(this.starEarnText),i&&n.visible||l&&i){var c=ee.sprite(t.x,t.y,bt.ImagesMain.Frames.StarFg,this._game.world,new Phaser.Point(.5,.5));c.scale.set(0,0);var d=this._game.add.tween(c.scale);d.to({x:2.2,y:2.2},100,null,!0,0),d.onComplete.add(function(t,i,o){h.startStarToButtonTween(t,i,o,e,n),h.startBigStarPulseAnimation(u,r,s)},this,null,c)}else this.startBigStarPulseAnimation(u,r,s)},t.prototype.startTriesAnimation=function(t){var e=this._game.add.tween(t.scale);e.to({x:1.5,y:1.5},100,null,!0);var i=this._game.add.tween(t.scale);i.to({x:1,y:1},70,null,!1),e.chain(i)},t.prototype.startDailyChallengeCompleteAnimation=function(){return this.showGameEndLabelAnimation(Ut.i.getString("dailyChallengeEndGameWon","Well done!"),170)},t.prototype.startDailyChallengeLooseAnimation=function(){return this.showGameEndLabelAnimation(Ut.i.getString("dailyChallengeEndGameLost","Better luck next time"),100)},t.prototype.startMysteryClueBreakAnimation=function(t){var e=this._game.add.spine(t.x+351.5,t.y+89.5,It.SpineMysteryClueLock.getKey());e.scale.set(.39,.4015),e.setAnimationByName(0,"animation",!1)},t.prototype.showScoreAnimation=function(t,e){var i=ee.text(t.x+25,t.y+20,"-1",{font:"bold SegoeUI",fontSize:50,fill:"#cc0000",stroke:"#022A48",strokeThickness:5},this._game.world,new Phaser.Point(.5,.5));i.scale.set(0,0);var n=this._game.add.tween(i.scale);n.to({x:1,y:1},350,null,!0);var o=this._game.add.tween(i);o.to({x:e.x-20,y:e.y-30},350,null,!1,200);var r=this._game.add.tween(i);r.to({alpha:0},200),r.onComplete.add(function(){i.destroy()},this),n.chain(o,r)},t.prototype.startGameIntroAnimation=function(t){this._game.add.tween(t.position).from({y:t.y+150},700,null,!0),this._game.add.tween(t).to({alpha:1},700,null,!0)},t.prototype.animateObjectAppear=function(t,e,i){var n,o=this;t.forEach(function(t){n=o._game.add.tween(t).to({alpha:1},700,null,!0)}),n&&n.onComplete.addOnce(e,i)},t.prototype.hide=function(t){return this._game.add.tween(t.position).to({y:t.y+150},700,null,!0),this._game.add.tween(t).to({alpha:0},700,null,!0)},t.prototype.showWellDone=function(){var t=Ut.i.getString("wellDone","WELL DONE!"),e=ee.text(this._game.world.centerX,this._game.world.height/2,t,{font:"bold SegoeUI",fontSize:170,fontStyle:"italic",fill:"#F3FFFE",stroke:"#022A48",strokeThickness:5},this._game.world,new Phaser.Point(.5,.5));Zt.shrinkFontIfOverlap(e,e.fontSize,this._game.world.width-80),e.scale.set(.3,.3),this._game.add.tween(e.scale).to({x:1,y:1},600,Phaser.Easing.Back.Out,!0),this._game.add.tween(e.position).to({x:e.x+60},2500,null,!0,500);var i=this._game.add.tween(e).to({alpha:0},350,null,!0,3e3);return i.onComplete.add(function(){return e.destroy()},this),i.onComplete},t.prototype.startCheckButtonPulseAnimation=function(t){if(!Gt.instance.isDailyChallenge()){var e=this._game.add.graphics(t.x,t.y),i=this._game.add.graphics(t.x,t.y);this.checkButtonPulseAnimData.graphics.push(e,i),this.checkButtonPulseAnimData.timer=this._game.time.events.loop(8e3,this.playCheckButtonPulseAnimation.bind(this,e,i),this)}},t.prototype.stopCheckButtonPulse=function(){this.checkButtonPulseAnimData.timer&&this._game.time.events.remove(this.checkButtonPulseAnimData.timer),this.checkButtonPulseAnimData.reset()},t.prototype.startHintAnimation=function(t,e){var i=ee.sprite(t.x,t.y,bt.ImagesMain.Frames.IconsHint,this._game.world);i.tint=16776960,i.scale.set(0,0),i.alpha=0,setTimeout(this.showHintAnimation.bind(this,i,e),300)},t.prototype.startStarProgressAnimation=function(t,e,i){var n=this._game.add.tween({x:0});n.to({x:1},250,null,!0),n.onUpdateCallback(this.handleStarProgressUpdate.bind(this,t,e,i),this),n.onComplete.add(this.handleStarProgressComplete.bind(this,t,e,i),this)},t.prototype.showSparkleAnimation=function(t,e,i,n){i?this.startRightSideSparkleAnimation(t,e,n):this.startLeftSideSparkleAnimation(t,e,n)},t.prototype.showHintAnimation=function(t,e){var i=e.worldPosition,n=this._game.make.particleEffect(i.x+e.width/2,i.y+e.height/2,this._game.cache.getJSON(xt.JsonParticleAnim.getName()));this._game.world.addChild(n);var o=this._game.add.tween(t.scale);o.to({x:1,y:1},150,null,!0),o.onUpdateCallback(function(e,i){t.alpha=i},this),o.onComplete.add(this.handleHintScaleTweenComplete.bind(this,t),this);var r=this._game.add.tween(t);r.onUpdateCallback(this.handleHintMoveTweenUpdate.bind(this,t,n),this),r.to({x:[t.x-100,i.x],y:[t.y+100,i.y]},650,null,!1),r.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),r.onComplete.add(this.handleHintMoveTweenComplete.bind(this,t,n,e),this),o.chain(r)},t.prototype.showKeyToUnlockAnimation=function(t,e){var i=ee.sprite(t.worldPosition.x+t.width/2,t.worldPosition.y+t.height/2,oe.CellKey,this._game.world),n=this._game.make.particleEffect(e.x,e.y,this._game.cache.getJSON(xt.JsonParticleAnim.getName()));this._game.world.addChild(n);var o=this._game.add.tween(i);return o.onUpdateCallback(function(t,e){n.children.forEach(function(t,e){t.emitX=i.width/2+i.worldPosition.x-n.worldPosition.x,t.emitY=i.worldPosition.y-n.worldPosition.y}),i.alpha=1-.4*e},this),o.to({x:[i.x,i.x+(e.x-i.x)/4,e.x],y:[i.y,i.y+200,e.y]},650,null,!0,200),o.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),o.onComplete.add(function(){i.destroy(),n.removeAllEmitters()}),o},t.prototype.tweenThresholdCount=function(t){this._game.add.tween(t.scale).to({x:1.5,y:1.5},500,null,!0,0,0,!0)},t.prototype.showGameEndLabelAnimation=function(t,e){this._game.input.enabled=!1;var i=ee.text(this._game.world.centerX,this._game.world.centerY-40,t,{font:"bold SegoeUI",fontStyle:"italic",fontSize:e,fill:"#fff"},this._game.world,new Phaser.Point(.5,.5),new Phaser.Point(0,0));i.stroke="#4D5866",i.strokeThickness=4,Zt.shrinkFontIfOverlap(i,i.fontSize,this._game.world.width-40);var n=this._game.add.tween(i.scale);n.to({x:1,y:1},300,Phaser.Easing.Back.Out,!0);var o=this._game.add.tween(i);o.to({x:this._game.world.centerX+15},2e3,null,!1);var r=this._game.add.tween(i);return r.to({alpha:0},250,null,!1,150),n.chain(o,r),r.onComplete},t.prototype.startStarTextAnimation=function(t,e,i){var n=this;this._starTextAnimCompleted=!1;var o=e?Ut.i.getString("puzzleCompleted","puzzle completed"):Ut.i.getString("starEarned","star earned");this.starEarnText=ee.text(t.x,t.y,o,e?{font:"bold SegoeUI",fontStyle:"italic",fontSize:65,strokeThickness:3,stroke:"#866A44",fill:"#FFF6C1"}:{font:"bold SegoeUI",fontStyle:"italic",fontSize:78,fill:"#FFDF5E"},this._game.world,new Phaser.Point(.5,.5)),i&&(this.starEarnText.fontSize=50),this._game.add.tween(this.starEarnText.scale).from({x:1.2,y:1.2},200,null,!0),this._game.add.tween(this.starEarnText.position).to({x:t.x-40},2e3,null,!0,300).onComplete.add(function(){n._game.add.tween(n.starEarnText).to({alpha:0},350,null,!0),n.starEarnText.destroy(),n._starTextAnimCompleted=!0},this),this._game.world.bringToTop(this.starEarnText)},t.prototype.initSignals=function(){this._buttonUnlocked=new Phaser.Signal,this._showNotSolvedClues=new Phaser.Signal,this._allThresholdsFilled=new Phaser.Signal,this._onDailyChallengeComplete=new Phaser.Signal,this._onShowWellDone=new Phaser.Signal,this._onHintAnimationComplete=new Phaser.Signal,this._onDailyChallengeHideAll=new Phaser.Signal,this._sparkleAnimationComplete=new Phaser.Signal},t.prototype.startStarToButtonTween=function(t,e,i,n,o,r){var s=this._game.add.tween(i);s.to({x:[i.x-i.width,n.x],y:[i.y+400,n.y],angle:360},1100,Phaser.Easing.Quintic.In,!0),this._game.add.tween(i.scale).to({x:1,y:1},1100,null,!0),s.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),s.onComplete.add(this.startButtonAnimation,this,null,o,i)},t.prototype.startBigStarPulseAnimation=function(t,e,i){var n=this,o=this._game.add.tween(t.scale);o.to({x:1,y:1,alpha:0},950,Phaser.Easing.Bounce.Out,!0),o.onComplete.add(function(){t.visible=!1,t.destroy(),i.dispatch(),i.dispose(),e&&(n._allThresholdsFilled.dispatch(),n._allThresholdsFilled.dispose())})},t.prototype.startButtonAnimation=function(t,e,i,n){Rt.i.playNextPuzzleButtonOpen();var o=this._game.add.tween(i.scale);o.to({x:1.2,y:1.2},150,null,!0,0,0,!0),o.onStart.add(function(){n.visible=!1,n.destroy()},this),o.onComplete.add(this.startBreakAnimation,this,null,i)},t.prototype.startBreakAnimation=function(t,e,i){if(!Gt.instance.isSundayPuzzle()){var n=this._game.add.spine(i.worldPosition.x,i.worldPosition.y+30,It.SpineLock.getKey());n.pivot.set(.5,.5),n.scale.set(.35,.35),n.setAnimationByName(0,"animation",!1),this._game.time.events.add(2e3,this.unlockButton,this)}},t.prototype.unlockButton=function(){this._buttonUnlocked.dispatch(),this._buttonUnlocked.dispose()},t.prototype.playCheckButtonPulseAnimation=function(t,e){var i=this._game.add.tween({x:0});i.to({x:1},1e3,null,!0),i.onUpdateCallback(this.handleCircleTweenUpdate.bind(this,t),this),i.onComplete.add(this.handleCircleTweenComplete.bind(this,t),this);var n=this._game.add.tween({x:0});n.to({x:1},1200,null,!0,350),n.onUpdateCallback(this.handleCircleTweenUpdate.bind(this,e),this),n.onComplete.add(this.handleCircleTweenComplete.bind(this,e),this),this.checkButtonPulseAnimData.tweens.push(n,i)},t.prototype.handleCircleTweenUpdate=function(t,e,i,n){t.clear(),this.drawCircle(t,43,43,30+50*i,1-i)},t.prototype.handleCircleTweenComplete=function(t){t.clear(),this.drawCircle(t,43,43,80,0),t.clear()},t.prototype.drawCircle=function(t,e,i,n,o){t.lineStyle(1,16777215,o),t.drawCircle(e,i,n),t.endFill()},t.prototype.handleHintScaleTweenComplete=function(t){t.alpha=1},t.prototype.handleHintMoveTweenUpdate=function(t,e,i,n){e.children.forEach(function(i,n){i.emitX=.5*t.height+t.worldPosition.x-e.worldPosition.x,i.emitY=.5*t.height+t.worldPosition.y-e.worldPosition.y}),t.alpha=1-.4*n},t.prototype.handleHintMoveTweenComplete=function(t,e,i){t.alpha=.4,t.destroy(),e.removeAllEmitters(),this._onHintAnimationComplete.dispatch(i)},t.prototype.handleStarProgressUpdate=function(t,e,i,n,o){t.progress=e+i*o},t.prototype.handleStarProgressComplete=function(t,e,i){t.progress=e+i},t.prototype.startRightSideSparkleAnimation=function(t,e,i){i?Math.abs(e.y-t.y)<100&&Math.abs(e.x-t.x)<80||Math.abs(e.x-t.x)<80?this.startRightSideBezierAnimation(t,e):Math.random()>.65?this.startRightSideBezierAnimation(t,e):this.startLinearSparkleAnimation(t,e):this.startLinearSparkleAnimation(t,e)},t.prototype.startLeftSideSparkleAnimation=function(t,e,i){i?Math.abs(e.y-t.y)>500&&Math.abs(e.x-t.x)>190||Math.abs(e.x-t.x)>190?this.startLeftSideBezierAnimation(t,e):Math.random()>.65?this.startLeftSideBezierAnimation(t,e):this.startLinearSparkleAnimation(t,e):this.startLinearSparkleAnimation(t,e)},t.prototype.startRightSideBezierAnimation=function(t,e){var i=this,n=this._game.make.particleEffect(t.x,t.y,this._game.cache.getJSON(xt.JsonParticleLite.getName()));this._game.world.addChild(n);var o={x:t.x,y:t.y},r=this._game.add.tween(o);r.to({x:[t.x,e.x+300,e.x+270,e.x],y:[t.y,e.y,e.y-120,e.y+20]},1e3,Phaser.Easing.Linear.None,!0),r.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),r.onUpdateCallback(function(){n.children.forEach(function(t){t.emitX=o.x-n.worldPosition.x,t.emitY=o.y-n.worldPosition.y})},this),r.onComplete.add(function(){n.destroy(),i._sparkleAnimationComplete.dispatch()},this)},t.prototype.startLinearSparkleAnimation=function(t,e){var i=this,n=this._game.make.particleEffect(t.x,t.y,this._game.cache.getJSON(xt.JsonParticleLite.getName()));this._game.world.addChild(n);var o={x:t.x,y:t.y},r=this._game.add.tween(o);r.to({x:e.x,y:e.y},1e3,Phaser.Easing.Linear.None,!0),r.onUpdateCallback(function(){n.children.forEach(function(t){t.emitX=o.x-n.worldPosition.x,t.emitY=o.y-n.worldPosition.y})},this),r.onComplete.add(function(){n.destroy(),i._sparkleAnimationComplete.dispatch()},this)},t.prototype.startLeftSideBezierAnimation=function(t,e){var i=this,n=e.x-20,o=e.y-150,r=this._game.make.particleEffect(t.x,t.y,this._game.cache.getJSON(xt.JsonParticleLite.getName()));this._game.world.addChild(r);var s={x:t.x,y:t.y},a=this._game.add.tween(s);a.to({x:[t.x,n,e.x],y:[t.y,o,e.y]},1e3,null,!0),a.interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)}),a.onUpdateCallback(function(){r.children.forEach(function(t){t.emitX=s.x-r.worldPosition.x,t.emitY=s.y-r.worldPosition.y})},this),a.onComplete.add(function(){r.destroy(),i._sparkleAnimationComplete.dispatch()},this)},t}(),se=function(){function t(){}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this.storageKey=t},t.prototype.setItem=function(t,e){localStorage.setItem(this.storageKey+t,e)},t.prototype.getItem=function(t){return localStorage.getItem(this.storageKey+t)},t.prototype.savePuzzle=function(t,e){this.setItem("puzzle."+t,e)},t.prototype.getPuzzle=function(t){return this.getItem("puzzle."+t)},t}(),ae=i("XlS6"),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(st.__extends)(e,t),e.prototype.init=function(t,e){this.gameMode=t.type,this.puzzle=t.puzzle,this.puzzleId=t.puzzleId||"",this.difficulty=t.difficulty,this.localization=t.localization,this.mainLocalization=t.mainLocalization,this.settings=t.settings,this.puzzleName=t.puzzleName,this.reset=t.reset,this.resetDone=t.resetDone,this.language=t.language,this.storageKey=t.storageKey,this.difficultySettings=t.difficultySettings,this.messageService=e},e.prototype.preload=function(){this.loadingText=this.game.add.text(this.game.world.centerX,this.game.world.centerY,"Loading...",{fill:"#ffffff"},this.game.stage),this.loadingText.anchor.set(.5,.5),this.initializePlugins(),At.loadAllAssets(this.game,this.waitForSoundDecoding,this)},e.prototype.create=function(){},e.prototype.initializePlugins=function(){this.game.add.plugin(PhaserSpine.SpinePlugin),this.game.add.plugin(PhaserNineSlice.Plugin),this.game.plugins.add(ae)},e.prototype.waitForSoundDecoding=function(){this.messageService.sendMessageToWrapper({loaded:!0}),this.startGame()},e.prototype.startGame=function(){var t=this;se.i.initialize(this.storageKey+"."),this.reset&&this.resetCurrentPuzzle();var e=this.puzzle;Xt.i.initialize(this.settings),ie.i.initialize(this.game),Rt.i.initialize(this.game),re.i.game=this.game,Ut.i.initialize(this.localization,this.mainLocalization),Gt.instance.initialize(JSON.parse(e),this.puzzleId,this.gameMode,this.reset,this.resetDone,function(){t.loadingText.destroy(),"dailyChallenge"===t.gameMode?t.game.state.start("daily-challenge",!0,!1,t.difficulty,t.messageService,t.puzzleName,t.gameMode,t.difficultySettings):t.game.state.start("game",!0,!1,t.puzzleName,t.gameMode,t.messageService)},this.language,this)},e.prototype.resetCurrentPuzzle=function(){var t=se.i.getPuzzle(this.puzzleId);t&&(t=JSON.stringify({reset:!0}),se.i.savePuzzle(this.puzzleId,t))},e}(Phaser.State),he=function(t){function e(e){var i=t.call(this,ee.game)||this;return e.messageService.wrapperMessage$.pipe(Object(Et.a)(e.messageService.destroy$)).subscribe(i.handleOnMessage.bind(i)),i}return Object(st.__extends)(e,t),e.prototype.destroy=function(){ee.game.time.events.removeAll(),ee.game.time.removeAll(),t.prototype.destroy.call(this)},e.prototype.handleOnMessage=function(t){t.state===Ft.a.Show?this.show():t.state===Ft.a.Exit&&this.handlePuzzleExit()},e.prototype.show=function(){},e.prototype.handlePuzzleExit=function(){},e}(Phaser.Group),ue=function(t){return t[t.FREE=0]="FREE",t[t.CHOOSED=1]="CHOOSED",t[t.HIGHLIGHTED=2]="HIGHLIGHTED",t[t.GREYED=3]="GREYED",t}({}),ce=function(){return function(t,e,i){this.text=t,this.checkedState=e,this.pencilEnabled=i}}(),de=function(t){return t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong",t[t.Filled=2]="Filled",t[t.Empty=3]="Empty",t}({}),pe=function(t){function e(e,i,n,o){var r=t.call(this,ee.game,o)||this;return r.cellData=e,r.cellMargin=i,r._scale=n,r.NumberFontSize=12.5,r.bkgVariations={},r._coordinates=new Phaser.Point,r._state=ue.FREE,r._checkedState=de.Empty,r._coordinates.set(e.x,e.y),r._solution=e.solution,r._number=e.number,r.initialize(),r}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"wrong",{get:function(){return this.wrongBadge.visible},set:function(t){this.wrongBadge.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedState",{get:function(){return this._checkedState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filledWithPencil",{get:function(){return this._pencilEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinates",{get:function(){return this._coordinates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,at.a.crossword.debug&&t===ue.CHOOSED&&console.info(this.solution),this.background.frameName=this.bkgVariations[this._state]},enumerable:!0,configurable:!0}),e.prototype.fillCell=function(){this._checkedState=de.Correct,this._cellText.text=this._solution},Object.defineProperty(e.prototype,"userInputLetter",{get:function(){return this._userInputLetter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellText",{get:function(){return this._cellText.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pencilEnabled",{get:function(){return this._pencilEnabled},set:function(t){this._pencilEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this._number},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"solution",{get:function(){return this._solution},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return""===this._cellText.text},e.prototype.emptyForTutorial=function(){this.initialCellState=new ce(this._cellText.text,this._checkedState,this._pencilEnabled),this._checkedState=de.Empty,this._cellText.text=""},e.prototype.resetCell=function(){this._cellText.text=this.initialCellState.text,this._checkedState=this.initialCellState.checkedState,this._pencilEnabled=this.initialCellState.pencilEnabled,this._checkedState===de.Correct&&this.updateCellCorrectState()},e.prototype.writeLetter=function(t,e){void 0===e&&(e=!1),this._pencilEnabled=e,Rt.i.playWriteLetter(),Rt.i.playScratch();var i=String.fromCharCode(t);this.updateLetter(i,e)},e.prototype.writeTextLetter=function(t,e){this._pencilEnabled=e,this.updateLetter(t,e)},e.prototype.check=function(t){this.pencilEnabled&&Xt.i.getSettings().crossword.menuOptionCrosswordIgnorePencilOnValidation||this.updateCellCorrectState(t)},e.prototype.removeLetter=function(){Rt.i.playEraseLetter(),this._checkedState!==de.Correct&&this.updateLetter("")},e.prototype.reveal=function(){this._userInputLetter=this._solution,this._cellText.text=this._solution,this.wrongLine.visible=!1,this.updateCellCorrectState()},e.prototype.zoom=function(t){var e=new Phaser.Point(this._scale.x*t,this._scale.y*t);return this._numberText&&(this._numberText.fontSize=this.NumberFontSize*e.y),this._cellText.fontSize=Ot.Fonts.fontSize*e.y,this.cellMargin=new Phaser.Point(2*e.x,2*e.y),this.resetBackground(e),this.resetWrongAnswerAssets(e),this.positionCell(),this.updateTextPositions(),e},e.prototype.showIdleHint=function(t){return this._checkedState===de.Empty?(this._cellText.fill="#808080",this._cellText.fontStyle="italic",this._cellText.text=" "+this.cellData.solution+" ",this._cellText.alpha=0,this.showingIdle=!0,this.game.add.tween(this._cellText).to({alpha:1},1200,null,!0,t)):(this._cellText.alpha=1,null)},e.prototype.hideIdleHint=function(t){if(this.showingIdle){if(this.showingIdle&&t)return this.removeIdleHint(),this._cellText.alpha=0,void(this.showingIdle=!1);this.showingIdle=!1,this.hideIdleTweens.push(this.game.add.tween(this._cellText).to({alpha:0},800,null,!0))}},e.prototype.updateLetter=function(t,e){this.removeIdleHint(),this._cellText.alpha=1,this._cellText.fill=e?"#808080":"#4b4137",this._cellText.fontStyle=e?"italic":"normal",this._cellText.text=e?" "+t+" ":t,this._userInputLetter=t,this.wrongLine.visible=!1,this._checkedState=t?de.Filled:de.Empty},e.prototype.initialize=function(){this.hideIdleTweens=[],this.initSignals(),this.initBackground(),this.initNumber(),this.initCellText(),this.initWrongAnswerAssets(),this.initBackgroundVariations(),this.updateTextPositions(),this.positionCell()},e.prototype.initBackground=function(t){this.background=ee.sprite(0,0,bt.ImagesMain.Frames.Tile,this,null,t||this._scale),this.background.inputEnabled=!0,this.background.events.onInputDown.add(this.handleInputDown,this)},e.prototype.initNumber=function(){this._number&&(this._numberText=ee.text(Ot.Grid.cellNumberMargins.x,Ot.Grid.cellNumberMargins.y,this._number,{font:Ot.Fonts.font,fontSize:this.NumberFontSize*this._scale.y},this),this._numberText.visible="0"!==this._number)},e.prototype.initCellText=function(){this._cellText=ee.text(0,0,"",{font:Ot.Fonts.font,fontSize:Ot.Fonts.fontSize*this._scale.y,fill:"#4b4137"},this,new Phaser.Point(.5,.5))},e.prototype.initWrongAnswerAssets=function(t){var e=t||this._scale;this.wrongLine=ee.sprite(0,-5,bt.ImagesMain.Frames.WrongLine,this._cellText,new Phaser.Point(.5,.5),e),this.wrongBadge=ee.sprite(0,0,bt.ImagesMain.Frames.WrongBadge,this,new Phaser.Point(1,0),e),this.wrongLine.visible=!1,this.wrongBadge.visible=!1},e.prototype.initBackgroundVariations=function(){this.bkgVariations[ue.FREE]=bt.ImagesMain.Frames.Tile,this.bkgVariations[ue.CHOOSED]=bt.ImagesMain.Frames.ChoosedTile,this.bkgVariations[ue.GREYED]=bt.ImagesMain.Frames.GreyedTile,this.bkgVariations[ue.HIGHLIGHTED]=bt.ImagesMain.Frames.HighlightedTile},e.prototype.updateTextPositions=function(){this._cellText.position.set(this.background.width/2,this.background.height/2+7),this.wrongBadge.position.set(this.background.width-1,1)},e.prototype.resetBackground=function(t){this.background.destroy(),this.initBackground(t),this.background.frameName=this.bkgVariations[this._state],this.setChildIndex(this.background,0)},e.prototype.resetWrongAnswerAssets=function(t){var e=this.wrongLine.visible,i=this.wrongBadge.visible;this.wrongLine.destroy(),this.wrongBadge.destroy(),this.initWrongAnswerAssets(t),this.wrongLine.visible=e,this.wrongBadge.visible=i},e.prototype.updateCellCorrectState=function(t){t&&this._checkedState===de.Correct||this._userInputLetter===this._solution?(this._cellText.fontStyle="normal",this._cellText.fill="#71ad38",this._checkedState=de.Correct):(t&&this._checkedState===de.Wrong||this._userInputLetter)&&(this.wrongLine.visible=!0,this.wrongBadge.visible=!0,this._checkedState=de.Wrong)},e.prototype.positionCell=function(){this.position.set((this.cellData.x-1)*(this.background.width+this.cellMargin.x),(this.cellData.y-1)*(this.background.height+this.cellMargin.y))},e.prototype.handleInputDown=function(){this._disabled||this._onClick.dispatch(this._coordinates,this)},e.prototype.initSignals=function(){this._onClick=new Phaser.Signal},e.prototype.removeIdleHint=function(){this.hideIdleTweens.length&&this.hideIdleTweens.forEach(function(t){return t.stop()}),this.hideIdleTweens=[]},e}(Phaser.Group),ge=function(){function t(t,e){this.difficulty=t,this._lockedLettersIndexes=[],this._openLettersIndexes=[],this._challengeCells=[],this.initialize(e)}return Object.defineProperty(t.prototype,"totalValidations",{get:function(){return this._totalValidations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strikes",{get:function(){return this._strikes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"challengeWord",{get:function(){return this._challengeWord},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"challengeClue",{get:function(){return this._challengeClue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockedLettersNumber",{get:function(){return this._lockedLettersNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraKeys",{get:function(){return this._extraKeys},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLettersBeforeClue",{get:function(){return this._minLettersBeforeClue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockedLettersIndexes",{get:function(){return this._lockedLettersIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openLettersIndexes",{get:function(){return this._openLettersIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"challengeCells",{get:function(){return this._challengeCells},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._puzzleSize=t.puzzleSize,this.minKeysToUnlock=t.minKeysToUnlock,this.maxKeysToUnlock=t.maxKeysToUnlock,this.lockedLettersPct=t.lockedLettersPct,this.revealedLettersPct=t.revealedLettersPct,this._totalValidations=t.totalValidations,this._strikes=t.strikes,this.initPuzzleData()},t.prototype.initPuzzleData=function(){this._challengeWord=Gt.instance.getChallengeWord(),this._challengeClue=Gt.instance.getChallengeClue(),this._minLettersBeforeClue=ee.game.rnd.integerInRange(this.minKeysToUnlock,this.maxKeysToUnlock);var t=this.lockedLettersPct/100,e=Math.floor(this.revealedLettersPct/100*this._challengeWord.length),i=t*this._challengeWord.length;this._revealedLettersNumber=Math.min(Math.max(e,1),this._challengeWord.length),this._lockedLettersNumber=Math.floor(Math.min(Math.max(i,0),this._challengeWord.length-this._revealedLettersNumber)),this._extraKeys=Math.floor(i-this._lockedLettersNumber),this.initKeyPositions()},t.prototype.getRandomCellWithCluePair=function(t,e,i){var n=(t?Gt.instance.acrossClues:Gt.instance.downClues).filter(function(t){return!e.some(function(e){return e===t})}),o=n[ee.game.rnd.integerInRange(0,n.length-1)],r=this.getCellsInLine(o).filter(function(t){return!i.some(function(e){return e===t})}),s=r[ee.game.rnd.integerInRange(0,r.length-1)],a=this.getPairClue(s,!t),l=this.getCellsInLine(a).filter(function(t){return!i.some(function(e){return e===t})});return{cell:s,excludedClues:[o,a],excludedCells:r.concat(l)}},t.prototype.getPairClue=function(t,e){var i=e?Gt.instance.acrossClues:Gt.instance.downClues,n=Gt.instance.game.wordMapper.words.getWordsByCellCoords(new Phaser.Point(t.x,t.y)).filter(function(t){return t.type===(e?Dt.Horizontal:Dt.Vertical)})[0];return i.filter(function(t){return Number(t.word)===n.id})[0]},t.prototype.initKeyPositions=function(){this.chooseClosedLetterIndexes(),this.setOpenLettersIndexes();for(var t=!0,e=Math.floor(this._minLettersBeforeClue+this._lockedLettersNumber),i=[],n=[];e>0;){t=Math.random()>.5;var o=this.getRandomCellWithCluePair(t,i,n);i=i.concat(o.excludedClues),n=n.concat(o.excludedCells),this._challengeCells.push(o.cell),e--}},t.prototype.getCellsInLine=function(t){var e;return e=Gt.instance.game.wordMapper.words.words.filter(function(e){return e.id===Number(t.word)})[0],Gt.instance.cells.filter(function(t){return e.y.some(function(e){return e===t.y})&&e.x.some(function(e){return e===t.x})})},t.prototype.chooseClosedLetterIndexes=function(){for(var t,e=0;e<this._lockedLettersNumber;)t=ee.game.rnd.integerInRange(0,this._challengeWord.length-1),-1===this._lockedLettersIndexes.indexOf(t)&&(this._lockedLettersIndexes.push(t),e++)},t.prototype.setOpenLettersIndexes=function(){for(var t=0;t<this._challengeWord.length;++t)-1===this.lockedLettersIndexes.indexOf(t)&&this._openLettersIndexes.push(t)},t}(),fe=function(){function t(t){this.objective=t,this._lockedLettersIndexes=t.lockedLettersIndexes,this._remainingKeys=t.minLettersBeforeClue+t.lockedLettersNumber+t.extraKeys,this._openLettersIndexes=t.openLettersIndexes,this._strikesLeft=t.strikes,this._errorsLeft=t.totalValidations}return Object.defineProperty(t.prototype,"remainingKeys",{get:function(){return this._remainingKeys},set:function(t){this._remainingKeys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockedLettersIndexes",{get:function(){return this._lockedLettersIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openLettersIndexes",{get:function(){return this._openLettersIndexes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strikesLeft",{get:function(){return this._strikesLeft},set:function(t){this._strikesLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorsLeft",{get:function(){return this._errorsLeft},set:function(t){this._errorsLeft=t},enumerable:!0,configurable:!0}),t}(),ye=function(){function t(){this.checksUsed=0,this.hintsUsed=0,this.validationFailCount=0,this.validationSuccessCount=0,this.timeSpentMS=0,this._wordsFoundCount=0}return t.prototype.wordFound=function(){this._wordsFoundCount++,this.wordsFound=this._wordsFoundCount+"/"+this.wordsCount},t.prototype.checkUsed=function(){this.checksUsed++},t.prototype.hintUsed=function(){this.hintsUsed++},t.prototype.endTimer=function(t){this.timeSpentMS+=Date.now()-t},t.prototype.setWordsCount=function(t){this.wordsCount=t},t.prototype.failCount=function(){this.validationFailCount++},t.prototype.successCount=function(){this.validationSuccessCount++},t}(),me=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.saveCurrentPuzzle=function(t,e,i){var n=this.getCurrentPuzzleData();se.i.savePuzzle(Gt.instance.puzzleId,JSON.stringify({reset:!!n&&n.reset,progress:{checksUsed:t.checksUsed,hintsUsed:t.hintsUsed,timeSpentMS:i},board:e}))},t.prototype.getCurrentPuzzleData=function(){var t=Gt.instance.puzzleId;return t?JSON.parse(se.i.getPuzzle(t)||"{}"):null},t}(),be=function(t){return t[t.Hint=0]="Hint",t[t.ToggleChecks=1]="ToggleChecks",t[t.AdjustZoom=2]="AdjustZoom",t[t.TogglePencilMode=3]="TogglePencilMode",t[t.ToggleGridSize=4]="ToggleGridSize",t[t.GoToNextPuzzle=5]="GoToNextPuzzle",t[t.SelectTopPriorityClue=6]="SelectTopPriorityClue",t[t.SelectFirstAcrossClue=7]="SelectFirstAcrossClue",t[t.SelectFirstDownClue=8]="SelectFirstDownClue",t[t.SelectLastDownClue=9]="SelectLastDownClue",t[t.Options=10]="Options",t[t.ToggleKeyboard=11]="ToggleKeyboard",t}({}),ke=Phaser.KeyCode,Ce=function(){function t(t,e,i,n){this._gameMode=t,this.messageService=e,this.altPressed=!1,this._clueSelectedDirection=we.Across,Object(jt.isNullOrUndefined)(i)||(this._difficulty=i,this.initDailyChallengeObjectives(n)),this.messageService.sendMessageToWrapper({state:Ft.a.Started}),this.initialize()}return Object.defineProperty(t.prototype,"onClueBoardHeightChange",{get:function(){return this._onClueBoardHeightChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyboardClose",{get:function(){return this._onKeyboardClose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkViewIsVisible",{get:function(){return this._checkViewIsVisible},set:function(t){this._checkViewIsVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clueSelectedDirection",{get:function(){return this._clueSelectedDirection},set:function(t){this._clueSelectedDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeTutorialFirstStep",{get:function(){return this._onDailyChallengeTutorialFirstStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeTutorialSecondStep",{get:function(){return this._onDailyChallengeTutorialSecondStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeTutorialThirdStep",{get:function(){return this._onDailyChallengeTutorialThirdStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onExpandButtonClick",{get:function(){return this._onExpandButtonClick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordSelect",{get:function(){return this._onWordSelect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordCheck",{get:function(){return this._onWordCheck},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyFound",{get:function(){return this._onKeyFound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyPress",{get:function(){return this._onKeyPress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHintClicked",{get:function(){return this._onHintClicked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialSecondStep",{get:function(){return this._onTutorialSecondStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectives",{get:function(){return this._objectives},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWordDeclined",{get:function(){return this._onWordDeclined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mysteryClueData",{get:function(){return this._mysteryClueData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onNextAcrossWordSelect",{get:function(){return this._onNextAcrossWordSelect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPrevAcrossWordSelect",{get:function(){return this._onPrevAcrossWordSelect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialThirdStep",{get:function(){return this._onTutorialThirdStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialForthStep",{get:function(){return this._onTutorialForthStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialFifthStep",{get:function(){return this._onTutorialFifthStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialSixthStep",{get:function(){return this._onTutorialSixthStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialFinish",{get:function(){return this._onTutorialFinish},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCloseExpandButtonClick",{get:function(){return this._onCloseExpandButtonClick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHotKeyPress",{get:function(){return this._onHotKeyPress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onEnableExpandButtons",{get:function(){return this._onEnableExpandButtons},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jumpToNextClue",{get:function(){return this._jumpToNextClue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"confirmPopupShow",{get:function(){return this._confirmPopupShow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableHotKeys",{set:function(t){this._disableHotKeys=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"solveButtonClicked",{get:function(){return this._solveButtonClicked},set:function(t){this._solveButtonClicked=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"confirmPopupIsVisible",{get:function(){return this._confirmPopupIsVisible},set:function(t){this._confirmPopupIsVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDailyChallengeWordDecline",{get:function(){return this._onDailyChallengeWordDecline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPencilEnabledStateChanged",{get:function(){return this._onPencilEnabledStateChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"starCount",{get:function(){return this._starCount},set:function(t){this._starCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialFirstStep",{get:function(){return this._onTutorialFirstStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialEighthStep",{get:function(){return this._onTutorialEighthStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLockBtnTutorial",{get:function(){return this._showLockBtnTutorial},set:function(t){this._showLockBtnTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTutorialSeventhStep",{get:function(){return this._onTutorialSeventhStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMysteryClueTutorial",{get:function(){return this._showMysteryClueTutorial},set:function(t){this._showMysteryClueTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backspacePressed",{get:function(){return this._backspacePressed},set:function(t){this._backspacePressed=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCluesUpdate",{get:function(){return this._onCluesUpdate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(t){this._startTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},set:function(t){this._endTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameEndData",{get:function(){return this._gameEndData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSolveViewHide",{get:function(){return this._onSolveViewHide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDisableHintButton",{get:function(){return this._disableHintButton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameMode",{get:function(){return this._gameMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cluesSolved",{get:function(){return this.game.cluesSolved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionsOpen",{get:function(){return this._isOptionsOpen},set:function(t){this._isOptionsOpen=t},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.disposeSignals(),delete this.game,delete this.words,delete this.keyboard,delete this.messageService},t.prototype.updateClues=function(t,e){this._onCluesUpdate.dispatch(t,e)},t.prototype.handleDailyChallengeWordDecline=function(t){this._onDailyChallengeWordDecline.dispatch(t)},t.prototype.handleConfirmPoupShow=function(t,e){return this._confirmPopupShow.dispatch(t,e)},t.prototype.enableExpandButtons=function(t){return this._onEnableExpandButtons.dispatch(t)},t.prototype.disableHintButton=function(){return this._disableHintButton.dispatch()},t.prototype.saveBoardData=function(t){me.instance.saveCurrentPuzzle(this.gameEndData,t,this._gameEndData.timeSpentMS)},t.prototype.handleCloseExpandButtonClick=function(t){return this._onCloseExpandButtonClick.dispatch(t)},t.prototype.handleKeyboardClose=function(){this._onKeyboardClose.dispatch()},t.prototype.handleClueBoardHeightChange=function(t){return this._onClueBoardHeightChange.dispatch(t)},t.prototype.handleJumpToNextClue=function(){return this._jumpToNextClue.dispatch()},t.prototype.handleExpandButtonClick=function(t){this._onExpandButtonClick.dispatch(t)},t.prototype.handleNextPuzzleClick=function(t,e){this.messageService.sendMessageToWrapper({state:Ft.a.Complete,objectives:t,progress:this.gameEndData}),Object(jt.isNullOrUndefined)(this._difficulty)&&me.instance.saveCurrentPuzzle(this.gameEndData,e,this.gameEndData.timeSpentMS)},t.prototype.handlePuzzleExit=function(t,e){var i;this._gameEndData.endTimer(this.startTime),"dailyChallenge"===this.gameMode?i={state:Ft.a.Exit,timeSpentMS:this._gameEndData.timeSpentMS}:(this.gameEndData.endTimer(this.startTime),i={state:Ft.a.Exit,objectives:t,progress:this.gameEndData},me.instance.saveCurrentPuzzle(this.gameEndData,e,this._gameEndData.timeSpentMS)),this.messageService.sendMessageToWrapper(i),Object(jt.isNullOrUndefined)(this._difficulty)},t.prototype.getWords=function(){return this.words.words},t.prototype.handleTutorialFirstStep=function(t,e,i){this._onTutorialFirstStep.dispatch(t,e,i)},t.prototype.handleTutorialSecondStep=function(t,e,i){this._onTutorialSecondStep.dispatch(t,e,i)},t.prototype.handleTutorialThirdStep=function(t,e,i){this._onTutorialThirdStep.dispatch(t,e,i)},t.prototype.handleTutorialForthStep=function(){this._onTutorialForthStep.dispatch()},t.prototype.handleTutorialFifthStep=function(){this._onTutorialFifthStep.dispatch()},t.prototype.handleTutorialSixthStep=function(){this._onTutorialSixthStep.dispatch()},t.prototype.handleTutorialSeventhStep=function(){this._onTutorialSeventhStep.dispatch()},t.prototype.handleTutorialEighthStep=function(){this._onTutorialEighthStep.dispatch()},t.prototype.handleTutorialEnd=function(){this._onTutorialFinish.dispatch()},t.prototype.handleDailyChallengeEnd=function(t){this._gameEndData.endTimer(this.startTime),this.isResolved||(this.messageService.sendMessageToWrapper({state:Ft.a.Complete,result:t?"solved":"unsolved",timeSpentMS:this._gameEndData.timeSpentMS}),this.isResolved=!0)},t.prototype.clueClick=function(t,e,i){i&&(this.clueSelectedDirection=e?we.Across:we.Down),this.unselectAllWords();var n=this.words.getWordsByWordId(t);this._onWordSelect.dispatch(n,ve.Clue)},t.prototype.keyboardKeyClicked=function(t,e){this._onKeyPress.dispatch(t,e)},t.prototype.hint=function(){this.gameEndData.hintUsed(),this._onHintClicked.dispatch()},t.prototype.cellClick=function(t,e){var i,n=i=this.words.getWordsByCellCoords(t),o=n[0],r=n[1],s=Xt.i.getSettings().crossword;this.words.words.filter(function(t){return t!==o&&t!==r}).forEach(function(t){return t.selected=!1}),s.menuOptionCrosswordArrowChangeDirection?this.handleCrosswordArrowChangeDirection(o,r,e):(o.selected=this._clueSelectedDirection===we.Across,r.selected=this._clueSelectedDirection===we.Down),this._onWordSelect.dispatch(i,ve.Board)},t.prototype.cellMouseClick=function(t,e,i,n){if(!this._checkViewIsVisible){var o,r=Xt.i.getSettings().crossword,s=o=this.words.getWordsByCellCoords(t),a=s[0],l=s[1];if(this.words.words.filter(function(t){return t!==a&&t!==l}).forEach(function(t){return t.selected=!1}),l.selected||a.selected||(a.selected=!0),i)l.selected=!1,this.clueSelectedDirection=we.Across;else{r.menuOptionCrosswordClickChangeDirection&&this.handleClickChangeDirection(a,l,e),r.menuOptionCrosswordArrowBrowseClueList&&this.handleArrowBrowseClueList(a,l,n);var h=o.filter(function(e){return e.x.length>1&&t.x===e.x[0]||e.y.length>1&&t.y===e.y[0]})[0];r.menuOptionCrosswordDetectOrientation&&h&&e!==ue.CHOOSED?this.handleDetectOrientation(h,o):(a.selected=this._clueSelectedDirection===we.Across,l.selected=this._clueSelectedDirection===we.Down)}this._onWordSelect.dispatch(o,ve.Board)}},t.prototype.checkWordByFirstCell=function(t,e,i){var n=this,o=this.words.getWordsByCellCoords(t).filter(function(t){return t.selected})[0];if(!e)return i&&i.checkedState===de.Correct&&this._onKeyFound.dispatch(i),void setTimeout(function(){return n._onWordDeclined.dispatch()},1e3);o.solved||(o.solved=!0,this.game.clueSolved(),this._onWordCheck.dispatch(o),i&&this._onKeyFound.dispatch(i))},t.prototype.checkWord=function(t,e,i){if(null==t)return this.game.cluesSolved=Math.floor(Gt.instance.cluesCount),void this._onWordCheck.dispatch(t,i,!0);!t.solved&&e&&(t.solved=!0,this.game.clueSolved(),this._onWordCheck.dispatch(t,i))},t.prototype.initialize=function(){this._gameEndData=new ye,this._gameEndData.timeSpentMS=this.gameMode!==Wt.DailyChallenge&&me.instance.getCurrentPuzzleData().progress?me.instance.getCurrentPuzzleData().progress.timeSpentMS:0,this.checkForSavedData(),this.game=Gt.instance.game,this.words=this.game.wordMapper.words,this.keyboard=ee.game.input.keyboard,this.keyboard.addCallbacks(this,this.handleKeyPressed,this.handleKeyUp),this.initSignals(),this.attachHandlers()},t.prototype.checkForSavedData=function(){var t=me.instance.getCurrentPuzzleData();Object(jt.isNullOrUndefined)(t)||t.progress&&(this.gameEndData.hintsUsed=t.progress.hintsUsed,this.gameEndData.checksUsed=t.progress.checksUsed)},t.prototype.initDailyChallengeObjectives=function(t){this._objectives=new ge(this._difficulty,t),this._mysteryClueData=new fe(this._objectives)},t.prototype.initSignals=function(){this._onWordSelect=new Phaser.Signal,this._onWordCheck=new Phaser.Signal,this._onKeyPress=new Phaser.Signal,this._onKeyFound=new Phaser.Signal,this._onHintClicked=new Phaser.Signal,this._onWordDeclined=new Phaser.Signal,this._onNextAcrossWordSelect=new Phaser.Signal,this._onPrevAcrossWordSelect=new Phaser.Signal,this._onGameEnd=new Phaser.Signal,this._onExpandButtonClick=new Phaser.Signal,this._onClueBoardHeightChange=new Phaser.Signal,this._onKeyboardClose=new Phaser.Signal,this._onCloseExpandButtonClick=new Phaser.Signal,this._onHotKeyPress=new Phaser.Signal,this._disableHintButton=new Phaser.Signal,this._jumpToNextClue=new Phaser.Signal,this._onEnableExpandButtons=new Phaser.Signal,this._confirmPopupShow=new Phaser.Signal,this._hideCheckView=new Phaser.Signal,this._onDailyChallengeWordDecline=new Phaser.Signal,this._onPencilEnabledStateChanged=new Phaser.Signal,this._onCluesUpdate=new Phaser.Signal,this._onSolveViewHide=new Phaser.Signal,this._onTutorialFirstStep=new Phaser.Signal,this._onTutorialSecondStep=new Phaser.Signal,this._onTutorialThirdStep=new Phaser.Signal,this._onTutorialForthStep=new Phaser.Signal,this._onTutorialFifthStep=new Phaser.Signal,this._onTutorialSixthStep=new Phaser.Signal,this._onTutorialSeventhStep=new Phaser.Signal,this._onTutorialEighthStep=new Phaser.Signal,this._onTutorialFinish=new Phaser.Signal,this._onDailyChallengeTutorialFirstStep=new Phaser.Signal,this._onDailyChallengeTutorialSecondStep=new Phaser.Signal,this._onDailyChallengeTutorialThirdStep=new Phaser.Signal},t.prototype.disposeSignals=function(){this._onWordSelect.dispose(),this._onWordCheck.dispose(),this._onKeyPress.dispose(),this._onKeyFound.dispose(),this._onHintClicked.dispose(),this._onWordDeclined.dispose(),this._onNextAcrossWordSelect.dispose(),this._onPrevAcrossWordSelect.dispose(),this._onGameEnd.dispose(),this._onExpandButtonClick.dispose(),this._onClueBoardHeightChange.dispose(),this._onKeyboardClose.dispose(),this._onCloseExpandButtonClick.dispose(),this._onHotKeyPress.dispose(),this._disableHintButton.dispose(),this._jumpToNextClue.dispose(),this._onEnableExpandButtons.dispose(),this._confirmPopupShow.dispose(),this._hideCheckView.dispose(),this._onDailyChallengeWordDecline.dispose(),this._onPencilEnabledStateChanged.dispose(),this._onCluesUpdate.dispose(),this._onSolveViewHide.dispose(),this._onTutorialFirstStep.dispose(),this._onTutorialSecondStep.dispose(),this._onTutorialThirdStep.dispose(),this._onTutorialForthStep.dispose(),this._onTutorialFifthStep.dispose(),this._onTutorialSixthStep.dispose(),this._onTutorialSeventhStep.dispose(),this._onTutorialEighthStep.dispose(),this._onTutorialFinish.dispose(),this._onDailyChallengeTutorialFirstStep.dispose(),this._onDailyChallengeTutorialSecondStep.dispose(),this._onDailyChallengeTutorialThirdStep.dispose()},t.prototype.attachHandlers=function(){var t=this;ee.game.onBlur.add(this.handleGameBlur,this),this.messageService.wrapperMessage$.subscribe(function(e){"pause"===e.state?t.disableInput=!0:"unPause"===e.state&&(t.disableInput=!1)})},t.prototype.unselectAllWords=function(){this.words.words.forEach(function(t){return t.selected=!1})},t.prototype.handleKeyPressed=function(t){if(!this.disableInput)if(!this.keyboard.isDown(ke.ALT)||this._disableHotKeys||this.altPressed)if(t.keyCode===ke.F3)this._onHotKeyPress.dispatch(be.GoToNextPuzzle);else switch(t.keyCode){case ke.HOME:this._onHotKeyPress.dispatch(be.SelectTopPriorityClue);break;case ke.PAGE_UP:this._onHotKeyPress.dispatch(be.SelectFirstAcrossClue);break;case ke.PAGE_DOWN:this._onHotKeyPress.dispatch(be.SelectFirstDownClue);break;case ke.END:this._onHotKeyPress.dispatch(be.SelectLastDownClue);break;default:this.keyboardKeyClicked(t.keyCode,"gc")}else t.keyCode===ke.H?(this.altPressed=!0,this._onHotKeyPress.dispatch(be.Hint)):t.keyCode===ke.C?this._onHotKeyPress.dispatch(be.ToggleChecks):t.keyCode===ke.Z?this._onHotKeyPress.dispatch(be.AdjustZoom):t.keyCode===ke.P?this._onHotKeyPress.dispatch(be.TogglePencilMode):t.keyCode===ke.G?this._onHotKeyPress.dispatch(be.ToggleGridSize):t.keyCode===ke.O?this._onHotKeyPress.dispatch(be.Options):t.keyCode===ke.K&&this._onHotKeyPress.dispatch(be.ToggleKeyboard)},t.prototype.handleKeyUp=function(t){this.altPressed=!1,this._backspacePressed=!1},t.prototype.handleCrosswordArrowChangeDirection=function(t,e,i){i?(t.selected=!0,e.selected=!1,this.clueSelectedDirection=we.Across):Object(jt.isNullOrUndefined)(i)?(t.selected=this._clueSelectedDirection===we.Across,e.selected=this._clueSelectedDirection===we.Down):(t.selected=!1,e.selected=!0,this.clueSelectedDirection=we.Down)},t.prototype.handleClickChangeDirection=function(t,e,i){i===ue.CHOOSED?(t.selected=!t.selected,e.selected=!e.selected,this.clueSelectedDirection=t.selected?we.Across:we.Down):(t.selected=this._clueSelectedDirection===we.Across,e.selected=this._clueSelectedDirection===we.Down)},t.prototype.handleArrowBrowseClueList=function(t,e,i){t.selected=i?this._clueSelectedDirection===we.Across:!t.selected,e.selected=i?this._clueSelectedDirection===we.Down:!e.selected,this.clueSelectedDirection=t.selected?we.Across:we.Down},t.prototype.handleDetectOrientation=function(t,e){var i=e.filter(function(e){return e.type!==t.type})[0];t.selected=!0,i.selected=!1,this.clueSelectedDirection=t.type===Dt.Vertical?we.Down:we.Across},t.prototype.handleGameBlur=function(){this.keyboard.reset(!0)},t}(),ve=function(t){return t[t.Board=0]="Board",t[t.Clue=1]="Clue",t}({}),we=function(t){return t[t.Across=0]="Across",t[t.Down=1]="Down",t}({}),Be=function(){function t(){this._callBacks=[],this.onMouseWheel=this.handleMouseWheel.bind(this)}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.getElementById("gameContainer").attachEvent?document.getElementById("gameContainer").attachEvent("on"+t,this.handleMouseWheel.bind(this)):document.getElementById("gameContainer").addEventListener&&document.getElementById("gameContainer").addEventListener(t,this.handleMouseWheel.bind(this),!1)},t.prototype.destroy=function(){this._callBacks.length=0,this.removeEventListeners(),delete this._callBacks,delete t._instance},t.prototype.add=function(t,e,i){this._callBacks.push({element:t,callback:e,context:i})},t.prototype.handleMouseWheel=function(t){var e=0,i=0;t||(t=window.event),t.wheelDelta?(e=t.wheelDelta,i=t.wheelDeltaX||i):t.detail&&(e=-t.detail/3,i=0),t.preventDefault&&t.preventDefault(),t.returnValue=!1;var n=ee.game.input.activePointer;this._callBacks.forEach(function(t){t.element.getBounds()&&t.element.getBounds().contains(n.x,n.y)&&t.callback.call(t.context,e,i)})},t.prototype.removeEventListeners=function(){var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.getElementById("gameContainer").detachEvent?document.getElementById("gameContainer").detachEvent("on"+t,this.onMouseWheel):document.getElementById("gameContainer").removeEventListener&&document.getElementById("gameContainer").removeEventListener(t,this.onMouseWheel)},t}(),xe=function(t){function e(e,i,n,o,r){var s=t.call(this,ee.game,r)||this;return s._height=e,s._itemsHeight=i,s.scroller=n,s.background=o,s.addChild(s.background),s.addChild(s.scroller),s.initialize(),s}return Object(st.__extends)(e,t),e.prototype.setHeight=function(t){this._height=t},Object.defineProperty(e.prototype,"onDrag",{get:function(){return this._onDrag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bkgHeight",{set:function(t){this.background.resize(this.background.width,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollerHeight",{set:function(t){this.scroller.resize(this.scroller.width,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this.scroller.inputEnabled=!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bkgAlpha",{set:function(t){this.background.alpha=t},enumerable:!0,configurable:!0}),e.prototype.setProgress=function(t){this.scroller.y=Math.max(this.background.height*t-this.scroller.height,0)},e.prototype.updateSize=function(t){this._itemsHeight=t,this.scroller.resize(this.scroller.width,this._height*(this._height/this._itemsHeight))},e.prototype.initialize=function(){this.initSignals(),this.initBackground(),this.initScroller()},e.prototype.initBackground=function(){this.background.alpha=.2,this.background.inputEnabled=!0},e.prototype.initSignals=function(){this._onDrag=new Phaser.Signal},e.prototype.initScroller=function(){this.scroller.alpha=.4,this.scroller.inputEnabled=!0,this.scroller.input.enableDrag(),this.scroller.input.allowHorizontalDrag=!1,this.scroller.events.onInputOver.add(this.handleScrollerInputOver,this),this.scroller.events.onInputOut.add(this.handleScrollerInputOut,this),this.scroller.events.onDragUpdate.add(this.handleScrollerDragUpdate,this)},e.prototype.handleScrollerInputOver=function(){this.scroller.alpha=.7},e.prototype.handleScrollerInputOut=function(){this.scroller.alpha=.4},e.prototype.handleScrollerDragUpdate=function(){this.disabled||(this.scroller.y<0?this.scroller.y=0:this.scroller.y>this.background.height-this.scroller.height&&(this.scroller.y=this.background.height-this.scroller.height),this.onDrag.dispatch(this.scroller.y/(this.background.height-this.scroller.height)))},e}(Phaser.Group),Se=function(){function t(){this.currentStep=se.i.getItem("tutorialSeen")?2:1,this.stepsWithNext=3,this.stepsCount=5,this.arrows=[],this.textFontSize=24,this.lastArrowPositions={},this.handleResize=this.handleGameSizeChange.bind(this),this._showBlockerAndPopup=!0}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSkipClick",{get:function(){return this._onSkipClick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepDoneSignal",{get:function(){return this._stepDoneSignal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tutorialFinished",{set:function(t){this._tutorialFinished=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showBlockerAndPopup",{set:function(t){this._showBlockerAndPopup=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"puzzleButtonPositions",{set:function(t){this._puzzleButtonPositions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideArrows",{set:function(t){this._hideArrows=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLockBtnTutorial",{set:function(t){this._showLockBtnTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.currentStep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tutorialSeen",{get:function(){return!!se.i.getItem("tutorialSeen")},set:function(t){se.i.setItem("tutorialSeen","1")},enumerable:!0,configurable:!0}),t.prototype.initSkipBtn=function(){var t=this;this.skipBtn=document.getElementById("skipBtn"),this.skipBtn.innerText=Ut.i.getString("skipBtn","skip"),this.skipBtn.classList.add(Gt.instance.language),this.skipBtn.style.display="block",this.skipBtn.onclick=function(){Rt.i.playPopupShow(),t.currentStep=7,t._onSkipClick.dispatch(),t._tutorialFinished=!0,t.end()}},t.prototype.initialize=function(t,e){this.gc=t,this.game=e,this.initButtons(),this.initSignals(),window.addEventListener("resize",this.handleResize)},t.prototype.setGameObjectPositions=function(t){this.boardPositions=t[0],this.clueBoardPositions=t[1],this.puzzleInfoPositions=t[2],this.checkViewPositions=t[3],this.optionsPositions=t[4]},t.prototype.initBlocker=function(t,e,i,n,o){this.word=this.word||o;var r=document.getElementById("gameContainer").childNodes[0],s=parseInt(r.style.width,10)/1451,a=parseInt(r.style.height,10)/1026,l=this.getWorldPosition(t,e);this.blocker=document.getElementById("ftueBlocker"),this.blocker.style.display="block",this.blocker.style.width=i*s+"px",this.blocker.style.height=n*a+"px",this.blocker.style.left="calc(-100vw - 10px + "+l.x+"px)",this.blocker.style.top="calc(-100vh - 10px + "+l.y+"px)"},t.prototype.showPopup=function(t,e,i,n,o,r){this.word=r||this.word,this.lastPopupMeasurements={x:t,y:e,top:i,left:n,width:o};var s=this.getStepText(this.currentStep);this.getWorldPosition(t,e),document.getElementById("popupText").innerHTML=s;var a=document.getElementById("popupBtn");a.innerText=Ut.i.getString("nextBtn","Next"),a.style.display=this.currentStep<=this.stepsWithNext||7===this.currentStep?"block":"none",this.popupDiv=document.getElementById("popupContainer"),this.popupDiv.style.display="flex",this.skipBtn=document.getElementById("skipBtn"),4===this.currentStep?(this.skipBtn.parentElement.style.display="none",this.game.device.desktop||(window.innerWidth>window.innerHeight?document.getElementById("popupContainer").style.marginTop="-100px":document.getElementById("popupContainer").style.marginTop="-150px",this._hideArrows=!0)):this.skipBtn.parentElement.style.display="block"},t.prototype.showArrow=function(t,e,i,n,o){var r=this;this._hideArrows=!1;var s=document.createElement("img");s.src=yt.FtueArrow.getPNG();var a=this.getArrowPosition(t,e);this.lastArrowPositions[o]={x:t,y:e,top:i,left:n},s.setAttribute("class","arrow-image");var l=this.game.add.tween({x:0}).to({x:1},700,null,!0);l.yoyo(!0),l.loop(!0),e=a.y+i,l.onUpdateCallback(function(t,i){s.setAttribute("style","\n        \t\theight: "+r.game.scale.scaleFactorInversed.y*s.naturalHeight*.83+"px;\n        \t\twidth: "+r.game.scale.scaleFactorInversed.x*s.naturalWidth*.6+"px;\n        \t\ttransform: translate("+(a.x+n)+"px, "+(i<.5?e-30*i:e-30+30*i)+"px)")},this),this.arrows.push(s),document.getElementById("gameContainer").parentElement.appendChild(s)},t.prototype.removeArrowData=function(){this.lastArrowPositions={}},t.prototype.removeArrows=function(){this.arrows.forEach(function(t){t.style.display="none",t.parentNode.removeChild(t)}),this._hideArrows=!0,this.arrows=[]},t.prototype.showSkipBtn=function(){this.skipBtn.style.display="block"},t.prototype.end=function(){this.currentStep=7,this.removeArrows(),this.skipBtn.style.display="none",this.hide(),this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"})},t.prototype.nextStep=function(t){this._showBlockerAndPopup=!t,this.currentStep++,console.log(this.currentStep),this.removeArrows(),this.removeArrowData(),this.blocker.style.display="none",this.popupDiv.style.display="none",this._stepDoneSignal.dispatch(),this._showLockBtnTutorial=!1,(6===this.currentStep||this.currentStep>this.stepsCount)&&this.hide()},t.prototype.destroy=function(){this.currentStep=se.i.getItem("tutorialSeen")?2:1,this._tutorialFinished=!1,window.removeEventListener("resize",this.handleResize),delete this.gc,delete t._i},t.prototype.initButtons=function(){var t=this;this.popupButton=document.getElementById("popupBtn"),this.popupButton.onclick=function(){Rt.i.playPopupShow(),t.nextStep()}},t.prototype.initSignals=function(){this._stepDoneSignal=new Phaser.Signal,this._onSkipClick=new Phaser.Signal},t.prototype.hide=function(){this.currentStep>=8&&this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"}),this.blocker.style.display="none",this.popupDiv.style.display="none",this.skipBtn.style.display="none",this.popupButton.style.display="none"},t.prototype.getWorldPosition=function(t,e){var i=document.getElementById("gameContainer").childNodes[0],n=i.getBoundingClientRect(),o=parseInt(i.style.width,10)/1451,r=parseInt(i.style.height,10)/1026;return new PIXI.Point(n.left+t*o,n.top+e*r)},t.prototype.getArrowPosition=function(t,e){var i=document.getElementById("gameContainer").childNodes[0],n=i.getBoundingClientRect(),o=parseInt(i.style.width,10)/1373,r=parseInt(i.style.height,10)/1080;return new PIXI.Point(n.left+t*o,e*r)},t.prototype.getStepText=function(t){switch(t){case 1:return Ut.i.getString("ftueSeq1Info","Each puzzle has 3 stars you can earn by completing the objectives. Get at least one star to unlock the next puzzle. Let's go!");case 2:return Ut.i.getString("ftueSeq2Info","This is the word-games-crossword grid where you will fill in your answers to clues.");case 3:return Ut.i.getString("ftueSeq3Info","Clues are listed here. Selecting a clue will highlight the answer space on the grid.");case 4:return Ut.i.getString("ftueSeq4Info","Let\u2019s get started! Click on the highlighted clue or the first square on the grid and use the <span style='color:#FFDE01'>keyboard</span> to type <span style='color:#FFDE01'>{{word}}</span>.").replace("{{word}}",this.word);case 5:return Ut.i.getString("ftueSeq5Info","If you want to check an answer, highlight it in the grid and click the <span style='color:#FFDE01'>Check</span> button.");case 6:return Ut.i.getString("ftueSeq6Info","<span style='color:#FFDE01'> Game Options </span> allow you to customize your playing experience. Click here to view the options for CrosswordsApp.");case 7:return Ut.i.getString("ftueSeq7Info","You've unlocked the next puzzle! You can return to the map or keep playing to earn more stars. If you choose to move on you can always retun later to earn the remaining stars.")}},t.prototype.handleGameSizeChange=function(){clearTimeout(this.blockerTimeout),clearTimeout(this.popupTimeout),clearTimeout(this.arrowTimeout),(!this._tutorialFinished&&this._showBlockerAndPopup||this._showLockBtnTutorial)&&(this.blockerTimeout=setTimeout(this.reInitBlocker.bind(this),130)),(!this._tutorialFinished&&this._showBlockerAndPopup||this._showLockBtnTutorial)&&(this.popupTimeout=setTimeout(this.reInitPopup.bind(this),130)),this._tutorialFinished||this._hideArrows||(this.arrowTimeout=setTimeout(this.reInitArrow.bind(this),130))},t.prototype.reInitBlocker=function(){var t=null;switch(this.currentStep){case 1:t=this.puzzleInfoPositions;break;case 2:t=this.boardPositions;break;case 3:t=this.clueBoardPositions;break;case 5:t=this.checkViewPositions;break;case 6:t=this.optionsPositions;break;case 7:t=this._puzzleButtonPositions}t&&this.initBlocker(t.x,t.y,t.width,t.height)},t.prototype.reInitPopup=function(){this.showPopup(this.lastPopupMeasurements.x,this.lastPopupMeasurements.y,this.game.scale.scaleFactorInversed.y*this.lastPopupMeasurements.top,this.lastPopupMeasurements.left,this.lastPopupMeasurements.width)},t.prototype.reInitArrow=function(){for(var t in this.removeArrows(),this.lastArrowPositions){var e=this.lastArrowPositions[t];this.showArrow(e.x,e.y,e.top,e.left,t)}},t}(),Pe=function(){return function(t,e,i,n,o){this.index=t,this.input=e,this.checkedState=i,this.pencil=n,this.wrong=o}}(),_e=function(t){function e(e,i,n){var o=t.call(this,ee.game,n)||this;return o.gc=e,o._maskHeight=590,o._maskWidth=590,o.cells=[],o.cellMargin=new Phaser.Point(2,2),o.highlightedCells=[],o.greyedCells=[],o._scale=i,o.cellMargin.x*=o._scale.x,o.cellMargin.y*=o._scale.y,o.initialize(),o}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"pencilEnabled",{set:function(t){this._pencilEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onPlayerInput",{get:function(){return this._onPlayerInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"correctWordsFirstCells",{get:function(){return this._correctWordsFirstCells},enumerable:!0,configurable:!0}),e.prototype.getChoosedCell=function(){return this.checkIfChoosedCellInBounds()||this.scrollTo(-(this.choosedCell.y-this._maskHeight/2),-(this.choosedCell.x-this._maskWidth/2)),this.choosedCell},e.prototype.fillFirstWord=function(){this._checkForTutorial=!1;var t=this.getCells(this.gc.getWords()[0]);t.every(function(t){return t.checkedState===de.Filled})||t.forEach(function(t){return t.resetCell()})},e.prototype.zoom=function(t){this.cells.forEach(function(e){return e.zoom(t)}),this.calculateGridSize(t),this.enableScrolling(t>1)},e.prototype.checkWord=function(){var t=this;if(this._checkForTutorial){var e=this.getCells(this.gc.getWords()[0]);e.forEach(function(t){return t.resetCell()});var i=e.every(function(t){return t.checkedState===de.Correct}),n=e.every(function(t){return t.checkedState===de.Empty});if(i)return e.forEach(function(t){return t.check()}),this.checkAllCellsResolved(),void(this._checkForTutorial=!1);if(n)return e.forEach(function(t){return t.fillCell()}),e.forEach(function(t){return t.check()}),this.gc.checkWord(this.gc.getWords()[0],!0),this.checkAllCellsResolved(),void(this._checkForTutorial=!1)}this._correctWordsFirstCells=[],this.highlightedCells.forEach(function(t){return t.check()}),this.highlightedCells.every(function(t){return t.checkedState===de.Correct})?this.gc.gameEndData.successCount():this.gc.gameEndData.failCount(),this.gc.getWords().forEach(function(e){var i=t.getCells(e);if(!e.solved){var n=i.every(function(t){return t.checkedState===de.Correct});t.gc.checkWord(e,n),n&&t._correctWordsFirstCells.push(t.highlightedCells[0])}}),this.checkAllCellsResolved(),this.checkFilledCells(),this.gc.saveBoardData(this.getData())},e.prototype.checkSquare=function(){var t=this,e=this.choosedCell.checkedState===de.Correct;if(this.choosedCell.check(),this.choosedCell.checkedState===de.Correct?this.gc.gameEndData.successCount():this.gc.gameEndData.failCount(),this.highlightedCells.filter(function(t){return t.checkedState===de.Correct}).length===this.highlightedCells.length){var i=this.highlightedCells.filter(function(t){return t.checkedState===de.Correct});this.gc.checkWordByFirstCell(this.choosedCell.coordinates,i.length===this.highlightedCells.length)}var n=this.gc.getWords();this._correctWordsFirstCells=[],n.forEach(function(i){var n=t.getCells(i),o=n.filter(function(t){return t.checkedState===de.Correct});t.gc.checkWord(i,o.length===n.length),i.solved||e||!t.highlightedCells.every(function(t){return t.checkedState===de.Correct})||t._correctWordsFirstCells.push(t.highlightedCells[0])}),this.checkAllCellsResolved(),this.checkFilledCells(),this.gc.saveBoardData(this.getData())},e.prototype.checkPuzzle=function(t){var e=this;if(this._checkForTutorial&&!t){var i=this.getCells(this.gc.getWords()[0]);i.forEach(function(t){return t.resetCell()});var n=i.every(function(t){return t.checkedState===de.Correct}),o=i.every(function(t){return t.checkedState===de.Empty});if(n)return i.forEach(function(e){return e.check(t)}),this._checkForTutorial=!1,this.checkAllCellsResolved(),void this.gc.saveBoardData(this.getData());if(o)return i.forEach(function(t){return t.fillCell()}),i.forEach(function(t){return t.check()}),this.gc.checkWord(this.gc.getWords()[0],!0,t),this._checkForTutorial=!1,this.checkAllCellsResolved(),void this.gc.saveBoardData(this.getData())}this._correctWordsFirstCells=[];var r,s,a=this.gc.getWords(),l=!1;if(t)a.forEach(function(i){r=e.getCells(i),s=r.filter(function(t){return t.checkedState===de.Correct}),e.gc.checkWord(i,s.length===r.length,t)});else{var h=this.cells.filter(function(t){return t.checkedState===de.Filled});a.forEach(function(t){var i=!(r=e.getCells(t)).every(function(t){return t.checkedState===de.Correct||t.checkedState===de.Empty});r.forEach(function(t){return t.check()}),s=r.filter(function(t){return t.checkedState===de.Correct}),(!t.solved&&s.length===r.length&&i||!t.solved&&s.length===r.length)&&-1===e.correctWordsFirstCells.indexOf(r[0])&&e.correctWordsFirstCells.push(r[0])}),h.every(function(t){return t.checkedState===de.Correct})?this.gc.gameEndData.successCount():this.gc.gameEndData.failCount(),this.gc.starCount<1&&this.cells.every(function(t){return t.checkedState===de.Correct})?l=!0:a.forEach(function(i){r=e.getCells(i),s=r.filter(function(t){return t.checkedState===de.Correct}),e.gc.checkWord(i,s.length===r.length,t)})}this.checkAllCellsResolved(!1,l),this.checkFilledCells(),this.gc.saveBoardData(this.getData())},e.prototype.activateFirstCell=function(){this.choosedCell=this.cells[0],this.gc.cellMouseClick(this.choosedCell.coordinates,null,null,!0)},e.prototype.getData=function(){return this.cells.map(function(t,e){return new Pe(e,t.userInputLetter,t.checkedState,t.pencilEnabled,t.wrong)}).filter(function(t){return t.input||t.wrong})},e.prototype.isChoosedCellEmpty=function(){var t=Xt.i.getSettings().crossword,e=this.choosedCell.checkedState===de.Filled||this.tutorial;return t.menuOptionCrosswordIgnorePencilOnValidation?!this.choosedCell.filledWithPencil&&e:e},e.prototype.isOneHighlightedCellFilled=function(){var t=Xt.i.getSettings().crossword;return this.highlightedCells.some(t.menuOptionCrosswordIgnorePencilOnValidation?function(t){return!t.filledWithPencil&&t.checkedState===de.Filled}:function(t){return t.checkedState===de.Filled})},e.prototype.isHighlightedWordFilled=function(){var t=Xt.i.getSettings().crossword;if(this.highlightedCells.every(function(t){return t.checkedState===de.Correct}))return!1;var e=this.highlightedCells.filter(function(t){return t.checkedState===de.Filled}),i=this.highlightedCells.every(function(t){return t.checkedState===de.Correct||t.checkedState===de.Filled});return t.menuOptionCrosswordIgnorePencilOnValidation?this.highlightedCells.every(function(t){return!t.filledWithPencil})&&i:e.length===this.highlightedCells.length||i},e.prototype.hasUncheckedCell=function(){var t=Xt.i.getSettings().crossword;return this.cells.some(t.menuOptionCrosswordIgnorePencilOnValidation?function(t){return!t.filledWithPencil&&t.checkedState===de.Filled}:function(t){return t.checkedState===de.Filled})},e.prototype.showHintWhenIdle=function(){var t=this;if(!this.tutorial){this.idleHintTweens=[];var e=this.highlightedCells[0],i=this.highlightedCells[1],n=e.showIdleHint(0);this.idleHintTweens.push(n),n?n.onComplete.add(function(){t.idleHintTweens.push(i.showIdleHint(500)),setTimeout(function(){e.hideIdleHint(),i.hideIdleHint()},1600)}):this.idleHintTweens.push(i.showIdleHint(0))}},e.prototype.hideIdleHint=function(){this.idleHintTweens.length&&this.idleHintTweens.forEach(function(t){t&&t.stop()}),this.highlightedCells[0].hideIdleHint(!0),this.highlightedCells[1].hideIdleHint(!0)},e.prototype.hideIdleAnimation=function(){this.highlightedCells.length&&this.hideIdleHint()},e.prototype.initialize=function(){this._correctWordsFirstCells=[],this.idleHintTweens=[],this.initCells(),this.initSignals(),this.initScrollBars(),this.attachListeners(),this.calculateGridSize(1),this.checkForSavedData()},e.prototype.initCells=function(){var t=this;this.maskGroup=this.game.add.group(this),this.scrollGroup=this.game.add.group(this.maskGroup),this.cells=Gt.instance.cells.map(function(e,i){return t.initializeCell(e,i)}),this.scrollGroup.addMultiple(this.cells),this.maskGroup.mask=ee.mask(0,0,this._maskWidth,this._maskHeight,this)},e.prototype.initializeCell=function(t,e){var i=new pe(t,this.cellMargin,this._scale,this);return i.onClick.add(this.handleCellClick,this),i},e.prototype.attachListeners=function(){Be.instance.add(this.maskGroup.mask,this.handleScroll,this),this.gc.onWordSelect.add(this.handleWordSelect,this),this.gc.onKeyPress.add(this.handleKeyPressed,this),this.gc.onHintClicked.add(this.handleHintClicked,this),re.i.onHintAnimationComplete.add(this.handleHintAnimationComplete,this),this.gc.onTutorialSecondStep.addOnce(this.handleTutorialSecondStep,this),this.gc.onTutorialForthStep.addOnce(this.handleTutorialForthStep,this),this.gc.onTutorialFinish.addOnce(this.handleTutorialFinish,this)},e.prototype.initScrollBars=function(){var t=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.ScrollerDark,32,this._maskHeight-5,{top:16,bottom:16,left:12,right:12},null,this),e=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.Scroller,32,32,{top:16,bottom:16,left:12,right:12},null,this);this.verticalScrollBar=new xe(this._maskHeight,this.gridHeight,e,t,this),this.verticalScrollBar.onDrag.add(this.handleVerticalBarDrag,this),this.verticalScrollBar.bkgAlpha=1,this.verticalScrollBar.x=-3+this._maskWidth-this.verticalScrollBar.width/2,this.verticalScrollBar.y=-5,this.verticalScrollBar.visible=!1;var i=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.ScrollerDark,32,this._maskWidth+5,{top:16,bottom:16,left:12,right:12},null,this),n=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.Scroller,32,32,{top:16,bottom:16,left:12,right:12},null,this);this.horizontalScrollBar=new xe(this._maskWidth,this.gridWidth,n,i,this),this.horizontalScrollBar.onDrag.add(this.handleHorizontalBarDrag,this),this.horizontalScrollBar.bkgAlpha=1,this.horizontalScrollBar.angle=-90,this.horizontalScrollBar.x=-3,this.horizontalScrollBar.y=this._maskHeight+this.horizontalScrollBar.width/2,this.horizontalScrollBar.visible=!1},e.prototype.getCellsWithState=function(t,e){return this.getCells(t).map(function(t){return t.state=e,t})},e.prototype.getCells=function(t){return this.cells.filter(function(e){return t.x.some(function(t){return t===e.coordinates.x})&&t.y.some(function(t){return t===e.coordinates.y})})},e.prototype.sortCells=function(t){for(var e=[],i=t?Gt.instance.grid.height:Gt.instance.grid.width,n=function(i){e=e.concat(o.cells.filter(function(e){return e.coordinates[t?"y":"x"]===i+1}))},o=this,r=0;r<i;r++)n(r);return e},e.prototype.enableScrolling=function(t){this.scrolling=t,this.verticalScrollBar.visible=t,this.horizontalScrollBar.visible=t,t?(this.verticalScrollBar.updateSize(this.gridHeight),this.horizontalScrollBar.updateSize(this.gridWidth),this.scrollTo(.5*-(this.gridHeight-this._maskHeight),.5*-(this.gridWidth-this._maskWidth))):this.scrollTo(0,0)},e.prototype.resetSelectedCells=function(){this.highlightedCells.forEach(function(t){return t.state=ue.FREE}),this.highlightedCells=[],this.greyedCells.forEach(function(t){return t.state=ue.FREE}),this.greyedCells=[]},e.prototype.chooseCell=function(t){this.choosedCell=t,this.choosedCell.state=ue.CHOOSED,this.checkIfChoosedCellInBounds()||this.scrollTo(-(this.choosedCell.y-this._maskHeight/2),-(this.choosedCell.x-this._maskWidth/2))},e.prototype.jumpToNextCell=function(){for(var t=Xt.i.getSettings().crossword,e=this.highlightedCells.indexOf(this.choosedCell),i=e+1;i<this.highlightedCells.length;i++)if(this.highlightedCells[i].checkedState!==de.Correct){if(this.choosedCell&&(this.choosedCell.state=ue.HIGHLIGHTED),t.menuOptionCrosswordSkipFilledCells){var n=this.highlightedCells.filter(function(t,i){return t.isEmpty()&&i>e})[0];this.chooseCell(n||this.highlightedCells[this.highlightedCells.length-1])}else this.chooseCell(this.highlightedCells[i]);this.gc.cellClick(this.choosedCell.coordinates);break}},e.prototype.jumpToPreviousCell=function(){var t,e=(t=this.sortCells(this.gc.clueSelectedDirection===we.Across)).indexOf(this.choosedCell)-1;e<0&&(e=t.length-1),this.choosedCell=t[e],this.gc.cellClick(this.choosedCell.coordinates)},e.prototype.emptyChoosedCell=function(){this.choosedCell.userInputLetter?this.choosedCell.checkedState===de.Correct?this.jumpToPreviousCell():this.choosedCell.checkedState===de.Wrong?this.choosedCell.removeLetter():(this.choosedCell.removeLetter(),this.gc.saveBoardData(this.getData())):(this.jumpToPreviousCell(),this.choosedCell.removeLetter())},e.prototype.calculateGridSize=function(t){this.gridHeight=43*t*this._scale.y*(Gt.instance.grid.height+1),this.gridWidth=43*t*this._scale.x*(Gt.instance.grid.width+1)},e.prototype.checkIfChoosedCellInBounds=function(){var t=this.maskGroup.mask.getBounds().contains(this.choosedCell.worldPosition.x,this.choosedCell.worldPosition.y);return this.maskGroup.mask.dirty=!0,t},e.prototype.disableCells=function(t){this.cells.filter(function(e){return!t.some(function(t){return t===e})}).forEach(function(t){return t.disabled=!0})},e.prototype.enableCells=function(){this.cells.forEach(function(t){return t.disabled=!1})},e.prototype.checkForTutorialWordFound=function(){var t=this,e=this.getCells(this.gc.getWords()[0]);e.filter(function(t){return t.cellText===t.solution}).length===e.length&&(Se.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialFifthStep()}),Se.i.nextStep())},e.prototype.handleCellClick=function(t){this.maskGroup.mask.getBounds().contains(this.game.input.activePointer.x,this.game.input.activePointer.y)&&(this.choosedCell=this.cells.filter(function(e){return e.coordinates===t})[0],this.checkFilledCells(),this.gc.cellMouseClick(t,this.choosedCell.state,this.tutorial,!0),this.checkFilledCells(),this.tutorial&&4===Se.i.step&&Se.i.removeArrows())},e.prototype.handleWordSelect=function(t,e){this.resetSelectedCells();var i=t[0].selected?0:1;this.highlightedCells=this.getCellsWithState(t[i],ue.HIGHLIGHTED),this.greyedCells=this.getCellsWithState(t[i?0:1],ue.GREYED),this.chooseCell(e===ve.Clue?this.highlightedCells[0]:this.choosedCell)},e.prototype.handleHintClicked=function(){this.choosedCell&&this.choosedCell.checkedState===de.Correct&&this.jumpToNextNotResolvedCell()},e.prototype.handleTutorialForthStep=function(){var t=this;this.tutorial=!0,this._checkForTutorial=!0;var e=this.getBounds(),i=this.getCells(this.gc.getWords()[0]),n=i[0].getBounds();this.disableCells(i);var o=i.map(function(t){return t.solution.toUpperCase()}).join(""),r={x:0,y:0};r.x=Xt.i.getSettings().rightHanded?e.x+e.width+20:e.x-580,r.y=e.y+e.height/2,Se.i.showPopup(r.x,r.y,15,8,30,o),Se.i.showArrow(n.x-(Xt.i.getSettings().rightHanded?110:140),n.y+80,3,0,"grid"),Se.i.stepDoneSignal.addOnce(function(){t.game.input.enabled=!0,t.gc.handleTutorialForthStep()})},e.prototype.handleTutorialFinish=function(){this.tutorial=!1,this.enableCells()},e.prototype.handleKeyPressed=function(t,e){if(!(Se.i.step>4&&Se.i.step<7||(this.hideIdleAnimation(),this.gc.solveButtonClicked||this.gc.checkViewIsVisible))){var i=Xt.i.getSettings().crossword;if(t>=Phaser.KeyCode.A&&t<=Phaser.KeyCode.Z){if(!this.choosedCell)return;if(this.highlightedCells.every(function(t){return t.checkedState===de.Correct}))return;this.choosedCell.checkedState===de.Correct?this.jumpToNextCell():(this.choosedCell.writeLetter(t,this._pencilEnabled),this.tutorial&&4===Se.i.step&&this.checkForTutorialWordFound(),i.menuOptionCrosswordJumpBackToBlank&&this.choosedCell===this.highlightedCells[this.highlightedCells.length-1]&&!this.choosedCell.isEmpty()?this.jumpToEmptyCell():this.jumpToNextCell(),i.menuOptionCrosswordAutoJump&&this.highlightedCells.indexOf(this.choosedCell)===this.highlightedCells.length-1&&this.choosedCell.checkedState===de.Filled&&this.gc.handleJumpToNextClue())}else this.gc.backspacePressed||t!==Phaser.KeyCode.BACKSPACE&&t!==Phaser.KeyCode.DELETE||("gc"===e&&(this.gc.backspacePressed=!0),this.emptyChoosedCell());i.menuOptionCrosswordArrowBrowseClueList?t>=Phaser.KeyCode.A&&t<=Phaser.KeyCode.Z?this.gc.cellClick(this.choosedCell.coordinates):t!==Phaser.KeyCode.RIGHT&&t!==Phaser.KeyCode.LEFT&&t!==Phaser.KeyCode.SPACEBAR||this.gc.cellMouseClick(this.choosedCell.coordinates):t===Phaser.KeyCode.DOWN?this.handleDownClick():t===Phaser.KeyCode.UP?this.handleUpClick():t===Phaser.KeyCode.RIGHT?this.handleRightClick():t===Phaser.KeyCode.LEFT&&this.handleLeftClick(),this.checkFilledCells(),this.gc.saveBoardData(this.getData())}},e.prototype.handleDownClick=function(){var t=Xt.i.getSettings().crossword;if(!this.tutorial){var e=this.sortCells(!1),i=e.indexOf(this.choosedCell)+1;if(i>=e.length&&(i=0),t.menuOptionCrosswordSkipFilledCells){if(e.every(function(t){return!t.isEmpty()}))return;if(!e[i].isEmpty()){var n=e.filter(function(t,e){return t.isEmpty()&&e>i-1})[0];i=e.indexOf(n=n||e[0])}}i>=e.length&&(i=0),this.choosedCell=e[i],this.gc.cellClick(this.choosedCell.coordinates,!1)}},e.prototype.handleUpClick=function(){var t=Xt.i.getSettings().crossword;if(!this.tutorial){var e=this.sortCells(!1),i=e.indexOf(this.choosedCell)-1;if(i<0&&(i=e.length-1),t.menuOptionCrosswordSkipFilledCells){if(e.every(function(t){return!t.isEmpty()}))return;if(!e[i].isEmpty()){var n=e.filter(function(t,e){return t.isEmpty()&&e<i});n[n.length-1]=n[n.length-1]||e[e.length-1],i=e.indexOf(n[n.length-1])}}i<0&&(i=e.length-1),this.choosedCell=e[i],this.gc.cellClick(this.choosedCell.coordinates,!1)}},e.prototype.handleRightClick=function(){var t=Xt.i.getSettings().crossword,e=this.sortCells(!0),i=e.indexOf(this.choosedCell)+1;if(i>e.length-1&&(i=0),t.menuOptionCrosswordSkipFilledCells){if(e.every(function(t){return!t.isEmpty()}))return;if(!e[i].isEmpty()){var n=e.filter(function(t,e){return t.isEmpty()&&e>i-1})[0];i=e.indexOf(n=n||e[0])}}i>e.length-1&&(i=0),this.choosedCell=e[i],this.gc.cellClick(this.choosedCell.coordinates,!0)},e.prototype.handleLeftClick=function(){var t=Xt.i.getSettings().crossword,e=this.sortCells(!0),i=e.indexOf(this.choosedCell)-1;if(i<0&&(i=e.length-1),t.menuOptionCrosswordSkipFilledCells){if(e.every(function(t){return!t.isEmpty()}))return;if(!e[i].isEmpty()){var n=e.filter(function(t,e){return t.isEmpty()&&e<i});n[n.length-1]=n[n.length-1]||e[e.length-1],i=e.indexOf(n[n.length-1])}}i<0&&(i=e.length-1),this.choosedCell=e[i],this.gc.cellClick(this.choosedCell.coordinates,!0)},e.prototype.handleVerticalBarDrag=function(t){this.scrollTo(-(this.gridHeight-this._maskHeight)*t)},e.prototype.handleHorizontalBarDrag=function(t){this.scrollTo(void 0,-(this.gridWidth-this._maskWidth)*t)},e.prototype.scrollTo=function(t,e){void 0!==t&&(this.scrollGroup.y=t,this.scrollGroup.y>0&&(this.scrollGroup.y=0),Math.abs(this.scrollGroup.y)>this.gridHeight-this.maskGroup.mask.height&&(this.scrollGroup.y=-(this.gridHeight-this.maskGroup.mask.height)),this.verticalScrollBar.setProgress((this._maskHeight-this.scrollGroup.y)/this.gridHeight)),void 0!==e&&(this.scrollGroup.x=e,this.scrollGroup.x>0&&(this.scrollGroup.x=0),Math.abs(this.scrollGroup.x)>this.gridWidth-this.maskGroup.mask.width&&(this.scrollGroup.x=-(this.gridWidth-this.maskGroup.mask.width)),this.horizontalScrollBar.setProgress((this._maskWidth-this.scrollGroup.x)/this.gridWidth))},e.prototype.handleScroll=function(t,e){this.scrolling&&this.scrollTo(this.scrollGroup.y+t,this.scrollGroup.x+e)},e.prototype.handleTutorialSecondStep=function(){this.getCells(this.gc.getWords()[0]).forEach(function(t){t.emptyForTutorial()})},e.prototype.jumpToEmptyCell=function(){var t=this.highlightedCells.filter(function(t){return t.isEmpty()})[0];this.choosedCell=t||this.highlightedCells[this.highlightedCells.length-1],this.gc.cellClick(this.choosedCell.coordinates)},e.prototype.checkFilledCells=function(){var t=this;this.gc.getWords().forEach(function(e){var i=t.getCells(e).every(function(t){return t.checkedState===de.Correct||t.checkedState===de.Filled});t.gc.updateClues(e.id,i)})},e.prototype.initSignals=function(){this._onPlayerInput=new Phaser.Signal},e.prototype.checkForSavedData=function(){var t=me.instance.getCurrentPuzzleData();t&&t.board&&(this.cells.forEach(function(e,i){var n=t.board.filter(function(t){return t.index===i})[0];n&&(e.wrong=n.wrong,e.writeTextLetter(n.input,n.pencil),n.checkedState!==de.Correct&&n.checkedState!==de.Wrong||e.check(!0))}),this.checkFilledCells())},e.prototype.jumpToNextNotResolvedCell=function(){var t,e,i=this;(t=this.sortCells(this.gc.clueSelectedDirection===we.Across)).every(function(t){return t.checkedState===de.Correct})||((e=t.filter(function(e,n){return e.checkedState!==de.Correct&&n>t.indexOf(i.choosedCell)})[0])||(e=t.filter(function(t){return t.checkedState!==de.Correct})[0]),this.chooseCell(e),this.gc.cellClick(this.choosedCell.coordinates))},e.prototype.updateCLueSolved=function(t,e){var i=this;t||(e?this.gc.checkWord(null,null,null):this.gc.getWords().forEach(function(e){var n=i.getCells(e);n.forEach(function(t){return t.check()});var o=n.filter(function(t){return t.checkedState===de.Correct});i.gc.checkWord(e,o.length===n.length,t)}))},e.prototype.checkAllCellsResolved=function(t,e){this.cells.every(function(t){return t.checkedState===de.Correct})&&(this.gc.disableHintButton(),this.updateCLueSolved(t,e))},e.prototype.handleHintAnimationComplete=function(t){t.reveal(),this.checkSquare()},e}(Phaser.Group),Me=function(t){function e(e,i){var n=t.call(this,ee.game,i)||this;return n.gc=e,n.zoomFactors=[1,1.75,2.2],n.currentZoomFactorIndex=0,n.isExpanded=!1,n.initialize(),n}return Object(st.__extends)(e,t),e.prototype.getCorrectWordsFirstCells=function(){return this.grid.correctWordsFirstCells},e.prototype.getChoosedCell=function(){return this.grid.getChoosedCell()},Object.defineProperty(e.prototype,"onPlayerInput",{get:function(){return this._onPlayerInput},enumerable:!0,configurable:!0}),e.prototype.handleSkipButtonClick=function(){this.grid.fillFirstWord()},e.prototype.activateFirstCell=function(){this.grid.activateFirstCell()},e.prototype.checkWord=function(){this.grid.checkWord()},e.prototype.checkSquare=function(){this.grid.checkSquare()},e.prototype.checkPuzzle=function(t){this.grid.checkPuzzle(t)},e.prototype.getData=function(){return this.grid.getData()},e.prototype.zoom=function(){var t=this.getCurrentZoomFactor();this.grid.zoom(t)},e.prototype.getBoardActionsInfo=function(){return{canCheckCell:this.grid.isChoosedCellEmpty(),canCheckWord:this.grid.isOneHighlightedCellFilled(),canCheckPuzzle:this.grid.hasUncheckedCell()}},e.prototype.handlePencilModeChange=function(t){this.grid.pencilEnabled=t},e.prototype.initialize=function(){this.initBackground(),this.initSignals(),this.initTitle(),this.initGrid(),this.initExpandButton(),this.initCloseButton(),this.attachListeners()},e.prototype.initBackground=function(){this.background=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.BoardBackground,639,678,{top:26,bottom:37,left:25,right:37},null,this)},e.prototype.initExpandButton=function(){this.expandButton=ee.button(Ot.Buttons.expandButton,this.handleExpandButtonClick,this,this,Ut.i.getString("expandTooltip","tooltip")),this.expandButton.position.set(this.width-110,0),this.expandButton.scale.set(.5,.5),this.game.device.desktop||(this.expandButton.visible=!1)},e.prototype.initCloseButton=function(){this.expandCloseButton=ee.button(Ot.Buttons.expandCloseButton,this.handleCloseButtonClick,this,this,Ut.i.getString("closeExpandTooltip","tooltip")),this.expandCloseButton.position.set(this.width-110,0),this.expandCloseButton.scale.set(.5,.5),this.expandCloseButton.visible=!1,this.expandCloseButton.enabled=!1},e.prototype.initTitle=function(){this.title=ee.text(this.background.width/2,33,Gt.instance.title,{font:Ot.Fonts.font,fontSize:20,fill:"#ffffff"},this,new Phaser.Point(.5,.5),new Phaser.Point(1,1),Gt.instance.creator)},e.prototype.initGrid=function(){var t=this,e=Ot.Margins.left,i=Ot.Margins.top,n=this.calculateScale();this.grid=new _e(this.gc,n,this),this.grid.onPlayerInput.add(function(e){t._onPlayerInput.dispatch(e)}),this.grid.position.set(e+Ot.Grid.bgGapX,i+Ot.Grid.bgGapY)},e.prototype.attachListeners=function(){var t=this;this.gc.onTutorialSecondStep.add(this.handleTutorialSecondStep,this),this.gc.onHotKeyPress.add(this.handleHotKeyPress,this),this.gc.onEnableExpandButtons.add(this.enableExpandButtons,this),this.gc.gameMode!==Wt.DailyChallenge&&this.game.input.onDown.add(this.removeIdleTimer,this),this.gc.onKeyPress.add(this.removeIdleTimer,this),Xt.i.onSettingsChange.add(function(){t.removeIdleTimer()},this)},e.prototype.addIdleTimer=function(){this.idleTimer=this.game.time.events.add(3e4,this.grid.showHintWhenIdle,this.grid),this.idleTimer.loop=!0},e.prototype.removeIdleTimer=function(){this.game.time.events.remove(this.idleTimer),this.grid.hideIdleAnimation(),Xt.i.getSettings().showHintsWhenIdle&&this.addIdleTimer()},e.prototype.getCurrentZoomFactor=function(){return this.currentZoomFactorIndex=this.currentZoomFactorIndex+1>=this.zoomFactors.length?0:this.currentZoomFactorIndex+1,this.zoomFactors[this.currentZoomFactorIndex]},e.prototype.calculateScale=function(){var t=new Phaser.Point(0,0),e=Gt.instance.grid,i=Ot.TileGrid;return t.set(i.maxNumberOfColumns/e.width,i.maxNumberOfRows/e.height),t},e.prototype.handleExpandButtonClick=function(){this.isExpanded=!0,Rt.i.playPopupShow(),this.gc.handleExpandButtonClick(this.isExpanded),this.expandButton.visible=!1,this.expandButton.enabled=!1,this.expandCloseButton.visible=!0,this.expandCloseButton.enabled=!0},e.prototype.initSignals=function(){this._onPlayerInput=new Phaser.Signal},e.prototype.handleTutorialSecondStep=function(t,e,i){var n=this,o={x:0,y:0};o.x=Xt.i.getSettings().rightHanded?this.x+this.width+20:this.x-580,o.y=this.y+this.height/2,setTimeout(function(){var i=n.background.getBounds();Se.i.initBlocker(t,e,i.width,i.height,""),Se.i.showPopup(o.x,o.y,0,0,28)},150)},e.prototype.handleCloseButtonClick=function(){this.isExpanded=!1,Rt.i.playPopupShow(),this.gc.handleCloseExpandButtonClick(this.isExpanded),this.expandButton.visible=!0,this.expandButton.enabled=!0,this.expandCloseButton.visible=!1,this.expandCloseButton.enabled=!1},e.prototype.handleHotKeyPress=function(t){t===be.ToggleGridSize&&(this.expandButton.enabled||this.expandCloseButton.enabled)&&(this.isExpanded?this.handleCloseButtonClick():this.handleExpandButtonClick())},e.prototype.enableExpandButtons=function(t){this.expandCloseButton.enabled=t,this.expandButton.enabled=t},e}(Phaser.Group),ze=function(){function t(t,e,i,n,o){this._clueId=t,this._wordId=e,this._format=i,this._number=n,this._text=o}return Object.defineProperty(t.prototype,"clueId",{get:function(){return this._clueId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"number",{get:function(){return this._number},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordId",{get:function(){return this._wordId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),t}(),Ie=function(){function t(){this._clues=[],this._acrossClues=[],this._downClues=[],this.map()}return Object.defineProperty(t.prototype,"clues",{get:function(){return this._clues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acrossClues",{get:function(){return this._acrossClues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downClues",{get:function(){return this._downClues},enumerable:!0,configurable:!0}),t.prototype.map=function(){var t=this;Gt.instance.downClues.forEach(function(e){var i=new ze(Number(e.word),Number(e.word),Number(e.format),Number(e.number),e._);t._downClues.push(i),t._clues.push(i)}),Gt.instance.acrossClues.forEach(function(e){var i=new ze(Number(e.word),Number(e.word),Number(e.format),Number(e.number),e._);t._acrossClues.push(i),t._clues.push(i)})},t}(),Fe=function(t){function e(e,i,n,o){var r=t.call(this,ee.game)||this;return r.clue=e,r.index=i,r._type=n,r._width=o,r.initialize(),r}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"number",{get:function(){return this.clue.number},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberText",{get:function(){return this._number},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clueText",{get:function(){return this.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{set:function(t){this._state=t,this.updateBackgroundState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"solved",{get:function(){return this._solved},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputEnabled",{get:function(){return this.background.inputEnabled},set:function(t){this.background.inputEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordId",{get:function(){return this.clue.wordId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.background.height},enumerable:!0,configurable:!0}),e.prototype.setSolved=function(){this._solved=!0,this.updateStyle("#929292",9605778)},e.prototype.initialize=function(){this.initSignals(),this.initBackground(),this.initText(),this.updateBackgroundHeight()},e.prototype.initSignals=function(){this._onClick=new Phaser.Signal},e.prototype.initBackground=function(){this.background=ee.sprite(0,0,this.index%2?bt.ImagesMain.Frames.ClueTransparent:bt.ImagesMain.Frames.ClueShade,this),this.background.width=this._width,this.background.inputEnabled=!0,this.background.events.onInputDown.add(this.handleClick,this)},e.prototype.initText=function(){this._number=ee.text(14,0,this.clue.number.toString(),{font:Ot.Fonts.font,fontSize:24,fill:"#ffffff"},this),this.text=ee.text(this._number.x+this._number.width+15,0,this.clue.text,{font:"bold "+Ot.Fonts.font,fontSize:24,fill:"#ffffff",wordWrap:!0,wordWrapWidth:260},this),this.initGraphics()},e.prototype.initGraphics=function(){this.graphics=this.game.add.graphics(0,0),this.graphics.beginFill(16777215),this.graphics.lineStyle(.7,16777215),this.graphics.moveTo(0,this._number.height/2-2),this.graphics.lineTo(this._number.width,this._number.height/2-2),this.graphics.endFill(),this.graphics.visible=!1,this._number.addChild(this.graphics)},e.prototype.updateBackgroundHeight=function(){this.background.height=Math.max(this.background.height,this.text.getBounds().height)+24,this.text.position.y=this.background.height/2-this.text.getBounds().height/2,this._number.position.y=this.background.height/2-this._number.getBounds().height/2},e.prototype.updateBackgroundState=function(){var t=this.background.height;switch(this._state){case Ee.None:this.updateBackgroundImage(this.index%2?bt.ImagesMain.Frames.ClueTransparent:bt.ImagesMain.Frames.ClueShade),this._solved?this.updateStyle("#929292",9605778):this.updateStyle("#ffffff",16777215);break;case Ee.Choosed:this.updateBackgroundImage(bt.ImagesMain.Frames.ClueChoosed),this.updateStyle("#000000",0);break;case Ee.Greyed:this.updateBackgroundImage(bt.ImagesMain.Frames.ClueGreyed)}this.background.height=t},e.prototype.updateBackgroundImage=function(t){this.background.frameName=t},e.prototype.handleClick=function(){this._onClick.dispatch(this.clue.wordId,this)},e.prototype.updateStyle=function(t,e){this._number.addColor(t,0),this.graphics.clear(),this.graphics.beginFill(e),this.graphics.lineStyle(.7,e),this.graphics.moveTo(0,this._number.height/2-2),this.graphics.lineTo(this._number.width,this._number.height/2-2),this.graphics.endFill(),this.text.addColor(t,0)},e}(Phaser.Group),Ee=function(t){return t[t.None=0]="None",t[t.Choosed=1]="Choosed",t[t.Greyed=2]="Greyed",t}({}),Te=function(t){return t[t.Down=0]="Down",t[t.Across=1]="Across",t}({}),Oe=function(t){function e(e,i,n){var o=t.call(this,ee.game,n)||this;return o._maskWidth=e,o._maskHeight=i,o._itemsHeight=0,o._items=[],o.initialize(),o}return Object(st.__extends)(e,t),e.prototype.onClueBoardHeightChange=function(t){this._maskHeight=t,this.scrollBar.bkgHeight=t-25,this.scrollBar.setHeight(t),this.scrollBar.scrollerHeight=t*(t/this._itemsHeight),this.scrollBar.updateSize(this._itemsHeight),this.scrollTo(this._scrollGroup.y)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this.scrollBar.disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{set:function(t){this.mask.dirty=t},enumerable:!0,configurable:!0}),e.prototype.postInitialize=function(){this.initScrollBars()},e.prototype.addItem=function(t){this._items.push(t),this._scrollGroup.addChild(t),this._itemsHeight+=t.height},e.prototype.center=function(t){for(var e,i=0,n=0;n<this._items.length;++n){if(this._items[n]===t){e=n;break}i+=this._items[n].height}this.scrollTo(-(i+this._items[e].height/2-this._maskHeight/2))},e.prototype.initialize=function(){this.initScrollGroup(),this.initInputHandlers()},e.prototype.initScrollGroup=function(){this._scrollGroup=this.game.add.group(this),this.mask=ee.mask(0,0,this._maskWidth,this._maskHeight,this)},e.prototype.initInputHandlers=function(){Be.instance.add(this.mask,this.handleScroll,this)},e.prototype.initScrollBars=function(){var t=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.ClueScrollBar,8,this._maskHeight-25,{top:4,bottom:4},null,this),e=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.ClueScrollBar,8,this._maskHeight*(this._maskHeight/this._itemsHeight),{top:4,bottom:4},null,this);this.scrollBar=new xe(this._maskHeight,this._itemsHeight,e,t,this),this.scrollBar.onDrag.add(this.handleScrollBarDrag,this),this.scrollBar.position.set(this._maskWidth-2*this.scrollBar.width,6),this.scrollBar.updateSize(this._itemsHeight)},e.prototype.scrollTo=function(t){this._scrollGroup.y=t,this._scrollGroup.y>0&&(this._scrollGroup.y=0),Math.abs(this._scrollGroup.y)>this._itemsHeight-this._maskHeight&&(this._scrollGroup.y=-(this._itemsHeight-this._maskHeight)),this.scrollBar.setProgress((this._maskHeight-this._scrollGroup.y)/this._itemsHeight)},e.prototype.handleScrollBarDrag=function(t){this.disabled||this.scrollTo(-(this._itemsHeight-this._maskHeight)*t)},e.prototype.handleScroll=function(t){this.disabled||this.scrollTo(this._scrollGroup.y+t)},e}(Phaser.Group),Ae=function(t){function e(e,i){var n=t.call(this,ee.game,i)||this;return n.gc=e,n.headerHeight=60,n.bkgLeftGap=5,n.cluesMapper=new Ie,n.clues=[],n.cluesByType={},n.handleResize=n.handleMobileLayout.bind(n),n.initialize(),n}return Object(st.__extends)(e,t),e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize)},e.prototype.initialize=function(){this.initBackground(),this.initClues(),this.attachListeners(),this.initHeader(),this.handleMobileLayout()},e.prototype.initBkgShadow=function(){this.bkgShadow=ee.nineSliceSprite(-this.bkgLeftGap+this.background.x+this.background.width/2,-this.bkgLeftGap+this.background.y+this.background.height/2,bt.ImagesMain.Frames.ClueShadow,this.background.width+10,this.background.height+10,{top:40,bottom:40,left:40,right:40},null,this,new Phaser.Point(.5,.5)),this.setChildIndex(this.bkgShadow,0),this.game.device.desktop||(this.prevButton=ee.button(Ot.Buttons.PrevButton,this.jumpToPrevClue,this,this),this.prevButton.x=-70,this.prevButton.y=125,this.nextButton=ee.button(Ot.Buttons.NextButton,this.jumpToNextClue,this,this),this.nextButton.x=675,this.nextButton.y=178,this.nextButton.angle=180,this.mobileClue=ee.text(0,0,"",{font:"bold "+Ot.Fonts.font,fontSize:40,fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:500},this),this.mobileClue.anchor.set(.5),this.bkgShadow.addChild(this.mobileClue))},e.prototype.initBackground=function(){this.background=ee.nineSliceSprite(Ot.Clues.backgroundMargins.left,Ot.Clues.backgroundMargins.top,bt.ImagesMain.Frames.ClueBackground,663,561,{top:60,bottom:28,left:20,right:31},null,this),this.backgroundWidth=this.background.width-21,this.initBkgShadow(),this.devider=ee.nineSliceSprite(this.bkgLeftGap+this.backgroundWidth/2,this.headerHeight,bt.ImagesMain.Frames.CrosswordsPanelDivider,6,this.background.height-this.headerHeight-15,{top:15,bottom:24,left:14,right:26},null,this.background,new Phaser.Point(.5,0))},e.prototype.initHeader=function(){this.initAcrossHeader(),this.initDownHeader()},e.prototype.initAcrossHeader=function(){this.acrossHeaderGroup=this.game.add.group(this.background);var t=ee.sprite(0,13,bt.ImagesMain.Frames.ClueHeaderArrow,this.acrossHeaderGroup,new Phaser.Point(0,.5),new Phaser.Point(1.6,1.6));t.angle=-90;var e=Ut.i.getString("across","across");ee.text(t.width+this.bkgLeftGap,0,e,{font:"SegoeUI",fill:"#e9d2bb",fontSize:30},this.acrossHeaderGroup,new Phaser.Point(0,.5)),this.acrossHeaderGroup.position.set(this.backgroundWidth/4-this.acrossHeaderGroup.getBounds().width/2,33)},e.prototype.initDownHeader=function(){this.downHeaderGroup=this.game.add.group(this.background);var t=ee.sprite(0,0,bt.ImagesMain.Frames.ClueHeaderArrow,this.downHeaderGroup,new Phaser.Point(0,.5),new Phaser.Point(1.6,1.4)),e=Ut.i.getString("down","down");ee.text(t.width+this.bkgLeftGap,0,e,{font:"SegoeUI",fill:"#e9d2bb",fontSize:30},this.downHeaderGroup,new Phaser.Point(0,.5));var i=this.backgroundWidth-this.backgroundWidth/4-this.downHeaderGroup.getBounds().width<this.backgroundWidth/2?this.backgroundWidth-this.backgroundWidth/6-this.downHeaderGroup.getBounds().width:this.backgroundWidth-this.backgroundWidth/4-this.downHeaderGroup.getBounds().width;this.downHeaderGroup.position.set(i,33),ee.nineSliceSprite(this.bkgLeftGap+this.backgroundWidth/2,33,bt.ImagesMain.Frames.CrosswordsPanelDividerHeader,3,44,{top:15,bottom:24,left:14,right:26},null,this.background,new Phaser.Point(.5,.5))},e.prototype.initClues=function(){this.gc.gameEndData.setWordsCount(this.cluesMapper.downClues.length+this.cluesMapper.acrossClues.length),this.downClues=new Oe(this.backgroundWidth/2,475,this.background),this.acrossClues=new Oe(this.backgroundWidth/2,475,this.background),this.acrossClues.position.set(this.bkgLeftGap+this.devider.width/2,this.headerHeight),this.downClues.position.set(this.bkgLeftGap+this.devider.width/2+this.backgroundWidth/2,this.headerHeight),this.clues=this.clues.concat(this.initClueMembers(this.cluesMapper.downClues,this.downClues,Te.Down)),this.clues=this.clues.concat(this.initClueMembers(this.cluesMapper.acrossClues,this.acrossClues,Te.Across)),this.cluesByType[Te.Down]=this.downClues.items,this.cluesByType[Te.Across]=this.acrossClues.items},e.prototype.initClueMembers=function(t,e,i){for(var n=this,o=[],r=0,s=0,a=void 0;s<t.length;s++){var l=new Fe(t[s],s,i,this.backgroundWidth/2-5);l.onClick.add(function(t,e){var i=[n.downClues.mask.getBounds(),n.acrossClues.mask.getBounds()];e&&!i.some(function(t){return t.contains(n.game.input.activePointer.x,n.game.input.activePointer.y)})||n.handleClueClick(t,e)},this),r+=a?a.height:0,a=l,l.y=r,e.addItem(l),o.push(l)}return e.postInitialize(),o},e.prototype.attachListeners=function(){this.gc.onWordSelect.add(this.handleWordSelect,this),this.gc.onKeyPress.add(this.handleKeyPress,this),this.gc.onWordCheck.add(this.handleWordCheck,this),this.gc.onNextAcrossWordSelect.add(this.handleNextAcrossWordSelect,this),this.gc.onPrevAcrossWordSelect.add(this.handlePrevAcrossWordSelect,this),this.gc.onTutorialThirdStep.addOnce(this.handleTutorialThirdStep,this),this.gc.onTutorialForthStep.addOnce(this.handleTutorialForthStep,this),this.gc.onTutorialFinish.addOnce(this.handleTutorialFinish,this),this.gc.jumpToNextClue.add(this.handleJumpToNextClue,this),this.gc.onClueBoardHeightChange.add(this.handleClueBoardHeightChange,this),this.gc.onHotKeyPress.add(this.handleHotKeyPress,this),this.gc.onCluesUpdate.add(this.handleClueUpdate,this),window.addEventListener("resize",this.handleResize)},e.prototype.handleJumpToNextClue=function(){this.jumpToNextClue()},e.prototype.adjustToCenter=function(t){this.centerGreyed(),t===ve.Board&&this.centerSelected()},e.prototype.centerSelected=function(){(this.selectedClue.type===Te.Across?this.acrossClues:this.downClues).center(this.selectedClue)},e.prototype.centerGreyed=function(){(this.greyedClue.type===Te.Down?this.downClues:this.acrossClues).center(this.greyedClue)},e.prototype.jumpToNextClue=function(){var t,e,i,n=this.downClues.items,o=this.acrossClues.items,r=this.selectedClue.type===Te.Across?o:n;(t=r.indexOf(this.selectedClue)+1)>r.length-1&&(i=(this.selectedClue.type===Te.Across?n:o)[0]),this.handleClueClick((e=i||r[t]).wordId,e),this.centerSelected()},e.prototype.jumpToFirstAcrossClue=function(){var t=this.acrossClues.items;this.handleClueClick(t[0].wordId,t[0]),this.centerSelected()},e.prototype.jumpToFirstDownClue=function(){var t=this.downClues.items;this.handleClueClick(t[0].wordId,t[0]),this.centerSelected()},e.prototype.jumpToLastDownClue=function(){var t=this.downClues.items;this.handleClueClick(t[t.length-1].wordId,t[t.length-1]),this.centerSelected()},e.prototype.jumpToPrevClue=function(){var t,e,i,n=this.downClues.items,o=this.acrossClues.items,r=this.selectedClue.type===Te.Across?o:n;(t=r.indexOf(this.selectedClue)-1)<0&&(i=this.selectedClue.type===Te.Across?n[n.length-1]:o[o.length-1]),this.handleClueClick((e=i||r[t]).wordId,e),this.centerSelected()},e.prototype.handleClueClick=function(t,e){if(!this.disableInput||t===this.acrossClues.items[0].wordId){this.tutorial&&4===Se.i.step&&Se.i.removeArrows(),this.downClues.dirty=!0,this.acrossClues.dirty=!0;var i=-1!==this.acrossClues.items.lastIndexOf(e);this.gc.clueClick(t,i,!!e)}},e.prototype.handleWordSelect=function(t,e){this.selectedClue&&(this.selectedClue.state=Ee.None),this.greyedClue&&(this.greyedClue.state=Ee.None);var i=t.filter(function(t){return t.selected})[0],n=t.filter(function(t){return!t.selected})[0];i&&(this.selectedClue=this.clues.filter(function(t){return t.wordId===i.id})[0],this.selectedClue.state=Ee.Choosed),n&&(this.greyedClue=this.clues.filter(function(t){return t.wordId===n.id})[0],this.greyedClue.state=Ee.Greyed),this.mobileClue&&this.selectedClue&&(this.mobileClue.text=this.selectedClue.clueText.text),this.adjustToCenter(e)},e.prototype.handleWordCheck=function(t){if(null!=t){if(t.solved){var e=this.clues.filter(function(e){return t.id===e.wordId})[0];e.solved||(this.gc.gameEndData.wordFound(),e.setSolved())}}else this.clues.forEach(function(t){return t.setSolved()})},e.prototype.handleNextAcrossWordSelect=function(){this.jumpToNextClue()},e.prototype.handlePrevAcrossWordSelect=function(){this.jumpToPrevClue()},e.prototype.handleTutorialThirdStep=function(t,e,i){var n=this;this.tutorial=!0;var o=this.background.getBounds(),r={x:0,y:0};r.x=Xt.i.getSettings().rightHanded?this.x-580:this.x+this.width+20,r.y=this.y+this.height/2,Se.i.initBlocker(t,e,o.width+30,o.height+90,""),Se.i.showPopup(r.x,r.y,8,i,28),Se.i.stepDoneSignal.addOnce(function(){n.game.input.enabled=!0,n.gc.handleTutorialForthStep()})},e.prototype.handleTutorialForthStep=function(){this.disableInput=!0,this.acrossClues.disabled=!0,this.downClues.disabled=!0;var t=this.acrossClues.items[0].getBounds();Se.i.showArrow(t.x,t.y+90,3,4,"clue-board")},e.prototype.handleTutorialFinish=function(){this.tutorial=!1,this.disableInput=!1,this.acrossClues.disabled=!1,this.downClues.disabled=!1},e.prototype.handleKeyPress=function(t){if(!this.gc.solveButtonClicked&&!this.gc.checkViewIsVisible){var e=Xt.i.getSettings().crossword;t===Phaser.KeyCode.ENTER&&this.jumpToNextClue(),e.menuOptionCrosswordArrowBrowseClueList&&(t===Phaser.KeyCode.UP?this.jumpToPrevClue():t===Phaser.KeyCode.DOWN&&this.jumpToNextClue())}},e.prototype.handleClueBoardHeightChange=function(t){var e=t-86;this.background.resize(this.background.width,t),this.bkgShadow.resize(this.bkgShadow.width,this.background.height+10),this.bkgShadow.y=-this.bkgLeftGap+this.background.y+this.background.height/2,this.downClues.mask.height=e,this.acrossClues.mask.height=e,this.devider.height=t-this.headerHeight-15,this.downClues.onClueBoardHeightChange(e),this.acrossClues.onClueBoardHeightChange(e),this.handleMobileLayout()},e.prototype.handleHotKeyPress=function(t){switch(t){case be.SelectFirstAcrossClue:this.jumpToFirstAcrossClue();break;case be.SelectFirstDownClue:this.jumpToFirstDownClue();break;case be.SelectLastDownClue:this.jumpToLastDownClue();break;case be.SelectTopPriorityClue:this.jumpToFirstAcrossClue()}},e.prototype.handleClueUpdate=function(t,e){this.clues.filter(function(e){return e.wordId===t})[0].numberText.children[0].visible=e},e.prototype.handleMobileLayout=function(){if(this.game&&!this.game.device.desktop){var t=window.innerWidth;window.innerHeight>t?(this.background.visible=!1,this.devider.visible=!1,this.bkgShadow.width=550,this.bkgShadow.height=100,this.bkgShadow.x=300,this.bkgShadow.y=150,this.prevButton.visible=!0,this.nextButton.visible=!0,this.prevButton.scale.set(1.5),this.nextButton.scale.set(1.5)):(this.background.visible=!0,this.devider.visible=!0,this.bkgShadow.width=550,this.bkgShadow.height=100,this.bkgShadow.x=300,this.bkgShadow.y=150,this.prevButton.visible=!1,this.nextButton.visible=!1)}},e}(Phaser.Group),Le=function(t){function e(e,i){var n=t.call(this,ee.game,0,0,bt.ImagesMain.getName(),e.textureKey)||this;return n.keyData=e,i.addChild(n),n.initialize(),n}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"onClick",{get:function(){return this._onClick},enumerable:!0,configurable:!0}),e.prototype.updateBtn=function(t){this.keyText.text=t},e.prototype.initialize=function(){this.initSignals(),this.initInput(),this.initKeyText()},e.prototype.initSignals=function(){this._onClick=new Phaser.Signal},e.prototype.initInput=function(){var t=this;this.inputEnabled=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(function(){return t.alpha=.5}),this.events.onInputUp.add(function(){t.alpha=1,t.handleClick()},this)},e.prototype.initKeyText=function(){this.keyData.keyIcon?(ee.sprite(4,2,this.keyData.keyIcon,this),this.keyText=ee.text(this.width/2-1,this.height/2+8,this.keyData.text,{fill:Ot.Fonts.Keyboard.Key.color,font:Ot.Fonts.Keyboard.Key.font,fontSize:Ot.Fonts.Keyboard.Key.size-4},this,new Phaser.Point(.5,.5)),this.tint=9090001):this.keyText=ee.text(this.width/2-1,this.height/2+2,this.keyData.text,{fill:Ot.Fonts.Keyboard.Key.color,font:Ot.Fonts.Keyboard.Key.font,fontSize:Ot.Fonts.Keyboard.Key.size},this,new Phaser.Point(.5,.5))},e.prototype.handleClick=function(){this._onClick.dispatch(this.keyData.keyCode)},e}(Phaser.Sprite),De=function(t){return t[t.QY=0]="QY",t[t.QZ=1]="QZ",t[t.AY=2]="AY",t}({}),Ne=function(t){function e(e,i){var n=t.call(this,ee.game,i)||this;return n.gc=e,n.initialize(),n}return Object(st.__extends)(e,t),e.prototype.show=function(){this.visible=!0,this.scale.set(1,0),this.game.add.tween(this.scale).to({y:1},100,null,!0)},Object.defineProperty(e.prototype,"onKeyClick",{get:function(){return this._onKeyClick},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.keys=[],this.initSignals(),this.initBackground(),this.layoutChangeBtn(),this.initButtons(),this.initCloseButton(),this.adjustBackgroundPosition()},e.prototype.initSignals=function(){this._onKeyClick=new Phaser.Signal},e.prototype.initBackground=function(){this.background=ee.nineSliceSprite(5,0,bt.ImagesMain.Frames.KeyboardBackground,695,this.game.device.desktop?250:200,{top:20,bottom:27,left:16,right:28},null,this),this.background.inputEnabled=!0},e.prototype.layoutChangeBtn=function(){var t={textureKey:bt.ImagesMain.Frames.ButtonsLetter,keyIcon:bt.ImagesMain.Frames.KeyboardIcon,text:"QY"};this.keyboardLayout=De.QY,this.changeLayoutBtn=new Le(t,this),this.changeLayoutBtn.position.set(e.ChangeLayoutBtnX,this.game.device.desktop?e.ChangeLayoutBtnY:e.MobileChangeLayoutBtnY),this.changeLayoutBtn.onClick.add(this.changeLayout,this)},e.prototype.initButtons=function(t){var e=this;t?t.forEach(function(i,n){var o=null;i.keys.forEach(function(r,s){var a=new Le(r,e),l=e.keyboardLayout===De.AY&&n===t.length-1&&s===i.keys.length-1&&o?o.x+o.width+i.keyMargin+67:o?o.x+o.width+i.keyMargin:i.leftMargin,h=i.topMargin;e.game.device.desktop||(h=i.mobileTopMargin,isNaN(r.text)&&"-"!==r.text||(a.visible=!1),8==r.keyCode&&(0==e.keyboardLayout&&(a.visible=!0,h=75,l=620),1==e.keyboardLayout&&(a.visible=!0,h=75,l=620),2==e.keyboardLayout&&(a.visible=!0,h=126,l=488))),a.position.set(l,h),a.onClick.add(e.handleKeyPress,e),o=a,e.keys.push(a)})}):Ot.Keyboard.QY.rowData.forEach(function(t){var i=null;t.keys.forEach(function(n){var o=new Le(n,e),r=i?i.x+i.width+t.keyMargin:t.leftMargin,s=t.topMargin;e.game.device.desktop||(s=t.mobileTopMargin,isNaN(n.text)&&"-"!==n.text||(o.visible=!1),8==n.keyCode&&(o.visible=!0,s=75,r=620)),o.position.set(r,s),o.onClick.add(e.handleKeyPress,e),i=o,e.keys.push(o)})})},e.prototype.initCloseButton=function(){this.closeButton=ee.sprite(this.background.width-18,10,bt.ImagesMain.Frames.ButtonsKeyboardBtn,this.background,new Phaser.Point(1,0)),this.closeButton.inputEnabled=!0,this.closeButton.input.useHandCursor=!0,this.closeButton.events.onInputDown.add(this.handleClose,this),this.game.device.desktop||(this.closeButton.visible=!1)},e.prototype.adjustBackgroundPosition=function(){this.pivot.set(0,this.background.height/2)},e.prototype.handleClose=function(){this.gc.confirmPopupIsVisible||(Rt.i.playPopupShow(),this.hide())},e.prototype.hide=function(){var t=this,e=this.game.add.tween(this.scale);e.to({y:0},100,null,!0),e.onComplete.add(function(){t.visible=!1,t.gc.handleKeyboardClose()},this)},e.prototype.handleKeyPress=function(t){this.gc.confirmPopupIsVisible||this._onKeyClick.dispatch(t)},e.prototype.changeLayout=function(){switch(this.keyboardLayout){case De.QY:this.changeLayoutBtn.updateBtn("QZ"),this.keys.forEach(function(t){return t.destroy()}),this.keys=[],this.keyboardLayout=De.QZ,this.initButtons(Ot.Keyboard.QZ.rowData);break;case De.QZ:this.changeLayoutBtn.updateBtn("AY"),this.keys.forEach(function(t){return t.destroy()}),this.keys=[],this.keyboardLayout=De.AY,this.initButtons(Ot.Keyboard.AY.rowData);break;case De.AY:this.changeLayoutBtn.updateBtn("QY"),this.keys.forEach(function(t){return t.destroy()}),this.keys=[],this.keyboardLayout=De.QY,this.initButtons(Ot.Keyboard.QY.rowData)}},e.ChangeLayoutBtnX=17,e.ChangeLayoutBtnY=179,e.MobileChangeLayoutBtnY=124,e}(Phaser.Group),Ke=function(t){function e(e,i,n){var o=t.call(this,ee.game,e,i,bt.ImagesMain.getName(),Gt.instance.resetDone?bt.ImagesMain.Frames.StarBkgReset:bt.ImagesMain.Frames.StarBkg)||this;return o.maskStartAngle=Zt.degToRad(5),n.addChild(o),o.anchor.set(.5,.5),o.initialize(),o.progress=.7,o}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"progress",{set:function(t){this.updateMask(t),this.circle.visible=!!t,1===t&&(this.foreground.visible=!0,this.circle.mask=null)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.initCircle(),this.initForeground()},e.prototype.initCircle=function(){this.circle=ee.sprite(0,0,bt.ImagesMain.Frames.StarCircle,this,new Phaser.Point(.5,.5)),this.circleMask=this.game.add.graphics(0,0),this.circleMask.angle-=90,this.circle.mask=this.circleMask,this.circle.addChild(this.circleMask)},e.prototype.updateMask=function(t){this.circleMask.clear(),this.circleMask.beginFill(0,0),this.circleMask.arc(0,0,2+this.circle.width/2,Zt.degToRad(360*t)+this.maskStartAngle,this.maskStartAngle,!0),this.circleMask.endFill()},e.prototype.initForeground=function(){this.foreground=ee.sprite(0,0,bt.ImagesMain.Frames.StarFg,this,new Phaser.Point(.5,.5)),this.foreground.visible=!1},e}(Phaser.Sprite),He=function(t){function e(e,i,n,o){var r=t.call(this,ee.game,o)||this;return r.threshold=n,r.position.set(e,i),r.initialize(),r}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"onFill",{get:function(){return this._onFill},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filled",{get:function(){return this._filled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starWidth",{get:function(){return this.star.width},enumerable:!0,configurable:!0}),e.prototype.getSolvedInfo=function(){return this.solvedInfo},e.prototype.checkForSolved=function(){return this.threshold===this.solvedInfoValue},e.prototype.updateSolvedCount=function(t,e,i){if(!this._filled){var n=Math.min(t,this.threshold);re.i.startStarProgressAnimation(this.star,this.solvedInfoValue/this.threshold,(n-this.solvedInfoValue)/this.threshold),this.solvedInfoValue=n,this.updateSolvedText(n,e,i)}},e.prototype.getObjectiveData=function(){return{title:this.label.text,max:this.threshold,done:this.solvedInfoValue}},e.prototype.initialize=function(){this.solvedInfoValue=0,this.initSignals(),this.initStar(),this.initSolvedInfo()},e.prototype.initSignals=function(){this._onFill=new Phaser.Signal},e.prototype.initStar=function(){this.star=new Ke(0,0,this),this.star.progress=0},e.prototype.initSolvedInfo=function(){var t=Ut.i.getString("starLabel","Clues Solved");this.label=ee.text(50,-30,t,{font:Ot.Fonts.font,fontSize:21.6,fill:"#d8bc9c"},this),this.label.wordWrap=!0,this.label.wordWrapWidth=150,this.label.lineSpacing=-8,Zt.shrinkFontIfOverlap(this.label,this.label.fontSize,150),this.solvedInfo=ee.text(50,this.label.y+this.label.height-8,"",{font:Ot.Fonts.font,fontSize:25.6,fill:"#fffc00"},this),this.updateSolvedText(0,!1)},e.prototype.updateSolvedText=function(t,e,i){t===this.threshold&&(this._filled=!0,this._onFill.dispatch(e,this,i)),this.solvedInfo.text=t+" / "+this.threshold,this.solvedInfo.clearColors(),this.solvedInfo.addColor("#fffc00",0),this.solvedInfo.addColor("#d8bc9c",t.toString().length)},e}(Phaser.Group),je=function(t){function e(e,i,n,o,r){var s=t.call(this,ee.game,o)||this;return s.gc=e,s.puzzleNameLabel=r,s.thresholds=[],s.isBoardExpanded=!1,s.tweens=[],s.handleResize=s.handleMobileLayout.bind(s),s.position.set(i,n),s.gc.messageService.nextPuzzleUnlocked=!1,s.initialize(),s}return Object(st.__extends)(e,t),e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize),t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"starEarned",{get:function(){return this._starEarned},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starCount",{get:function(){return this._starCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onNextButtonClick",{get:function(){return this._onNextButtonClick},enumerable:!0,configurable:!0}),e.prototype.getObjectivesResults=function(){return this.thresholds.map(function(t){return t.getObjectiveData()})},e.prototype.checkForUnlockButton=function(){this.thresholds.some(function(t){return t.checkForSolved()})&&(this.unlockNextButton(),this._starCount=this.thresholds.filter(function(t){return t.checkForSolved()}).length)},e.prototype.unlockNextButton=function(){var t=this;this.gc.messageService.nextPuzzleUnlocked=!0,this.lockedButton.visible=!1,this.nextPuzzleButton.visible=!0,this.nextPuzzleButton.inputEnabled=!0,this.nextPuzzleButton.input.useHandCursor=!0,this._nextUnlocked=!0,this.nextPuzzleButton.events.onInputUp.add(function(){t.nextPuzzleButton.input.checkPointerOver(t.game.input.activePointer)&&t.handleNextPuzzleButtonClick()},this),this.nextPuzzleButton.events.onInputOver.add(function(){return t.inputOverNextButton.visible=!0},this),this.nextPuzzleButton.events.onInputOut.add(function(){return t.inputOverNextButton.visible=!1},this),this.handleMobileLayout()},e.prototype.getLastStarsProgress=function(){var t,e;if(this.thresholds.every(function(t){return t.filled}))return null;if(this._thresholdCompleted){var i=this.thresholds.filter(function(t){return t.filled});t=i[i.length-1].worldPosition.x,e=i[i.length-1].worldPosition.y}else for(var n=0;n<3;++n)if(this.lastStarsFound[n]){t=this.thresholds[n].worldPosition.x,e=this.thresholds[n].worldPosition.y,this.lastStarFoundIndex=n;break}return new PIXI.Point(t,e)},e.prototype.initialize=function(){this.lastStarsFound=[!1,!1,!1],this.gc.starCount=0,this._starCount=0,this.enablePuzzleExpand=!0,this.initSignals(),this.initBackground(),this.initThresholds(),this.initButtons(),this.initLockedButton(),this.initNextPuzzleButton(),this.attachListeners(),Gt.instance.isSundayPuzzle()&&(this._nextUnlocked=!0,this.unlockNextButton()),this.game.device.desktop?this.initHeader():this.handleMobileLayout()},e.prototype.initSignals=function(){this._onNextButtonClick=new Phaser.Signal},e.prototype.nextPuzzleButtonBounds=function(){var t=Xt.i.isRightHanded();return{x:this.isBoardExpanded?t?this.lockedButton.x+this.lockedButton.width+600:this.lockedButton.x+25:this.lockedButton.x+this.lockedButton.width+50,y:this.lockedButton.y-this.lockedButton.height/3,width:this.lockedButton.width+20,height:this.lockedButton.height+20}},e.prototype.initBackground=function(){this.game.device.desktop?(this.bkgLeft=ee.nineSliceSprite(0,30,bt.ImagesMain.Frames.BkgEngravedStarpanelLeft,250,125,{top:55,bottom:65,left:55,right:10},null,this),this.bkgCenter=ee.nineSliceSprite(this.bkgLeft.x+this.bkgLeft.width,this.bkgLeft.y-35,bt.ImagesMain.Frames.BkgEngravedStarpanelCenter,330,159,{top:30,bottom:14,left:50,right:50},null,this),this.bkgRight=ee.nineSliceSprite(this.bkgCenter.x+this.bkgCenter.width,this.bkgLeft.y,bt.ImagesMain.Frames.BkgEngravedStarpanelRight,400,125,{top:55,bottom:45,left:10,right:55},null,this),this.puzzleInfoBkg=ee.nineSliceSprite(this.bkgLeft.x+3,this.bkgLeft.y,bt.ImagesMain.Frames.BkgPuzzleInfoBkg,805,122,{top:58,bottom:10,left:58,right:58},null,this)):this.puzzleInfoBkg=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.BkgPuzzleInfoBkg,725,82,{top:0,bottom:10,left:58,right:58},null,this)},e.prototype.initHeader=function(){this.headerBkg=ee.nineSliceSprite(254,-1,bt.ImagesMain.Frames.PuzzleInfoHeader,325,43,{top:4,bottom:6,left:28,right:31},null,this),this.puzzleName=ee.text(this.headerBkg.width/2,this.headerBkg.height/2+4,this.puzzleNameLabel,{font:Ot.Fonts.font,fontSize:27,fill:"#e6d1b7"},this.headerBkg,new Phaser.Point(.5,.5))},e.prototype.initThresholds=function(){var t=this.game.add.group(this);this.thresholdsGroup=this.game.add.group(t);for(var e=Gt.instance.cluesCount,i=0;i<3;i++){var n=Math.floor(e/(4/(2*i||1))),o=new He(70+260*i,90,n,this.thresholdsGroup);o.onFill.add(this.handleThresholdCompleted,this),this.thresholds.push(o)}this.thresholdsSprite=this.game.add.sprite(0,0,null,null,t),this.thresholdsSprite.visible=!1},e.prototype.initLockedButton=function(){this.lockedButton=ee.sprite(885,100,bt.ImagesMain.Frames.NewPuzzle,this,new Phaser.Point(.5,.5),null),this.lockedButton.inputEnabled=!0,this.lockedButton.events.onInputDown.add(function(){return Rt.i.playNextPuzzleBlocked()},this),ie.i.addElement(this.lockedButton,Ut.i.getString("unlockTooltip","tooltip"),Vt.Click)},e.prototype.initNextPuzzleButton=function(){var t=Gt.instance.isSundayPuzzle()?Ut.i.getString("endPuzzle","End\nPuzzle"):Ut.i.getStringsFromMain("nextPuzzle","Next\nPuzzle");this.nextPuzzleButton=ee.sprite(800,48,bt.ImagesMain.Frames.NextButton,this),this.inputOverNextButton=ee.sprite(805,48,bt.ImagesMain.Frames.NextBtnOnHover,this),this.inputOverNextButton.scale.set(.8,.8),this.nextPuzzleButtonText=ee.text(this.nextPuzzleButton.width/2-10,this.nextPuzzleButton.height/2,t,{align:"center",fontSize:24,fill:"#BFE2FF"},this.nextPuzzleButton,new Phaser.Point(.5,.5)),this.nextPuzzleButton.visible=!1,this.inputOverNextButton.visible=!1},e.prototype.initButtons=function(){this.rightButton=this.game.add.button(0,0,bt.ImagesMain.getName(),this.handleRightButtonClick,this,bt.ImagesMain.Frames.PuzzleInfoHover,bt.ImagesMain.Frames.PuzzleInfoUp,bt.ImagesMain.Frames.PuzzleInfoClicked),this.rightButton.scale.set(.5,.5),this.leftButton=this.game.add.button(0,0,bt.ImagesMain.getName(),this.handleLeftClick,this,bt.ImagesMain.Frames.PuzzleInfoHover,bt.ImagesMain.Frames.PuzzleInfoUp,bt.ImagesMain.Frames.PuzzleInfoClicked),this.leftButton.scale.set(-.5,.5),this.rightButton.inputEnabled=!1,this.rightButton.visible=!1,this.leftButton.inputEnabled=!1,this.leftButton.visible=!1,this.addChild(this.leftButton),this.addChild(this.rightButton)},e.prototype.attachListeners=function(){this.gc.onTutorialEighthStep.add(this.handleTutorialEighthStep,this),this.gc.onTutorialFirstStep.add(this.handleTutorialFirstStep,this),this.gc.onWordCheck.add(this.handleWordCheck,this),this.gc.onExpandButtonClick.add(this.handleExpandButtonClick,this),this.gc.onCloseExpandButtonClick.add(this.handleCloseExpandButtonClick,this),this.gc.onHotKeyPress.add(this.handleHotKeyPress,this),this.gc.onEnableExpandButtons.add(this.handleEnableExpandButton,this),Xt.i.onSettingsChange.add(this.handleSettingsChange,this),re.i.buttonUnlocked.add(this.unlockNextButton,this),re.i.allThresholdsFilled.addOnce(this.handleNextPuzzleButtonClick,this),this.isBoardExpanded&&re.i.showNotSolvedClues.add(this.showNotSolvedClues,this),re.i.sparkleAnimationComplete.add(this.handleThresholdTextTween,this),window.addEventListener("resize",this.handleResize)},e.prototype.handleSettingsChange=function(){this.checkPositions()},e.prototype.handleThresholdCompleted=function(t,e,i){var n=this;if(this.gc.messageService.nextPuzzleUnlocked=!0,!(!this._nextUnlocked&&t||t)){this.gc.showLockBtnTutorial&&this.gc.handleTutorialEighthStep(),this._starEarned=!0;var o=this.position.x+this.width/2-70,r=this.position.y+this.height/2+10;if(i)if(this.isBoardExpanded)this.updateThresholds(e,o,r,!0);else{if(this.showStarsFlyingAnimation)return;this.showStarsFlyingAnimation=!0,this.gc.starCount=this._starCount=3,this.thresholds.forEach(function(t,e){n.startCurrentAnimation(t,!0)})}else{var s=3===this.thresholds.filter(function(t){return t.filled}).length;this.updateThresholds(e,o,r,s)}}},e.prototype.startExpandButtonTimer=function(){var t=this;this.gc.enableExpandButtons(!1),this.expandButtonTimer&&(this.expandButtonTimer.pendingDelete=!0),this.expandButtonTimer=this.game.time.events.add(1e3,function(){t.gc.enableExpandButtons(!0)})},e.prototype.startCurrentAnimation=function(t,e,i){var n=this;this.startExpandButtonTimer();var o=this.startThresholdAnimation(t,e,i);this.currentAnimationCompleteSignal=o,o.addOnce(function(){n.currentAnimationCompleteSignal=null,n._starEarned=!1,n._thresholdCompleted=!1})},e.prototype.handleNextPuzzleButtonClick=function(){Rt.i.playPopupShow(),this._onNextButtonClick.dispatch(this.getObjectivesResults())},e.prototype.handleTutorialEighthStep=function(){var t=this;this.gc.showLockBtnTutorial=!1,Se.i.showLockBtnTutorial=!0,this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"});var e=Xt.i.isRightHanded(),i=this.isBoardExpanded?e?this.lockedButton.x+this.lockedButton.width+600:this.lockedButton.x+25:this.lockedButton.x+this.lockedButton.width+50,n=this.lockedButton.y-this.lockedButton.height/3,o=this.lockedButton.width+20,r=this.lockedButton.height+20;Se.i.puzzleButtonPositions=this.nextPuzzleButtonBounds();var s=this.isBoardExpanded?e?this.x-150:this.x+100:this.x;setTimeout(function(){t.getBounds(),Se.i.initBlocker(i,n,o,r,""),Se.i.showPopup(s,t.y+t.height+15,0,0,50)},150)},e.prototype.handleTutorialFirstStep=function(t,e,i){var n=this;setTimeout(function(){var i=n.getBounds();Se.i.initBlocker(t,e-10,i.width+30,i.height+30,""),Se.i.showPopup(t+150,n.y+n.height+60,2,0,50)},150)},e.prototype.handleWordCheck=function(t,e,i){var n=this,o=this.gc.cluesSolved;this.isBoardExpanded?this.isBoardExpanded&&(this.showNotSolvedClues(),this.thresholds.forEach(function(t,r){t.updateSolvedCount(o,e,i),n.lastStarsFound[r]=!t.filled})):this.thresholds.forEach(function(t,r){t.updateSolvedCount(o,e,i),n.lastStarsFound[r]=!t.filled})},e.prototype.handleExpandButtonClick=function(){this.expandPuzzleInfo()},e.prototype.expandPuzzleInfo=function(){this.isBoardExpanded=!0,this.rightButton.visible=!0,this.leftButton.visible=!0,this.thresholdsSprite.visible=!0,this.showNotSolvedClues(),this.checkButtonsPositions(),this.bkgLeftExpanded(),this.bkgCenterExpanded(),this.bkgRightExpanded(),this.puzzleInfoBkgExpanded(),this.headerBkgExpanded(),this.buttonsExpanded(),this.checkThresholdsPosition()},e.prototype.handleCloseExpandButtonClick=function(){this.isBoardExpanded=!1,this.rightButton.visible=!1,this.leftButton.visible=!1,this.thresholdsSprite.visible=!1,this.thresholdsGroup.mask=null,this.setBkgLeftDefaultPosition(),this.setBkgCenterDefaultPosition(),this.setBkgRightDefaultPosition(),this.setHeaderBkgDefaultPosition(),this.setPuzzleInfoBkgDefaultPosition(),this.setButtonsDefaultPositions(),this.thresholds.forEach(function(t,e){return t.x=70+260*e}),this.thresholdsGroup.x=0},e.prototype.showNotSolvedClues=function(){if(this.enablePuzzleExpand){var t=this.thresholds.filter(function(t){return t.filled}),e=Math.max(250*-t.length,-500),i=this.game.add.tween(this.thresholdsGroup);i.to({x:e},100,null,!0),i.onComplete.add(this.checkThresholdsGroupAndSpritePosition,this),this.checkThresholdsGroupAndSpritePosition(),this.tweens.push(i)}},e.prototype.checkButtonsPositions=function(){this.rightButton.position.set(300,70),this.leftButton.position.set(55,70)},e.prototype.bkgLeftExpanded=function(){this.bkgLeft.resize(65,this.bkgLeft.height)},e.prototype.bkgCenterExpanded=function(){this.bkgCenter.resize(230,this.bkgCenter.height),this.bkgCenter.x=this.bkgLeft.x+this.bkgLeft.width},e.prototype.bkgRightExpanded=function(){this.bkgRight.resize(230,this.bkgRight.height),this.bkgRight.x=this.bkgCenter.x+this.bkgCenter.width},e.prototype.puzzleInfoBkgExpanded=function(){this.puzzleInfoBkg.resize(350,this.puzzleInfoBkg.height),this.puzzleInfoBkg.x=this.bkgLeft.x+5},e.prototype.headerBkgExpanded=function(){this.headerBkg.resize(225,this.headerBkg.height),this.headerBkg.x=this.bkgCenter.x+5,this.puzzleName.x=this.headerBkg.width/2,this.puzzleName.y=this.headerBkg.height/2+9,Zt.shrinkFontIfOverlap(this.puzzleName,27,200)},e.prototype.buttonsExpanded=function(){this.nextPuzzleButton.x=340,this.lockedButton.x=340+this.lockedButton.width/2},e.prototype.setBkgLeftDefaultPosition=function(){this.bkgLeft.x=0,this.bkgLeft.resize(250,this.bkgLeft.height)},e.prototype.setBkgRightDefaultPosition=function(){this.bkgRight.resize(400,this.bkgRight.height),this.bkgRight.x=this.bkgCenter.x+this.bkgCenter.width},e.prototype.setBkgCenterDefaultPosition=function(){this.bkgCenter.resize(330,this.bkgCenter.height),this.bkgCenter.x=this.bkgLeft.x+this.bkgLeft.width},e.prototype.setHeaderBkgDefaultPosition=function(){this.headerBkg.resize(325,this.headerBkg.height),this.headerBkg.x=254,this.puzzleName.x=this.headerBkg.width/2,this.puzzleName.y=this.headerBkg.height/2+9,this.puzzleName.fontSize=27,Zt.shrinkFontIfOverlap(this.puzzleName,27,295)},e.prototype.setPuzzleInfoBkgDefaultPosition=function(){this.puzzleInfoBkg.resize(805,this.puzzleInfoBkg.height),this.puzzleInfoBkg.x=this.bkgLeft.x+5},e.prototype.setButtonsDefaultPositions=function(){this.nextPuzzleButton.x=800,this.lockedButton.x=885},e.prototype.disableLeftButton=function(){this.leftButton.setFrames(bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive),this.leftButton.inputEnabled=!1},e.prototype.disableRightButton=function(){this.rightButton.setFrames(bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive,bt.ImagesMain.Frames.PuzzleInfoInactive),this.rightButton.inputEnabled=!1},e.prototype.enableLeftButton=function(){this.leftButton.setFrames(bt.ImagesMain.Frames.PuzzleInfoHover,bt.ImagesMain.Frames.PuzzleInfoUp,bt.ImagesMain.Frames.PuzzleInfoClicked,bt.ImagesMain.Frames.PuzzleInfoUp),this.leftButton.inputEnabled=!0},e.prototype.enableRightButton=function(){this.rightButton.setFrames(bt.ImagesMain.Frames.PuzzleInfoHover,bt.ImagesMain.Frames.PuzzleInfoUp,bt.ImagesMain.Frames.PuzzleInfoClicked,bt.ImagesMain.Frames.PuzzleInfoUp),this.rightButton.inputEnabled=!0},e.prototype.handleRightButtonClick=function(){Rt.i.playPopupShow(),this.thresholdsGroup.x<=-500?(this.disableRightButton(),this.enableLeftButton()):(this.moveThresholdsLeft(),this.enableLeftButton(),this.thresholdsGroup.x<=-250&&this.disableRightButton())},e.prototype.handleLeftClick=function(){Rt.i.playPopupShow(),this.thresholdsGroup.x>=0?(this.disableLeftButton(),this.enableRightButton()):(this.moveThresholdsRight(),this.enableRightButton(),this.thresholdsGroup.x>=-250&&this.disableLeftButton())},e.prototype.checkThresholdsPosition=function(){this.thresholds.forEach(function(t,e){return t.x=90+250*e}),this.thresholdsGroup.mask=ee.mask(this.thresholds[0].x-this.thresholds[0].starWidth/2,this.thresholds[0].y-this.thresholds[0].height/2,this.thresholds[0].width+10,this.thresholds[0].height,this),this.setThresholdsSpritePosition()},e.prototype.moveThresholdsLeft=function(){var t=this,e=this.game.add.tween(this.thresholdsGroup);e.to({x:this.thresholdsGroup.x-250},100,null,!0),e.onUpdateCallback(function(){t.thresholdsSprite.x=t.thresholdsGroup.x}),e.onComplete.add(this.moveThresholdsSpriteLeft,this),this.tweens.push(e)},e.prototype.moveThresholdsRight=function(){var t=this,e=this.game.add.tween(this.thresholdsGroup);e.to({x:this.thresholdsGroup.x+250},100,null,!0),e.onUpdateCallback(function(){t.thresholdsSprite.x=t.thresholdsGroup.x}),e.onComplete.add(this.moveThresholdsSpriteRight,this),this.tweens.push(e)},e.prototype.checkThresholdsGroupAndSpritePosition=function(){var t=this.thresholds.filter(function(t){return t.filled});this.checkThresholdsGroupPosition(),this.checkThresholdsSpritePosition(),this.filledThreshold=t[t.length-1]},e.prototype.checkThresholdsGroupPosition=function(){this.enablePuzzleExpand&&(this.thresholdsGroup.x>=0?(this.disableLeftButton(),this.enableRightButton()):this.thresholdsGroup.x<=-500?(this.disableRightButton(),this.enableLeftButton()):this.thresholdsGroup.x<0&&this.thresholdsGroup.x>-500&&(this.enableRightButton(),this.enableLeftButton()))},e.prototype.checkPositions=function(){this.isBoardExpanded&&(this.checkButtonsPositions(),this.bkgLeftExpanded(),this.bkgCenterExpanded(),this.bkgRightExpanded(),this.puzzleInfoBkgExpanded(),this.headerBkgExpanded(),this.buttonsExpanded(),this.checkThresholdsPosition())},e.prototype.handleDragUpdate=function(){this.thresholdsSprite.x<=0&&this.thresholdsSprite.x>=-500?(this.thresholdsGroup.x=this.thresholdsSprite.x,this.spritePrevPos=this.thresholdsSprite.x):this.thresholdsSprite.x>0?(this.thresholdsGroup.x=Math.min(this.thresholdsGroup.x+5,100),this.thresholdsSprite.x=0):this.thresholdsSprite.x<-500&&(this.thresholdsGroup.x=Math.max(this.thresholdsGroup.x-5,-550),this.thresholdsSprite.x=-500)},e.prototype.setThresholdsSpritePosition=function(){this.thresholdsSprite.y=this.thresholds[0].y-this.thresholds[0].height/2,this.thresholdsSprite.width=this.thresholdsGroup.width+50,this.thresholdsSprite.height=this.thresholds[0].height,this.thresholdsSprite.inputEnabled=!0,this.thresholdsSprite.input.allowVerticalDrag=!1,this.thresholdsSprite.events.onInputDown.add(this.handleInputDown,this),this.spritePrevPos=this.thresholdsSprite.x,this.thresholdsSprite.events.onInputUp.add(this.handleInputUp,this)},e.prototype.checkThresholdsSpritePosition=function(){this.thresholdsSprite.x=this.thresholdsGroup.x,this.spritePrevPos=this.thresholdsSprite.x,this.thresholdsSprite.events.onDragUpdate.add(this.handleDragUpdate,this)},e.prototype.moveThresholdsSpriteRight=function(){this.thresholdsSprite.x-=this.thresholdsSprite.x-this.thresholdsGroup.x},e.prototype.moveThresholdsSpriteLeft=function(){this.thresholdsSprite.x-=this.thresholdsSprite.x-this.thresholdsGroup.x},e.prototype.handleInputUp=function(){var t;(this.thresholdsSprite.x>0||this.thresholdsSprite.x>-82&&this.thresholdsSprite.x<=0)&&((t=this.game.add.tween(this.thresholdsGroup)).to({x:0},100,null,!0),this.spritePrevPos=0,this.thresholdsSprite.x=0),(this.thresholdsSprite.x<-500||this.thresholdsSprite.x<-338&&this.thresholdsSprite.x>=-500)&&((t=this.game.add.tween(this.thresholdsGroup)).to({x:-500},100,null,!0),this.spritePrevPos=-500,this.thresholdsSprite.x=-500),(this.thresholdsSprite.x<-82&&this.thresholdsSprite.x>-250||this.thresholdsSprite.x<=-250&&this.thresholdsSprite.x>-338)&&((t=this.game.add.tween(this.thresholdsGroup)).to({x:-250},100,null,!0),this.spritePrevPos=-250,this.thresholdsSprite.x=-250),t&&this.tweens.push(t),t?t.onComplete.add(this.checkThresholdsGroupPosition,this):this.checkThresholdsGroupPosition()},e.prototype.handleInputDown=function(){this.thresholdsGroup.mask&&(this.thresholdsGroup.mask.getBounds().contains(this.game.input.x,this.game.input.y)?this.thresholdsSprite.input.enableDrag():this.thresholdsSprite.input.disableDrag())},e.prototype.handleHotKeyPress=function(t){this.enablePuzzleExpand&&(t===be.ToggleGridSize?this.isBoardExpanded?(this.tweens.forEach(function(t){return t.stop()}),this.handleCloseExpandButtonClick()):this.handleExpandButtonClick():t===be.GoToNextPuzzle&&this.nextPuzzleButton.visible&&this.handleNextPuzzleButtonClick())},e.prototype.startThresholdAnimation=function(t,e,i){var n,o=this,r=new Phaser.Signal,s=this.position.x+this.width/2-70,a=this.position.y+this.height/2+10,l=new PIXI.Point(this.x+this.lockedButton.x,this.y+this.lockedButton.y);return this.showStarsFlyingAnimation?(re.i.startStarEarnAnimation(t.worldPosition,l,n=this.showStarsFlyingAnimation,this.lockedButton,new Phaser.Point(s,a),e,r,this.isBoardExpanded,this.gc.gameMode===Wt.SundayPuzzle),0===this.thresholds.indexOf(t)&&re.i.starTextAnimCompleted&&re.i.startStarTextAnimation(new Phaser.Point(s,a),3===this._starCount,this.isBoardExpanded)):this.game.time.events.add(500*this.thresholds.indexOf(t),function(t){n=0===o.thresholds.indexOf(t);var h=null;o.isBoardExpanded&&(h=o.jumpToThreshold(t)),h?h.addOnce(function(){re.i.startStarEarnAnimation(t.worldPosition,l,n,o.lockedButton,new Phaser.Point(s,a),e,r,o.isBoardExpanded,o.gc.gameMode===Wt.SundayPuzzle),o.showTextAnimation(s,a,i)}):(re.i.startStarEarnAnimation(t.worldPosition,l,n,o.lockedButton,new Phaser.Point(s,a),e,r,o.isBoardExpanded,o.gc.gameMode===Wt.SundayPuzzle),o.showTextAnimation(s,a,i))},this,t),r},e.prototype.jumpToThreshold=function(t){var e=this,i=new Phaser.Signal,n=this.thresholds.indexOf(t),o=this.game.add.tween(this.thresholdsGroup);return o.to({x:-250*n},150,null,!0),o.onComplete.addOnce(function(){e.game.time.events.add(200,function(){e.checkThresholdsGroupAndSpritePosition(),i.dispatch()},e)}),this.checkThresholdsGroupAndSpritePosition(),i},e.prototype.handleEnableExpandButton=function(t){this.enablePuzzleExpand=t,t?(this.enableLeftButton(),this.enableRightButton()):(this.disableLeftButton(),this.disableRightButton())},e.prototype.handleThresholdTextTween=function(){var t=this.thresholds.filter(function(t){return t.filled});re.i.tweenThresholdCount(this.thresholds[this.lastStarFoundIndex>=0?this.lastStarFoundIndex:t.length-1].getSolvedInfo())},e.prototype.updateThresholds=function(t,e,i,n){var o=this;this._thresholdCompleted=!0,this.gc.starCount=++this._starCount,this.gc.enableExpandButtons(!1),this.currentAnimationCompleteSignal?this.currentAnimationCompleteSignal.addOnce(function(){o.startCurrentAnimation(t,n)}):this.startCurrentAnimation(t,n)},e.prototype.showTextAnimation=function(t,e,i){re.i.starTextAnimCompleted&&(i?(this.starEarnedTextAnim||re.i.startStarTextAnimation(new Phaser.Point(t,e),3===this._starCount,this.isBoardExpanded),this.starEarnedTextAnim=!0):3!==this._starCount||this.starEarnedTextAnim?this.starEarnedTextAnim||re.i.startStarTextAnimation(new Phaser.Point(t,e),3===this._starCount,this.isBoardExpanded):(re.i.startStarTextAnimation(new Phaser.Point(t,e),3===this._starCount,this.isBoardExpanded),this.starEarnedTextAnim=!0))},e.prototype.handleMobileLayout=function(){if(this.game&&!this.game.device.desktop){var t=window.innerWidth,e=window.innerHeight>t;this.lockedButton.visible=!1,this.nextPuzzleButton.visible=!1;var i=null;if(e){this.puzzleInfoBkg.x=410,this.puzzleInfoBkg.y=535,this.puzzleInfoBkg.scale.set(1,1.4);for(var n=this.puzzleInfoBkg.x+90,o=0;o<3;o++){i=this.thresholds[o];for(var r=0;r<i.children.length;r++)i.scale.set(1.5,1.3),i.x=n+o*(.35*this.puzzleInfoBkg.width),i.y=598,"main"==i.children[r].key?(i.children[r].scale.set(1,.75),i.children[r].x=15,i.children[r].y=-5):i.children[r].visible=!1}}else for(this.puzzleInfoBkg.x=1115,this.puzzleInfoBkg.y=-30,this.puzzleInfoBkg.scale.set(.8,1.2),n=this.puzzleInfoBkg.x+75,o=0;o<3;o++)for(i=this.thresholds[o],r=0;r<i.children.length;r++)i.scale.set(1,1),i.x=n+o*(.35*this.puzzleInfoBkg.width),i.y=20,"main"==i.children[r].key?(i.children[r].scale.set(1,1),i.children[r].x=15,i.children[r].y=-4):i.children[r].visible=!1}},e}(Phaser.Group),We=function(t){function e(e,i){var n=t.call(this,ee.game)||this;return n.gc=e,i.add(n),n.visible=!1,n.initialize(),n}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"onCheckSquareClick",{get:function(){return this._onCheckSquareClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCheckPuzzleClick",{get:function(){return this._onCheckPuzzleClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCheckWordClick",{get:function(){return this._onCheckWordClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onHide",{get:function(){return this._onHide},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this.visible=!0,this.boardActivationInfo=t,this.bkg.scale.set(0),this.isBoardExpanded&&!Xt.i.isRightHanded()||Xt.i.isRightHanded()?this.bkg.anchor.set(0,.5):this.bkg.anchor.set(1,.5),this.checkPositions(),this.isBoardExpanded&&!Xt.i.isRightHanded()&&(this.bkg.x+=300),this.game.add.tween(this.bkg.scale).to({x:1,y:1},150,null,!0),this.checkButtonsState(t),this.gc.checkViewIsVisible=!0},e.prototype.hide=function(){var t=this;this.tutorial&&(Se.i.removeArrows(),Se.i.showSkipBtn(),this.gc.handleTutorialSeventhStep());var e=this.game.add.tween(this.bkg.scale);e.to({x:0,y:0},150,null,!0),e.onComplete.add(function(){t.visible=!1,t.isBoardExpanded&&!Xt.i.isRightHanded()&&(t.bkg.x-=300)},this),this.gc.checkViewIsVisible=!1,this.gc.disableHotKeys=!1,this._onHide.dispatch()},e.prototype.initialize=function(){this.buttons=[],this.initSignals(),this.initBkg(),this.initButtons(),this.checkPositions(),this.attachListeners()},e.prototype.initSignals=function(){this._onCheckSquareClick=new Phaser.Signal,this._onCheckPuzzleClick=new Phaser.Signal,this._onCheckWordClick=new Phaser.Signal,this._onHide=new Phaser.Signal},e.prototype.initBkg=function(){this.bkg=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.CheckPlusBg,446,194,{top:0,bottom:0,left:65,right:65},null,this,new Phaser.Point(0,.5)),this.bkg.inputEnabled=!0},e.prototype.initButtons=function(){this.closeBtn=ee.button(Ot.Buttons.CloseButton,this.handleCloseClick,this,this.bkg),this.checkSquareButton=ee.button(Ot.Buttons.CheckSquare,this.handleCheckSquareClick,this,this.bkg),this.checkSquareButton.setLabelColor("#ffffff"),this.checkWordButton=ee.button(Ot.Buttons.CheckWord,this.handleCheckWordClick,this,this.bkg),this.checkWordButton.setLabelColor("#ffffff"),this.checkPuzzleButton=ee.button(Ot.Buttons.CheckPuzzle,this.handleCheckPuzzleClick,this,this.bkg),this.checkPuzzleButton.setLabelColor("#ffffff"),this.buttons.push(this.closeBtn,this.checkSquareButton,this.checkWordButton,this.checkPuzzleButton),this.chooseButton(this.closeBtn)},e.prototype.checkPositions=function(){this.bkg.position.set(430*this.bkg.anchor.x,0);var t=-this.bkg.anchor.x*(this.closeBtn.width+25)+20;this.closeBtn.position.set(t,-35);var e=-this.bkg.anchor.x*(this.checkSquareButton.width+75)+t+80;this.checkSquareButton.position.set(e,-60);var i=-this.bkg.anchor.x*(this.checkWordButton.width+95)+e+100;this.checkWordButton.position.set(i,-60),this.checkPuzzleButton.position.set(-this.bkg.anchor.x*(this.checkPuzzleButton.width+95)+i+100,-60)},e.prototype.attachListeners=function(){this.gc.onTutorialSixthStep.addOnce(this.handleTutorialSixthStep,this),this.gc.onKeyPress.add(this.handleKeyPress,this),this.gc.onExpandButtonClick.add(this.handleExpandButtonClick,this),this.gc.onCloseExpandButtonClick.add(this.handleCloseExpandedButtonClick,this),Xt.i.onSettingsChange.add(this.handleSettingsChange,this)},e.prototype.showArrows=function(){var t=Xt.i.isRightHanded(),e=this.checkSquareButton.worldPosition.y+122,i=this.checkSquareButton.worldPosition.x;Se.i.showArrow(i-(t?50:30),e,8,0,this.checkSquareButton.buttonData.label.text),Se.i.showArrow(i-(t?25:210),e,8,0,this.checkWordButton.buttonData.label.text),Se.i.showArrow(i-(t?10:410),e,8,0,this.checkPuzzleButton.buttonData.label.text)},e.prototype.handleCheckSquareClick=function(){this.hide(),this.tutorial&&(Se.i.showBlockerAndPopup=!0,Se.i.hideArrows=!0,this.closeBtn.enabled=!0,this.tutorial=!1),this.gc.gameEndData.checkUsed(),this._onCheckSquareClick.dispatch()},e.prototype.handleCheckWordClick=function(){this.hide(),this.tutorial&&(Se.i.showBlockerAndPopup=!0,Se.i.hideArrows=!0,this.closeBtn.enabled=!0,this.tutorial=!1),this.gc.gameEndData.checkUsed(),this._onCheckWordClick.dispatch()},e.prototype.handleCheckPuzzleClick=function(){this.hide(),this.tutorial&&(Se.i.showBlockerAndPopup=!0,Se.i.hideArrows=!0,this.closeBtn.enabled=!0,this.tutorial=!1),this.gc.gameEndData.checkUsed(),this._onCheckPuzzleClick.dispatch()},e.prototype.handleCloseClick=function(){Rt.i.playPopupShow(),this.chooseButton(this.buttons[0]),this.hide()},e.prototype.handleTutorialSixthStep=function(){var t=this;this.tutorial=!0,this.closeBtn.enabled=!1,this.game.device.desktop&&setTimeout(function(){t.showArrows()},250)},e.prototype.checkButtonsState=function(t){this.checkSquareButton.enabled=!this.tutorial&&t.canCheckCell,this.checkWordButton.enabled=t.canCheckWord,this.checkPuzzleButton.enabled=t.canCheckPuzzle},e.prototype.handleKeyPress=function(t){if(this.gc.checkViewIsVisible){var e=Xt.i.getSettings().rightHanded;t===Phaser.KeyCode.RIGHT?e||this.isBoardExpanded&&!e?this.jumpToNextButton():this.jumpToPrevButton():t===Phaser.KeyCode.LEFT?e||this.isBoardExpanded&&!e?this.jumpToPrevButton():this.jumpToNextButton():t===Phaser.KeyCode.ENTER&&this.selectButton()}},e.prototype.handleSettingsChange=function(){this.isBoardExpanded?(this.bkg.anchor.set(0,.5),this.checkPositions(),Xt.i.isRightHanded()||(this.bkg.x+=300)):(Xt.i.isRightHanded()?this.bkg.anchor.set(0,.5):this.bkg.anchor.set(1,.5),this.checkPositions())},e.prototype.jumpToNextButton=function(){if(this.buttons.every(function(t,e){return 0===e&&t.enabled||!t.enabled}))this.chooseButton(this.buttons[0]);else{var t=this.buttons.indexOf(this.choosedButton),e=this.buttons.filter(function(e,i){return e.enabled&&i>t})[0];this.chooseButton(e||this.buttons[0])}},e.prototype.jumpToPrevButton=function(){if(this.buttons.every(function(t,e){return 0===e&&t.enabled||!t.enabled}))this.chooseButton(this.buttons[0]);else{var t=this.buttons.indexOf(this.choosedButton),e=this.buttons.filter(function(e,i){return e.enabled&&i<t});this.chooseButton(e[e.length-1]||this.buttons[this.buttons.length-1])}},e.prototype.selectButton=function(){switch(this.choosedButton){case this.closeBtn:this.handleCloseClick();break;case this.checkSquareButton:this.handleCheckSquareClick();break;case this.checkWordButton:this.handleCheckWordClick();break;case this.checkPuzzleButton:this.handleCheckPuzzleClick()}},e.prototype.chooseButton=function(t){this.buttons.forEach(function(t){t.enabled&&t.changeFrame(!1)}),t.changeFrame(!0),this.choosedButton=t},e.prototype.handleExpandButtonClick=function(t){this.isBoardExpanded=t,this.isBoardExpanded&&!Xt.i.isRightHanded()&&(this.bkg.anchor.set(0,.5),this.checkPositions())},e.prototype.handleCloseExpandedButtonClick=function(t){this.isBoardExpanded=t,Xt.i.isRightHanded()||(this.bkg.anchor.set(1,.5),this.checkPositions(),this.bkg.x-=300)},e}(Phaser.Group),Ge=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentStep=1,e.stepsCount=3,e.handleResize=e.handleGameSizeChange.bind(e),e.popupWidth=436,e}return Object(st.__extends)(e,t),Object.defineProperty(e,"i",{get:function(){return null==e._id&&(e._id=new e),e._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMysteryClueTutorial",{set:function(t){this._showMysteryClueTutorial=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tutorialSeen",{get:function(){return!!se.i.getItem("dcTutorialSeen")},set:function(t){se.i.setItem("dcTutorialSeen",t?"1":"0")},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e){this.currentStep=1,this._tutorialFinished=!1,this.gc=t,this.game=e,window.addEventListener("resize",this.handleResize)},e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize),delete this.gc,delete this.game,delete e._id},e.prototype.initBlocker=function(t,e,i,n,o){this.word=this.word||o;var r=document.getElementById("gameContainer").childNodes[0],s=parseInt(r.style.width,10)/1451,a=parseInt(r.style.height,10)/1026,l=this.getWorldPosition(t,e);this.lastBlockerMeasurements={x:t,y:e,width:i,height:n},this.blocker=document.getElementById("ftueBlocker"),this.blocker.style.display="block",this.blocker.style.width=i*s+"px",this.blocker.style.height=n*a+"px",this.blocker.style.left="calc(-100vw - 10px + "+l.x+"px)",this.blocker.style.top="calc(-100vh - 10px + "+l.y+"px)"},e.prototype.showPopup=function(t,e,i){var n=this;if(this.currentStep>3)return this.hide(),this._tutorialFinished=!0,this._showMysteryClueTutorial=!1,this.gc.onTutorialFinish.dispatch(),void this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"});this.dcLastPopupMeasurements={x:t,y:e,floatSize:i};var o=this.getStepText(this.currentStep);this.getWorldPosition(t,e),document.getElementById("popupText").innerHTML=o;var r=document.getElementById("popupBtn");r.innerText=3===this.currentStep?"Ok":Ut.i.getString("nextBtn","next"),r.onclick=function(){Rt.i.playPopupShow(),2===n.currentStep?n.handleSecondStep():(ee.game.input.enabled=!0,n._tutorialFinished=!0,n._showMysteryClueTutorial=!1,n.hide())},r.style.display="block",this.popupDiv=document.getElementById("popupContainer"),this.popupDiv.style.display="flex",this.currentStep++},e.prototype.hide=function(){this.currentStep>2&&this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"}),this.blocker.style.display="none",this.popupDiv.style.display="none"},e.prototype.getStepText=function(t){switch(t){case 1:return Ut.i.getString("dcFtueSeq1Info","In this mode, there are keys on the grid that will unlock the panel above the clue list. The goal is to reveal the Mystery Clue behind the panel and answer it.");case 2:return Ut.i.getString("dcFtueSeq2Info","To unlock the Mystery Clue, collect keys by checking answers that contain key squares.");case 3:return Ut.i.getString("dcFtueSeq3Info","Great job, you've unlocked the Mystery Clue! Additional keys will reveal more letters in the Mystery Clue answer. You have a limited number of guesses. Good luck!")}},e.prototype.handleGameSizeChange=function(){clearTimeout(this.blockerTimeout),clearTimeout(this.popupTimeout),this._tutorialFinished&&!this._showMysteryClueTutorial||(this.blockerTimeout=setTimeout(this.reInitBlocker.bind(this),130)),this._tutorialFinished&&!this._showMysteryClueTutorial||(this.popupTimeout=setTimeout(this.reInitPopup.bind(this),130))},e.prototype.reInitBlocker=function(){this.initBlocker(this.lastBlockerMeasurements.x,this.lastBlockerMeasurements.y,this.lastBlockerMeasurements.width,this.lastBlockerMeasurements.height)},e.prototype.reInitPopup=function(){this.currentStep--,this.showPopup(this.dcLastPopupMeasurements.x,this.dcLastPopupMeasurements.y,this.dcLastPopupMeasurements.floatSize)},e.prototype.handleSecondStep=function(){this.gc.onDailyChallengeTutorialSecondStep.dispatch()},e}(Se),Xe=function(t){function e(e,i){var n=t.call(this,e)||this;return n.puzzleName=i,n.handleResize=n.handleMobileLayout.bind(n),n.puzzleClickEventSubscription=null,n.popupDiv=null,n.gc=e,n.initialize(),n}return Object(st.__extends)(e,t),e.prototype.destroy=function(){Be.instance.destroy(),Se.i.destroy(),this.gc.destroy(),t.prototype.destroy.call(this),window.removeEventListener("resize",this.handleResize),this.puzzleClickEventSubscription.unsubscribe()},e.prototype.initialize=function(){this.initializing=!0,re.i.initialize(),this._startTutorial=Xt.i.getSettings().crossword.menuOptionCrosswordTutorial,this.initClueBoard(),this.initPuzzleInfo(),this.initBoard(),this.initButtons(),this.initKeyboard(),this.initCheckView(),this.checkPositions(),this.attachListeners(),"dailyChallenge"!==this.gc.gameMode&&(this.board.checkPuzzle(!0),this.puzzleInfo.checkForUnlockButton(),this.checkForReset(),this.handleMobileLayout())},e.prototype.show=function(){this.gc.startTime=Date.now(),this.animateAll()},e.prototype.initPuzzleInfo=function(){this.puzzleInfo=new je(this.gc,314,25,this,this.puzzleName),this.puzzleInfo.onNextButtonClick.addOnce(this.handleNextButtonClick,this),this.puzzleInfo.alpha=.15},e.prototype.initBoard=function(){this.board=new Me(this.gc,this),Xt.i.getSettings().crossword.menuOptionCrosswordTutorial&&"regular"===this.gc.gameMode||this.board.activateFirstCell(),this.board.onPlayerInput.add(this.handlePlayerInput,this),this.board.alpha=0},e.prototype.initClueBoard=function(){this.clueBoard=new Ae(this.gc,this),this.clueBoard.alpha=0},e.prototype.initButtons=function(){this.checkButton=ee.button(Ot.Buttons.CheckButton,this.handleCheckClick,this,this),this.keyboardButton=ee.button(Ot.Buttons.KeyboardButton,this.handleKeyboardButtonClick,this,this),this.pencilButton=ee.pinButton(Ot.Buttons.PencilButton,this.handlePencilClick,this,this),this.zoomButton=ee.button(Ot.Buttons.ZoomButton,this.handleZoomClick,this,this),this.hintButton=ee.timedButton(Ot.Buttons.HintButton,this.handleHintClick,this,this),this.optionsButton=ee.button(Ot.Buttons.OptionsButton,this.handleOptionsClick,this,this),this.checkButton.alpha=0,this.keyboardButton.alpha=0,this.pencilButton.alpha=0,this.zoomButton.alpha=0,this.hintButton.alpha=0,this.optionsButton.alpha=.15},e.prototype.initKeyboard=function(){this.keyboard=new Ne(this.gc,this),this.keyboard.visible=!1,this.keyboard.onKeyClick.add(this.handleKeyboardKeyClick,this)},e.prototype.initCheckView=function(){this.checkView=new We(this.gc,this),this.checkView.onCheckPuzzleClick.add(this.handleCheckPuzzleClick,this),this.checkView.onCheckWordClick.add(this.handleCheckWordClick,this),this.checkView.onCheckSquareClick.add(this.handleCheckSquareClick,this),this.checkView.onHide.add(this.handleHideCheckView,this),this.addChild(this.checkView)},e.prototype.initTutorial=function(){"regular"===this.gc.gameMode&&this._startTutorial&&(this.sendTutorialStartMessage(),this.startTutorial(),this.handleMobileLayout())},e.prototype.attachListeners=function(){var t=this;this.gc.onTutorialSeventhStep.addOnce(this.handleTutorialSeventhStep,this),this.gc.onTutorialFifthStep.addOnce(this.handleTutorialFifthStep,this),this.gc.onTutorialFinish.addOnce(this.handleTutorialFinish,this),this.gc.onExpandButtonClick.add(this.handleExpandButtonClick,this),this.gc.onKeyboardClose.add(this.handleKeyboardClose,this),this.gc.onCloseExpandButtonClick.add(this.handleCloseExpandedButtonClick,this),this.gc.onHotKeyPress.add(this.handleHotKeyPress,this),this.gc.onDisableHintButton.add(this.disableHintButton,this),this.gc.onEnableExpandButtons.add(this.handleEnableExpand,this),Xt.i.onSettingsChange.add(this.handleSettingsChange,this),re.i.onShowWellDone.addOnce(this.showWellDone,this),this.puzzleClickEventSubscription=this.gc.messageService.nextPuzzleClickEvent.subscribe(function(){console.log("next puzzle crosswords attempt"),t.puzzleInfo&&(t.puzzleInfo.checkForUnlockButton(),t.puzzleInfo.handleNextPuzzleButtonClick())}),window.addEventListener("resize",this.handleResize)},e.prototype.hideAll=function(){re.i.stopCheckButtonPulse(),this.keyboard.visible=!1,this.changeClueBoardHeight();var t=[re.i.hide(this.board),re.i.hide(this.clueBoard),re.i.hide(this.keyboardButton),re.i.hide(this.hintButton),re.i.hide(this.zoomButton),re.i.hide(this.checkButton),re.i.hide(this.pencilButton)];this._isExpanded&&t.push(re.i.hide(this.optionsButton)),qt.Tween.all(t,function(){re.i.onShowWellDone.dispatch()},this)},e.prototype.showWellDone=function(){var t=this;this.game.input.enabled=!1;var e=this.board.getData(),i=this.puzzleInfo.getObjectivesResults();3===this.puzzleInfo.starCount?re.i.showWellDone().addOnce(function(){Rt.i.stopBackgroundMusic(),t.gc.handleNextPuzzleClick(i,e),Rt.i.playEndGame()},this):(Rt.i.stopBackgroundMusic(),this.gc.handleNextPuzzleClick(i,e),Rt.i.playEndGame())},e.prototype.changeButtonsState=function(t){this.hintButton.enabled=t,this.keyboardButton.enabled=t,this.zoomButton.enabled=t,this.checkButton.enabled=t,this.optionsButton.enabled=t},e.prototype.handleTutorialFinish=function(){this.tutorial=!1,this.board.activateFirstCell(),this.changeButtonsState(!0),Se.i.tutorialFinished=!0},e.prototype.handleTutorialFifthStep=function(){var t=this,e=this.checkButton.getBounds();this.checkButton.enabled=!0,this.game.device.desktop?(Se.i.initBlocker(e.x-15,e.y-15,e.width+30,e.height+40,""),Se.i.showPopup(e.x-130,e.y+450,15,-12,30),Se.i.showArrow(e.x-40,e.y+120,8,-.5,this.checkButton.buttonData.label.text),Se.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialSixthStep()})):this.handleMobileLayout()},e.prototype.handleKeyboardKeyClick=function(t){this.gc.keyboardKeyClicked(t)},e.prototype.handleKeyboardButtonClick=function(){var t=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;Rt.i.playPopupShow(),this.keyboard.show(),this.changeClueBoardHeight(),this._isExpanded&&(this.pencilButton.position.set(t.keyboardVisible.pencilButtonX,t.keyboardVisible.pencilButtonY),this.zoomButton.position.set(t.keyboardVisible.zoomButtonX,t.keyboardVisible.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.keyboardVisible.hintButtonX,t.keyboardVisible.hintButtonY),this.optionsButton.position.set(t.keyboardVisible.optionsButtonX,t.keyboardVisible.optionsButtonY))},e.prototype.handleHintClick=function(){if(!this.hintButton.clicked){this.hintButton.clicked=!0;var t=new Phaser.Point(this.hintButton.x+20,this.hintButton.y);Rt.i.playHint(),this.gc.hint(),re.i.startHintAnimation(t,this.board.getChoosedCell())}},e.prototype.handleZoomClick=function(){Rt.i.playZoom(),this.board.zoom()},e.prototype.handlePencilClick=function(t){Rt.i.playPopupShow(),this.board.handlePencilModeChange(t)},e.prototype.handleCheckSquareClick=function(){Rt.i.playValidate(),this.board.checkSquare(),this.startSparkleAnimation()},e.prototype.handleCheckWordClick=function(){Rt.i.playValidate(),this.board.checkWord(),this.startSparkleAnimation()},e.prototype.handleCheckPuzzleClick=function(){Rt.i.playValidate(),this.board.checkPuzzle(),this.startSparkleAnimation()},e.prototype.handleCheckClick=function(){Rt.i.playPopupShow(),re.i.stopCheckButtonPulse(),this.tutorial&&Se.i.nextStep(!0);var t=Xt.i.getSettings().rightHanded?this.checkButton.x-20:this.checkButton.x-315;this.checkView.position.set(t,this.checkButton.y+60);var e=this.board.getBoardActionsInfo();this.gc.disableHotKeys=!0,this.checkView.show(e)},e.prototype.handleSettingsChange=function(){this.checkPositions(),this.gc.isOptionsOpen=!1,this.handleMobileLayout()},e.prototype.checkPositions=function(){var t=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;this.keyboard.position.set(t.default.keyboardX,t.default.keyboardY),this.changeClueBoardHeight(),this._isExpanded?this.checkExpandedPositions(t):this.checkDefaultPositions(t),this.initializing?this.initializing=!1:this.checkView.visible||(re.i.stopCheckButtonPulse(),re.i.startCheckButtonPulseAnimation(this.checkButton.position));var e=Xt.i.getSettings().rightHanded?this.checkButton.x-20:this.checkButton.x-315;this.checkView.position.set(e,this.checkButton.y+60)},e.prototype.animateAll=function(){var t=this;this.game&&(this.game.input.enabled=!1),re.i.startGameIntroAnimation(this.board),re.i.startGameIntroAnimation(this.clueBoard),re.i.startGameIntroAnimation(this.checkButton),re.i.startGameIntroAnimation(this.hintButton),re.i.startGameIntroAnimation(this.pencilButton),re.i.startGameIntroAnimation(this.zoomButton),re.i.startGameIntroAnimation(this.keyboardButton),re.i.animateObjectAppear([this.puzzleInfo,this.optionsButton],function(){t.game&&(t.game.input.enabled=!0),t.initTutorial(),re.i.startCheckButtonPulseAnimation(t.checkButton.position)},this)},e.prototype.startTutorial=function(){var t=this;this.tutorial=!0,Se.i.initialize(this.gc,this.game),this.setTutorialManagerGameObjectPositions(),this.game&&(this.game.input.enabled=!1,this.changeButtonsState(!1));var e=Xt.i.isRightHanded()?new Phaser.Point(26,-29):new Phaser.Point(-29,50);Se.i.tutorialSeen?(Se.i.initSkipBtn(),Se.i.onSkipClick.addOnce(function(){t.board.handleSkipButtonClick(),t.game.input.enabled=!0,t.gc.handleTutorialEnd(),t.board.activateFirstCell()},this),this.gc.handleTutorialSecondStep(this.board.x,200,e.x),this.handleMobileLayout(),Se.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialThirdStep(t.clueBoard.x,200,e.y),t.handleMobileLayout()},this)):(Se.i.tutorialSeen=!0,this.gc.showLockBtnTutorial=!0,this.gc.handleTutorialFirstStep(this.puzzleInfo.x,this.puzzleInfo.y,0),this.handleMobileLayout(),Se.i.stepDoneSignal.addOnce(function(){Se.i.initSkipBtn(),Se.i.onSkipClick.addOnce(function(){t.board.handleSkipButtonClick(),t.board.activateFirstCell(),t.game.input.enabled=!0,t.gc.handleTutorialEnd()},t),t.gc.handleTutorialSecondStep(t.board.x,200,e.x),t.handleMobileLayout(),Se.i.stepDoneSignal.addOnce(function(){t.handleMobileLayout(),t.gc.handleTutorialThirdStep(t.clueBoard.x,200,e.y),t.handleMobileLayout()},t)},this))},e.prototype.setTutorialManagerGameObjectPositions=function(){var t=[];t.push({x:this.board.x,y:this.board.y,width:this.board.width,height:this.board.height}),t.push({x:this.clueBoard.x,y:this.clueBoard.y,width:this.clueBoard.width+30,height:this.clueBoard.height+90}),t.push({x:this.puzzleInfo.x,y:this.puzzleInfo.y-10,width:this.puzzleInfo.width+30,height:this.puzzleInfo.height+30}),t.push({x:this.checkButton.x-15,y:this.checkButton.y-15,width:this.checkButton.width+30,height:this.checkButton.height+40}),t.push({x:this.optionsButton.x-15,y:this.optionsButton.y-20,width:this.optionsButton.width+20,height:this.optionsButton.height+40}),Se.i.setGameObjectPositions(t)},e.prototype.handleOptionsClick=function(){this.tutorial&&(Se.i.tutorialFinished=!0,this.gc.handleTutorialEnd(),Se.i.end()),this.gc.isOptionsOpen||(this.gc.isOptionsOpen=!0,Rt.i.playPopupShow(),this.handleGameAction("options"))},e.prototype.handleGameAction=function(t){this.gc.messageService.sendMessageToWrapper({action:"buttonClick",type:t})},e.prototype.handleExpandButtonClick=function(t){this._isExpanded=t,this.changeClueBoardHeight();var e=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;this.setExpandedPositions(e),this.checkView.visible||(re.i.stopCheckButtonPulse(),re.i.startCheckButtonPulseAnimation(this.checkButton.position))},e.prototype.handleCloseExpandedButtonClick=function(t){this._isExpanded=t,this.changeClueBoardHeight();var e=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;this.setDefaultPositions(e),this.checkView.visible||(re.i.stopCheckButtonPulse(),re.i.startCheckButtonPulseAnimation(this.checkButton.position))},e.prototype.handlePuzzleExit=function(){var t=this.board.getData(),e=this.puzzleInfo.getObjectivesResults();this.game&&(this.game.input.enabled=!1),this.gc.handlePuzzleExit(e,t),Rt.i.stopBackgroundMusic()},e.prototype.handleKeyboardClose=function(){var t=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;this.changeClueBoardHeight(),this._isExpanded&&(this.pencilButton.position.set(t.expanded.pencilButtonX,t.expanded.pencilButtonY),this.zoomButton.position.set(t.expanded.zoomButtonX,t.expanded.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.expanded.hintButtonX,t.expanded.hintButtonY),this.optionsButton.position.set(t.expanded.optionsButtonX,t.expanded.optionsButtonY))},e.prototype.setExpandedPositions=function(t){this.board.x=t.expanded.boardX,this.board.y=t.expanded.boardY,this.board.scale.set(t.expanded.boardScaleX,t.expanded.boardScaleY),this.checkButton.position.set(t.expanded.checkButtonX,t.expanded.checkButtonY),this.checkView.position.set(this.checkButton.x-20,this.checkButton.y+60),this.puzzleInfo.position.set(t.expanded.puzzleInfoX,t.expanded.puzzleInfoY),this.keyboardButton.y=t.expanded.keyboardButtonY,this.keyboard.visible?(this.pencilButton.position.set(t.keyboardVisible.pencilButtonX,t.keyboardVisible.pencilButtonY),this.zoomButton.position.set(t.keyboardVisible.zoomButtonX,t.keyboardVisible.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.keyboardVisible.hintButtonX,t.keyboardVisible.hintButtonY),this.optionsButton.position.set(t.keyboardVisible.optionsButtonX,t.keyboardVisible.optionsButtonY)):(this.pencilButton.position.set(t.expanded.pencilButtonX,t.expanded.pencilButtonY),this.zoomButton.position.set(t.expanded.zoomButtonX,t.expanded.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.expanded.hintButtonX,t.expanded.hintButtonY),this.optionsButton.position.set(t.expanded.optionsButtonX,t.expanded.optionsButtonY))},e.prototype.setDefaultPositions=function(t){this.puzzleInfo.position.set(314,25),this.board.x=t.default.boardX,this.board.y=t.default.boardY,this.board.scale.set(t.default.boardScaleX,t.default.boardScaleY),this.pencilButton.position.set(t.default.pencilButtonX,t.default.pencilButtonY),this.zoomButton.position.set(t.default.zoomButtonX,t.default.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.default.hintButtonX,t.default.hintButtonY),this.optionsButton.position.set(t.default.optionsButtonX,t.default.optionsButtonY),this.checkButton.position.set(t.default.checkButtonX,t.default.checkButtonY),this.checkView.position.set(this.checkButton.x-20,this.checkButton.y+60),this.keyboardButton.y=t.default.keyboardButtonY},e.prototype.checkExpandedPositions=function(t){this.board.position.set(t.expanded.boardX,t.expanded.boardY),this.clueBoard.position.set(t.default.clueBoardX,this.gc.objectives?337:197),this.checkButton.position.set(t.expanded.checkButtonX,t.expanded.checkButtonY),this.checkView.position.set(this.checkButton.x-20,this.checkButton.y+60),this.puzzleInfo.position.set(t.expanded.puzzleInfoX,t.expanded.puzzleInfoY),this.keyboardButton.position.set(t.default.keyboardButtonX,t.expanded.keyboardButtonY),this.keyboard.visible?(this.pencilButton.position.set(t.keyboardVisible.pencilButtonX,t.keyboardVisible.pencilButtonY),this.zoomButton.position.set(t.keyboardVisible.zoomButtonX,t.keyboardVisible.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.keyboardVisible.hintButtonX,t.keyboardVisible.hintButtonY),this.optionsButton.position.set(t.keyboardVisible.optionsButtonX,t.keyboardVisible.optionsButtonY)):(this.pencilButton.position.set(t.expanded.pencilButtonX,t.expanded.pencilButtonY),this.zoomButton.position.set(t.expanded.zoomButtonX,t.expanded.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.expanded.hintButtonX,t.expanded.hintButtonY),this.optionsButton.position.set(t.expanded.optionsButtonX,t.expanded.optionsButtonY))},e.prototype.checkDefaultPositions=function(t){this.board.position.set(t.default.boardX,197),this.clueBoard.position.set(t.default.clueBoardX,this.gc.objectives?337:197),this.checkButton.position.x=t.default.checkButtonX,this.checkView.position.set(this.checkButton.x-20,this.checkButton.y+60),this.hintButton&&(this.hintButton.position.x=t.default.hintButtonX,this.hintButton.position.y=t.default.hintButtonY),this.pencilButton&&(this.pencilButton.position.x=t.default.pencilButtonX,this.pencilButton.position.y=t.default.pencilButtonY),this.zoomButton.position.x=t.default.zoomButtonX,this.keyboardButton.position.set(t.default.keyboardButtonX,t.default.keyboardButtonY),this.puzzleInfo.position.set(314,25)},e.prototype.changeClueBoardHeight=function(){if(this.game.device.desktop)this.keyboard.visible&&this._isExpanded?this.gc.handleClueBoardHeightChange(300):this.keyboard.visible&&!this._isExpanded?this.gc.handleClueBoardHeightChange(400):!this.keyboard.visible&&this._isExpanded?this.gc.handleClueBoardHeightChange(500):this.keyboard.visible||this._isExpanded||this.gc.handleClueBoardHeightChange(561);else{var t=window.innerWidth,e=window.innerHeight;this.gc.handleClueBoardHeightChange(e>t?195:500)}},e.prototype.handleHotKeyPress=function(t){switch(t){case be.Hint:this.handleHotKeyHintClick();break;case be.ToggleChecks:this.handleCheckClick();break;case be.AdjustZoom:this.handleZoomClick();break;case be.TogglePencilMode:this.handleHotKeyPencilClick();break;case be.Options:this.handleOptionsClick();break;case be.ToggleKeyboard:this.keyboard.visible?this.keyboard.hide():this.keyboard.show();break;case be.ToggleGridSize:if(!this.enableExpand)return;this.checkPositions(),this.changeClueBoardHeight()}},e.prototype.handleHotKeyHintClick=function(){if(!this.hintButton.clicked&&!this.hintButton.isStateDown()){var t=new Phaser.Point(this.hintButton.x+20,this.hintButton.y);this.hintButton.clicked=!0,this.hintButton.emulateClick(),this.gc.hint(),re.i.startHintAnimation(t,this.board.getChoosedCell())}},e.prototype.handleHotKeyPencilClick=function(){this.pencilButton.emulateClick()},e.prototype.sendTutorialStartMessage=function(){this.gc.gameMode!==Wt.SundayPuzzle&&(this.gc.gameMode!==Wt.DailyChallenge&&this._startTutorial?this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}):this.gc.gameMode!==Wt.DailyChallenge||Ge.i.tutorialSeen||this.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}))},e.prototype.checkForReset=function(){me.instance.getCurrentPuzzleData().reset&&this.puzzleInfo.unlockNextButton()},e.prototype.handleTutorialSeventhStep=function(){this.game.device.desktop?(this.optionsButton.enabled=!0,Se.i.initBlocker(this.optionsButton.x-15,this.optionsButton.y-20,this.optionsButton.width+20,this.optionsButton.height+40),Se.i.showPopup(100,200,10,10,50)):this.handleMobileLayout()},e.prototype.handleNextButtonClick=function(t){this.game.input.enabled=!1,this.gc.gameEndData.endTimer(this.gc.startTime),this.hideAll()},e.prototype.handlePlayerInput=function(t){me.instance.saveCurrentPuzzle(this.gc.gameEndData,t,this.gc.gameEndData.timeSpentMS)},e.prototype.disableHintButton=function(){this.hintButton.disable()},e.prototype.handleEnableExpand=function(t){this.enableExpand=t},e.prototype.handleHideCheckView=function(){re.i.startCheckButtonPulseAnimation(this.checkButton.position)},e.prototype.startSparkleAnimation=function(){var t,e,i=this;if(!this.puzzleInfo.starEarned)if(this._isExpanded)setTimeout(function(){if(t=i.board.getCorrectWordsFirstCells(),(e=i.puzzleInfo.getLastStarsProgress())&&t.length){var n=t.length>1?i.game.rnd.integerInRange(0,t.length-1):0,o=t[n],r=o.worldPosition.x>=i.board.worldPosition.x+i.board.width/2;re.i.showSparkleAnimation(new PIXI.Point(o.worldPosition.x+o.width/2,o.worldPosition.y+o.height/2),e,r,!1)}},350);else{if(t=this.board.getCorrectWordsFirstCells(),!(e=this.puzzleInfo.getLastStarsProgress())||!t.length)return;var n=t.length>1?this.game.rnd.integerInRange(0,t.length-1):0,o=t[n],r=o.worldPosition.x>=this.board.worldPosition.x+this.board.width/2;re.i.showSparkleAnimation(new PIXI.Point(o.worldPosition.x+o.width/2,o.worldPosition.y+o.height/2),e,r,!0)}},e.prototype.handleMobileLayout=function(){var t=this;if(this.game&&!this.game.device.desktop){this.changeClueBoardHeight();var e=window.innerWidth,i=window.innerHeight>e;if(this.optionsButton.visible=!1,this.keyboard.visible=!0,this.keyboardButton.visible=!1,this.pencilButton.visible=!1,i){if(this.game.scale.setGameSize(1451,1026),this.keyboard.x=0,this.keyboard.y=870,this.keyboard.scale.set(2.1,.8),this.board.x=5,this.board.y=5,this.board.scale.set(2.3,.85),this.clueBoard.scale.set(1.9,1.2),this.clueBoard.x=150,this.clueBoard.y=550,this.checkView.scale.set(3,1),this.checkButton&&(this.checkButton.x=30,this.checkButton.y=570,this.checkButton.showLabel(!1),this.checkButton.scale.set(1.7,1.1)),this.hintButton&&(this.hintButton.x=550,this.hintButton.y=570,this.hintButton.showLabel(!1),this.hintButton.scale.set(1.7,1.1)),this.zoomButton&&(this.zoomButton.x=290,this.zoomButton.y=570,this.zoomButton.showLabel(!1),this.zoomButton.scale.set(1.7,1.1)),this.tutorial)switch(this.popupDiv=document.getElementById("popupContainer"),Se.i.step){case 1:this.gc.handleTutorialFirstStep(700,560,0),this.popupDiv.style.marginTop="-300px";break;case 2:this.gc.handleTutorialSecondStep(0,0,0),this.popupDiv.style.marginTop="300px";break;case 3:this.gc.handleTutorialThirdStep(250,600,0),this.popupDiv.style.marginTop="-300px";break;case 4:case 5:var n=this.checkButton.getBounds();Se.i.initBlocker(n.x+5,n.y-25,n.width+30,n.height+40,""),Se.i.showPopup(n.x-130,n.y+450,15,-12,30),Se.i.showArrow(n.x-5,n.y+150,8,-.5,this.checkButton.buttonData.label.text),Se.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialSixthStep()});break;case 6:case 7:Se.i.tutorialFinished=!0,this.gc.handleTutorialEnd(),Se.i.end(),this.handleMobileLayout()}}else if(this.game.scale.setGameSize(2300,1126),this.keyboard.x=390,this.keyboard.y=950,this.keyboard.scale.set(2.2,1.9),this.board.x=30,this.board.y=0,this.board.scale.set(1.6,1.15),this.clueBoard.scale.set(1.5,1.4),this.clueBoard.x=1250,this.clueBoard.y=65,this.checkView.scale.set(2,1),this.checkButton&&(this.checkButton.x=1080,this.checkButton.y=75,this.checkButton.showLabel(!1),this.checkButton.scale.set(1.5,1.5)),this.hintButton&&(this.hintButton.x=1080,this.hintButton.y=325,this.hintButton.showLabel(!1),this.hintButton.scale.set(1.5,1.5)),this.zoomButton&&(this.zoomButton.x=1080,this.zoomButton.y=575,this.zoomButton.showLabel(!1),this.zoomButton.scale.set(1.5,1.5)),this.tutorial)switch(this.popupDiv=document.getElementById("popupContainer"),Se.i.step){case 1:this.gc.handleTutorialFirstStep(700,0,0),this.popupDiv.style.marginTop="0px";break;case 2:this.gc.handleTutorialSecondStep(-300,-50,0),this.popupDiv.style.marginTop="100px";break;case 3:this.gc.handleTutorialThirdStep(800,50,0),this.popupDiv.style.marginTop="100px";break;case 4:case 5:n=this.checkButton.getBounds(),Se.i.initBlocker(n.x-450,n.y-20,n.width+30,n.height+40,""),Se.i.showPopup(n.x-130,n.y+650,15,-12,30),Se.i.showArrow(n.x-450,n.y+130,8,-.5,this.checkButton.buttonData.label.text),Se.i.stepDoneSignal.addOnce(function(){t.gc.handleTutorialSixthStep()});break;case 6:case 7:Se.i.tutorialFinished=!0,this.gc.handleTutorialEnd(),Se.i.end(),this.handleMobileLayout()}}},e}(he),Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(st.__extends)(e,t),e.prototype.handleOnMessage=function(t){"settings"===t.state?Xt.i.updateSettings(t.settings):"music"===t.state&&Xt.i.updateMusicSetting(t.enabled)},e}(Phaser.State),Ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(st.__extends)(e,t),e.prototype.init=function(t,e,i){this.messageService=i,this.messageService.onGameMessage.pipe(Object(Et.a)(this.messageService.destroy$)).subscribe(this.handleOnMessage.bind(this)),this.puzzleName=t,this.gameMode=e},e.prototype.create=function(){Be.instance.initialize(),this.showGameScreen()},e.prototype.update=function(){ie.i.update()},e.prototype.showGameScreen=function(){var t;this.currentScreen&&this.destroyCurrentScreen(),t=new Xe(new Ce(this.gameMode,this.messageService),this.puzzleName),this.currentScreen=t,this.game.world.add(t),Rt.i.playBackgroundMusic()},e.prototype.destroyCurrentScreen=function(){this.currentScreen.destroy(),this.currentScreen=null},e}(Re),Ye=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.gc=e,n}return Object(st.__extends)(e,t),e.prototype.initBackground=function(){this.background=ee.nineSliceSprite(Ot.Clues.backgroundMargins.left,Ot.Clues.backgroundMargins.top,bt.ImagesMain.Frames.ClueBackground,671,561,{top:60,bottom:28,left:20,right:31},null,this),this.backgroundWidth=this.background.width-21,this.initBkgShadow(),this.devider=ee.nineSliceSprite(this.bkgLeftGap+this.backgroundWidth/2,this.headerHeight,bt.ImagesMain.Frames.CrosswordsPanelDivider,6,this.background.height-this.headerHeight-15,{top:15,bottom:24,left:14,right:26},null,this.background,new Phaser.Point(.5,0))},e}(Ae),Ve=bt.ImagesMain.Frames,qe=function(t){function e(e,i,n,o){var r=t.call(this,e,i,n,o)||this;return r.initKey(),r.initBorder(),r}return Object(st.__extends)(e,t),e.prototype.zoom=function(e){var i=t.prototype.zoom.call(this,e);return this.userInputLetter?(this.keySprite.scale.set(.6*i.x,.6*i.y),this.keySprite.position.set(this.background.width-this.keySprite.width/2,this.background.height-this.keySprite.height/2)):(this.keySprite.scale.set(i.x,i.y),this.keySprite.position.set(this.background.width/2,this.background.height/2)),this.border.scale.set(i.x,i.y),this._zoomScale=i,i},e.prototype.showKey=function(){this.keySprite.visible=!0,this.border.visible=!0},e.prototype.hideKey=function(){this.keySprite.visible=!1,this.border.visible=!1},e.prototype.hasKey=function(){return this.keySprite.visible},e.prototype.writeLetter=function(t,e){void 0===e&&(e=!1),this._pencilEnabled=e,Rt.i.playWriteLetter(),Rt.i.playScratch();var i=this._zoomScale||this._scale,n=String.fromCharCode(t);this.updateLetter(n,e),this.keySprite.scale.set(.6*i.x,.6*i.y),this.keySprite.position.set(this.background.width-this.keySprite.width/2,this.background.height-this.keySprite.height/2)},e.prototype.writeCorrectLetter=function(t,e){this._cellText.fill=e,this.updateLetter(t,!1),this.updateCellCorrectState(),this.keySprite.scale.set(.5,.5),this.keySprite.position.set(this.background.width-this.keySprite.width/2,this.background.height-this.keySprite.height/2)},e.prototype.removeLetter=function(){if(this._checkedState!==de.Correct){Rt.i.playEraseLetter(),this.updateLetter("");var t=this._zoomScale||this._scale;this.keySprite.scale.set(t.x,t.y),this.keySprite.position.set(this.background.width/2,this.background.height/2)}},e.prototype.initKey=function(){this.keySprite=ee.sprite(this.background.width/2,this.background.height/2,Ve.CellKey,this),this.keySprite.scale.set(this._scale.x,this._scale.y),this.keySprite.visible=!1,this.keySprite.anchor.set(.5,.5)},e.prototype.initBorder=function(t){var e=t||this._scale;this.border=this.game.add.group(this);var i=ee.sprite(0,0,Ve.CellKeyBorder,this);i.tint=16747520,this.border.add(i),this.border.scale.set(e.x,e.y),this.border.visible=!1},e}(pe),Ze=bt.ImagesMain.Frames,Je=function(t){function e(e,i){var n=t.call(this,ee.game,i)||this;return n.gc=e,n.cells=[],n.locks=[],n.init(),n}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"onSolveClick",{get:function(){return this._onSolveClick},enumerable:!0,configurable:!0}),e.prototype.getCellsData=function(){return this.cells},e.prototype.init=function(){this.lockAnimations=[],this.keysToUnlock=this.gc.objectives.minLettersBeforeClue,this.lockIndexes=this.gc.objectives.lockedLettersIndexes,this.openLetterIndexes=this.gc.objectives.openLettersIndexes,this.initTileBackground(),this.initClue(),this.initTiles(),this.initLocks(),this.initOpenLetters(),this.initSolveButton(),this.initLockPanel(),this.initLockPanelShadow(),this.initLabel(),this.attachListeners()},e.prototype.initTileBackground=function(){this.tileBackgroundSprite=ee.nineSliceSprite(4,3,bt.ImagesMain.Frames.CluePanel,685,124,{top:60,bottom:28,left:20,right:31},null,this)},e.prototype.initClue=function(){var t=Ut.i.getString("dailyChallengeClueLabel","Clue")+":";ee.text(30,20,t+" "+this.gc.objectives.challengeClue,{font:Ot.Fonts.font,fill:"#64DEFE",fontSize:24},this).addFontStyle("italic",6)},e.prototype.initTiles=function(){for(var t,e=Ut.i.getString("cellTooltip","tooltip"),i=0;i<this.gc.objectives.challengeWord.length;++i)t=new qe({x:i+2,y:2.5,number:void 0,solution:this.gc.objectives.challengeWord.charAt(i)},new Phaser.Point(.7,.7),new Phaser.Point(.9,.9),this),this.cells.push(t);var n=this.game.add.sprite(33,57,null,null,this);n.width=this.cells[0].width*this.cells.length+20,n.height=this.cells[0].height,ie.i.addElement(n,e,Vt.Click,new Phaser.Point(0,-110))},e.prototype.initLocks=function(){var t,e=this;this.lockIndexes.forEach(function(i){t=ee.sprite(e.cells[i].x,e.cells[i].y,Ze.CellLock,e),e.locks.push(t)})},e.prototype.initOpenLetters=function(){var t=this;this.openLetterIndexes.forEach(function(e){t.cells[e].writeCorrectLetter(t.gc.objectives.challengeWord.charAt(e),"#00B400")})},e.prototype.initSolveButton=function(){this.solveButton=ee.button(Ot.Buttons.SolveButton,this.handleSolveClick,this,this),this.solveButton.setLabelColor("#ffffff"),this.solveButton.scale.set(.7,.7),this.solveButton.position.set(600,20),this._onSolveClick=new Phaser.Signal},e.prototype.initLockPanel=function(){this.lockPanel=ee.sprite(0,0,Ze.LockPanel,this),this.lockPanel.inputEnabled=!0,this.lock=ee.sprite(this.lockPanel.width/2,this.lockPanel.height/2,bt.ImagesMain.Frames.CluePanelLock,this.lockPanel,new Phaser.Point(.5,.5)),this.darkLock=ee.sprite(this.lockPanel.width/2,this.lockPanel.height/2,bt.ImagesMain.Frames.CluePanelLock,this.lockPanel,new Phaser.Point(.5,.5)),this.darkLock.tint=0,this.darkLock.alpha=0,this.darkLock.inputEnabled=!0,this.darkLock.events.onInputDown.add(this.handleInputDown,this),this.darkLock.events.onInputUp.add(this.handleInputUp,this),ie.i.addElement(this.darkLock,Ut.i.getString("lockPanelTooltip","tooltip"),Vt.Click)},e.prototype.initLockPanelShadow=function(){var t=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.ClueShadow,this.lockPanel.width,this.lockPanel.height,{top:40,bottom:40,left:40,right:40},null,this);this.setChildIndex(t,0)},e.prototype.initLabel=function(){this.label=ee.text(380,45,this.keysToUnlock.toString(),{font:Ot.Fonts.font,fontSize:Ot.Fonts.fontSize,fill:"#ffffff"},this)},e.prototype.attachListeners=function(){this.gc.onDailyChallengeTutorialFirstStep.addOnce(this.handleTutorialFirstStep,this),this.gc.onDailyChallengeTutorialThirdStep.addOnce(this.handleDailyChallengeThirdStep,this),this.gc.onKeyFound.add(this.handleKeyFound,this)},e.prototype.hideLockPanelWithAnimation=function(){this.lock.destroy(),this.lockPanel.destroy(),Rt.i.playPanelUnlocked(),re.i.startMysteryClueBreakAnimation(this.lockPanel.worldPosition)},e.prototype.handleSolveClick=function(){Rt.i.playPopupShow(),this._onSolveClick.dispatch()},e.prototype.handleKeyFound=function(t){var e=this;if(Rt.i.playKeyFound(),this.keysToUnlock--,this.gc.mysteryClueData.remainingKeys--,this.keysToUnlock<0){var i=this.lockIndexes.length-1,n=this.locks.splice(i,1)[0],o=this.lockIndexes.splice(i,1)[0];this.gc.mysteryClueData.openLettersIndexes.push(o),this.gc.mysteryClueData.lockedLettersIndexes.splice(i,1);var r=this.cells[o],s=new PIXI.Point(r.worldPosition.x+r.width/2,r.worldPosition.y+r.height/2);r.writeCorrectLetter(this.gc.objectives.challengeWord.charAt(o),"#00B400"),re.i.showKeyToUnlockAnimation(t,s),n.destroy()}else 0===this.keysToUnlock?re.i.showKeyToUnlockAnimation(t,this.lock.worldPosition).onComplete.addOnce(function(){e.gc.showMysteryClueTutorial&&(e.gc.onDailyChallengeTutorialThirdStep.dispatch(),e.gc.messageService.sendMessageToWrapper({action:"tutorialStarted"}),e.gc.showMysteryClueTutorial=!1),e.label.destroy(),e.hideLockPanelWithAnimation()}):(re.i.showKeyToUnlockAnimation(t,this.lock.worldPosition).onComplete.addOnce(function(){e.animateLock(),e.label.setText(e.keysToUnlock.toString())}),Rt.i.playSmallLock())},e.prototype.handleTutorialFirstStep=function(){this.game.input.enabled=!1,Ge.i.initBlocker(this.x-20,this.y-20,this.width+50,this.height+40)},e.prototype.handleDailyChallengeThirdStep=function(){this.game.input.enabled=!1,Ge.i.showMysteryClueTutorial=!0,Ge.i.initBlocker(this.x-20,this.y-20,this.width+50,this.height+40)},e.prototype.handleInputDown=function(){this.lockAnimations.length>0&&(this.lockAnimations.forEach(function(t){return t.stop()}),this.lock.angle=0),this.inputUpAnimation&&this.inputUpAnimation.stop(),this.inputDownAnimation=this.game.add.tween(this.darkLock),this.inputDownAnimation.to({alpha:.4},100,null,!0)},e.prototype.handleInputUp=function(){this.inputDownAnimation.stop(),this.inputUpAnimation=this.game.add.tween(this.darkLock),this.inputUpAnimation.to({alpha:0},100,null,!0),this.inputUpAnimation.onComplete.add(this.animateLock,this),Rt.i.playMysteryCluePanelLocked()},e.prototype.animateLock=function(){var t=Math.random()>.3?1:-1,e=this.game.add.tween(this.lock),i=this.game.add.tween(this.lock);return e.to({angle:5*t},60,Phaser.Easing.Bounce.Out,!1,null,0,!0),i.to({angle:-15*t},90,null,!0,null,0,!0),i.chain(e),this.lockAnimations.push(i),this.lockAnimations.push(e),e},e}(Phaser.Group),Qe=bt.ImagesMain.Frames,$e=function(t){function e(e,i,n){var o=t.call(this,ee.game,i)||this;return o.gc=e,o.puzzleNameLabel=n,o.isBlinking=!1,o.handleResize=o.handleMobileLayout.bind(o),o.initialize(),o.gc.messageService.nextPuzzleUnlocked=!1,o}return Object(st.__extends)(e,t),e.prototype.destroy=function(){window.removeEventListener("resize",this.handleResize),t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"labelPosition",{get:function(){return this.errorLabel.worldPosition},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.numberOfErrors=this.gc.objectives.totalValidations,this.initBackground(),this.initLabels(),this.attachListeners(),this.game.device.desktop?this.initHeader():this.handleMobileLayout()},e.prototype.initBackground=function(){var t;this.game.device.desktop?(this.leftShadow=ee.nineSliceSprite(-28,20,bt.ImagesMain.Frames.BkgEngravedStarpanelLeft,120,128,{top:9,bottom:7,left:54,right:10},null,this),t=ee.nineSliceSprite(this.leftShadow.x+this.leftShadow.width,this.leftShadow.y-36,bt.ImagesMain.Frames.BkgEngravedStarpanelCenter,243,163,{top:50,bottom:10,left:80,right:90},null,this),ee.nineSliceSprite(t.x+t.width,this.leftShadow.y,bt.ImagesMain.Frames.BkgEngravedStarpanelRight,125,128,{top:13,bottom:13,left:10,right:65},null,this)):this.puzzleInfoBkg=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.BkgPuzzleInfoBkg,750,80,{top:0,bottom:10,left:58,right:58},null,this)},e.prototype.initHeader=function(){this.headerBkg=ee.nineSliceSprite(215,13,bt.ImagesMain.Frames.PuzzleInfoHeader,239,45,{top:4,left:28,right:31,bottom:6},null,this,new Phaser.Point(.5,.5)),ee.nineSliceSprite(this.leftShadow.x+5,this.leftShadow.y+4,bt.ImagesMain.Frames.BkgPuzzleInfoBkg,477,120,{top:13,bottom:13,left:56,right:62},null,this),this.initPuzzleName()},e.prototype.initPuzzleName=function(){this.puzzleName=ee.text(this.headerBkg.x-3,this.headerBkg.y+6,this.puzzleNameLabel,{font:Ot.Fonts.font,fontSize:24,fill:"#e6d1b7"},this,new Phaser.Point(.5,.5))},e.prototype.initLabels=function(){this.cluesCount=ee.text(57,60,"0 / 1",{font:Ot.Fonts.font,fontSize:45,fill:"#F8FA35"},this),this.puzzleSprite=ee.sprite(164,55,Qe.ObjectiveIcon,this),this.errorLabel=ee.text(305,116,this.numberOfErrors.toString(),{font:Ot.Fonts.font,fontSize:45,fill:"#F8FA35"},this),this.errorLabel.anchor.set(1,1),this.errorText=ee.text(308,113,Ut.i.getString("dailyChallengeErrorLabel","Errors"),{font:Ot.Fonts.font,fontSize:28,fill:"#E6D1B7"},this),this.errorText.anchor.set(0,1)},e.prototype.attachListeners=function(){this.gc.onWordDeclined.add(this.handleWordDeclined,this),re.i.onDailyChallengeComplete.add(this.handleDailyChallengeEnd,this),window.addEventListener("resize",this.handleResize)},e.prototype.handleWordDeclined=function(){this.gc.mysteryClueData.errorsLeft--,this.gc.mysteryClueData.errorsLeft<4&&(Rt.i.playRedPulse(),this.startBlinking()),this.errorLabel.setText(Math.max(this.gc.mysteryClueData.errorsLeft,0).toString()),0===this.gc.mysteryClueData.errorsLeft&&re.i.startDailyChallengeLooseAnimation().add(function(){return re.i.onDailyChallengeHideAll.dispatch(!1)},this)},e.prototype.startBlinking=function(){if(!this.isBlinking){var t=this.game.add.group(this),i=ee.nineSliceSprite(215,13,bt.ImagesMain.Frames.PuzzleInfoHeader,239,45,{top:4,left:28,right:31,bottom:6},null,this,new Phaser.Point(.5,.5)),n=ee.nineSliceSprite(this.leftShadow.x+5,this.leftShadow.y+4,bt.ImagesMain.Frames.BkgPuzzleInfoBkg,477,120,{top:13,bottom:13,left:56,right:62},null,this);t.addMultiple([i,n]),this.flashColor(e.blinkShades,t,800),this.initPuzzleName(),this.initLabels(),this.isBlinking=!0}},e.prototype.flashColor=function(t,e,i){this.blinkTween||(this.blinkTween=this.game.add.tween({x:0}),this.blinkTween.to({x:1},i,null,!0,0,-1).onUpdateCallback(function(i,n){e.setAll("tint",t[Math.floor(n*t.length)])}))},e.prototype.handleDailyChallengeEnd=function(t){this.gc.handleDailyChallengeEnd(t)},e.prototype.handleMobileLayout=function(){if(this.game&&!this.game.device.desktop){var t=window.innerWidth;window.innerHeight>t?(this.puzzleInfoBkg.x=50,this.puzzleInfoBkg.y=538,this.puzzleInfoBkg.width=160,this.puzzleInfoBkg.height=107,this.cluesCount.visible=!1,this.puzzleSprite.visible=!1,this.errorLabel.x=165,this.errorLabel.y=610,this.errorLabel.scale.set(1.5,1),this.errorText.x=75,this.errorText.y=630,this.errorText.scale.set(1.5,1)):(this.puzzleInfoBkg.x=800,this.puzzleInfoBkg.y=-35,this.puzzleInfoBkg.width=200,this.puzzleInfoBkg.height=190,this.cluesCount.visible=!1,this.puzzleSprite.visible=!1,this.errorLabel.x=950,this.errorLabel.y=90,this.errorLabel.scale.set(2,2),this.errorText.x=825,this.errorText.y=140,this.errorText.scale.set(2,2))}},e.blinkShades=[16109764,15764609,15688281,15424854,16214617,16216927,16153701,15828073,16092015,15832184,15967626,15512476,15911866,15588044,15592161,16777215],e}(Phaser.Group),ti=function(t){function e(e,i,n){var o=t.call(this,e,i,n)||this;return o.setKeys(),o.attachListeners(),o.attachDCListeners(),o}return Object(st.__extends)(e,t),e.prototype.checkWord=function(){if(0===this.highlightedCells.filter(function(t){return!t.cellText}).length){var t=this.highlightedCells.filter(function(t){return t.userInputLetter===t.solution}),e=this.highlightedCells.filter(function(t){return t.hasKey()})[0];if(this.highlightedCells.forEach(function(t){return t.check()}),this.gc.checkWordByFirstCell(this.choosedCell.coordinates,t.length===this.highlightedCells.length,e),this.highlightedCells.some(function(t){return t.checkedState!==de.Correct})){var i=this.highlightedCells[Math.floor(this.highlightedCells.length/2)].worldPosition;this.gc.handleDailyChallengeWordDecline(i)}this.checkFilledCells()}},e.prototype.attachDCListeners=function(){Xt.i.onSettingsChange.add(this.handleDCSettingsChange,this),this.gc.onKeyFound.add(function(t){return t.hideKey()},this)},e.prototype.initializeCell=function(t){var e=new qe(t,this.cellMargin,this._scale,this);return e.onClick.add(this.handleCellClick,this),e},e.prototype.attachListeners=function(){Be.instance.add(this.maskGroup.mask,this.handleScroll,this),this.gc.onWordSelect.add(this.handleWordSelect,this),this.gc.onKeyPress.add(this.handleKeyPressed,this)},e.prototype.setKeys=function(){var t=this;this.challengeCells=this.gc.objectives.challengeCells,this.challengeCells.forEach(function(e){t.cells.filter(function(t){return t.coordinates.x===e.x&&t.coordinates.y===e.y})[0].showKey()})},e.prototype.handleDCSettingsChange=function(t){var e=t.crossword.menuOptionCrosswordIgnorePencilOnValidation;!e&&this.highlightedCells.every(function(t){return t.checkedState===de.Filled})&&this.gc.onPencilEnabledStateChanged.dispatch(!0),e&&this.highlightedCells.some(function(t){return t.pencilEnabled})&&this.gc.onPencilEnabledStateChanged.dispatch(!1)},e}(_e),ei=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.attachDailyChallengeListeners(),n}return Object(st.__extends)(e,t),e.prototype.getBoardActionsInfo=function(){return{canCheckWord:this.grid.isHighlightedWordFilled()}},e.prototype.initGrid=function(){var t=Ot.Margins.left,e=Ot.Margins.top,i=this.calculateScale();this.grid=new ti(this.gc,i,this),this.grid.position.set(t+Ot.Grid.bgGapX,e+Ot.Grid.bgGapY)},e.prototype.attachDailyChallengeListeners=function(){this.gc.onDailyChallengeTutorialSecondStep.add(this.handleDailyChallengeSecondStep,this)},e.prototype.handleDailyChallengeSecondStep=function(){this.game.input.enabled=!1,Ge.i.initBlocker(this.x-20,this.y-20,this.width+50,this.height+40)},e}(Me),ii=bt.ImagesMain.Frames,ni=function(t){function e(e,i,n){var o=t.call(this,ee.game,ee.game.world)||this;return o._position=new Phaser.Point(e,i),o.position=o._position,o.pivot.set(.5,.5),o._game=ee.game,o.gc=n,o.init(),o}return Object(st.__extends)(e,t),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this.visible},enumerable:!0,configurable:!0}),e.prototype.showPopup=function(){this.gc.handleConfirmPoupShow(!0),this.gc.confirmPopupIsVisible=!0,this.visible=!0;var t=this._game.add.tween(this.scale);t.to({x:1,y:1},100,null,!0),t.onUpdateCallback(this.handleShowPopupUpdate,this),t.onComplete.add(this.handleShowPopupComplete,this)},e.prototype.init=function(){this.initBackground(),this.initButtons()},e.prototype.initBackground=function(){var t=Ut.i.getString("confirmPopup","Is this your final answer?");this.background=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.CluePanel,580,170,{top:26,bottom:37,left:25,right:37},null,this),this.background.anchor.set(.5,.5),this.background.scale.set(0,0),this.confirmText=ee.text(0,-40,t,{font:Ot.Fonts.font,fontSize:30,fill:"#FFF5CC"},this,new Phaser.Point(.5,.5)),this.background.addChild(this.confirmText),this.confirmText.scale.set(0,0)},e.prototype.initButtons=function(){this.greenButton=this._game.add.button(-110,30,bt.ImagesMain.getName(),this.handleGreenButtonClick,this,ii.LongGreenBtnHover,ii.LongGreenBtnUp,ii.LongGreenBtnDown,ii.LongGreenBtnUp,this),this.greenButton.scale.set(0,0),this.greenButton.anchor.set(.5,.5),this.background.addChild(this.greenButton);var t=Ut.i.getString("yes","yes");this.greenButtonText=this.game.add.text(0,0,t,{font:Ot.Fonts.font,fontSize:35,fill:"#fff"},this),this.greenButton.addChild(this.greenButtonText),this.greenButtonText.scale.set(0,0),this.greenButtonText.anchor.set(.5,.5),this.redButton=this._game.add.button(110,30,bt.ImagesMain.getName(),this.handleRedButtonClick,this,ii.LongRedBtnHover,ii.LongRedBtnUp,ii.LongRedBtnDown,ii.LongRedBtnUp,this),this.redButton.scale.set(0,0),this.redButton.anchor.set(.5,.5),this.background.addChild(this.redButton);var e=Ut.i.getString("no","no");this.redButtonText=this.game.add.text(0,0,e,{font:Ot.Fonts.font,fontSize:35,fill:"#fff"},this),this.redButton.addChild(this.redButtonText),this.redButtonText.anchor.set(.5,.5)},e.prototype.handleGreenButtonClick=function(){this.hidePopup().add(this.handleHidePopupComplete,this,null,!0)},e.prototype.handleRedButtonClick=function(){this.hidePopup().add(this.handleHidePopupComplete,this,null,!1)},e.prototype.handleShowPopupUpdate=function(t,e){var i=Math.min(e,.7);this.background.scale.set(e,e),this.greenButton.scale.set(i,i),this.redButton.scale.set(i,i),this.greenButtonText.scale.set(e,e),this.redButtonText.scale.set(e,e),this.confirmText.scale.set(e,e)},e.prototype.handleShowPopupComplete=function(){this.background.scale.set(1,1),this.greenButton.scale.set(.7,.7),this.redButton.scale.set(.7,.7),this.greenButtonText.scale.set(1,1),this.redButtonText.scale.set(1,1),this.confirmText.scale.set(1,1)},e.prototype.hidePopup=function(){var t=this._game.add.tween(this.scale);return t.to({x:0,y:0},100,null,!0),t.onUpdateCallback(this.handleHidePopupUpdate,this),t.onComplete},e.prototype.handleHidePopupUpdate=function(t,e){var i=Math.max(.7-e,0);this.background.scale.set(1-e,1-e),this.redButtonText.scale.set(1-e,1-e),this.greenButtonText.scale.set(1-e,1-e),this.confirmText.scale.set(1-e,1-e),this.redButton.scale.set(i,i),this.greenButton.scale.set(i,i)},e.prototype.handleHidePopupComplete=function(t,e,i){var n=this;this.background.scale.set(0,0),this.redButtonText.scale.set(0,0),this.greenButtonText.scale.set(0,0),this.confirmText.scale.set(0,0),this.redButton.scale.set(0,0),this.greenButton.scale.set(0,0),this.visible=!1,this.gc.handleConfirmPoupShow(!1,i),this.gc.confirmPopupIsVisible=!1,i&&re.i.startDailyChallengeLooseAnimation().add(function(){return n.gc.onSolveViewHide.dispatch(!1)},this)},e}(Phaser.Group),oi=bt.ImagesMain.Frames,ri=function(t){function e(e,i,n){var o=t.call(this,e,i)||this;return o.gc=n,o.strikes=[],o.cells=[],o.pivot.x=.5,o.init(),o}return Object(st.__extends)(e,t),e.prototype.show=function(t){this.updateCells(t),this._maskLayer.inputEnabled=!0,this._maskLayer.visible=!0,this.mysteryClueGroup.visible=!0,this._maskLayer.visible=!0,this.mysteryClueGroup.scale.set(0,0),this._maskLayer.visible=!0,this.mysteryClueGroup.alpha=0;var e=this.game.add.tween(this.mysteryClueGroup);e.to({alpha:1},500,null,!0),e.onUpdateCallback(this.handleShowAnimationUpdate,this),e.onComplete.add(this.handleShowAnimationComplete,this),this.solveButton.enabled=this.cells.every(function(t){return!t.isEmpty()})},e.prototype.handleKeyPressed=function(t){if(!(!this.gc.solveButtonClicked||this.confirmPopup&&this.confirmPopup.isVisible)){if(t>=Phaser.KeyCode.A&&t<=Phaser.KeyCode.Z){if(!this.choosedCell)return;if(this.cells.every(function(t){return t.checkedState===de.Correct}))return;this.choosedCell.checkedState===de.Correct?this.jumpToNextCell():(this.choosedCell.writeLetter(t),this.jumpToNextCell())}else t===Phaser.KeyCode.BACKSPACE||t===Phaser.KeyCode.DELETE?this.emptyChoosedCell():t===Phaser.KeyCode.ENTER?this.handleSolveClick():t===Phaser.KeyCode.RIGHT?this.jumpToNextCell():t===Phaser.KeyCode.LEFT&&this.jumpToPreviousCell();this.solveButton.enabled=this.cells.every(function(t){return!t.isEmpty()})}},e.prototype.init=function(){this.initialTries=this.gc.objectives.strikes,this.initMaskLayer(),this.initMysteryClueGroup(),this.initBackground(),this.initHeader(),this.initWelcomingText(),this.initTries(),this.initClue(),this.initCellsBackground(),this.initCells(),this.initButtons(),this.initKeyboard(),this.attachListeners()},e.prototype.initMaskLayer=function(){this._maskLayer=ee.sprite(0,-50,bt.ImagesMain.Frames.GreyedTile,this),this._maskLayer.height=this.game.world.height,this._maskLayer.width=this.game.world.width,this._maskLayer.alpha=0,this._maskLayer.inputEnabled=!0},e.prototype.initMysteryClueGroup=function(){this.mysteryClueGroup=this.game.add.group(this),this.mysteryClueGroup.pivot.set(.5,.5),this.mysteryClueGroup.position.set(this.game.world.width/2,0),this.mysteryClueGroup.visible=!1},e.prototype.initBackground=function(){this.backgroundSprite=ee.nineSliceSprite(0,0,bt.ImagesMain.Frames.BoardBackground,950,600,{top:26,bottom:37,left:25,right:37},null,this.mysteryClueGroup),this.backgroundSprite.anchor.set(.5,.5),this.backgroundSprite.inputEnabled=!0,this.backgroundBottom=ee.nineSliceSprite(this.backgroundSprite.x,this.backgroundSprite.y+300,bt.ImagesMain.Frames.BoardBackgroundLight,920,165,{top:26,bottom:37,left:25,right:37},null,this.mysteryClueGroup),this.backgroundBottom.anchor.set(.5,.5),this.mysteryClueGroup.swapChildren(this.backgroundSprite,this.backgroundBottom)},e.prototype.initHeader=function(){var t=ee.sprite(0,5-this.backgroundSprite.height/2,oi.Ribbon,this);this.backgroundSprite.addChild(t),t.anchor.set(.5,0),t.tint=3842962;var e=ee.sprite(0,-this.backgroundSprite.height/2-15,oi.MysterywordIcon,this);e.anchor.set(.5,.5),this.backgroundSprite.addChild(e),ee.text(0,60-this.backgroundSprite.height/2,Ut.i.getString("dailyChallengeRibonText","Mystery Clue"),{font:Ot.Fonts.font,fontSize:40,fill:"#E9FDDF"},this.backgroundSprite,new Phaser.Point(.5,.5))},e.prototype.initWelcomingText=function(){var t=Ut.i.getString("dailyChallengeSolvePopupText","Can you solve the Mystery Clue?");this.welcomingText=ee.text(5,-140,t,{font:Ot.Fonts.font,fontSize:35,fill:"#FFF5CC",fontStyle:"italic"},this.backgroundSprite,new Phaser.Point(.5,.5))},e.prototype.initTries=function(){var t=this.game.add.group(this.backgroundSprite);this.usedTries=this.initialTries-this.gc.mysteryClueData.strikesLeft;for(var e,i=ee.text(0,-85,Ut.i.getString("dailyChallengeTriesLabel","Tries")+": ",{font:Ot.Fonts.font,fontSize:35,fill:"#FFFFFF"},t),n=0;n<this.initialTries;++n)(e=ee.sprite(i.x+i.getBounds().width+20+80*n,-65,oi.StrikeBackground,t)).anchor.set(.5,.5),this.strikes.push(e);this.updateStrikesLeft(),t.position.set(this.welcomingText.x-t.width/2,-5)},e.prototype.initClue=function(){var t=Ut.i.getString("dailyChallengeClueLabel","Clue");ee.text(0,0,t+" "+this.gc.objectives.challengeClue+"  ",{font:Ot.Fonts.font,fontSize:28,fill:"#5DE2FE"},this.backgroundSprite,new Phaser.Point(.5,.5)).addFontStyle("italic",t.length)},e.prototype.initCellsBackground=function(){this.cellsBackground=ee.nineSliceSprite(-this.gc.objectives.challengeWord.length/2*48,30,bt.ImagesMain.Frames.CluePanel,50*this.gc.objectives.challengeWord.length,130,{top:26,bottom:37,left:25,right:37},null,this.backgroundSprite)},e.prototype.initCells=function(){for(var t,e=0;e<this.gc.objectives.challengeWord.length;++e)t=new qe({x:1.03*e-this.gc.objectives.challengeWord.length/2+.97,y:2.55,number:void 0,solution:this.gc.objectives.challengeWord.charAt(e).toUpperCase()},new Phaser.Point(1,1),new Phaser.Point(1,1),this),this.backgroundSprite.addChild(t),t.inputEnableChildren=!0,t.onClick.add(this.handleCellClick.bind(this,t),this),this.gc.mysteryClueData.openLettersIndexes.indexOf(e)>-1&&(t.writeCorrectLetter(this.gc.objectives.challengeWord.charAt(e).toUpperCase(),"#00B400"),t.check()),this.cells.push(t);this.choosedCell=this.cells[0],this.choosedCell.state=ue.CHOOSED},e.prototype.initButtons=function(){this.solveButton=ee.button(Ot.Buttons.solveViewButton,this.handleSolveClick,this,this.backgroundSprite),this.solveButton.scale.set(.7,.7),this.solveButton.setLabelColor("#ffffff"),this.solveButton.position.set(-30,this.backgroundSprite.height/2-120),this.solveButton.enabled=this.cells.every(function(t){return!t.isEmpty()}),this.closeButton=ee.button(Ot.Buttons.MysteryClueCloseButton,this.handleCloseButtonClick,this,this.backgroundSprite),this.closeButton.position.set(380,-280),this.keyboardButton=this.keyboardButton=ee.button(Ot.Buttons.KeyboardButton,this.handleKeyboardButtonClick,this,this.backgroundBottom),this.keyboardButton.position.set(375,0),this.keyboardButton.setLabelColor("#ffffff")},e.prototype.initKeyboard=function(){this.keyboard=new Ne(this.gc,this),this.keyboard.visible=!1,this.keyboard.onKeyClick.add(this.handleKeyboardKeyClick,this),this.keyboard.position.set(380,790)},e.prototype.updateCells=function(t){var e=this;t.forEach(function(t,i){var n=e.cells[i];t.cellText&&n.userInputLetter!==n.solution&&n.writeCorrectLetter(t.cellText,"#00B400")})},e.prototype.handleSolveClick=function(){if(this.solveButton.enabled){Rt.i.playPopupShow();var t=this.solveButton.worldPosition.x+this.solveButton.width/2,e=this.backgroundSprite.worldPosition.y+270;this.cells.every(function(t){return t.userInputLetter===t.solution})?(this.cells.forEach(function(t){return t.check()}),this.handleDailyChallengeWin()):(Rt.i.playWrongGuess(),this.gc.mysteryClueData.strikesLeft--,this.gc.mysteryClueData.strikesLeft<=0?(this.confirmPopup=new ni(t,e,this.gc),this.confirmPopup.showPopup()):this.updateStrikesLeft())}},e.prototype.handleDailyChallengeWin=function(){var t=this,e=Math.min(this.initialTries-this.gc.mysteryClueData.strikesLeft,this.strikes.length-1),i=ee.sprite(0,0,oi.IconsSolve,this);i.tint=46080,i.anchor.set(.5,.5),i.scale.set(0,0),re.i.startTriesAnimation(i),this.strikes[e].addChild(i),re.i.startDailyChallengeCompleteAnimation().addOnce(function(){return t.gc.onSolveViewHide.dispatch(!0)},this)},e.prototype.updateStrikesLeft=function(){for(var t=0;t<this.initialTries-this.gc.mysteryClueData.strikesLeft;++t){var e=ee.sprite(0,0,oi.StrikeBad,this);e.anchor.set(.5,.5),t===this.initialTries-this.gc.mysteryClueData.strikesLeft-1&&(e.scale.set(0,0),re.i.startTriesAnimation(e)),this.strikes[t].addChild(e)}},e.prototype.handleCloseButtonClick=function(){Rt.i.playPopupShow(),this.hide(),this.gc.solveButtonClicked=!1},e.prototype.emptyChoosedCell=function(){this.choosedCell.removeLetter(),this.jumpToPrevNotResolvedCell()},e.prototype.jumpToPreviousCell=function(){var t=this.cells.indexOf(this.choosedCell);this.choosedCell.state=ue.FREE,this.choosedCell=this.cells[t-1]?this.cells[t-1]:this.cells[t],this.choosedCell.state=ue.CHOOSED},e.prototype.jumpToPrevNotResolvedCell=function(){var t=this.cells.indexOf(this.choosedCell);if(0!==t){var e=this.cells.filter(function(e,i){return e.checkedState!==de.Correct&&i<t});this.choosedCell.state=ue.FREE,this.choosedCell=e[e.length-1]||this.choosedCell,this.choosedCell.state=ue.CHOOSED}},e.prototype.jumpToNextCell=function(){var t=this.cells.indexOf(this.choosedCell);this.choosedCell.state=ue.FREE,this.choosedCell=this.cells[t+1]?this.cells[t+1]:this.cells[t],this.choosedCell.state=ue.CHOOSED},e.prototype.handleCellClick=function(t){this.choosedCell.state=ue.FREE,this.choosedCell=t,this.choosedCell.state=ue.FREE,this.choosedCell.state=ue.CHOOSED,this.solveButton.enabled=this.cells.every(function(t){return!t.isEmpty()})},e.prototype.attachListeners=function(){this.gc.onKeyPress.add(this.handleKeyPressed,this),this.gc.onKeyboardClose.add(this.handleKeyBoardClose,this),this.gc.confirmPopupShow.add(this.handleConfirmPopupShow,this),re.i.onDailyChallengeComplete.add(this.hide,this)},e.prototype.handleKeyboardButtonClick=function(){this.confirmPopup&&this.confirmPopup.isVisible||(Rt.i.playPopupShow(),this.keyboard.show(),this.keyboardButton.visible=!1)},e.prototype.handleKeyboardKeyClick=function(t){this.gc.keyboardKeyClicked(t)},e.prototype.handleKeyBoardClose=function(){this.keyboardButton.visible=!0},e.prototype.hide=function(t){this.keyboard.visible&&this.keyboard.hide();var e=this.game.add.tween(this.mysteryClueGroup);e.to({alpha:0},500,null,!0),e.onUpdateCallback(this.handleHideAnimationUpdate,this),e.onComplete.add(this.handleHideAnimationComplete,this,null,t),Object(jt.isNullOrUndefined)(t)&&this.gc.onSolveViewHide.dispatch()},e.prototype.handleShowAnimationUpdate=function(t,e){this.mysteryClueGroup.scale.set(e,e),this.mysteryClueGroup.y=390*e},e.prototype.handleHideAnimationUpdate=function(t,e){this.mysteryClueGroup.scale.set(1-e,1-e),this.mysteryClueGroup.y=405-390*e},e.prototype.handleShowAnimationComplete=function(){this.mysteryClueGroup.scale.set(1,1),this.mysteryClueGroup.y=390},e.prototype.handleHideAnimationComplete=function(t,e,i){this.mysteryClueGroup.scale.set(0,0),this.mysteryClueGroup.y=0,this._maskLayer.inputEnabled=!1,this._maskLayer.visible=!1,Object(jt.isNullOrUndefined)(i)||this.gc.handleDailyChallengeEnd(i)},e.prototype.handleConfirmPopupShow=function(t,e){if(this.solveButton.enabled=!t,this.closeButton.enabled=!t,this.keyboardButton.enabled=!t,e){var i=ee.sprite(0,0,oi.StrikeBad,this);i.anchor.set(.5,.5),i.scale.set(0,0),re.i.startTriesAnimation(i),this.strikes[this.strikes.length-1].addChild(i)}},e}(Phaser.Group),si=function(t){function e(e,i,n){var o=t.call(this,i,n)||this;return o.difficulty=e,re.i.initialize(),o.initMysteryClue(),o.attachDailyChallengeListeners(),o.checkPositions(),o.initSolveView(),o.handleMobileLayout(),o}return Object(st.__extends)(e,t),e.prototype.destroy=function(){Ge.i.destroy(),this.gc.destroy(),t.prototype.destroy.call(this)},e.prototype.show=function(){this.gc.startTime=Date.now(),this.animateAll()},e.prototype.initPuzzleInfo=function(){this.dailyPuzzleInfo=new $e(this.gc,this,this.puzzleName),this.dailyPuzzleInfo.position.set(500,30),this.dailyPuzzleInfo.alpha=.15},e.prototype.initDailyChallengeTutorial=function(){Ge.i.tutorialSeen||(this.sendTutorialStartMessage(),this.gc.showMysteryClueTutorial=!0,Ge.i.initialize(this.gc,this.game),Ge.i.tutorialSeen=!0,this.gc.onDailyChallengeTutorialFirstStep.dispatch())},e.prototype.initButtons=function(){var t=Ut.i.getString("checkWordTooltip","tooltip");this.checkButton=ee.button(Ot.Buttons.CheckWordDailyChallenge,this.handleCheckWordClick,this,this),ie.i.addElement(this.checkButton,t,Vt.Click),this.checkButton.enabled=!1,this.keyboardButton=ee.button(Ot.Buttons.KeyboardButtonDailyChallenge,this.handleKeyboardButtonClick,this,this),this.zoomButton=ee.button(Ot.Buttons.ZoomButtonDailyChallenge,this.handleZoomClick,this,this),this.pencilButton=ee.pinButton(Ot.Buttons.PencilButton,this.handlePencilClick,this,this),this.optionsButton=ee.button(Ot.Buttons.OptionsButton,this.handleOptionsClick,this,this),this.restartButton=ee.button(Ot.Buttons.RestartButton,this.handleRestartClick,this,this),this.checkButton.alpha=0,this.keyboardButton.alpha=0,this.zoomButton.alpha=0,this.pencilButton.alpha=0,this.optionsButton.alpha=.15,this.restartButton.alpha=.15},e.prototype.initClueBoard=function(){this.clueBoard=new Ye(this.gc,this),this.clueBoard.alpha=0},e.prototype.initBoard=function(){this.board=new ei(this.gc,this),this.board.activateFirstCell(),this.board.alpha=0},e.prototype.attachDailyChallengeListeners=function(){this.mysteryClue.onSolveClick.add(this.handleSolveButtonClick,this),this.gc.onDailyChallengeTutorialFirstStep.addOnce(this.handleTutorialFirstStep,this),this.gc.onDailyChallengeTutorialThirdStep.addOnce(this.handleTutorialThirdStep,this),this.gc.onDailyChallengeTutorialSecondStep.addOnce(this.handleTutorialSecondStep,this),this.gc.onTutorialFinish.add(this.handleDailyChallengeTutorialFinish,this),this.gc.onKeyPress.add(this.handleKeyPressed,this),this.gc.onWordSelect.add(this.handleWordSelect,this),this.gc.onDailyChallengeWordDecline.add(this.startScoreAnimation,this),this.gc.onPencilEnabledStateChanged.add(this.handlePencilEnabledStateChange,this),this.gc.onSolveViewHide.add(this.showBackgroundElements,this),re.i.onDailyChallengeHideAll.add(this.handleDailyChallengeHideAll,this)},e.prototype.changeButtonsState=function(t){this.keyboardButton.enabled=t,this.zoomButton.enabled=t,this.checkButton.enabled=t},e.prototype.animateAll=function(){this.board.alpha=1,this.clueBoard.alpha=1,this.pencilButton.alpha=1,this.optionsButton.alpha=1,this.checkButton.alpha=1,this.zoomButton.alpha=1,this.keyboardButton.alpha=1,this.restartButton.alpha=1,this.dailyPuzzleInfo.alpha=1,this.mysteryClue.alpha=1,this.initDailyChallengeTutorial()},e.prototype.handleDailyChallengeTutorialFinish=function(){this.gc.messageService.sendMessageToWrapper({action:"tutorialDone"}),this.game.input.enabled=!0,this.checkButton.enabled=!1},e.prototype.handleCheckWordClick=function(){this.checkButton.enabled&&(Rt.i.playValidate(),this.board.checkWord(),this.checkButton.enabled=!1)},e.prototype.handleKeyPressed=function(){var t=this.board.getBoardActionsInfo();this.checkButton.enabled=t.canCheckWord},e.prototype.handleKeyboardClose=function(){var t=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;this.changeClueBoardHeight(),this._isExpanded&&(this.pencilButton.position.set(t.dailyChallengeExpanded.pencilButtonX,t.dailyChallengeExpanded.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeExpanded.zoomButtonX,t.dailyChallengeExpanded.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeExpanded.optionsButtonX,t.dailyChallengeExpanded.optionsButtonY))},e.prototype.changeClueBoardHeight=function(){if(this.game.device.desktop)this.keyboard.visible&&this._isExpanded?this.gc.handleClueBoardHeightChange(250):this.keyboard.visible&&!this._isExpanded?this.gc.handleClueBoardHeightChange(315):!this.keyboard.visible&&this._isExpanded?this.gc.handleClueBoardHeightChange(400):this.keyboard.visible||this._isExpanded||this.gc.handleClueBoardHeightChange(450);else{var t=window.innerWidth,e=window.innerHeight;this.gc.handleClueBoardHeightChange(e>t?190:500)}},e.prototype.handleKeyboardButtonClick=function(){var t=Xt.i.isRightHanded()?Ot.Handed.RightHanded:Ot.Handed.LeftHanded;Rt.i.playPopupShow(),this.keyboard.show(),this.changeClueBoardHeight(),this._isExpanded&&(this.pencilButton.position.set(t.dailyChallengeKeyboardVisible.pencilButtonX,t.dailyChallengeKeyboardVisible.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeKeyboardVisible.zoomButtonX,t.dailyChallengeKeyboardVisible.zoomButtonY),this.hintButton&&this.hintButton.position.set(t.dailyChallengeKeyboardVisible.hintButtonX,t.dailyChallengeKeyboardVisible.hintButtonY),this.optionsButton.position.set(t.dailyChallengeKeyboardVisible.optionsButtonX,t.dailyChallengeKeyboardVisible.optionsButtonY))},e.prototype.setExpandedPositions=function(t){this.dailyPuzzleInfo.position.set(t.dailyChallengeExpanded.puzzleInfoX,30),this.board.x=t.expanded.boardX,this.board.y=t.expanded.boardY,this.board.scale.set(t.expanded.boardScaleX,t.expanded.boardScaleY),this.restartButton.position.set(t.dailyChallengeExpanded.restartButtonX,60),this.checkButton.position.set(t.dailyChallengeExpanded.wordCheckButtonX,60),this.keyboardButton.y=t.dailyChallengeExpanded.keyboardButtonY,this.keyboard.position.set(t.dailyChallenge.keyboardX,t.dailyChallenge.keyboardY),this.keyboard.visible?(this.pencilButton.position.set(t.dailyChallengeKeyboardVisible.pencilButtonX,t.dailyChallengeKeyboardVisible.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeKeyboardVisible.zoomButtonX,t.dailyChallengeKeyboardVisible.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeKeyboardVisible.optionsButtonX,t.dailyChallengeKeyboardVisible.optionsButtonY)):(this.pencilButton.position.set(t.dailyChallengeExpanded.pencilButtonX,t.dailyChallengeExpanded.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeExpanded.zoomButtonX,t.dailyChallengeExpanded.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeExpanded.optionsButtonX,t.dailyChallengeExpanded.optionsButtonY))},e.prototype.setDefaultPositions=function(t){this.dailyPuzzleInfo.position.set(500,30),this.board.x=t.default.boardX,this.board.y=t.default.boardY,this.board.scale.set(t.default.boardScaleX,t.default.boardScaleY),this.pencilButton.position.set(t.dailyChallenge.pencilButtonX,t.dailyChallenge.pencilButtonY),this.zoomButton.position.set(t.dailyChallenge.zoomButtonX,t.dailyChallenge.zoomButtonY),this.optionsButton.position.set(t.default.optionsButtonX,t.default.optionsButtonY),this.restartButton.position.set(1200,60),this.checkButton.position.set(t.dailyChallenge.wordCheckButtonX,t.dailyChallenge.wordCheckButtonY),this.keyboard.position.set(t.dailyChallenge.keyboardX,t.dailyChallenge.keyboardY),this.keyboardButton.y=t.dailyChallenge.keyboardButtonY},e.prototype.checkExpandedPositions=function(t){this.clueBoard.position.set(t.default.clueBoardX,310),this.mysteryClue&&this.mysteryClue.position.set(t.default.clueBoardX,197),this.dailyPuzzleInfo.position.set(t.dailyChallengeExpanded.puzzleInfoX,30),this.board.x=t.expanded.boardX,this.board.y=t.expanded.boardY,this.pencilButton.position.set(t.dailyChallengeExpanded.pencilButtonX,t.dailyChallengeExpanded.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeExpanded.zoomButtonX,t.dailyChallengeExpanded.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeExpanded.optionsButtonX,t.dailyChallengeExpanded.optionsButtonY),this.restartButton.position.set(t.dailyChallengeExpanded.restartButtonX,60),this.checkButton.position.set(t.dailyChallengeExpanded.wordCheckButtonX,60),this.keyboardButton.position.set(t.dailyChallenge.keyboardButtonX,t.dailyChallenge.keyboardButtonY),this.keyboard.position.set(t.dailyChallenge.keyboardX,t.dailyChallenge.keyboardY),this.keyboard.visible?(this.pencilButton.position.set(t.dailyChallengeKeyboardVisible.pencilButtonX,t.dailyChallengeKeyboardVisible.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeKeyboardVisible.zoomButtonX,t.dailyChallengeKeyboardVisible.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeKeyboardVisible.optionsButtonX,t.dailyChallengeKeyboardVisible.optionsButtonY)):(this.pencilButton.position.set(t.dailyChallengeExpanded.pencilButtonX,t.dailyChallengeExpanded.pencilButtonY),this.zoomButton.position.set(t.dailyChallengeExpanded.zoomButtonX,t.dailyChallengeExpanded.zoomButtonY),this.optionsButton.position.set(t.dailyChallengeExpanded.optionsButtonX,t.dailyChallengeExpanded.optionsButtonY))},e.prototype.checkDefaultPositions=function(t){this.clueBoard.position.set(t.default.clueBoardX,310),this.board.position.set(t.default.boardX,197),this.mysteryClue&&this.mysteryClue.position.set(t.default.clueBoardX,197),this.pencilButton.position.set(t.dailyChallenge.pencilButtonX,t.dailyChallenge.pencilButtonY),this.zoomButton.position.set(t.dailyChallenge.zoomButtonX,t.dailyChallenge.zoomButtonY),this.optionsButton.position.set(t.default.optionsButtonX,t.default.optionsButtonY),this.keyboardButton.x=t.default.keyboardButtonX,this.keyboard.position.x=t.default.keyboardX,this.keyboard.position.y=t.default.keyboardY,this.checkButton.position.set(t.dailyChallenge.wordCheckButtonX,t.dailyChallenge.wordCheckButtonY),this.keyboardButton.position.set(t.dailyChallenge.keyboardButtonX,t.dailyChallenge.keyboardButtonY),this.keyboard.position.set(t.dailyChallenge.keyboardX,t.dailyChallenge.keyboardY)},e.prototype.handleHotKeyPress=function(t){switch(t){case be.ToggleChecks:this.handleCheckWordClick();break;case be.AdjustZoom:this.handleZoomClick();break;case be.TogglePencilMode:this.handleHotKeyPencilClick();break;case be.ToggleGridSize:this.checkPositions(),this.changeClueBoardHeight();break;case be.Options:this.handleOptionsClick();break;case be.ToggleKeyboard:this.keyboard.visible?this.keyboard.hide():this.keyboard.show()}},e.prototype.handleHotKeyPencilClick=function(){this.pencilButton.emulateClick()},e.prototype.handlePuzzleExit=function(){Rt.i.stopBackgroundMusic(),this.gc.handlePuzzleExit(null,null)},e.prototype.handleRestartClick=function(){Rt.i.playPopupShow(),this.handleGameAction("restart")},e.prototype.initMysteryClue=function(){this.mysteryClue=new Je(this.gc,this),this.mysteryClue.alpha=0},e.prototype.initSolveView=function(){this.solveView=new ri(this.game,this,this.gc),this.solveView.position.set(725-this.solveView.width/2,0),this.solveView.visible=!1},e.prototype.handleSolveButtonClick=function(){this.gc.solveButtonClicked=!0,this.solveView.visible=!0;var t=this.mysteryClue.getCellsData();this.solveView.show(t),this.hideBackgroundElements()},e.prototype.handleTutorialFirstStep=function(){Ge.i.showPopup(this.x+this.width/2,this.y+this.height-500)},e.prototype.handleTutorialThirdStep=function(){Ge.i.showPopup(this.x+this.width/2,this.y+this.height-500)},e.prototype.handleTutorialSecondStep=function(){Ge.i.showPopup(this.x+this.width/2,this.y+this.height-400)},e.prototype.handleWordSelect=function(){var t=this.board.getBoardActionsInfo();this.checkButton.enabled=t.canCheckWord},e.prototype.handlePencilEnabledStateChange=function(t){this.checkButton.enabled=t},e.prototype.handleDailyChallengeHideAll=function(t){this.keyboard.visible=!1,this.changeClueBoardHeight();var e=[re.i.hide(this.board),re.i.hide(this.clueBoard),re.i.hide(this.keyboardButton),re.i.hide(this.zoomButton),re.i.hide(this.checkButton),re.i.hide(this.pencilButton),re.i.hide(this.mysteryClue)];this._isExpanded&&e.push(re.i.hide(this.optionsButton)),qt.Tween.all(e,function(){re.i.onDailyChallengeComplete.dispatch(t),Rt.i.stopBackgroundMusic()},this)},e.prototype.startScoreAnimation=function(t){re.i.showScoreAnimation(t,this.dailyPuzzleInfo.labelPosition)},e.prototype.hideBackgroundElements=function(){re.i.showBackgroundDisappearAnimation(this.dailyPuzzleInfo),re.i.showBackgroundDisappearAnimation(this.board),re.i.showBackgroundDisappearAnimation(this.clueBoard),re.i.showBackgroundDisappearAnimation(this.mysteryClue),re.i.showBackgroundDisappearAnimation(this.pencilButton),re.i.showBackgroundDisappearAnimation(this.zoomButton),re.i.showBackgroundDisappearAnimation(this.checkButton),re.i.showBackgroundDisappearAnimation(this.keyboardButton),re.i.showBackgroundDisappearAnimation(this.optionsButton),re.i.showBackgroundDisappearAnimation(this.restartButton),this.keyboard.visible&&re.i.showBackgroundDisappearAnimation(this.keyboard)},e.prototype.showBackgroundElements=function(t){var e=[re.i.showBackgroundAppearAnimation(this.dailyPuzzleInfo),re.i.showBackgroundAppearAnimation(this.board),re.i.showBackgroundAppearAnimation(this.clueBoard),re.i.showBackgroundAppearAnimation(this.mysteryClue),re.i.showBackgroundAppearAnimation(this.pencilButton),re.i.showBackgroundAppearAnimation(this.zoomButton),re.i.showBackgroundAppearAnimation(this.checkButton),re.i.showBackgroundAppearAnimation(this.keyboardButton),re.i.showBackgroundAppearAnimation(this.optionsButton),re.i.showBackgroundAppearAnimation(this.restartButton)];this.keyboard.visible&&e.push(re.i.showBackgroundAppearAnimation(this.keyboard)),Object(jt.isNullOrUndefined)(t)||qt.Tween.all(e,function(){re.i.onDailyChallengeHideAll.dispatch(t)})},e.prototype.handleMobileLayout=function(){if(t.prototype.handleMobileLayout.call(this),this.game&&!this.game.device.desktop){var e=window.innerWidth,i=window.innerHeight>e;this.changeClueBoardHeight(),i?(this.board.x=5,this.board.y=5,this.board.scale.set(2.3,.85),this.clueBoard.scale.set(1.9,1.2),this.clueBoard.x=150,this.clueBoard.y=550,this.restartButton&&(this.restartButton.x=20,this.restartButton.y=570,this.restartButton.showLabel(!1),this.restartButton.scale.set(1.5,1.1)),this.zoomButton&&(this.zoomButton.x=200,this.zoomButton.y=570,this.zoomButton.showLabel(!1),this.zoomButton.scale.set(1.5,1.1)),this.checkButton&&(this.checkButton.x=380,this.checkButton.y=570,this.checkButton.showLabel(!1),this.checkButton.scale.set(1.5,1.1)),this.mysteryClue.scale.set(1,.8),this.mysteryClue.y=570,this.mysteryClue.x=750):(this.board.x=30,this.board.y=0,this.board.scale.set(1.6,1.15),this.clueBoard.scale.set(1.5,1.2),this.clueBoard.x=1250,this.clueBoard.y=155,this.restartButton&&(this.restartButton.x=1080,this.restartButton.y=325,this.restartButton.showLabel(!1),this.restartButton.scale.set(1.5,1.5)),this.zoomButton&&(this.zoomButton.x=1080,this.zoomButton.y=575,this.zoomButton.scale.set(1.5,1.5)),this.checkButton&&(this.checkButton.x=1080,this.checkButton.y=75,this.checkButton.showLabel(!1),this.checkButton.scale.set(1.5,1.5)),this.mysteryClue.scale.set(1.1,1.45),this.mysteryClue.y=0,this.mysteryClue.x=1500)}},e}(Xe),ai=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(st.__extends)(e,t),e.prototype.init=function(t,e,i,n,o){this.difficulty=t,this.puzzleName=i,this.gameMode=n,this.difficultySettings=o,this.messageService=e,this.messageService.wrapperMessage$.pipe(Object(Et.a)(this.messageService.destroy$)).subscribe(this.handleOnMessage.bind(this))},e.prototype.update=function(){ie.i.update()},e.prototype.create=function(){Be.instance.initialize(),this.showGameScreen()},e.prototype.showGameScreen=function(){var t;this.currentScreen&&this.destroyCurrentScreen(),t=new si(this.difficulty,new Ce(this.gameMode,this.messageService,this.difficulty,this.difficultySettings),this.puzzleName),this.currentScreen=t,this.game.world.add(t),Rt.i.playDailyChallengeBackgroundMusic()},e.prototype.destroyCurrentScreen=function(){this.currentScreen.destroy(),this.currentScreen=null},e}(Re),li=at.a.crossword,hi=li.defaultGameWidth,ui=li.defaultGameHeight;if("USER_SCALE"===li.scaleMode){var ci=ut.calculateScreenMetrics(hi,ui);hi=ci.gameWidth,ui=ci.gameHeight}var di={width:hi,height:ui,renderer:Phaser.CANVAS,transparent:!0,parent:"gameContainer",resolution:1},pi=function(t){function e(e){var i=t.call(this,di)||this;return ee.initialize(i),window.game=i,i.state.add("boot",Tt),i.state.add("preloader",le),i.state.add("game",Ue),i.state.add("daily-challenge",ai),i.state.start("boot",!1,!1,e),i}return Object(st.__extends)(e,t),e}(Phaser.Game),gi=i("o5E4"),fi=function(){function t(t,e,i){this.gameManager=t,this.messageService=e,this.changeDetectorRef=i,this.frameId="game"}return t.prototype.ngOnInit=function(t){this.gameManager.init(gi.a.Crosswords,this.frameId,this,t),this.isDC=this.gameManager.isDC,this.messageService.setUnsubscribeSubject(this.gameManager.ngUnsubscribe),this.attachListeners(),this.gameBackground=this.gameManager.initGameBackground(),this.destroyGame(),this.gameRef=new pi(this.messageService)},t.prototype.ngOnDestroy=function(){this.gameManager.onDestroy(),this.destroyGame(),this.gameRef=null,this.gameSrc=null,this.goalText=null,this.showGoalBar=!1,this.isDC=!1},t.prototype.destroyGame=function(){if(this.gameRef){Rt.i.destroy(),Gt.instance.destroy(),Xt.i.destroy(),Ut.i.destroy(),ie.i.destroy();var t=document.getElementsByTagName("canvas")[0];this.gameRef.destroy(),Phaser.CanvasPool.removeByCanvas(t),this.gameRef=null,delete window.game}},t.prototype.attachListeners=function(){var t=this;this.gameManager.onGoalTextInit.subscribe(function(e){t.goalText=e,t.changeDetectorRef.markForCheck()}),this.gameManager.onBackgroundInit.subscribe(function(e){t.gameBackground=e}),this.gameManager.onShowGoalBar.subscribe(function(){t.showGoalBar=!0,t.changeDetectorRef.markForCheck()}),this.gameManager.onGameReload.subscribe(function(e){t.showGoalBar=!1,t.goalText="",t.ngOnInit(e)})},t}(),yi=n["\u0275crt"]({encapsulation:0,styles:[['[_nghost-%COMP%]{overflow:hidden;width:100%;height:100%}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]{position:absolute;bottom:0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;color:#fff;width:100vw}@-webkit-keyframes css{0%,40%{opacity:1}100%{opacity:0;visibility:hidden}}@keyframes css{0%,40%{opacity:1}100%{opacity:0;visibility:hidden}}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:auto 1rem auto 4rem;font-size:1.75rem;text-align:right;white-space:nowrap}@media only screen and (max-width:850px),(max-height:600px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]{-webkit-animation:5s forwards css;animation:5s forwards css}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:3rem;font-size:1.5rem;margin-right:.5rem;line-height:2.5rem}}@media only screen and (max-width:600px),(max-height:400px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:1rem;font-size:1.15rem;line-height:2rem}}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:auto 1rem auto 0;padding:0;width:1.5rem;min-width:1.5rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{margin:auto auto auto 0;padding:.25rem 0 .25rem 1rem;font-size:1.75rem;line-height:1.75rem;border-left:3px solid #fff}@media only screen and (max-width:850px),(max-height:600px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.25rem;min-width:1.25rem}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.5rem;line-height:1.5rem;border-left:2px solid #fff}}@media only screen and (max-width:600px),(max-height:400px){[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1rem;min-width:1rem}[_nghost-%COMP%]   .goal-text[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%]{font-size:1.15rem;line-height:1.15rem}}[_nghost-%COMP%]   .goal-text.crossword[_ngcontent-%COMP%]{background:#1a534c;background:-webkit-gradient(linear,left top,left bottom,from(#1a534c),to(#1c5c54));background:linear-gradient(to bottom,#1a534c 0,#1c5c54 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#1a534c", endColorstr="#1c5c54", GradientType=0)}[_nghost-%COMP%]   .game-container[_ngcontent-%COMP%]{height:100%;width:100%;background-position-x:center!important;background-position-y:center!important;background-size:cover!important;background-repeat-x:no-repeat!important;background-repeat-y:no-repeat!important;background-attachment:fixed!important}[_nghost-%COMP%]   #ftueBlocker[_ngcontent-%COMP%]{box-sizing:content-box;position:fixed;border-left:100vw solid #000;border-right:100vw solid #000;border-top:100vh solid #000;border-bottom:100vh solid #000;opacity:.8;display:none;pointer-events:none}[_nghost-%COMP%]   #innerRadius[_ngcontent-%COMP%]{position:relative;width:calc(100% + 30px);height:calc(100% + 30px);border:20px solid #000;border-radius:30px;left:-10px;top:-10px}[_nghost-%COMP%]   #popupContainer[_ngcontent-%COMP%]{display:none;background:-webkit-gradient(linear,left top,left bottom,from(#007fb4),to(#006189));background:linear-gradient(#007fb4,#006189);border-radius:10px;box-shadow:20px 20px 10px rgba(0,0,0,.3)}[_nghost-%COMP%]   .arrow-image[_ngcontent-%COMP%]{position:fixed;pointer-events:none}[_nghost-%COMP%]   #popupText[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .strokedWord[_ngcontent-%COMP%]{position:relative;font-weight:900;color:#ffe100}[_nghost-%COMP%]   #popupBtn[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   #skipBtn[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   #ftueHand[_ngcontent-%COMP%]{height:512px;width:512px;display:-webkit-box;display:flex;-webkit-animation-timing-function:linear;animation-timing-function:linear;pointer-events:none;visibility:hidden}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;border:none;font-size:2.2em;color:#fff;background-repeat:no-repeat}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:0}[_nghost-%COMP%]   .next[_ngcontent-%COMP%]{width:190px;height:90px;background-image:url(btn-blue.5257bad257ccfb1ffd80.png);padding-bottom:15px}[_nghost-%COMP%]   .next[_ngcontent-%COMP%]:active{width:190px;height:90px;background-image:url(btn-blue-down.8f49152a10fa19733409.png);padding-bottom:10px}[_nghost-%COMP%]   .skip[_ngcontent-%COMP%]{width:229px;height:90px;background-image:url(btn-red.1a58d35878217d60c22e.png);padding-bottom:15px;padding-right:35px}[_nghost-%COMP%]   .skip[_ngcontent-%COMP%]:active{width:229px;height:90px;background-image:url(btn-red-down.cd8e4d179ba724abf03e.png);padding-bottom:10px;padding-right:35px}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]{cursor:pointer;background:#4c74b4;background:-webkit-gradient(linear,left top,left bottom,from(#4c74b4),to(#5d94c1));background:linear-gradient(to bottom,#4c74b4 0,#5d94c1 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#4c74b4", endColorstr="#5d94c1", GradientType=0);border:0;color:#fff;position:relative;border-radius:50vw;border:none;height:3.2vw;width:7.5vw;outline:inherit;font-size:1.45vw;padding:initial}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]:active{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:50% 50% 0;transform-origin:50% 50% 0}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]:active::before{box-shadow:inset .2vw .4vw 2vw 0 rgba(0,0,0,.75)}[_nghost-%COMP%]   .ui-button[_ngcontent-%COMP%]::before{background:#7ec5d4;background:-webkit-gradient(linear,left top,left bottom,from(#7ec5d4),to(#44679d));background:linear-gradient(to bottom,#7ec5d4 0,#44679d 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#7ec5d4", endColorstr="#44679d", GradientType=0);display:block;content:"";z-index:-1;position:absolute;left:-.3vw;top:-.3vw;height:3.8vw;width:8.2vw;border-radius:40vw}[_nghost-%COMP%]   .ui-button.red[_ngcontent-%COMP%]::before{background:#c76849;background:-webkit-gradient(linear,left top,left bottom,from(#c76849),to(#6e2819));background:linear-gradient(to bottom,#c76849 0,#6e2819 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#c76849", endColorstr="#6e2819", GradientType=0)}[_nghost-%COMP%]   .ui-button.red[_ngcontent-%COMP%]{background:#87311d;background:-webkit-gradient(linear,left top,left bottom,from(#87311d),to(#bc482e));background:linear-gradient(to bottom,#87311d 0,#bc482e 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#87311d", endColorstr="#bc482e", GradientType=0)}[_nghost-%COMP%]   .next-button[_ngcontent-%COMP%]{float:right;margin-right:3vw;margin-bottom:1vw}@-webkit-keyframes yoyo{from{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translate(0,-1.5vw);transform:translate(0,-1.5vw)}}@keyframes yoyo{from{-webkit-transform:translate(0,0);transform:translate(0,0)}to{-webkit-transform:translate(0,-1.5vw);transform:translate(0,-1.5vw)}}.gameContainer[_ngcontent-%COMP%]{position:relative;top:0;bottom:0;left:0;right:0}#gameContainer[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.ftue-popup[_ngcontent-%COMP%]{color:#fff;font-size:1.5vw;z-index:1;border-radius:.7vw;background:#007daa;background:-webkit-gradient(linear,left top,left bottom,from(#007daa),to(#005f86));background:linear-gradient(to bottom,#007daa 0,#005f86 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="#007daa", endColorstr="#005f86", GradientType=0 );box-shadow:4px 4px 5px 0 rgba(50,50,50,.75)}.ftue-page[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.blocker[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;background:#000;opacity:.7;z-index:900}.ftue-container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto auto;padding:0 1rem;z-index:902}.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:45rem;max-width:100%;padding:1rem}.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1.5rem;padding:0 .25rem}@media only screen and (max-width:600px),(max-height:600px){.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1.25rem}}.flex-margin[_ngcontent-%COMP%]{margin:auto}.skip-button-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:1rem;margin-bottom:1rem;z-index:902}.ftue-reveal[_ngcontent-%COMP%]{z-index:901!important}.block-clicks[_ngcontent-%COMP%]{pointer-events:none}.ftue-button-wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;z-index:0}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:2.25rem;min-width:8rem;width:8rem;font-size:1.25rem;line-height:1.25rem;margin:1rem .6rem .3rem auto;white-space:normal}@media only screen and (max-width:600px),(max-height:600px){.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:2rem;min-width:6rem;width:7rem;font-size:1rem;line-height:1rem}}@media only screen and (max-width:400px),(max-height:500px){.ftue-container[_ngcontent-%COMP%]   .ftue-popup[_ngcontent-%COMP%]   .ftue-text[_ngcontent-%COMP%]{font-size:1rem}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]{height:1.75rem;min-width:6rem;width:6rem;font-size:1rem;line-height:1rem}}.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]::before{height:calc(100% + .7rem);width:calc(100% + .7rem);left:-.35rem;top:-.35rem}@media only screen and (max-width:600px),(max-height:600px){.ftue-button-wrapper[_ngcontent-%COMP%]   .ftue-button[_ngcontent-%COMP%]::before{height:calc(100% + .6rem);width:calc(100% + .6rem);left:-.3rem;top:-.3rem}}']],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translate(0, 100%)"},offset:null},{type:4,styles:null,timings:"300ms 500ms"}],options:null}],options:{}}]}});function mi(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,6,"div",[["class","goal-text crossword"],["id","hide-after-4-sec"]],[[24,"@show",0]],null,null,null,null)),(t()(),n["\u0275eld"](1,0,null,null,2,"div",[["class","title"]],null,null,null,null,null)),(t()(),n["\u0275ted"](2,null,["",""])),n["\u0275pid"](131072,F.j,[F.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](4,0,null,null,0,"div",[["class","icon games-icons-crossword-big"]],null,null,null,null,null)),(t()(),n["\u0275eld"](5,0,null,null,1,"div",[["class","goal"]],null,null,null,null,null)),(t()(),n["\u0275eld"](6,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){var i=e.component;t(e,0,0,void 0),t(e,2,0,n["\u0275unv"](e,2,0,n["\u0275nov"](e,3).transform("goal"))),t(e,6,0,i.goalText)})}function bi(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,15,"div",[["class","ftue-0 ftue-page"]],null,null,null,null,null)),(t()(),n["\u0275eld"](1,0,null,null,0,"div",[["class","flex-margin"]],null,null,null,null,null)),(t()(),n["\u0275eld"](2,0,null,null,0,"div",[["class","flex-margin"]],null,null,null,null,null)),(t()(),n["\u0275eld"](3,0,null,null,6,"div",[["class","ftue-container"]],null,null,null,null,null)),(t()(),n["\u0275eld"](4,0,null,null,5,"div",[["class","ftue-popup"],["id","popupContainer"]],null,null,null,null,null)),(t()(),n["\u0275eld"](5,0,null,null,0,"div",[["class","ftue-text"],["id","popupText"]],null,null,null,null,null)),(t()(),n["\u0275eld"](6,0,null,null,3,"div",[["class","ftue-button-wrapper"]],null,null,null,null,null)),(t()(),n["\u0275eld"](7,0,null,null,2,"button",[["class","ftue-button ui-button blue"],["id","popupBtn"],["onkeyup","onclick()"]],null,null,null,null,null)),(t()(),n["\u0275ted"](8,null,["",""])),n["\u0275pid"](131072,F.j,[F.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](10,0,null,null,5,"div",[["class","skip-button-container"],["id","skip-container"]],null,null,null,null,null)),(t()(),n["\u0275eld"](11,0,null,null,4,"div",[["class","ftue-button-wrapper"]],null,null,null,null,null)),(t()(),n["\u0275eld"](12,0,null,null,3,"button",[["appClientLanguage",""],["class","ftue-button ui-button red"],["id","skipBtn"]],null,null,null,null,null)),n["\u0275did"](13,16384,null,0,E.a,[n.ElementRef,n.Renderer2,T.a],null,null),(t()(),n["\u0275ted"](14,null,["",""])),n["\u0275pid"](131072,F.j,[F.k,n.ChangeDetectorRef]),(t()(),n["\u0275eld"](16,0,null,null,6,"div",[["class","game-container"]],[[4,"background",null]],null,null,null,null)),(t()(),n["\u0275eld"](17,0,null,null,3,"div",[["allowfullscreen",""],["id","gameContainer"],["scrolling","no"]],null,null,null,null,null)),n["\u0275prd"](512,null,O["\u0275NgClassImpl"],O["\u0275NgClassR2Impl"],[n.IterableDiffers,n.KeyValueDiffers,n.ElementRef,n.Renderer2]),n["\u0275did"](19,278528,null,0,O.NgClass,[O["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),n["\u0275pod"](20,{"daily-challenge":0}),(t()(),n["\u0275eld"](21,0,null,null,1,"div",[["id","ftueBlocker"]],null,null,null,null,null)),(t()(),n["\u0275eld"](22,0,null,null,0,"div",[["id","innerRadius"]],null,null,null,null,null)),(t()(),n["\u0275and"](16777216,null,null,1,null,mi)),n["\u0275did"](24,16384,null,0,O.NgIf,[n.ViewContainerRef,n.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var i=e.component,n=t(e,20,0,i.isDC);t(e,19,0,n),t(e,24,0,i.goalText&&i.showGoalBar)},function(t,e){var i=e.component;t(e,8,0,n["\u0275unv"](e,8,0,n["\u0275nov"](e,9).transform("next"))),t(e,14,0,n["\u0275unv"](e,14,0,n["\u0275nov"](e,15).transform("skipBtn"))),t(e,16,0,i.gameBackground)})}function ki(t){return n["\u0275vid"](0,[(t()(),n["\u0275eld"](0,0,null,null,2,"app-crosswords-game",[],null,null,null,bi,yi)),n["\u0275prd"](512,null,A.a,A.a,[L.a,D.a,N.b,K.a,H.a,j.a,W.a,G.a,X.a,R.a,U.a,Y.a,V.a,q.a,Z.a,J.a,Q.a,$.a,tt.a,et.a,T.a,it.a,n.ChangeDetectorRef,nt.a,ot.a,rt.a]),n["\u0275did"](2,245760,null,0,fi,[A.a,W.a,n.ChangeDetectorRef],null,null)],function(t,e){t(e,2,0)},null)}var Ci=n["\u0275ccf"]("app-crosswords-game",fi,ki,{},{},[]),vi=i("ULXh"),wi=i("9lUn"),Bi=i("gIcY"),xi=i("008C"),Si=i("6aHO"),Pi=i("Fq6B"),_i=i("a6OJ"),Mi=i("iTUp"),zi=i("j1ZV"),Ii=i("nSrf");i.d(e,"WordGamesCrosswordModuleNgFactory",function(){return Fi});var Fi=n["\u0275cmf"](o,[],function(t){return n["\u0275mod"]([n["\u0275mpd"](512,n.ComponentFactoryResolver,n["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,s.a,a.a,l.a,h.a,u.a,c.a,d.a,p.a,g.a,f.a,y.a,m.a,b.a,k.a,C.a,v.a,w.a,B.a,x.a,S.a,P.a,_.a,M.a,z.a,I.a,Ci]],[3,n.ComponentFactoryResolver],n.NgModuleRef]),n["\u0275mpd"](4608,O.NgLocalization,O.NgLocaleLocalization,[n.LOCALE_ID,[2,O["\u0275angular_packages_common_common_a"]]]),n["\u0275mpd"](4608,vi.RoundProgressService,vi.RoundProgressService,[[2,O.DOCUMENT]]),n["\u0275mpd"](4608,wi.RoundProgressEase,wi.RoundProgressEase,[]),n["\u0275mpd"](4608,Bi.l,Bi.l,[]),n["\u0275mpd"](4608,xi.a,xi.a,[n.RendererFactory2,Si.a]),n["\u0275mpd"](1073742336,O.CommonModule,O.CommonModule,[]),n["\u0275mpd"](1073742336,L.o,L.o,[[2,L.t],[2,L.n]]),n["\u0275mpd"](1073742336,Pi.a,Pi.a,[]),n["\u0275mpd"](1073742336,_i.RoundProgressModule,_i.RoundProgressModule,[]),n["\u0275mpd"](1073742336,Bi.k,Bi.k,[]),n["\u0275mpd"](1073742336,Bi.d,Bi.d,[]),n["\u0275mpd"](1073742336,F.h,F.h,[]),n["\u0275mpd"](1073742336,Mi.a,Mi.a,[]),n["\u0275mpd"](1073742336,zi.a,zi.a,[]),n["\u0275mpd"](1073742336,o,o,[]),n["\u0275mpd"](256,Ii.ROUND_PROGRESS_DEFAULTS,Ii["\u02750"],[]),n["\u0275mpd"](1024,L.l,function(){return[[{path:":mode",component:fi}]]},[])])})},XlS6:function(t,e){var i=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=92)}([function(t,e,i){var n=i(2),o=i(25),r=i(10),s=i(17),a=i(13),l=function(t,e,i){var h,u,c,d,p=t&l.F,g=t&l.G,f=t&l.P,y=t&l.B,m=g?n:t&l.S?n[e]||(n[e]={}):(n[e]||{}).prototype,b=g?o:o[e]||(o[e]={}),k=b.prototype||(b.prototype={});for(h in g&&(i=e),i)c=((u=!p&&m&&void 0!==m[h])?m:i)[h],d=y&&u?a(c,n):f&&"function"==typeof c?a(Function.call,c):c,m&&s(m,h,c,t&l.U),b[h]!=c&&r(b,h,d),f&&k[h]!=c&&(k[h]=c)};n.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var n=i(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(54)("wks"),o=i(20),r=i(2).Symbol,s="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=s&&r[t]||(s?r:o)("Symbol."+t))}).store=n},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(3),o=i(69),r=i(36),s=Object.defineProperty;e.f=i(8)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(22),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,i){t.exports=!i(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(6),o=i(19);t.exports=i(8)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(51),o=i(23);t.exports=function(t){return n(o(t))}},function(t,e,i){var n=i(0),o=i(25),r=i(5);t.exports=function(t,e){var i=(o.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",s)}},function(t,e,i){var n=i(21);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(23);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";if(i(8)){var n=i(26),o=i(2),r=i(5),s=i(0),a=i(41),l=i(50),h=i(13),u=i(28),c=i(19),d=i(10),p=i(27),g=i(22),f=i(7),y=i(70),m=i(30),b=i(36),k=i(9),C=i(58),v=i(1),w=i(14),B=i(59),x=i(38),S=i(33),P=i(37).f,_=i(60),M=i(20),z=i(4),I=i(39),F=i(52),E=i(57),T=i(61),O=i(32),A=i(43),L=i(42),D=i(56),N=i(76),K=i(6),H=i(16),j=K.f,W=H.f,G=o.RangeError,X=o.TypeError,R=o.Uint8Array,U=Array.prototype,Y=l.ArrayBuffer,V=l.DataView,q=I(0),Z=I(2),J=I(3),Q=I(4),$=I(5),tt=I(6),et=F(!0),it=F(!1),nt=T.values,ot=T.keys,rt=T.entries,st=U.lastIndexOf,at=U.reduce,lt=U.reduceRight,ht=U.join,ut=U.sort,ct=U.slice,dt=U.toString,pt=U.toLocaleString,gt=z("iterator"),ft=z("toStringTag"),yt=M("typed_constructor"),mt=M("def_constructor"),bt=a.CONSTR,kt=a.TYPED,Ct=a.VIEW,vt=I(1,function(t,e){return Pt(E(t,t[mt]),e)}),wt=r(function(){return 1===new R(new Uint16Array([1]).buffer)[0]}),Bt=!!R&&!!R.prototype.set&&r(function(){new R(1).set({})}),xt=function(t,e){var i=g(t);if(i<0||i%e)throw G("Wrong offset!");return i},St=function(t){if(v(t)&&kt in t)return t;throw X(t+" is not a typed array!")},Pt=function(t,e){if(!(v(t)&&yt in t))throw X("It is not a typed array constructor!");return new t(e)},_t=function(t,e){return Mt(E(t,t[mt]),e)},Mt=function(t,e){for(var i=0,n=e.length,o=Pt(t,n);n>i;)o[i]=e[i++];return o},zt=function(t,e,i){j(t,e,{get:function(){return this._d[i]}})},It=function(t){var e,i,n,o,r,s,a=w(t),l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,d=_(a);if(null!=d&&!B(d)){for(s=d.call(a),n=[],e=0;!(r=s.next()).done;e++)n.push(r.value);a=n}for(c&&l>2&&(u=h(u,arguments[2],2)),e=0,i=f(a.length),o=Pt(this,i);i>e;e++)o[e]=c?u(a[e],e):a[e];return o},Ft=function(){for(var t=0,e=arguments.length,i=Pt(this,e);e>t;)i[t]=arguments[t++];return i},Et=!!R&&r(function(){pt.call(new R(1))}),Tt=function(){return pt.apply(Et?ct.call(St(this)):St(this),arguments)},Ot={copyWithin:function(t,e){return N.call(St(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(St(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(St(this),arguments)},filter:function(t){return _t(this,Z(St(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(St(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(St(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){q(St(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(St(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(St(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ht.apply(St(this),arguments)},lastIndexOf:function(t){return st.apply(St(this),arguments)},map:function(t){return vt(St(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(St(this),arguments)},reduceRight:function(t){return lt.apply(St(this),arguments)},reverse:function(){for(var t,e=this,i=St(e).length,n=Math.floor(i/2),o=0;o<n;)t=e[o],e[o++]=e[--i],e[i]=t;return e},some:function(t){return J(St(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ut.call(St(this),t)},subarray:function(t,e){var i=St(this),n=i.length,o=m(t,n);return new(E(i,i[mt]))(i.buffer,i.byteOffset+o*i.BYTES_PER_ELEMENT,f((void 0===e?n:m(e,n))-o))}},At=function(t,e){return _t(this,ct.call(St(this),t,e))},Lt=function(t){St(this);var e=xt(arguments[1],1),i=this.length,n=w(t),o=f(n.length),r=0;if(o+e>i)throw G("Wrong length!");for(;r<o;)this[e+r]=n[r++]},Dt={entries:function(){return rt.call(St(this))},keys:function(){return ot.call(St(this))},values:function(){return nt.call(St(this))}},Nt=function(t,e){return v(t)&&t[kt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Kt=function(t,e){return Nt(t,e=b(e,!0))?c(2,t[e]):W(t,e)},Ht=function(t,e,i){return!(Nt(t,e=b(e,!0))&&v(i)&&k(i,"value"))||k(i,"get")||k(i,"set")||i.configurable||k(i,"writable")&&!i.writable||k(i,"enumerable")&&!i.enumerable?j(t,e,i):(t[e]=i.value,t)};bt||(H.f=Kt,K.f=Ht),s(s.S+s.F*!bt,"Object",{getOwnPropertyDescriptor:Kt,defineProperty:Ht}),r(function(){dt.call({})})&&(dt=pt=function(){return ht.call(this)});var jt=p({},Ot);p(jt,Dt),d(jt,gt,Dt.values),p(jt,{slice:At,set:Lt,constructor:function(){},toString:dt,toLocaleString:Tt}),zt(jt,"buffer","b"),zt(jt,"byteOffset","o"),zt(jt,"byteLength","l"),zt(jt,"length","e"),j(jt,ft,{get:function(){return this[kt]}}),t.exports=function(t,e,i,l){var h=t+((l=!!l)?"Clamped":"")+"Array",c="get"+t,p="set"+t,g=o[h],m=g||{},b=g&&S(g),k={},w=g&&g.prototype,B=function(t,i){var n=t._d;return n.v[c](i*e+n.o,wt)},_=function(t,i,n){var o=t._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),o.v[p](i*e+o.o,n,wt)},M=function(t,e){j(t,e,{get:function(){return B(this,e)},set:function(t){return _(this,e,t)},enumerable:!0})};g&&a.ABV?r(function(){g(1)})&&r(function(){new g(-1)})&&A(function(t){new g,new g(null),new g(1.5),new g(t)},!0)||(g=i(function(t,i,n,o){var r;return u(t,g,h),v(i)?i instanceof Y||"ArrayBuffer"==(r=C(i))||"SharedArrayBuffer"==r?void 0!==o?new m(i,xt(n,e),o):void 0!==n?new m(i,xt(n,e)):new m(i):kt in i?Mt(g,i):It.call(g,i):new m(y(i))}),q(b!==Function.prototype?P(m).concat(P(b)):P(m),function(t){t in g||d(g,t,m[t])}),g.prototype=w,n||(w.constructor=g)):(g=i(function(t,i,n,o){u(t,g,h,"_d");var r,s,a,l,c=0,p=0;if(v(i)){if(!(i instanceof Y||"ArrayBuffer"==(l=C(i))||"SharedArrayBuffer"==l))return kt in i?Mt(g,i):It.call(g,i);r=i,p=xt(n,e);var m=i.byteLength;if(void 0===o){if(m%e)throw G("Wrong length!");if((s=m-p)<0)throw G("Wrong length!")}else if((s=f(o)*e)+p>m)throw G("Wrong length!");a=s/e}else a=y(i),r=new Y(s=a*e);for(d(t,"_d",{b:r,o:p,l:s,e:a,v:new V(r)});c<a;)M(t,c++)}),w=g.prototype=x(jt),d(w,"constructor",g));var z=w[gt],I=!!z&&("values"==z.name||null==z.name),F=Dt.values;d(g,yt,!0),d(w,kt,h),d(w,Ct,!0),d(w,mt,g),(l?new g(1)[ft]==h:ft in w)||j(w,ft,{get:function(){return h}}),k[h]=g,s(s.G+s.W+s.F*(g!=m),k),s(s.S,h,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*r(function(){m.of.call(g,1)}),h,{from:It,of:Ft}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),s(s.P,h,Ot),L(h),s(s.P+s.F*Bt,h,{set:Lt}),s(s.P+s.F*!I,h,Dt),n||w.toString==dt||(w.toString=dt),s(s.P+s.F*r(function(){new g(1).slice()}),h,{slice:At}),s(s.P+s.F*(r(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),h,{toLocaleString:Tt}),O[h]=I?z:F,n||I||d(w,gt,F)}}else t.exports=function(){}},function(t,e,i){var n=i(40),o=i(19),r=i(11),s=i(36),a=i(9),l=i(69),h=Object.getOwnPropertyDescriptor;e.f=i(8)?h:function(t,e){if(t=r(t),e=s(e,!0),l)try{return h(t,e)}catch(t){}if(a(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(2),o=i(10),r=i(9),s=i(20)("src"),a=Function.toString,l=(""+a).split("toString");i(25).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var h="function"==typeof i;h&&(r(i,"name")||o(i,"name",e)),t[e]!==i&&(h&&(r(i,s)||o(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:o(t,e,i):(delete t[e],o(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,i){var n=i(20)("meta"),o=i(1),r=i(9),s=i(6).f,a=0,l=Object.isExtensible||function(){return!0},h=!i(5)(function(){return l(Object.preventExtensions({}))}),u=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},c=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return h&&c.NEED&&l(t)&&!r(t,n)&&u(t),t}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(71),o=i(55);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=!1},function(t,e,i){var n=i(17);t.exports=function(t,e,i){for(var o in e)n(t,o,e[o],i);return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(22),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):r(t,e)}},function(t,e,i){var n=i(6).f,o=i(9),r=i(4)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e){t.exports={}},function(t,e,i){var n=i(9),o=i(14),r=i(53)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var n=i(4)("unscopables"),o=Array.prototype;null==o[n]&&i(10)(o,n,{}),t.exports=function(t){o[n][t]=!0}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){var n=i(1);t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(71),o=i(55).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,i){var n=i(3),o=i(96),r=i(55),s=i(53)("IE_PROTO"),a=function(){},l=function(){var t,e=i(49)("iframe"),n=r.length;for(e.style.display="none",i(72).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:o(i,e)}},function(t,e,i){var n=i(13),o=i(51),r=i(14),s=i(7),a=i(97);t.exports=function(t,e){var i=1==t,l=2==t,h=3==t,u=4==t,c=6==t,d=5==t||c,p=e||a;return function(e,a,g){for(var f,y,m=r(e),b=o(m),k=n(a,g,3),C=s(b.length),v=0,w=i?p(e,C):l?p(e,0):void 0;C>v;v++)if((d||v in b)&&(y=k(f=b[v],v,m),t))if(i)w[v]=y;else if(y)switch(t){case 3:return!0;case 5:return f;case 6:return v;case 2:w.push(f)}else if(u)return!1;return c?-1:h||u?u:w}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){for(var n,o=i(2),r=i(10),s=i(20),a=s("typed_array"),l=s("view"),h=!(!o.ArrayBuffer||!o.DataView),u=h,c=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(n=o[d[c++]])?(r(n.prototype,a,!0),r(n.prototype,l,!0)):u=!1;t.exports={ABV:h,CONSTR:u,TYPED:a,VIEW:l}},function(t,e,i){"use strict";var n=i(2),o=i(6),r=i(8),s=i(4)("species");t.exports=function(t){var e=n[t];r&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(4)("iterator"),o=!1;try{var r=[7][n]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var r=[7],s=r[n]();s.next=function(){return{done:i=!0}},r[n]=function(){return s},t(r)}catch(t){}return i}},function(t,e,i){var n=i(13),o=i(78),r=i(59),s=i(3),a=i(7),l=i(60),h={},u={};(e=t.exports=function(t,e,i,c,d){var p,g,f,y,m=d?function(){return t}:l(t),b=n(i,c,e?2:1),k=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(r(m)){for(p=a(t.length);p>k;k++)if((y=e?b(s(g=t[k])[0],g[1]):b(t[k]))===h||y===u)return y}else for(f=m.call(t);!(g=f.next()).done;)if((y=o(f,b,g.value,e))===h||y===u)return y}).BREAK=h,e.RETURN=u},function(t,e,i){"use strict";var n=i(2),o=i(0),r=i(17),s=i(27),a=i(18),l=i(44),h=i(28),u=i(1),c=i(5),d=i(43),p=i(31),g=i(109);t.exports=function(t,e,i,f,y,m){var b=n[t],k=b,C=y?"set":"add",v=k&&k.prototype,w={},B=function(t){var e=v[t];r(v,t,"delete"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof k&&(m||v.forEach&&!c(function(){(new k).entries().next()}))){var x=new k,S=x[C](m?{}:-0,1)!=x,P=c(function(){x.has(1)}),_=d(function(t){new k(t)}),M=!m&&c(function(){for(var t=new k,e=5;e--;)t[C](e,e);return!t.has(-0)});_||((k=e(function(e,i){h(e,k,t);var n=g(new b,e,k);return null!=i&&l(i,y,n[C],n),n})).prototype=v,v.constructor=k),(P||M)&&(B("delete"),B("has"),y&&B("get")),(M||S)&&B(C),m&&v.clear&&delete v.clear}else k=f.getConstructor(e,t,y,C),s(k.prototype,i),a.NEED=!0;return p(k,t),w[t]=k,o(o.G+o.W+o.F*(k!=b),w),m||f.setStrong(k,t,y),k}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){"use strict";var n=i(10),o=i(17),r=i(5),s=i(23),a=i(4);t.exports=function(t,e,i){var l=a(t),h=i(s,l,""[t]),u=h[0],c=h[1];r(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,u),n(RegExp.prototype,l,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e){t.exports=Phaser},function(t,e,i){var n=i(1),o=i(2).document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,i){"use strict";function n(t,e,i){var n,o,r,s=Array(i),a=8*i-e-1,l=(1<<a)-1,h=l>>1,u=23===e?N(2,-24)-N(2,-77):0,c=0,d=t<0||0===t&&1/t<0?1:0;for((t=D(t))!=t||t===A?(o=t!=t?1:0,n=l):(n=K(H(t)/j),t*(r=N(2,-n))<1&&(n--,r*=2),(t+=n+h>=1?u/r:u*N(2,1-h))*r>=2&&(n++,r/=2),n+h>=l?(o=0,n=l):n+h>=1?(o=(t*r-1)*N(2,e),n+=h):(o=t*N(2,h-1)*N(2,e),n=0));e>=8;s[c++]=255&o,o/=256,e-=8);for(n=n<<e|o,a+=e;a>0;s[c++]=255&n,n/=256,a-=8);return s[--c]|=128*d,s}function o(t,e,i){var n,o=8*i-e-1,r=(1<<o)-1,s=r>>1,a=o-7,l=i-1,h=t[l--],u=127&h;for(h>>=7;a>0;u=256*u+t[l],l--,a-=8);for(n=u&(1<<-a)-1,u>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===u)u=1-s;else{if(u===r)return n?NaN:h?-A:A;n+=N(2,e),u-=s}return(h?-1:1)*n*N(2,u-e)}function r(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function s(t){return[255&t]}function a(t){return[255&t,t>>8&255]}function l(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function h(t){return n(t,52,8)}function u(t){return n(t,23,4)}function c(t,e,i){P(t[z],e,{get:function(){return this[i]}})}function d(t,e,i,n){var o=x(+i);if(o+e>t[G])throw O(I);var r=o+t[X],s=t[W]._b.slice(r,r+e);return n?s:s.reverse()}function p(t,e,i,n,o,r){var s=x(+i);if(s+e>t[G])throw O(I);for(var a=t[W]._b,l=s+t[X],h=n(+o),u=0;u<e;u++)a[l+u]=h[r?u:e-u-1]}var g=i(2),f=i(8),y=i(26),m=i(41),b=i(10),k=i(27),C=i(5),v=i(28),w=i(22),B=i(7),x=i(70),S=i(37).f,P=i(6).f,_=i(56),M=i(31),z="prototype",I="Wrong index!",F=g.ArrayBuffer,E=g.DataView,T=g.Math,O=g.RangeError,A=g.Infinity,L=F,D=T.abs,N=T.pow,K=T.floor,H=T.log,j=T.LN2,W=f?"_b":"buffer",G=f?"_l":"byteLength",X=f?"_o":"byteOffset";if(m.ABV){if(!C(function(){F(1)})||!C(function(){new F(-1)})||C(function(){return new F,new F(1.5),new F(NaN),"ArrayBuffer"!=F.name})){for(var R,U=(F=function(t){return v(this,F),new L(x(t))})[z]=L[z],Y=S(L),V=0;Y.length>V;)(R=Y[V++])in F||b(F,R,L[R]);y||(U.constructor=F)}var q=new E(new F(2)),Z=E[z].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||k(E[z],{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},!0)}else F=function(t){v(this,F,"ArrayBuffer");var e=x(t);this._b=_.call(Array(e),0),this[G]=e},E=function(t,e,i){v(this,E,"DataView"),v(t,F,"DataView");var n=t[G],o=w(e);if(o<0||o>n)throw O("Wrong offset!");if(o+(i=void 0===i?n-o:B(i))>n)throw O("Wrong length!");this[W]=t,this[X]=o,this[G]=i},f&&(c(F,"byteLength","_l"),c(E,"buffer","_b"),c(E,"byteLength","_l"),c(E,"byteOffset","_o")),k(E[z],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return r(d(this,4,t,arguments[1]))},getUint32:function(t){return r(d(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return o(d(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return o(d(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){p(this,1,t,s,e)},setUint8:function(t,e){p(this,1,t,s,e)},setInt16:function(t,e){p(this,2,t,a,e,arguments[2])},setUint16:function(t,e){p(this,2,t,a,e,arguments[2])},setInt32:function(t,e){p(this,4,t,l,e,arguments[2])},setUint32:function(t,e){p(this,4,t,l,e,arguments[2])},setFloat32:function(t,e){p(this,4,t,u,e,arguments[2])},setFloat64:function(t,e){p(this,8,t,h,e,arguments[2])}});M(F,"ArrayBuffer"),M(E,"DataView"),b(E[z],m.VIEW,!0),e.ArrayBuffer=F,e.DataView=E},function(t,e,i){var n=i(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(11),o=i(7),r=i(30);t.exports=function(t){return function(e,i,s){var a,l=n(e),h=o(l.length),u=r(s,h);if(t&&i!=i){for(;h>u;)if((a=l[u++])!=a)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var n=i(54)("keys"),o=i(20);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,i){var n=i(2),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){"use strict";var n=i(14),o=i(30),r=i(7);t.exports=function(t){for(var e=n(this),i=r(e.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,h=void 0===l?i:o(l,i);h>a;)e[a++]=t;return e}},function(t,e,i){var n=i(3),o=i(21),r=i(4)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[r])?e:o(i)}},function(t,e,i){var n=i(29),o=i(4)("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?i:r?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var n=i(32),o=i(4)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||r[o]===t)}},function(t,e,i){var n=i(58),o=i(4)("iterator"),r=i(32);t.exports=i(25).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[n(t)]}},function(t,e,i){"use strict";var n=i(34),o=i(74),r=i(32),s=i(11);t.exports=i(75)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n=i(1),o=i(3),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(13)(Function.call,i(16).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){var n,o,r,s=i(13),a=i(81),l=i(72),h=i(49),u=i(2),c=u.process,d=u.setImmediate,p=u.clearImmediate,g=u.MessageChannel,f=u.Dispatch,y=0,m={},b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},k=function(t){b.call(t.data)};d&&p||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++y]=function(){a("function"==typeof t?t:Function(t),e)},n(y),y},p=function(t){delete m[t]},"process"==i(29)(c)?n=function(t){c.nextTick(s(b,t,1))}:f&&f.now?n=function(t){f.now(s(b,t,1))}:g?(r=(o=new g).port2,o.port1.onmessage=k,n=s(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",k,!1)):n="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,i){var n=i(87),o=i(23);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(t))}},function(t,e,i){var n=i(4)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){"use strict";var n=i(6),o=i(19);t.exports=function(t,e,i){e in t?n.f(t,e,o(0,i)):t[e]=i}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e,i){t.exports=!i(8)&&!i(5)(function(){return 7!=Object.defineProperty(i(49)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(22),o=i(7);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=o(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){var n=i(9),o=i(11),r=i(52)(!1),s=i(53)("IE_PROTO");t.exports=function(t,e){var i,a=o(t),l=0,h=[];for(i in a)i!=s&&n(a,i)&&h.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~r(h,i)||h.push(i));return h}},function(t,e,i){var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(29);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(26),o=i(0),r=i(17),s=i(10),a=i(9),l=i(32),h=i(99),u=i(31),c=i(33),d=i(4)("iterator"),p=!([].keys&&"next"in[].keys()),g=function(){return this};t.exports=function(t,e,i,f,y,m,b){h(i,e,f);var k,C,v,w=function(t){if(!p&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},B=e+" Iterator",x="values"==y,S=!1,P=t.prototype,_=P[d]||P["@@iterator"]||y&&P[y],M=_||w(y),z=y?x?w("entries"):M:void 0,I="Array"==e&&P.entries||_;if(I&&(v=c(I.call(new t)))!==Object.prototype&&v.next&&(u(v,B,!0),n||a(v,d)||s(v,d,g)),x&&_&&"values"!==_.name&&(S=!0,M=function(){return _.call(this)}),n&&!b||!p&&!S&&P[d]||s(P,d,M),l[e]=M,l[B]=g,y)if(k={values:x?M:w("values"),keys:m?M:w("keys"),entries:z},b)for(C in k)C in P||r(P,C,k[C]);else o(o.P+o.F*(p||S),e,k);return k}},function(t,e,i){"use strict";var n=i(14),o=i(30),r=i(7);t.exports=[].copyWithin||function(t,e){var i=n(this),s=r(i.length),a=o(t,s),l=o(e,s),h=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===h?s:o(h,s))-l,s-a),c=1;for(l<a&&a<l+u&&(c=-1,l+=u-1,a+=u-1);u-- >0;)l in i?i[a]=i[l]:delete i[a],a+=c,l+=c;return i}},function(t,e,i){"use strict";var n=i(6).f,o=i(38),r=i(27),s=i(13),a=i(28),l=i(44),h=i(75),u=i(74),c=i(42),d=i(8),p=i(18).fastKey,g=i(35),f=d?"_s":"size",y=function(t,e){var i,n=p(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,h){var u=t(function(t,n){a(t,u,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[f]=0,null!=n&&l(n,i,t[h],t)});return r(u.prototype,{clear:function(){for(var t=g(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=g(this,e),n=y(i,t);if(n){var o=n.n,r=n.p;delete i._i[n.i],n.r=!0,r&&(r.n=o),o&&(o.p=r),i._f==n&&(i._f=o),i._l==n&&(i._l=r),i[f]--}return!!n},forEach:function(t){g(this,e);for(var i,n=s(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!y(g(this,e),t)}}),d&&n(u.prototype,"size",{get:function(){return g(this,e)[f]}}),u},def:function(t,e,i){var n,o,r=y(t,e);return r?r.v=i:(t._l=r={i:o=p(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[f]++,"F"!==o&&(t._i[o]=r)),t},getEntry:y,setStrong:function(t,e,i){h(t,e,function(t,i){this._t=g(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?u(0,"keys"==e?i.k:"values"==e?i.v:[i.k,i.v]):(t._t=void 0,u(1))},i?"entries":"values",!i,!0),c(e)}}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&n(r.call(t)),e}}},function(t,e,i){"use strict";var n=i(24),o=i(46),r=i(40),s=i(14),a=i(51),l=Object.assign;t.exports=!l||i(5)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var i=s(t),l=arguments.length,h=1,u=o.f,c=r.f;l>h;)for(var d,p=a(arguments[h++]),g=u?n(p).concat(u(p)):n(p),f=g.length,y=0;f>y;)c.call(p,d=g[y++])&&(i[d]=p[d]);return i}:l},function(t,e,i){"use strict";var n=i(27),o=i(18).getWeak,r=i(3),s=i(1),a=i(28),l=i(44),h=i(39),u=i(9),c=i(35),d=h(5),p=h(6),g=0,f=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},m=function(t,e){return d(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var i=m(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,r){var h=t(function(t,n){a(t,h,e,"_i"),t._t=e,t._i=g++,t._l=void 0,null!=n&&l(n,i,t[r],t)});return n(h.prototype,{delete:function(t){if(!s(t))return!1;var i=o(t);return!0===i?f(c(this,e)).delete(t):i&&u(i,this._i)&&delete i[this._i]},has:function(t){if(!s(t))return!1;var i=o(t);return!0===i?f(c(this,e)).has(t):i&&u(i,this._i)}}),h},def:function(t,e,i){var n=o(r(e),!0);return!0===n?f(t).set(e,i):n[t._i]=i,t},ufstore:f}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(37),o=i(46),r=i(3),s=i(2).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(r(t)),i=o.f;return i?e.concat(i(t)):e}},function(t,e,i){"use strict";function n(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=o(e),this.reject=o(i)}var o=i(21);t.exports.f=function(t){return new n(t)}},function(t,e,i){e.f=i(4)},function(t,e,i){var n=i(11),o=i(37).f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(n(t))}},function(t,e,i){"use strict";var n=i(22),o=i(23);t.exports=function(t){var e=String(o(this)),i="",r=n(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},function(t,e,i){var n=i(1),o=i(29),r=i(4)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},function(t,e,i){var n=i(1),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){var n=i(24),o=i(11),r=i(40).f;t.exports=function(t){return function(e){for(var i,s=o(e),a=n(s),l=a.length,h=0,u=[];l>h;)r.call(s,i=a[h++])&&u.push(t?[i,s[i]]:s[i]);return u}}},function(t,e,i){var n=i(7),o=i(86),r=i(23);t.exports=function(t,e,i,s){var a=String(r(t)),l=a.length,h=void 0===i?" ":String(i),u=n(e);if(u<=l||""==h)return a;var c=u-l,d=o.call(h,Math.ceil(c/h.length));return d.length>c&&(d=d.slice(0,c)),s?d+a:a+d}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i(93),i(94),i(95),i(100),i(101),i(102),i(103),i(104),i(105),i(106),i(107),i(108),i(110),i(111),i(112),i(113),i(114),i(116),i(117),i(118),i(119),i(120),i(121),i(122),i(123),i(124),i(125),i(126),i(127),i(131),i(134),i(135),i(136),i(137),i(138),i(139),i(140),i(141),i(142),i(143),i(144),i(145),i(147),i(148),i(149),i(150),i(151),i(153),i(154),i(155),i(156),i(157),i(159),i(160),i(161),i(162),i(163),i(164),i(165),i(166),i(167),i(168),i(61),i(169),i(170),i(171),i(172),i(173),i(174),i(175),i(176),i(177),i(178),i(179),i(180),i(181),i(182),i(183),i(185),i(186),i(187),i(188),i(189),i(190),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(48)),o=i.n(n),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(t,i,n,o,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,o,r));return a.particleArgumentsColor=s.color||null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.a.Particle),r(e,[{key:"onEmit",value:function(){if(this.particleArgumentsColor){var t=o.a.Color.createColor(this.particleArgumentsColor.start.r,this.particleArgumentsColor.start.g,this.particleArgumentsColor.start.b),i=this.game.add.tween(t).to(this.particleArgumentsColor.end,this.particleArgumentsColor.rate,o.a.Easing[this.particleArgumentsColor.ease][this.particleArgumentsColor.easeMode],!0,this.particleArgumentsColor.delay);i.onUpdateCallback(this.updateColor.bind(this)),i.onComplete.add(this.onTweenComplete,this)}(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onEmit",this).call(this)}},{key:"updateColor",value:function(t){o.a.Color.updateColor(t.target),this.tint=o.a.Color.getColor32(this.alpha,t.target.r,t.target.g,t.target.b)}},{key:"onTweenComplete",value:function(t){this.game&&this.game.tweens.remove(t)}}]),e}(),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function(t){function e(t,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n.emitX,n.emitY,n.maxParticles));return o.name=i,o.particleClass=s,o.applyProperties(n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.a.Particles.Arcade.Emitter),a(e,[{key:"applyProperties",value:function(t){this.properties=t,this.gravity.x=t.gravityX,this.gravity.y=t.gravityY,this.setRotation(t.rotationMin,t.rotationMax),this.emitX=t.emitX,this.emitY=t.emitY,this.maxParticles=t.maxParticles,this.blendMode=t.blendMode,this.setAlpha(t.alphaMin,t.alphaMax,t.alphaRate,o.a.Easing[t.alphaEase][t.alphaEaseMode],t.alphaYoyo),t.randomScale?(this.minParticleScale=t.minScale,this.maxParticleScale=t.maxScale):this.setScale(t.scaleFromX,t.scaleToX,t.scaleFromY,t.scaleToY,t.scaleRate,o.a.Easing[t.scaleEase][t.scaleEaseMode],t.scaleYoyo),this.minParticleSpeed.setTo(t.minSpeedX,t.minSpeedY),this.maxParticleSpeed.setTo(t.maxSpeedX,t.maxSpeedY),this.lifespan=t.lifespan,this.angularDrag=t.angularDrag,this.bounce.setTo(t.bounceX,t.bounceY),this.width=t.width,this.height=t.height,t.explode||(this.on=t.enabled),this.particleArgumentsColor=this.properties.particleArguments.color||null,this.particleArgumentsStartRotation=this.properties.particleArguments.startRotation||null,this.particleArgumentsAnchor=this.properties.particleArguments.anchor||null,this.particleArgumentsLifespan=this.properties.particleArguments.lifespan}},{key:"resetParticle",value:function(t,i,n){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resetParticle",this).call(this,t,i,n),this.particleArgumentsColor&&(t.tint=o.a.Color.getColor32(t.alpha,this.particleArgumentsColor.start.r,this.particleArgumentsColor.start.g,this.particleArgumentsColor.start.b)),this.particleArgumentsStartRotation&&(t.angle=this.game.rnd.integerInRange(this.particleArgumentsStartRotation.min,this.particleArgumentsStartRotation.max)),this.particleArgumentsAnchor&&t.anchor.setTo(this.particleArgumentsAnchor.x,this.particleArgumentsAnchor.y),t.lifespan=this.game.rnd.integerInRange(this.particleArgumentsLifespan.min,this.particleArgumentsLifespan.max)}}]),e}(),h={isLoading:!1,queue:[]},u=function(t,e,i,n,o){if(arguments.length>5&&void 0!==arguments[5]&&!arguments[5]&&t.cache.checkImageKey(i))c(n);else{var r=new Image;h.isLoading?h.queue.push({game:t,bitmapData:e,key:i,oncreate:n,onerror:o}):(h.isLoading=!0,r.onload=function(){t.cache.addImage(i,e,r),c(n)},r.onerror=function(){c(o)},r.src=e)}},c=function(t){t&&t(),h.isLoading=!1,d()},d=function(){if(h.queue.length>0){var t=h.queue.shift();u(t.game,t.bitmapData,t.key,t.oncreate,t.onerror,!1)}},p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),f=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},y=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.x=n,r.y=o,r._emitersMap=new Map,r._collidebleEmitters=new Set,r._emitX=0,r._emitY=0,r._arcade=r.game.physics.arcade,r._initEmitters(i),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.a.Group),g(e,[{key:"_initEmitters",value:function(t){var e=t.emitters;for(var i in e)e.hasOwnProperty(i)&&this.addEmitter(i,e[i])}},{key:"_createEmitter",value:function(t,e){return new l(this.game,t,e)}},{key:"add",value:function(t,i,n){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,i,n),this._emitersMap.set(t.name,t)}},{key:"remove",value:function(t,i,n){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this,t,i,n),this._emitersMap.delete(t.name)}},{key:"_emit",value:function(t,e){e.enabled&&(e.flow?t.flow(0,e.frequency,e.quantity,e.total,e.immediate):t.start(e.explode,0,e.frequency,e.total))}},{key:"update",value:function(){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=!0,i=!1,n=void 0;try{for(var o,r=this._collidebleEmitters[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)this._arcade.collide(o.value)}catch(t){i=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}}},{key:"emit",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this._emitersMap[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=p(n.value,2)[1];this._emit(r,r.properties)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}}},{key:"_onEmitterImageUpdate",value:function(t,e){this._recreateEmitter(t,e)}},{key:"_recreateEmitter",value:function(t,e){this.removeEmitter(t),this.addEmitter(t,e)}},{key:"addEmitter",value:function(t,e){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u(this.game,e[t],t,function(){var o=i._createEmitter(t,e);i.add(o),o.makeParticles(o.name,e.frames,e.maxParticles,e.collide,e.collideWorldBounds,e.particleArguments),i.updateEmitterProperties(t,e),n&&i._emit(o,e),e.collide||e.collideWorldBounds?i._collidebleEmitters.add(o):i._collidebleEmitters.delete(o)},null,!1)}},{key:"removeAllEmitters",value:function(){var t=this,e=!0,i=!1,n=void 0;try{for(var o,r=this._emitersMap[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=p(o.value,2);!function(e,i){var n=t.game.add.tween(i);n.to({alpha:0},400,null,!0),n.onComplete.addOnce(function(){i.kill(),t.removeEmitter(e),t._emitersMap.delete(e)})}(s[0],s[1])}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}},{key:"removeEmitter",value:function(t){this.remove(this._emitersMap.get(t))}},{key:"updateEmitterImage",value:function(t,e){u(this.game,e[t],t,this._onEmitterImageUpdate.bind(this,t,e))}},{key:"updateEmitterProperties",value:function(t,e){var i=this._emitersMap.get(t);i.applyProperties(e),this._emit(i,e)}},{key:"updateEmitterOption",value:function(t,e){this._recreateEmitter(t,e)}},{key:"emitX",get:function(){return this._emitX},set:function(t){this._emitX=t;var e=!0,i=!1,n=void 0;try{for(var o,r=this._emitersMap[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=p(o.value,2)[1];s.emitX=s.properties.emitX+this.emitX}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}},{key:"emitY",get:function(){return this._emitY},set:function(t){this._emitY=t;var e=!0,i=!1,n=void 0;try{for(var o,r=this._emitersMap[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=p(o.value,2)[1];s.emitY=s.properties.emitY+this.emitY}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}}]),e}(),m=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),b=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.addParticleFactory(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.a.Plugin),m(e,[{key:"addParticleFactory",value:function(){var t=this;o.a.GameObjectFactory.prototype.particleEffect=function(e,i,n,o){var r=new y(t.game,t.getData(n),e,i);return(o||t.game.world).add(r)},o.a.GameObjectCreator.prototype.particleEffect=function(e,i,n){return new y(t.game,t.getData(n),e,i)}}},{key:"getData",value:function(t){return"string"==typeof t?this.game.cache.getJSON(t):t}}]),e}();i.d(e,"createImageFromBitmapData",function(){return u}),e.default=b},function(t,e,i){"use strict";var n=i(0),o=i(41),r=i(50),s=i(3),a=i(30),l=i(7),h=i(1),u=i(2).ArrayBuffer,c=i(57),d=r.ArrayBuffer,p=r.DataView,g=o.ABV&&u.isView,f=d.prototype.slice,y=o.VIEW;n(n.G+n.W+n.F*(u!==d),{ArrayBuffer:d}),n(n.S+n.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return g&&g(t)||h(t)&&y in t}}),n(n.P+n.U+n.F*i(5)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(s(this),t);for(var i=s(this).byteLength,n=a(t,i),o=a(void 0===e?i:e,i),r=new(c(this,d))(l(o-n)),h=new p(this),u=new p(r),g=0;n<o;)u.setUint8(g++,h.getUint8(n++));return r}}),i(42)("ArrayBuffer")},function(t,e,i){var n=i(0);n(n.G+n.W+n.F*!i(41).ABV,{DataView:i(50).DataView})},function(t,e,i){i(15)("Int8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){var n=i(6),o=i(3),r=i(24);t.exports=i(8)?Object.defineProperties:function(t,e){o(t);for(var i,s=r(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){var n=i(98);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(1),o=i(73),r=i(4)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(38),o=i(19),r=i(31),s={};i(10)(s,i(4)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:o(1,i)}),r(t,e+" Iterator")}},function(t,e,i){i(15)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){i(15)("Int16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Uint16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Int32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Uint32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Float32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(15)("Float64",8,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){"use strict";var n=i(77),o=i(35);t.exports=i(45)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(o(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){var n=i(1),o=i(62).set;t.exports=function(t,e,i){var r,s=e.constructor;return s!==i&&"function"==typeof s&&(r=s.prototype)!==i.prototype&&n(r)&&o&&o(t,r),t}},function(t,e,i){"use strict";var n=i(77),o=i(35);t.exports=i(45)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,o=i(39)(0),r=i(17),s=i(18),a=i(79),l=i(80),h=i(1),u=i(5),c=i(35),d=s.getWeak,p=Object.isExtensible,g=l.ufstore,f={},y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(h(t)){var e=d(t);return!0===e?g(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(c(this,"WeakMap"),t,e)}},b=t.exports=i(45)("WeakMap",y,m,l,!0,!0);u(function(){return 7!=(new b).set((Object.freeze||Object)(f),7).get(f)})&&(a((n=l.getConstructor(y,"WeakMap")).prototype,m),s.NEED=!0,o(["delete","has","get","set"],function(t){var e=b.prototype,i=e[t];r(e,t,function(e,o){if(h(e)&&!p(e)){this._f||(this._f=new n);var r=this._f[t](e,o);return"set"==t?this:r}return i.call(this,e,o)})}))},function(t,e,i){"use strict";var n=i(80),o=i(35);i(45)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){var n=i(0),o=i(21),r=i(3),s=(i(2).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(5)(function(){s(function(){})}),"Reflect",{apply:function(t,e,i){var n=o(t),l=r(i);return s?s(n,e,l):a.call(n,e,l)}})},function(t,e,i){var n=i(0),o=i(38),r=i(21),s=i(3),a=i(1),l=i(5),h=i(115),u=(i(2).Reflect||{}).construct,c=l(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),d=!l(function(){u(function(){})});n(n.S+n.F*(c||d),"Reflect",{construct:function(t,e){r(t),s(e);var i=arguments.length<3?t:r(arguments[2]);if(d&&!c)return u(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(h.apply(t,n))}var l=i.prototype,p=o(a(l)?l:Object.prototype),g=Function.apply.call(t,p,e);return a(g)?g:p}})},function(t,e,i){"use strict";var n=i(21),o=i(1),r=i(81),s=[].slice,a={},l=function(t,e,i){if(!(e in a)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=s.call(arguments,1),a=function(){var n=i.concat(s.call(arguments));return this instanceof a?l(e,n.length,n):r(e,n,t)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,i){var n=i(6),o=i(0),r=i(3),s=i(36);o(o.S+o.F*i(5)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,i){r(t),e=s(e,!0),r(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),o=i(16).f,r=i(3);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=o(r(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){var n=i(16),o=i(33),r=i(9),s=i(0),a=i(1),l=i(3);s(s.S,"Reflect",{get:function t(e,i){var s,h,u=arguments.length<3?e:arguments[2];return l(e)===u?e[i]:(s=n.f(e,i))?r(s,"value")?s.value:void 0!==s.get?s.get.call(u):void 0:a(h=o(e))?t(h,i,u):void 0}})},function(t,e,i){var n=i(16),o=i(0),r=i(3);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(r(t),e)}})},function(t,e,i){var n=i(0),o=i(33),r=i(3);n(n.S,"Reflect",{getPrototypeOf:function(t){return o(r(t))}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(0),o=i(3),r=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return o(t),!r||r(t)}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{ownKeys:i(82)})},function(t,e,i){var n=i(0),o=i(3),r=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){o(t);try{return r&&r(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(6),o=i(16),r=i(33),s=i(9),a=i(0),l=i(19),h=i(3),u=i(1);a(a.S,"Reflect",{set:function t(e,i,a){var c,d,p=arguments.length<4?e:arguments[3],g=o.f(h(e),i);if(!g){if(u(d=r(e)))return t(d,i,a,p);g=l(0)}return s(g,"value")?!(!1===g.writable||!u(p)||(c=o.f(p,i)||l(0),c.value=a,n.f(p,i,c),0)):void 0!==g.set&&(g.set.call(p,a),!0)}})},function(t,e,i){var n=i(0),o=i(62);o&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){"use strict";var n,o,r,s,a=i(26),l=i(2),h=i(13),u=i(58),c=i(0),d=i(1),p=i(21),g=i(28),f=i(44),y=i(57),m=i(63).set,b=i(128)(),k=i(83),C=i(129),v=i(130),w=l.TypeError,B=l.process,x=l.Promise,S="process"==u(B),P=function(){},_=o=k.f,M=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[i(4)("species")]=function(t){t(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e}catch(t){}}(),z=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var i=t._c;b(function(){for(var n=t._v,o=1==t._s,r=0;i.length>r;)!function(e){var i,r,s=o?e.ok:e.fail,a=e.resolve,l=e.reject,h=e.domain;try{s?(o||(2==t._h&&T(t),t._h=1),!0===s?i=n:(h&&h.enter(),i=s(n),h&&h.exit()),i===e.promise?l(w("Promise-chain cycle")):(r=z(i))?r.call(i,a,l):a(i)):l(n)}catch(t){l(t)}}(i[r++]);t._c=[],t._n=!1,e&&!t._h&&F(t)})}},F=function(t){m.call(l,function(){var e,i,n,o=t._v,r=E(t);if(r&&(e=C(function(){S?B.emit("unhandledRejection",o,t):(i=l.onunhandledrejection)?i({promise:t,reason:o}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=S||E(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},E=function(t){if(1==t._h)return!1;for(var e,i=t._a||t._c,n=0;i.length>n;)if((e=i[n++]).fail||!E(e.promise))return!1;return!0},T=function(t){m.call(l,function(){var e;S?B.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},A=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw w("Promise can't be resolved itself");(e=z(t))?b(function(){var n={_w:i,_d:!1};try{e.call(t,h(A,n,1),h(O,n,1))}catch(t){O.call(n,t)}}):(i._v=t,i._s=1,I(i,!1))}catch(t){O.call({_w:i,_d:!1},t)}}};M||(x=function(t){g(this,x,"Promise","_h"),p(t),n.call(this);try{t(h(A,this,1),h(O,this,1))}catch(t){O.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(27)(x.prototype,{then:function(t,e){var i=_(y(this,x));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=S?B.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&I(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n;this.promise=t,this.resolve=h(A,t,1),this.reject=h(O,t,1)},k.f=_=function(t){return t===x||t===s?new r(t):o(t)}),c(c.G+c.W+c.F*!M,{Promise:x}),i(31)(x,"Promise"),i(42)("Promise"),s=i(25).Promise,c(c.S+c.F*!M,"Promise",{reject:function(t){var e=_(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!M),"Promise",{resolve:function(t){return v(a&&this===s?x:this,t)}}),c(c.S+c.F*!(M&&i(43)(function(t){x.all(t).catch(P)})),"Promise",{all:function(t){var e=this,i=_(e),n=i.resolve,o=i.reject,r=C(function(){var i=[],r=0,s=1;f(t,!1,function(t){var a=r++,l=!1;i.push(void 0),s++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--s||n(i))},o)}),--s||n(i)});return r.e&&o(r.v),i.promise},race:function(t){var e=this,i=_(e),n=i.reject,o=C(function(){f(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return o.e&&n(o.v),i.promise}})},function(t,e,i){var n=i(2),o=i(63).set,r=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,l="process"==i(29)(s);t.exports=function(){var t,e,i,h=function(){var n,o;for(l&&(n=s.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){s.nextTick(h)};else if(r){var u=!0,c=document.createTextNode("");new r(h).observe(c,{characterData:!0}),i=function(){c.data=u=!u}}else if(a&&a.resolve){var d=a.resolve();i=function(){d.then(h)}}else i=function(){o.call(n,h)};return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,i()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(3),o=i(1),r=i(83);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var i=r.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(2),o=i(9),r=i(8),s=i(0),a=i(17),l=i(18).KEY,h=i(5),u=i(54),c=i(31),d=i(20),p=i(4),g=i(84),f=i(132),y=i(133),m=i(73),b=i(3),k=i(11),C=i(36),v=i(19),w=i(38),B=i(85),x=i(16),S=i(6),P=i(24),_=x.f,M=S.f,z=B.f,I=n.Symbol,F=n.JSON,E=F&&F.stringify,T=p("_hidden"),O=p("toPrimitive"),A={}.propertyIsEnumerable,L=u("symbol-registry"),D=u("symbols"),N=u("op-symbols"),K=Object.prototype,H="function"==typeof I,j=n.QObject,W=!j||!j.prototype||!j.prototype.findChild,G=r&&h(function(){return 7!=w(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=_(K,e);n&&delete K[e],M(t,e,i),n&&t!==K&&M(K,e,n)}:M,X=function(t){var e=D[t]=w(I.prototype);return e._k=t,e},R=H&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},U=function(t,e,i){return t===K&&U(N,e,i),b(t),e=C(e,!0),b(i),o(D,e)?(i.enumerable?(o(t,T)&&t[T][e]&&(t[T][e]=!1),i=w(i,{enumerable:v(0,!1)})):(o(t,T)||M(t,T,v(1,{})),t[T][e]=!0),G(t,e,i)):M(t,e,i)},Y=function(t,e){b(t);for(var i,n=y(e=k(e)),o=0,r=n.length;r>o;)U(t,i=n[o++],e[i]);return t},V=function(t){var e=A.call(this,t=C(t,!0));return!(this===K&&o(D,t)&&!o(N,t))&&(!(e||!o(this,t)||!o(D,t)||o(this,T)&&this[T][t])||e)},q=function(t,e){if(t=k(t),e=C(e,!0),t!==K||!o(D,e)||o(N,e)){var i=_(t,e);return!i||!o(D,e)||o(t,T)&&t[T][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=z(k(t)),n=[],r=0;i.length>r;)o(D,e=i[r++])||e==T||e==l||n.push(e);return n},J=function(t){for(var e,i=t===K,n=z(i?N:k(t)),r=[],s=0;n.length>s;)!o(D,e=n[s++])||i&&!o(K,e)||r.push(D[e]);return r};H||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===K&&e.call(N,i),o(this,T)&&o(this[T],t)&&(this[T][t]=!1),G(this,t,v(1,i))};return r&&W&&G(K,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",function(){return this._k}),x.f=q,S.f=U,i(37).f=B.f=Z,i(40).f=V,i(46).f=J,r&&!i(26)&&a(K,"propertyIsEnumerable",V,!0),g.f=function(t){return X(p(t))}),s(s.G+s.W+s.F*!H,{Symbol:I});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$=0;Q.length>$;)p(Q[$++]);for(var tt=P(p.store),et=0;tt.length>et;)f(tt[et++]);s(s.S+s.F*!H,"Symbol",{for:function(t){return o(L,t+="")?L[t]:L[t]=I(t)},keyFor:function(t){if(!R(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!H,"Object",{create:function(t,e){return void 0===e?w(t):Y(w(t),e)},defineProperty:U,defineProperties:Y,getOwnPropertyDescriptor:q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),F&&s(s.S+s.F*(!H||h(function(){var t=I();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!R(t)){for(var e,i,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);return"function"==typeof(e=n[1])&&(i=e),!i&&m(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!R(e))return e}),n[1]=e,E.apply(F,n)}}}),I.prototype[O]||i(10)(I.prototype,O,I.prototype.valueOf),c(I,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,i){var n=i(2),o=i(25),r=i(26),s=i(84),a=i(6).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(24),o=i(46),r=i(40);t.exports=function(t){var e=n(t),i=o.f;if(i)for(var s,a=i(t),l=r.f,h=0;a.length>h;)l.call(t,s=a[h++])&&e.push(s);return e}},function(t,e,i){var n=i(1),o=i(18).onFreeze;i(12)("freeze",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,i){var n=i(1),o=i(18).onFreeze;i(12)("seal",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,i){var n=i(1),o=i(18).onFreeze;i(12)("preventExtensions",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},function(t,e,i){var n=i(1);i(12)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(1);i(12)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(1);i(12)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){var n=i(11),o=i(16).f;i(12)("getOwnPropertyDescriptor",function(){return function(t,e){return o(n(t),e)}})},function(t,e,i){var n=i(14),o=i(33);i(12)("getPrototypeOf",function(){return function(t){return o(n(t))}})},function(t,e,i){var n=i(14),o=i(24);i(12)("keys",function(){return function(t){return o(n(t))}})},function(t,e,i){i(12)("getOwnPropertyNames",function(){return i(85).f})},function(t,e,i){var n=i(0);n(n.S+n.F,"Object",{assign:i(79)})},function(t,e,i){var n=i(0);n(n.S,"Object",{is:i(146)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){var n=i(0);n(n.S,"Object",{setPrototypeOf:i(62).set})},function(t,e,i){var n=i(6).f,o=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in o||i(8)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,i){var n=i(0),o=i(11),r=i(7);n(n.S,"String",{raw:function(t){for(var e=o(t.raw),i=r(e.length),n=arguments.length,s=[],a=0;i>a;)s.push(String(e[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,i){var n=i(0),o=i(30),r=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?r(e):r(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){"use strict";var n=i(0),o=i(152)(!1);n(n.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,i){var n=i(22),o=i(23);t.exports=function(t){return function(e,i){var r,s,a=String(o(e)),l=n(i),h=a.length;return l<0||l>=h?t?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===h||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):r:t?a.slice(l,l+2):s-56320+(r-55296<<10)+65536}}},function(t,e,i){var n=i(0);n(n.P,"String",{repeat:i(86)})},function(t,e,i){"use strict";var n=i(0),o=i(7),r=i(64),s="".startsWith;n(n.P+n.F*i(65)("startsWith"),"String",{startsWith:function(t){var e=r(this,t,"startsWith"),i=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";var n=i(0),o=i(7),r=i(64),s="".endsWith;n(n.P+n.F*i(65)("endsWith"),"String",{endsWith:function(t){var e=r(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=o(e.length),a=void 0===i?n:Math.min(o(i),n),l=String(t);return s?s.call(e,l,a):e.slice(a-l.length,a)===l}})},function(t,e,i){"use strict";var n=i(0),o=i(64);n(n.P+n.F*i(65)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){i(8)&&"g"!=/./g.flags&&i(6).f(RegExp.prototype,"flags",{configurable:!0,get:i(158)})},function(t,e,i){"use strict";var n=i(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){i(47)("match",1,function(t,e,i){return[function(i){"use strict";var n=t(this),o=null==i?void 0:i[e];return void 0!==o?o.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(47)("replace",2,function(t,e,i){return[function(n,o){"use strict";var r=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,r,o):i.call(String(r),n,o)},i]})},function(t,e,i){i(47)("split",2,function(t,e,n){"use strict";var o=i(87),r=n,s=[].push,a="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[a]||2!="ab".split(/(?:ab)*/)[a]||4!=".".split(/(.?)(.?)/)[a]||".".split(/()()/)[a]>1||"".split(/.?/)[a]){var l=void 0===/()??/.exec("")[1];n=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!o(t))return r.call(i,t,e);var n,h,u,c,d,p=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,y=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,g+"g");for(l||(n=new RegExp("^"+m.source+"$(?!\\s)",g));(h=m.exec(i))&&!((u=h.index+h[0][a])>f&&(p.push(i.slice(f,h.index)),!l&&h[a]>1&&h[0].replace(n,function(){for(d=1;d<arguments[a]-2;d++)void 0===arguments[d]&&(h[d]=void 0)}),h[a]>1&&h.index<i[a]&&s.apply(p,h.slice(1)),c=h[0][a],f=u,p[a]>=y));)m.lastIndex===h.index&&m.lastIndex++;return f===i[a]?!c&&m.test("")||p.push(""):p.push(i.slice(f)),p[a]>y?p.slice(0,y):p}}else"0".split(void 0,0)[a]&&(n=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(i,o){var r=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,r,o):n.call(String(r),i,o)},n]})},function(t,e,i){i(47)("search",1,function(t,e,i){return[function(i){"use strict";var n=t(this),o=null==i?void 0:i[e];return void 0!==o?o.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){"use strict";var n=i(13),o=i(0),r=i(14),s=i(78),a=i(59),l=i(7),h=i(66),u=i(60);o(o.S+o.F*!i(43)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,o,c,d=r(t),p="function"==typeof this?this:Array,g=arguments.length,f=g>1?arguments[1]:void 0,y=void 0!==f,m=0,b=u(d);if(y&&(f=n(f,g>2?arguments[2]:void 0,2)),null==b||p==Array&&a(b))for(i=new p(e=l(d.length));e>m;m++)h(i,m,y?f(d[m],m):d[m]);else for(c=b.call(d),i=new p;!(o=c.next()).done;m++)h(i,m,y?s(c,f,[o.value,m],!0):o.value);return i.length=m,i}})},function(t,e,i){"use strict";var n=i(0),o=i(66);n(n.S+n.F*i(5)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)o(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){var n=i(0);n(n.P,"Array",{copyWithin:i(76)}),i(34)("copyWithin")},function(t,e,i){"use strict";var n=i(0),o=i(39)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(34)("find")},function(t,e,i){"use strict";var n=i(0),o=i(39)(6),r="findIndex",s=!0;r in[]&&Array(1)[r](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(34)(r)},function(t,e,i){var n=i(0);n(n.P,"Array",{fill:i(56)}),i(34)("fill")},function(t,e,i){var n=i(0),o=i(2).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isInteger:i(88)})},function(t,e,i){var n=i(0),o=i(88),r=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return o(t)&&r(t)<=9007199254740991}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(0),o=i(89),r=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+r(t-1)*r(t+1))}})},function(t,e,i){var n=i(0),o=Math.asinh;n(n.S+n.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,i){var n=i(0),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(0),o=i(67);n(n.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(0),o=Math.exp;n(n.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,i){var n=i(0),o=i(68);n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,i){var n=i(0);n(n.S,"Math",{fround:i(184)})},function(t,e,i){var n=i(67),o=Math.pow,r=o(2,-52),s=o(2,-23),a=o(2,127)*(2-s),l=o(2,-126);t.exports=Math.fround||function(t){var e,i,o=Math.abs(t),h=n(t);return o<l?h*(o/l/s+1/r-1/r)*l*s:(i=(e=(1+s/r)*o)-(e-o))>a||i!=i?h*(1/0):h*i}},function(t,e,i){var n=i(0),o=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,r=0,s=0,a=arguments.length,l=0;s<a;)l<(i=o(arguments[s++]))?(r=r*(n=l/i)*n+1,l=i):r+=i>0?(n=i/l)*n:i;return l===1/0?1/0:l*Math.sqrt(r)}})},function(t,e,i){var n=i(0),o=Math.imul;n(n.S+n.F*i(5)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var i=+t,n=+e,o=65535&i,r=65535&n;return 0|o*r+((65535&i>>>16)*r+o*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log1p:i(89)})},function(t,e,i){var n=i(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(0);n(n.S,"Math",{sign:i(67)})},function(t,e,i){var n=i(0),o=i(68),r=Math.exp;n(n.S+n.F*i(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(0),o=i(68),r=Math.exp;n(n.S,"Math",{tanh:function(t){var e=o(t=+t),i=o(-t);return e==1/0?1:i==1/0?-1:(e-i)/(r(t)+r(-t))}})},function(t,e,i){var n=i(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){"use strict";var n=i(0),o=i(52)(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(34)("includes")},function(t,e,i){var n=i(0),o=i(90)(!1);n(n.S,"Object",{values:function(t){return o(t)}})},function(t,e,i){var n=i(0),o=i(90)(!0);n(n.S,"Object",{entries:function(t){return o(t)}})},function(t,e,i){var n=i(0),o=i(82),r=i(11),s=i(16),a=i(66);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=r(t),l=s.f,h=o(n),u={},c=0;h.length>c;)void 0!==(i=l(n,e=h[c++]))&&a(u,e,i);return u}})},function(t,e,i){"use strict";var n=i(0),o=i(91);n(n.P,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){"use strict";var n=i(0),o=i(91);n(n.P,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){var n=i(2),o=i(0),r=n.navigator,s=[].slice,a=!!r&&/MSIE .\./.test(r.userAgent),l=function(t){return function(e,i){var n=arguments.length>2,o=!!n&&s.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,i)}};o(o.G+o.B+o.F*a,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(t,e,i){var n=i(0),o=i(63);n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,i){for(var n=i(61),o=i(24),r=i(17),s=i(2),a=i(10),l=i(32),h=i(4),u=h("iterator"),c=h("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=o(p),f=0;f<g.length;f++){var y,m=g[f],b=p[m],k=s[m],C=k&&k.prototype;if(C&&(C[u]||a(C,u,d),C[c]||a(C,c,m),l[m]=d,b))for(y in n)C[y]||r(C,y,n[y],!0)}},function(t,e){!function(e){"use strict";function i(t,e,i,n){var r=Object.create((e&&e.prototype instanceof o?e:o).prototype),s=new p(n||[]);return r._invoke=h(t,i,s),r}function n(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function o(){}function r(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(i,o,r,s){var a=n(t[i],t,o);if("throw"!==a.type){var l=a.arg,h=l.value;return h&&"object"==typeof h&&b.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,r,s)},function(t){e("throw",t,r,s)}):Promise.resolve(h).then(function(t){l.value=t,r(l)},s)}s(a.arg)}var i;this._invoke=function(t,n){function o(){return new Promise(function(i,o){e(t,n,i,o)})}return i=i?i.then(o,o):o()}}function h(t,e,i){var o=S;return function(r,s){if(o===_)throw new Error("Generator is already running");if(o===M){if("throw"===r)throw s;return f()}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var l=u(a,i);if(l){if(l===z)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===S)throw o=M,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=_;var h=n(t,e,i);if("normal"===h.type){if(o=i.done?M:P,h.arg===z)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(o=M,i.method="throw",i.arg=h.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,u(t,e),"throw"===e.method))return z;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return z}var o=n(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,z;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,z):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,z)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function g(t){if(t){var e=t[C];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(b.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=y,e.done=!0,e};return n.next=n}}return{next:f}}function f(){return{value:y,done:!0}}var y,m=Object.prototype,b=m.hasOwnProperty,k="function"==typeof Symbol?Symbol:{},C=k.iterator||"@@iterator",v=k.asyncIterator||"@@asyncIterator",w=k.toStringTag||"@@toStringTag",B="object"==typeof t,x=e.regeneratorRuntime;if(x)B&&(t.exports=x);else{(x=e.regeneratorRuntime=B?t.exports:{}).wrap=i;var S="suspendedStart",P="suspendedYield",_="executing",M="completed",z={},I={};I[C]=function(){return this};var F=Object.getPrototypeOf,E=F&&F(F(g([])));E&&E!==m&&b.call(E,C)&&(I=E);var T=s.prototype=o.prototype=Object.create(I);r.prototype=T.constructor=s,s.constructor=r,s[w]=r.displayName="GeneratorFunction",x.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(T),t},x.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[v]=function(){return this},x.AsyncIterator=l,x.async=function(t,e,n,o){var r=new l(i(t,e,n,o));return x.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},a(T),T[w]="Generator",T[C]=function(){return this},T.toString=function(){return"[object Generator]"},x.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},x.values=g,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return r.type="throw",r.arg=t,i.next=e,n&&(i.method="next",i.arg=y),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],r=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var s=b.call(o,"catchLoc"),a=b.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,z):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),z},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),d(i),z}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var o=n.arg;d(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:g(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=y),z}}}}(function(){return this}()||Function("return this")())}]).default;t.exports=i},"mXg+":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={crossword:{scaleMode:"SHOW_ALL",defaultGameWidth:1451,defaultGameHeight:1026,maxGameWidth:888,maxGameHeight:600,soundExtensionsPreference:["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"],debug:!1},wordament:{scaleMode:"SHOW_ALL",defaultGameWidth:1451,defaultGameHeight:1026,resizeGap:190,maxGameWidth:888,maxGameHeight:600,soundExtensionsPreference:["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"],debug:!1},wordTwister:{scaleMode:"SHOW_ALL",defaultGameWidth:1451,defaultGameHeight:1026,resizeGap:230,maxGameWidth:888,maxGameHeight:600,soundExtensionsPreference:["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"],debug:!1},map:{scaleMode:"EXACT_FIT",defaultGameWidth:1128,defaultGameHeight:789,maxGameWidth:1200,maxGameHeight:840,soundExtensionsPreference:["webm","ogg","m4a","mp3","aac","ac3","caf","flac","mp4","wav"],debug:!1}}}}]);